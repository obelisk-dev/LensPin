(self["webpackChunklenspin"]=self["webpackChunklenspin"]||[]).push([[998],{9662:function(e,t,r){var n=r(614),i=r(6330),s=TypeError;e.exports=function(e){if(n(e))return e;throw s(i(e)+" is not a function")}},6077:function(e,t,r){var n=r(614),i=String,s=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw s("Can't set "+i(e)+" as a prototype")}},5787:function(e,t,r){var n=r(7976),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i("Incorrect invocation")}},9670:function(e,t,r){var n=r(111),i=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw s(i(e)+" is not an object")}},3013:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,r){"use strict";var n,i,s,o=r(3013),a=r(9781),c=r(7854),u=r(614),l=r(111),h=r(2597),d=r(648),f=r(6330),p=r(8880),y=r(8052),g=r(3070).f,m=r(7976),w=r(9518),v=r(7674),b=r(5112),E=r(9711),_=r(9909),A=_.enforce,S=_.get,k=c.Int8Array,I=k&&k.prototype,T=c.Uint8ClampedArray,C=T&&T.prototype,R=k&&w(k),P=I&&w(I),x=Object.prototype,O=c.TypeError,N=b("toStringTag"),D=E("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",L=o&&!!v&&"Opera"!==d(c.opera),M=!1,U={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},j=function(e){if(!l(e))return!1;var t=d(e);return"DataView"===t||h(U,t)||h(F,t)},V=function(e){var t=w(e);if(l(t)){var r=S(t);return r&&h(r,B)?r[B]:V(t)}},z=function(e){if(!l(e))return!1;var t=d(e);return h(U,t)||h(F,t)},$=function(e){if(z(e))return e;throw O("Target is not a typed array")},q=function(e){if(u(e)&&(!v||m(R,e)))return e;throw O(f(e)+" is not a typed array constructor")},K=function(e,t,r,n){if(a){if(r)for(var i in U){var s=c[i];if(s&&h(s.prototype,e))try{delete s.prototype[e]}catch(o){try{s.prototype[e]=t}catch(u){}}}P[e]&&!r||y(P,e,r?t:L&&I[e]||t,n)}},H=function(e,t,r){var n,i;if(a){if(v){if(r)for(n in U)if(i=c[n],i&&h(i,e))try{delete i[e]}catch(s){}if(R[e]&&!r)return;try{return y(R,e,r?t:L&&R[e]||t)}catch(s){}}for(n in U)i=c[n],!i||i[e]&&!r||y(i,e,t)}};for(n in U)i=c[n],s=i&&i.prototype,s?A(s)[B]=i:L=!1;for(n in F)i=c[n],s=i&&i.prototype,s&&(A(s)[B]=i);if((!L||!u(R)||R===Function.prototype)&&(R=function(){throw O("Incorrect invocation")},L))for(n in U)c[n]&&v(c[n],R);if((!L||!P||P===x)&&(P=R.prototype,L))for(n in U)c[n]&&v(c[n].prototype,P);if(L&&w(C)!==P&&v(C,P),a&&!h(P,N))for(n in M=!0,g(P,N,{get:function(){return l(this)?this[D]:void 0}}),U)c[n]&&p(c[n],D,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:M&&D,aTypedArray:$,aTypedArrayConstructor:q,exportTypedArrayMethod:K,exportTypedArrayStaticMethod:H,getTypedArrayConstructor:V,isView:j,isTypedArray:z,TypedArray:R,TypedArrayPrototype:P}},1318:function(e,t,r){var n=r(5656),i=r(1400),s=r(6244),o=function(e){return function(t,r,o){var a,c=n(t),u=s(c),l=i(o,u);if(e&&r!=r){while(u>l)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},9671:function(e,t,r){var n=r(9974),i=r(8361),s=r(7908),o=r(6244),a=function(e){var t=1==e;return function(r,a,c){var u,l,h=s(r),d=i(h),f=n(a,c),p=o(d);while(p-- >0)if(u=d[p],l=f(u,p,h),l)switch(e){case 0:return u;case 1:return p}return t?-1:void 0}};e.exports={findLast:a(0),findLastIndex:a(1)}},3658:function(e,t,r){"use strict";var n=r(9781),i=r(3157),s=TypeError,o=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(i(e)&&!o(e,"length").writable)throw s("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},206:function(e,t,r){var n=r(1702);e.exports=n([].slice)},4326:function(e,t,r){var n=r(84),i=n({}.toString),s=n("".slice);e.exports=function(e){return s(i(e),8,-1)}},648:function(e,t,r){var n=r(1694),i=r(614),s=r(4326),o=r(5112),a=o("toStringTag"),c=Object,u="Arguments"==s(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(r){}};e.exports=n?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=l(t=c(e),a))?r:u?s(t):"Object"==(n=s(t))&&i(t.callee)?"Arguments":n}},9920:function(e,t,r){var n=r(2597),i=r(3887),s=r(1236),o=r(3070);e.exports=function(e,t,r){for(var a=i(t),c=o.f,u=s.f,l=0;l<a.length;l++){var h=a[l];n(e,h)||r&&n(r,h)||c(e,h,u(t,h))}}},8544:function(e,t,r){var n=r(7293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,r){var n=r(9781),i=r(3070),s=r(9114);e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,r){var n=r(6339),i=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},8052:function(e,t,r){var n=r(614),i=r(3070),s=r(6339),o=r(3072);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&s(r,u,a),a.global)c?e[t]=r:o(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(l){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},3072:function(e,t,r){var n=r(7854),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},5117:function(e,t,r){"use strict";var n=r(6330),i=TypeError;e.exports=function(e,t){if(!delete e[t])throw i("Cannot delete property "+n(t)+" of "+n(e))}},9781:function(e,t,r){var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,r="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},317:function(e,t,r){var n=r(7854),i=r(111),s=n.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},7207:function(e){var t=TypeError,r=9007199254740991;e.exports=function(e){if(e>r)throw t("Maximum allowed index exceeded");return e}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6833:function(e,t,r){var n=r(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},5268:function(e,t,r){var n=r(4326),i=r(7854);e.exports="process"==n(i.process)},8113:function(e,t,r){var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:function(e,t,r){var n,i,s=r(7854),o=r(8113),a=s.process,c=s.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(n=l.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(n=o.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),e.exports=i},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(e,t,r){var n=r(1702),i=Error,s=n("".replace),o=function(e){return String(i(e).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(o);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)while(t--)e=s(e,a,"");return e}},2109:function(e,t,r){var n=r(7854),i=r(1236).f,s=r(8880),o=r(8052),a=r(3072),c=r(9920),u=r(4705);e.exports=function(e,t){var r,l,h,d,f,p,y=e.target,g=e.global,m=e.stat;if(l=g?n:m?n[y]||a(y,{}):(n[y]||{}).prototype,l)for(h in t){if(f=t[h],e.dontCallGetSet?(p=i(l,h),d=p&&p.value):d=l[h],r=u(g?h:y+(m?".":"#")+h,e.forced),!r&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&s(f,"sham",!0),o(l,h,f,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},2104:function(e,t,r){var n=r(4374),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},9974:function(e,t,r){var n=r(1702),i=r(9662),s=r(4374),o=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,r){var n=r(7293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,r){var n=r(4374),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},6530:function(e,t,r){var n=r(9781),i=r(2597),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},84:function(e,t,r){var n=r(4374),i=Function.prototype,s=i.call,o=n&&i.bind.bind(s,s);e.exports=function(e){return n?o(e):function(){return s.apply(e,arguments)}}},1702:function(e,t,r){var n=r(4326),i=r(84);e.exports=function(e){if("Function"===n(e))return i(e)}},5005:function(e,t,r){var n=r(7854),i=r(614),s=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e]):n[e]&&n[e][t]}},8173:function(e,t,r){var n=r(9662),i=r(8554);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},7854:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},2597:function(e,t,r){var n=r(1702),i=r(7908),s=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},3501:function(e){e.exports={}},490:function(e,t,r){var n=r(5005);e.exports=n("document","documentElement")},4664:function(e,t,r){var n=r(9781),i=r(7293),s=r(317);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,r){var n=r(1702),i=r(7293),s=r(4326),o=Object,a=n("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},9587:function(e,t,r){var n=r(614),i=r(111),s=r(7674);e.exports=function(e,t,r){var o,a;return s&&n(o=t.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(e,a),e}},2788:function(e,t,r){var n=r(1702),i=r(614),s=r(5465),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},9909:function(e,t,r){var n,i,s,o=r(4811),a=r(7854),c=r(111),u=r(8880),l=r(2597),h=r(5465),d=r(6200),f=r(3501),p="Object already initialized",y=a.TypeError,g=a.WeakMap,m=function(e){return s(e)?i(e):n(e,{})},w=function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw y("Incompatible receiver, "+e+" required");return r}};if(o||h.state){var v=h.state||(h.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw y(p);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},s=function(e){return v.has(e)}}else{var b=d("state");f[b]=!0,n=function(e,t){if(l(e,b))throw y(p);return t.facade=e,u(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},s=function(e){return l(e,b)}}e.exports={set:n,get:i,has:s,enforce:m,getterFor:w}},3157:function(e,t,r){var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},614:function(e,t,r){var n=r(4154),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4705:function(e,t,r){var n=r(7293),i=r(614),s=/#|\.prototype\./,o=function(e,t){var r=c[a(e)];return r==l||r!=u&&(i(t)?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},c=o.data={},u=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,r){var n=r(614),i=r(4154),s=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===s}:function(e){return"object"==typeof e?null!==e:n(e)}},1913:function(e){e.exports=!1},2190:function(e,t,r){var n=r(5005),i=r(614),s=r(7976),o=r(3307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&s(t.prototype,a(e))}},6244:function(e,t,r){var n=r(7466);e.exports=function(e){return n(e.length)}},6339:function(e,t,r){var n=r(7293),i=r(614),s=r(2597),o=r(9781),a=r(6530).CONFIGURABLE,c=r(2788),u=r(9909),l=u.enforce,h=u.get,d=Object.defineProperty,f=o&&!n((function(){return 8!==d((function(){}),"length",{value:8}).length})),p=String(String).split("String"),y=e.exports=function(e,t,r){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||a&&e.name!==t)&&(o?d(e,"name",{value:t,configurable:!0}):e.name=t),f&&r&&s(r,"arity")&&e.length!==r.arity&&d(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?o&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var n=l(e);return s(n,"source")||(n.source=p.join("string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return i(this)&&h(this).source||c(this)}),"toString")},4758:function(e){var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},6277:function(e,t,r){var n=r(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},3070:function(e,t,r){var n=r(9781),i=r(4664),s=r(3353),o=r(9670),a=r(4948),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",f="writable";t.f=n?s?function(e,t,r){if(o(e),t=a(t),o(r),"function"===typeof e&&"prototype"===t&&"value"in r&&f in r&&!r[f]){var n=l(e,t);n&&n[f]&&(e[t]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:h in r?r[h]:n[h],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(o(e),t=a(t),o(r),i)try{return u(e,t,r)}catch(n){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:function(e,t,r){var n=r(9781),i=r(6916),s=r(5296),o=r(9114),a=r(5656),c=r(4948),u=r(2597),l=r(4664),h=Object.getOwnPropertyDescriptor;t.f=n?h:function(e,t){if(e=a(e),t=c(t),l)try{return h(e,t)}catch(r){}if(u(e,t))return o(!i(s.f,e,t),e[t])}},8006:function(e,t,r){var n=r(6324),i=r(748),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,r){var n=r(2597),i=r(614),s=r(7908),o=r(6200),a=r(8544),c=o("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=s(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},7976:function(e,t,r){var n=r(1702);e.exports=n({}.isPrototypeOf)},6324:function(e,t,r){var n=r(1702),i=r(2597),s=r(5656),o=r(1318).indexOf,a=r(3501),c=n([].push);e.exports=function(e,t){var r,n=s(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);while(t.length>u)i(n,r=t[u++])&&(~o(l,r)||c(l,r));return l}},5296:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},7674:function(e,t,r){var n=r(1702),i=r(9670),s=r(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(r,[]),t=r instanceof Array}catch(o){}return function(r,n){return i(r),s(n),t?e(r,n):r.__proto__=n,r}}():void 0)},2140:function(e,t,r){var n=r(6916),i=r(614),s=r(111),o=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!s(a=n(r,e)))return a;if(i(r=e.valueOf)&&!s(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!s(a=n(r,e)))return a;throw o("Can't convert object to primitive value")}},3887:function(e,t,r){var n=r(5005),i=r(1702),s=r(8006),o=r(5181),a=r(9670),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(a(e)),r=o.f;return r?c(t,r(e)):t}},7066:function(e,t,r){"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e,t,r){var n=r(8554),i=TypeError;e.exports=function(e){if(n(e))throw i("Can't call method on "+e);return e}},6200:function(e,t,r){var n=r(2309),i=r(9711),s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},5465:function(e,t,r){var n=r(7854),i=r(3072),s="__core-js_shared__",o=n[s]||i(s,{});e.exports=o},2309:function(e,t,r){var n=r(1913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,r){var n=r(7392),i=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},261:function(e,t,r){var n,i,s,o,a=r(7854),c=r(2104),u=r(9974),l=r(614),h=r(2597),d=r(7293),f=r(490),p=r(206),y=r(317),g=r(8053),m=r(6833),w=r(5268),v=a.setImmediate,b=a.clearImmediate,E=a.process,_=a.Dispatch,A=a.Function,S=a.MessageChannel,k=a.String,I=0,T={},C="onreadystatechange";try{n=a.location}catch(N){}var R=function(e){if(h(T,e)){var t=T[e];delete T[e],t()}},P=function(e){return function(){R(e)}},x=function(e){R(e.data)},O=function(e){a.postMessage(k(e),n.protocol+"//"+n.host)};v&&b||(v=function(e){g(arguments.length,1);var t=l(e)?e:A(e),r=p(arguments,1);return T[++I]=function(){c(t,void 0,r)},i(I),I},b=function(e){delete T[e]},w?i=function(e){E.nextTick(P(e))}:_&&_.now?i=function(e){_.now(P(e))}:S&&!m?(s=new S,o=s.port2,s.port1.onmessage=x,i=u(o.postMessage,o)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!d(O)?(i=O,a.addEventListener("message",x,!1)):i=C in y("script")?function(e){f.appendChild(y("script"))[C]=function(){f.removeChild(this),R(e)}}:function(e){setTimeout(P(e),0)}),e.exports={set:v,clear:b}},1400:function(e,t,r){var n=r(9303),i=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},5656:function(e,t,r){var n=r(8361),i=r(4488);e.exports=function(e){return n(i(e))}},9303:function(e,t,r){var n=r(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:n(t)}},7466:function(e,t,r){var n=r(9303),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},7908:function(e,t,r){var n=r(4488),i=Object;e.exports=function(e){return i(n(e))}},7593:function(e,t,r){var n=r(6916),i=r(111),s=r(2190),o=r(8173),a=r(2140),c=r(5112),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var r,c=o(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||s(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},4948:function(e,t,r){var n=r(7593),i=r(2190);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1694:function(e,t,r){var n=r(5112),i=n("toStringTag"),s={};s[i]="z",e.exports="[object z]"===String(s)},1340:function(e,t,r){var n=r(648),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(r){return"Object"}}},9711:function(e,t,r){var n=r(1702),i=0,s=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},3307:function(e,t,r){var n=r(6293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,r){var n=r(9781),i=r(7293);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,r){if(e<r)throw t("Not enough arguments");return e}},4811:function(e,t,r){var n=r(7854),i=r(614),s=n.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},5112:function(e,t,r){var n=r(7854),i=r(2309),s=r(2597),o=r(9711),a=r(6293),c=r(3307),u=i("wks"),l=n.Symbol,h=l&&l["for"],d=c?l:l&&l.withoutSetter||o;e.exports=function(e){if(!s(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&s(l,e)?u[e]=l[e]:u[e]=c&&h?h(t):d(t)}return u[e]}},7658:function(e,t,r){"use strict";var n=r(2109),i=r(7908),s=r(6244),o=r(3658),a=r(7207),c=r(7293),u=c((function(){return 4294967297!==[].push.call({length:4294967296},1)})),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();n({target:"Array",proto:!0,arity:1,forced:u||l},{push:function(e){var t=i(this),r=s(t),n=arguments.length;a(r+n);for(var c=0;c<n;c++)t[r]=arguments[c],r++;return o(t,r),r}})},541:function(e,t,r){"use strict";var n=r(2109),i=r(7908),s=r(6244),o=r(3658),a=r(5117),c=r(7207),u=1!==[].unshift(0),l=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}();n({target:"Array",proto:!0,arity:1,forced:u||l},{unshift:function(e){var t=i(this),r=s(t),n=arguments.length;if(n){c(r+n);var u=r;while(u--){var l=u+n;u in t?t[l]=t[u]:a(t,l)}for(var h=0;h<n;h++)t[h]=arguments[h]}return o(t,r+n)}})},2087:function(e,t,r){var n=r(7854),i=r(9781),s=r(7045),o=r(7066),a=r(7293),c=n.RegExp,u=c.prototype,l=i&&a((function(){var e=!0;try{c(".","d")}catch(l){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",i=function(e,n){Object.defineProperty(t,e,{get:function(){return r+=n,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(s.hasIndices="d"),s)i(o,s[o]);var a=Object.getOwnPropertyDescriptor(u,"flags").get.call(t);return a!==n||r!==n}));l&&s(u,"flags",{configurable:!0,get:o})},4590:function(e,t,r){"use strict";var n=r(260),i=r(9671).findLastIndex,s=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLastIndex",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,r){"use strict";var n=r(260),i=r(9671).findLast,s=n.aTypedArray,o=n.exportTypedArrayMethod;o("findLast",(function(e){return i(s(this),e,arguments.length>1?arguments[1]:void 0)}))},1091:function(e,t,r){var n=r(2109),i=r(7854),s=r(261).clear;n({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==s},{clearImmediate:s})},2801:function(e,t,r){"use strict";var n=r(2109),i=r(7854),s=r(5005),o=r(9114),a=r(3070).f,c=r(2597),u=r(5787),l=r(9587),h=r(6277),d=r(3678),f=r(1060),p=r(9781),y=r(1913),g="DOMException",m=s("Error"),w=s(g),v=function(){u(this,b);var e=arguments.length,t=h(e<1?void 0:arguments[0]),r=h(e<2?void 0:arguments[1],"Error"),n=new w(t,r),i=m(t);return i.name=g,a(n,"stack",o(1,f(i.stack,1))),l(n,this,v),n},b=v.prototype=w.prototype,E="stack"in m(g),_="stack"in new w(1,2),A=w&&p&&Object.getOwnPropertyDescriptor(i,g),S=!!A&&!(A.writable&&A.configurable),k=E&&!S&&!_;n({global:!0,constructor:!0,forced:y||k},{DOMException:k?v:w});var I=s(g),T=I.prototype;if(T.constructor!==I)for(var C in y||a(T,"constructor",o(1,I)),d)if(c(d,C)){var R=d[C],P=R.s;c(I,P)||a(I,P,o(6,R.c))}},4633:function(e,t,r){r(1091),r(2986)},2986:function(e,t,r){var n=r(2109),i=r(7854),s=r(261).set;n({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==s},{setImmediate:s})},8099:function(){},9773:function(){},5713:function(e,t,r){"use strict";r(3408),r(4590),r(7658);const n=-8,i=-4,s=0,o=1,a=1,c=2,u=5,l=1024,h=2048,d=8192,f=0,p=4,y=8,g=12,m=12,w=16,v="undefined"!==typeof BigUint64Array,b=Symbol(),E=1024;function _(e,t){const r=new Uint32Array(e),n=new Uint16Array(e);var s=r[t+i>>>2]>>>1,o=t>>>1;if(s<=E)return String.fromCharCode.apply(String,n.subarray(o,o+s));const a=[];do{const e=n[o+E-1],t=e>=55296&&e<56320?E-1:E;a.push(String.fromCharCode.apply(String,n.subarray(o,o+=t))),s-=t}while(s>E);return a.join("")+String.fromCharCode.apply(String,n.subarray(o,o+s))}function A(e){const t={};function r(e,t){return e?_(e.buffer,t):"<yet unknown>"}const n=e.env=e.env||{};return n.abort=n.abort||function(e,i,s,o){const a=t.memory||n.memory;throw Error("abort: "+r(a,e)+" at "+r(a,i)+":"+s+":"+o)},n.trace=n.trace||function(e,i){const s=t.memory||n.memory;console.log("trace: "+r(s,e)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function S(e,t){const r=t.exports,b=r.memory,E=r.table,A=r["__alloc"],S=r["__retain"],k=r["__rtti_base"]||-1;function I(e){const t=new Uint32Array(b.buffer),r=t[k>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(k+4>>>2)+2*e]}function T(e){const t=new Uint32Array(b.buffer),r=t[k>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(k+4>>>2)+2*e+1]}function C(e){return 31-Math.clz32(e>>>u&31)}function P(e){const t=e.length,r=A(t<<1,o),n=new Uint16Array(b.buffer);for(var i=0,s=r>>>1;i<t;++i)n[s+i]=e.charCodeAt(i);return r}function x(e){const t=b.buffer,r=new Uint32Array(t)[e+n>>>2];if(r!==o)throw Error("not a string: "+e);return _(t,e)}function O(e,t,r){const n=b.buffer;if(r)switch(e){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(n);case 1:return new(t?Int16Array:Uint16Array)(n);case 2:return new(t?Int32Array:Uint32Array)(n);case 3:return new(t?BigInt64Array:BigUint64Array)(n)}throw Error("unsupported align: "+e)}function N(e,t){const r=I(e);if(!(r&(a|c)))throw Error("not an array: "+e+" @ "+r);const n=C(r),i=t.length,o=A(i<<n,s),u=A(r&c?w:g,e),v=new Uint32Array(b.buffer);v[u+f>>>2]=S(o),v[u+p>>>2]=o,v[u+y>>>2]=i<<n,r&c&&(v[u+m>>>2]=i);const E=O(n,r&l,r&h);if(r&d)for(let s=0;s<i;++s)E[(o>>>n)+s]=S(t[s]);else E.set(t,o>>>n);return u}function D(e){const t=new Uint32Array(b.buffer),r=t[e+n>>>2],s=I(r);if(!(s&a))throw Error("not an array: "+r);const o=C(s);var u=t[e+p>>>2];const d=s&c?t[e+m>>>2]:t[u+i>>>2]>>>o;return O(o,s&l,s&h).subarray(u>>>=o,u+d)}function B(e){const t=D(e),r=t.length,n=new Array(r);for(let i=0;i<r;i++)n[i]=t[i];return n}function L(e){const t=b.buffer,r=new Uint32Array(t)[e+i>>>2];return t.slice(e,e+r)}function M(e,t,r){return new e(U(e,t,r))}function U(e,t,r){const n=b.buffer,s=new Uint32Array(n),o=s[r+p>>>2];return new e(n,o,s[o+i>>>2]>>>t)}function F(e,t){const r=new Uint32Array(b.buffer);var i=r[e+n>>>2];if(i<=r[k>>>2])do{if(i==t)return!0}while(i=T(i));return!1}return e.__allocString=P,e.__getString=x,e.__allocArray=N,e.__getArrayView=D,e.__getArray=B,e.__getArrayBuffer=L,e.__getInt8Array=M.bind(null,Int8Array,0),e.__getInt8ArrayView=U.bind(null,Int8Array,0),e.__getUint8Array=M.bind(null,Uint8Array,0),e.__getUint8ArrayView=U.bind(null,Uint8Array,0),e.__getUint8ClampedArray=M.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=U.bind(null,Uint8ClampedArray,0),e.__getInt16Array=M.bind(null,Int16Array,1),e.__getInt16ArrayView=U.bind(null,Int16Array,1),e.__getUint16Array=M.bind(null,Uint16Array,1),e.__getUint16ArrayView=U.bind(null,Uint16Array,1),e.__getInt32Array=M.bind(null,Int32Array,2),e.__getInt32ArrayView=U.bind(null,Int32Array,2),e.__getUint32Array=M.bind(null,Uint32Array,2),e.__getUint32ArrayView=U.bind(null,Uint32Array,2),v&&(e.__getInt64Array=M.bind(null,BigInt64Array,3),e.__getInt64ArrayView=U.bind(null,BigInt64Array,3),e.__getUint64Array=M.bind(null,BigUint64Array,3),e.__getUint64ArrayView=U.bind(null,BigUint64Array,3)),e.__getFloat32Array=M.bind(null,Float32Array,2),e.__getFloat32ArrayView=U.bind(null,Float32Array,2),e.__getFloat64Array=M.bind(null,Float64Array,3),e.__getFloat64ArrayView=U.bind(null,Float64Array,3),e.__instanceof=F,e.memory=e.memory||b,e.table=e.table||E,R(r,e)}function k(e){return"undefined"!==typeof Response&&e instanceof Response}async function I(e,t){return k(e=await e)?C(e,t):S(A(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}function T(e,t){return S(A(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}async function C(e,t){return WebAssembly.instantiateStreaming?S(A(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance):I(k(e=await e)?e.arrayBuffer():e,t)}function R(e,t){var r=t?Object.create(t):{},n=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const t=e[i];let s=i.split("."),o=r;while(s.length>1){let e=s.shift();Object.prototype.hasOwnProperty.call(o,e)||(o[e]={}),o=o[e]}let a=s[0],c=a.indexOf("#");if(c>=0){let r=a.substring(0,c),s=o[r];if("undefined"===typeof s||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function(){return this[b]}},e.wrap=function(t){return Object.create(e.prototype,{[b]:{value:t,writable:!1}})},s&&Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t)))),o[r]=e}if(a=a.substring(c+1),o=o[r].prototype,/^(get|set):/.test(a)){if(!Object.prototype.hasOwnProperty.call(o,a=a.substring(4))){let t=e[i.replace("set:","get:")],r=e[i.replace("get:","set:")];Object.defineProperty(o,a,{get:function(){return t(this[b])},set:function(e){r(this[b],e)},enumerable:!0})}}else"constructor"===a?(o[a]=(...e)=>(n(e.length),t(...e))).original=t:(o[a]=function(...e){return n(e.length),t(this[b],...e)}).original=t}else/^(get|set):/.test(a)?Object.prototype.hasOwnProperty.call(o,a=a.substring(4))||Object.defineProperty(o,a,{get:e[i.replace("set:","get:")],set:e[i.replace("get:","set:")],enumerable:!0}):"function"===typeof t&&t!==n?(o[a]=(...e)=>(n(e.length),t(...e))).original=t:o[a]=t}return r}t.instantiate=I,t.instantiateSync=T,t.instantiateStreaming=C,t.demangle=R},5797:function(e,t,r){"use strict";e.exports=r(3946)},3946:function(e,t,r){"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(6991),n.BufferWriter=r(7764),n.Reader=r(796),n.BufferReader=r(2821),n.util=r(3586),n.rpc=r(1668),n.roots=r(9995),n.configure=i,i()},796:function(e,t,r){"use strict";r(3408),r(4590),e.exports=c;var n,i=r(3586),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=l(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},2821:function(e,t,r){"use strict";e.exports=s;var n=r(796);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(3586);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},9995:function(e){"use strict";e.exports={}},1668:function(e,t,r){"use strict";var n=t;n.Service=r(6692)},6692:function(e,t,r){"use strict";e.exports=i;var n=r(3586);function i(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){o(c)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},6555:function(e,t,r){"use strict";e.exports=i;var n=r(3586);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"===typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3586:function(e,t,r){"use strict";r(3408),r(4590);var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(5186),n.base64=r(8673),n.EventEmitter=r(8825),n.float=r(2913),n.inquire=r(6332),n.utf8=r(9561),n.pool=r(1168),n.LongBits=r(6555),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},6991:function(e,t,r){"use strict";e.exports=h;var n,i=r(3586),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(e,t,r){t[r]=255&e}function p(e,t,r){while(e>127)t[r++]=127&e|128,e>>>=7;t[r]=e}function y(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){while(e.hi)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},y.prototype=Object.create(c.prototype),y.prototype.fn=p,h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new y((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var w=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(w,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},7764:function(e,t,r){"use strict";r(3408),r(4590),e.exports=s;var n=r(6991);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(3586);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},4253:function(e,t,r){"use strict";r.d(t,{Q:function(){return Fi}});r(7658),r(3408),r(4590);const n="logger/5.7.0";let i=!1,s=!1;const o={debug:1,default:2,info:2,warning:3,error:4,off:5};let a=o["default"],c=null;function u(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}const l=u();var h,d;(function(e){e["DEBUG"]="DEBUG",e["INFO"]="INFO",e["WARNING"]="WARNING",e["ERROR"]="ERROR",e["OFF"]="OFF"})(h||(h={})),function(e){e["UNKNOWN_ERROR"]="UNKNOWN_ERROR",e["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED",e["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION",e["NETWORK_ERROR"]="NETWORK_ERROR",e["SERVER_ERROR"]="SERVER_ERROR",e["TIMEOUT"]="TIMEOUT",e["BUFFER_OVERRUN"]="BUFFER_OVERRUN",e["NUMERIC_FAULT"]="NUMERIC_FAULT",e["MISSING_NEW"]="MISSING_NEW",e["INVALID_ARGUMENT"]="INVALID_ARGUMENT",e["MISSING_ARGUMENT"]="MISSING_ARGUMENT",e["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT",e["CALL_EXCEPTION"]="CALL_EXCEPTION",e["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS",e["NONCE_EXPIRED"]="NONCE_EXPIRED",e["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED",e["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT",e["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED",e["ACTION_REJECTED"]="ACTION_REJECTED"}(d||(d={}));const f="0123456789abcdef";class p{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==o[r]&&this.throwArgumentError("invalid log level name","logLevel",e),a>o[r]||console.log.apply(console,t)}debug(...e){this._log(p.levels.DEBUG,e)}info(...e){this._log(p.levels.INFO,e)}warn(...e){this._log(p.levels.WARNING,e)}makeError(e,t,r){if(s)return this.makeError("censored error",t,{});t||(t=p.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=f[t[e]>>4],r+=f[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(a){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let o="";switch(t){case d.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case d.CALL_EXCEPTION:case d.INSUFFICIENT_FUNDS:case d.MISSING_NEW:case d.NONCE_EXPIRED:case d.REPLACEMENT_UNDERPRICED:case d.TRANSACTION_REPLACED:case d.UNPREDICTABLE_GAS_LIMIT:o=t;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=t,Object.keys(r).forEach((function(e){a[e]=r[e]})),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,p.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),l&&this.throwError("platform missing String.prototype.normalize",p.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:l})}checkSafeUint53(e,t){"number"===typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,p.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,p.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,p.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,p.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",p.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",p.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",p.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return c||(c=new p(n)),c}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",p.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),i){if(!e)return;this.globalLogger().throwError("error censorship permanent",p.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}s=!!e,i=!!t}static setLogLevel(e){const t=o[e.toLowerCase()];null!=t?a=t:p.globalLogger().warn("invalid log level - "+e)}static from(e){return new p(e)}}p.errors=d,p.levels=h;const y="properties/5.7.0";var g=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const m=new p(y);function w(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function v(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function b(e){return g(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))})),r=yield Promise.all(t);return r.reduce(((e,t)=>(e[t.key]=t.value,e)),{})}))}function E(e,t){e&&"object"===typeof e||m.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((r=>{t[r]||m.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}))}function _(e){const t={};for(const r in e)t[r]=e[r];return t}const A={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function S(e){if(void 0===e||null===e||A[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;const r=Object.keys(e);for(let n=0;n<r.length;n++){let i=null;try{i=e[r[n]]}catch(t){continue}if(!S(i))return!1}return!0}return m.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function k(e){if(S(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>I(e))));if("object"===typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&w(t,r,I(n))}return t}return m.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function I(e){return k(e)}class T{constructor(e){for(const t in e)this[t]=I(e[t])}}const C="providers/5.7.1",R="abstract-signer/5.7.0";var P=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const x=new p(R),O=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],N=[p.errors.INSUFFICIENT_FUNDS,p.errors.NONCE_EXPIRED,p.errors.REPLACEMENT_UNDERPRICED];class D{constructor(){x.checkAbstract(new.target,D),w(this,"_isSigner",!0)}getBalance(e){return P(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return P(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return P(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield b(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return P(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield b(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return P(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return P(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const e=yield this.provider.getNetwork();return e.chainId}))}getGasPrice(){return P(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return P(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(e){return P(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)}))}checkTransaction(e){for(const r in e)-1===O.indexOf(r)&&x.throwArgumentError("invalid transaction key: "+r,"transaction",e);const t=_(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&x.throwArgumentError("from address mismatch","transaction",e),t[0]))),t}populateTransaction(e){return P(this,void 0,void 0,(function*(){const t=yield b(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then((e=>P(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&x.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})))),t.to.catch((e=>{})));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||x.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):x.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&x.throwError("network does not support EIP-1559",p.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):x.throwError("failed to get consistent fee data",p.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch((e=>{if(N.indexOf(e.code)>=0)throw e;return x.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",p.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>(0!==t[1]&&t[0]!==t[1]&&x.throwArgumentError("chainId address mismatch","transaction",e),t[0]))),yield b(t)}))}_checkProvider(e){this.provider||x.throwError("missing provider",p.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}var B=r(2396),L=r.n(B);r(541);const M="bytes/5.7.0",U=new p(M);function F(e){return!!e.toHexString}function j(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return j(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function V(e){return W(e)&&!(e.length%2)||$(e)}function z(e){return"number"===typeof e&&e==e&&e%1===0}function $(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!z(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!z(r)||r<0||r>=256)return!1}return!0}function q(e,t){if(t||(t={}),"number"===typeof e){U.checkSafeUint53(e,"invalid arrayify value");const t=[];while(e)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),j(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),F(e)&&(e=e.toHexString()),W(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":U.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return j(new Uint8Array(n))}return $(e)?j(new Uint8Array(e)):U.throwArgumentError("invalid arrayify value","value",e)}function K(e){const t=e.map((e=>q(e))),r=t.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);return t.reduce(((e,t)=>(n.set(t,e),e+t.length)),0),j(n)}function H(e){let t=q(e);if(0===t.length)return t;let r=0;while(r<t.length&&0===t[r])r++;return r&&(t=t.slice(r)),t}function G(e,t){e=q(e),e.length>t&&U.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),j(r)}function W(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const Q="0123456789abcdef";function Y(e,t){if(t||(t={}),"number"===typeof e){U.checkSafeUint53(e,"invalid hexlify value");let t="";while(e)t=Q[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"===typeof e)return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),F(e))return e.toHexString();if(W(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":U.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if($(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Q[(240&n)>>4]+Q[15&n]}return t}return U.throwArgumentError("invalid hexlify value","value",e)}function J(e){if("string"!==typeof e)e=Y(e);else if(!W(e)||e.length%2)return null;return(e.length-2)/2}function X(e,t,r){return"string"!==typeof e?e=Y(e):(!W(e)||e.length%2)&&U.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Z(e){let t="0x";return e.forEach((e=>{t+=Y(e).substring(2)})),t}function ee(e){const t=te(Y(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function te(e){"string"!==typeof e&&(e=Y(e)),W(e)||U.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;while(t<e.length&&"0"===e[t])t++;return"0x"+e.substring(t)}function re(e,t){"string"!==typeof e?e=Y(e):W(e)||U.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&U.throwArgumentError("value out of range","value",arguments[1]);while(e.length<2*t+2)e="0x0"+e.substring(2);return e}function ne(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(V(e)){let r=q(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Y(r.slice(0,32)),t.s=Y(r.slice(32,64))):65===r.length?(t.r=Y(r.slice(0,32)),t.s=Y(r.slice(32,64)),t.v=r[64]):U.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:U.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Y(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=G(q(t._vs),32);t._vs=Y(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&U.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=Y(r);null==t.s?t.s=i:t.s!==i&&U.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?U.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&U.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&W(t.r)?t.r=re(t.r,32):U.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&W(t.s)?t.s=re(t.s,32):U.throwArgumentError("signature missing or invalid s","signature",e);const r=q(t.s);r[0]>=128&&U.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Y(r);t._vs&&(W(t._vs)||U.throwArgumentError("signature invalid _vs","signature",e),t._vs=re(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&U.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}const ie="bignumber/5.7.0";var se=L().BN;const oe=new p(ie),ae={},ce=9007199254740991;let ue=!1;class le{constructor(e,t){e!==ae&&oe.throwError("cannot call constructor directly; use BigNumber.from",p.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return de(fe(this).fromTwos(e))}toTwos(e){return de(fe(this).toTwos(e))}abs(){return"-"===this._hex[0]?le.from(this._hex.substring(1)):this}add(e){return de(fe(this).add(fe(e)))}sub(e){return de(fe(this).sub(fe(e)))}div(e){const t=le.from(e);return t.isZero()&&pe("division-by-zero","div"),de(fe(this).div(fe(e)))}mul(e){return de(fe(this).mul(fe(e)))}mod(e){const t=fe(e);return t.isNeg()&&pe("division-by-zero","mod"),de(fe(this).umod(t))}pow(e){const t=fe(e);return t.isNeg()&&pe("negative-power","pow"),de(fe(this).pow(t))}and(e){const t=fe(e);return(this.isNegative()||t.isNeg())&&pe("unbound-bitwise-result","and"),de(fe(this).and(t))}or(e){const t=fe(e);return(this.isNegative()||t.isNeg())&&pe("unbound-bitwise-result","or"),de(fe(this).or(t))}xor(e){const t=fe(e);return(this.isNegative()||t.isNeg())&&pe("unbound-bitwise-result","xor"),de(fe(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&pe("negative-width","mask"),de(fe(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&pe("negative-width","shl"),de(fe(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&pe("negative-width","shr"),de(fe(this).shrn(e))}eq(e){return fe(this).eq(fe(e))}lt(e){return fe(this).lt(fe(e))}lte(e){return fe(this).lte(fe(e))}gt(e){return fe(this).gt(fe(e))}gte(e){return fe(this).gte(fe(e))}isNegative(){return"-"===this._hex[0]}isZero(){return fe(this).isZero()}toNumber(){try{return fe(this).toNumber()}catch(e){pe("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return oe.throwError("this platform does not support BigInt",p.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?ue||(ue=!0,oe.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?oe.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",p.errors.UNEXPECTED_ARGUMENT,{}):oe.throwError("BigNumber.toString does not accept parameters",p.errors.UNEXPECTED_ARGUMENT,{})),fe(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof le)return e;if("string"===typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new le(ae,he(e)):e.match(/^-?[0-9]+$/)?new le(ae,he(new se(e))):oe.throwArgumentError("invalid BigNumber string","value",e);if("number"===typeof e)return e%1&&pe("underflow","BigNumber.from",e),(e>=ce||e<=-ce)&&pe("overflow","BigNumber.from",e),le.from(String(e));const t=e;if("bigint"===typeof t)return le.from(t.toString());if($(t))return le.from(Y(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"===typeof e)return le.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"===typeof e&&(W(e)||"-"===e[0]&&W(e.substring(1))))return le.from(e)}return oe.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function he(e){if("string"!==typeof e)return he(e.toString(16));if("-"===e[0])return e=e.substring(1),"-"===e[0]&&oe.throwArgumentError("invalid hex","value",e),e=he(e),"0x00"===e?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";e.length%2&&(e="0x0"+e.substring(2));while(e.length>4&&"0x00"===e.substring(0,4))e="0x"+e.substring(4);return e}function de(e){return le.from(he(e))}function fe(e){const t=le.from(e).toHexString();return"-"===t[0]?new se("-"+t.substring(3),16):new se(t.substring(2),16)}function pe(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),oe.throwError(e,p.errors.NUMERIC_FAULT,n)}function ye(e){return new se(e,36).toString(16)}var ge=r(9893),me=r.n(ge);function we(e){return"0x"+me().keccak_256(q(e))}const ve="rlp/5.7.0",be=new p(ve);function Ee(e){const t=[];while(e)t.unshift(255&e),e>>=8;return t}function _e(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function Ae(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(Ae(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=Ee(t.length);return r.unshift(247+r.length),r.concat(t)}V(e)||be.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(q(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Ee(t.length);return r.unshift(183+r.length),r.concat(t)}function Se(e){return Y(Ae(e))}function ke(e,t,r,n){const i=[];while(r<t+1+n){const s=Ie(e,r);i.push(s.result),r+=s.consumed,r>t+1+n&&be.throwError("child data too short",p.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Ie(e,t){if(0===e.length&&be.throwError("data too short",p.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&be.throwError("data short segment too short",p.errors.BUFFER_OVERRUN,{});const n=_e(e,t+1,r);return t+1+r+n>e.length&&be.throwError("data long segment too short",p.errors.BUFFER_OVERRUN,{}),ke(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&be.throwError("data array too short",p.errors.BUFFER_OVERRUN,{}),ke(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&be.throwError("data array too short",p.errors.BUFFER_OVERRUN,{});const n=_e(e,t+1,r);t+1+r+n>e.length&&be.throwError("data array too short",p.errors.BUFFER_OVERRUN,{});const i=Y(e.slice(t+1+r,t+1+r+n));return{consumed:1+r+n,result:i}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&be.throwError("data too short",p.errors.BUFFER_OVERRUN,{});const n=Y(e.slice(t+1,t+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:Y(e[t])}}function Te(e){const t=q(e),r=Ie(t,0);return r.consumed!==t.length&&be.throwArgumentError("invalid rlp data","data",e),r.result}const Ce="address/5.7.0",Re=new p(Ce);function Pe(e){W(e,20)||Re.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=t[i].charCodeAt(0);const n=q(we(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(15&n[i>>1])>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const xe=9007199254740991;function Oe(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const Ne={};for(let ji=0;ji<10;ji++)Ne[String(ji)]=String(ji);for(let ji=0;ji<26;ji++)Ne[String.fromCharCode(65+ji)]=String(10+ji);const De=Math.floor(Oe(xe));function Be(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>Ne[e])).join("");while(t.length>=De){let e=t.substring(0,De);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2)r="0"+r;return r}function Le(e){let t=null;if("string"!==typeof e&&Re.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Pe(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Re.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){e.substring(2,4)!==Be(e)&&Re.throwArgumentError("bad icap checksum","address",e),t=ye(e.substring(4));while(t.length<40)t="0"+t;t=Pe("0x"+t)}else Re.throwArgumentError("invalid address","address",e);return t}function Me(e){let t=null;try{t=Le(e.from)}catch(n){Re.throwArgumentError("missing from address","transaction",e)}const r=H(q(le.from(e.nonce).toHexString()));return Le(X(we(Se([t,r])),12))}const Ue="hash/5.7.0",Fe="strings/5.7.0",je=new p(Fe);var Ve,ze;function $e(e,t,r,n,i){return je.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function qe(e,t,r,n,i){if(e===ze.BAD_PREFIX||e===ze.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length;n++){if(r[n]>>6!==2)break;e++}return e}return e===ze.OVERRUN?r.length-t-1:0}function Ke(e,t,r,n,i){return e===ze.OVERLONG?(n.push(i),0):(n.push(65533),qe(e,t,r,n,i))}(function(e){e["current"]="",e["NFC"]="NFC",e["NFD"]="NFD",e["NFKC"]="NFKC",e["NFKD"]="NFKD"})(Ve||(Ve={})),function(e){e["UNEXPECTED_CONTINUE"]="unexpected continuation byte",e["BAD_PREFIX"]="bad codepoint prefix",e["OVERRUN"]="string overrun",e["MISSING_CONTINUE"]="missing continuation byte",e["OUT_OF_RANGE"]="out of UTF-8 range",e["UTF16_SURROGATE"]="UTF-16 surrogate",e["OVERLONG"]="overlong representation"}(ze||(ze={}));const He=Object.freeze({error:$e,ignore:qe,replace:Ke});function Ge(e,t){null==t&&(t=He.error),e=q(e);const r=[];let n=0;while(n<e.length){const i=e[n++];if(i>>7===0){r.push(i);continue}let s=null,o=null;if(192===(224&i))s=1,o=127;else if(224===(240&i))s=2,o=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?ze.UNEXPECTED_CONTINUE:ze.BAD_PREFIX,n-1,e,r);continue}s=3,o=65535}if(n-1+s>=e.length){n+=t(ze.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let i=e[n];if(128!=(192&i)){n+=t(ze.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(ze.OUT_OF_RANGE,n-1-s,e,r,a):a>=55296&&a<=57343?n+=t(ze.UTF16_SURROGATE,n-1-s,e,r,a):a<=o?n+=t(ze.OVERLONG,n-1-s,e,r,a):r.push(a))}return r}function We(e,t=Ve.current){t!=Ve.current&&(je.checkNormalize(),e=e.normalize(t));let r=[];for(let n=0;n<e.length;n++){const t=e.charCodeAt(n);if(t<128)r.push(t);else if(t<2048)r.push(t>>6|192),r.push(63&t|128);else if(55296==(64512&t)){n++;const i=e.charCodeAt(n);if(n>=e.length||56320!==(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&t)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(t>>12|224),r.push(t>>6&63|128),r.push(63&t|128)}return q(r)}function Qe(e){return e.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function Ye(e,t){return Qe(Ge(e,t))}function Je(e,t=Ve.current){return Ge(We(e,t))}function Xe(e){return we(We(e))}var Ze=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const et=new p(Ue),tt=new Uint8Array(32);tt.fill(0);const rt=le.from(-1),nt=le.from(0),it=le.from(1),st=le.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ot(e){const t=q(e),r=t.length%32;return r?Z([t,tt.slice(r)]):Y(t)}const at=re(it.toHexString(),32),ct=re(nt.toHexString(),32),ut={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},lt=["name","version","chainId","verifyingContract","salt"];function ht(e){return function(t){return"string"!==typeof t&&et.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const dt={name:ht("name"),version:ht("version"),chainId:function(e){try{return le.from(e).toString()}catch(t){}return et.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Le(e).toLowerCase()}catch(t){}return et.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=q(e);if(32!==t.length)throw new Error("bad length");return Y(t)}catch(t){}return et.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function ft(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&et.throwArgumentError("invalid numeric width","type",e);const i=st.mask(r?n-1:n),s=r?i.add(it).mul(rt):nt;return function(t){const r=le.from(t);return(r.lt(s)||r.gt(i))&&et.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),re(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&et.throwArgumentError("invalid bytes width","type",e),function(t){const n=q(t);return n.length!==r&&et.throwArgumentError(`invalid length for ${e}`,"value",t),ot(t)}}}switch(e){case"address":return function(e){return re(Le(e),32)};case"bool":return function(e){return e?at:ct};case"bytes":return function(e){return we(e)};case"string":return function(e){return Xe(e)}}return null}function pt(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class yt{constructor(e){w(this,"types",Object.freeze(I(e))),w(this,"_encoderCache",{}),w(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach((e=>{t[e]={},r[e]=[],n[e]={}}));for(const o in e){const n={};e[o].forEach((i=>{n[i.name]&&et.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(o)}`,"types",e),n[i.name]=!0;const s=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===o&&et.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e);const a=ft(s);a||(r[s]||et.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(o),t[o][s]=!0)}))}const i=Object.keys(r).filter((e=>0===r[e].length));function s(i,o){o[i]&&et.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e),o[i]=!0,Object.keys(t[i]).forEach((e=>{r[e]&&(s(e,o),Object.keys(o).forEach((t=>{n[t][e]=!0})))})),delete o[i]}0===i.length?et.throwArgumentError("missing primary type","types",e):i.length>1&&et.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),w(this,"primaryType",i[0]),s(this.primaryType,{});for(const o in n){const t=Object.keys(n[o]);t.sort(),this._types[o]=pt(o,e[o])+t.map((t=>pt(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=ft(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&et.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(we)),we(Z(i))}}const r=this.types[e];if(r){const t=Xe(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?we(n):n}));return n.unshift(t),Z(n)}}return et.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||et.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return we(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){{const n=ft(e);if(n)return r(e,t)}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&et.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((t=>this._visit(e,t,r)))}const i=this.types[e];return i?i.reduce(((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e)),{}):et.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new yt(e)}static getPrimaryType(e){return yt.from(e).primaryType}static hashStruct(e,t,r){return yt.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=ut[r];n||et.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort(((e,t)=>lt.indexOf(e.name)-lt.indexOf(t.name))),yt.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Z(["0x1901",yt.hashDomain(e),yt.from(t).hash(r)])}static hash(e,t,r){return we(yt.encode(e,t,r))}static resolveNames(e,t,r,n){return Ze(this,void 0,void 0,(function*(){e=_(e);const i={};e.verifyingContract&&!W(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=yt.from(t);s.visit(r,((e,t)=>("address"!==e||W(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=s.visit(r,((e,t)=>"address"===e&&i[t]?i[t]:t)),{domain:e,value:r}}))}static getPayload(e,t,r){yt.hashDomain(e);const n={},i=[];lt.forEach((t=>{const r=e[t];null!=r&&(n[t]=dt[t](r),i.push({name:t,type:ut[t]}))}));const s=yt.from(t),o=_(t);return o.EIP712Domain?et.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/))return Y(q(t));if(e.match(/^u?int/))return le.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!==typeof t&&et.throwArgumentError("invalid string","value",t),t}return et.throwArgumentError("unsupported type","type",e)}))}}}const gt=le.from(0);var mt=r(8730),wt=r.n(mt);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function vt(e,t,r){return r={path:t,exports:{},require:function(e,t){return bt(e,void 0===t||null===t?r.path:t)}},e(r,r.exports),r.exports}function bt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Et=_t;function _t(e,t){if(!e)throw new Error(t||"Assertion failed")}_t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var At=vt((function(e,t){var r=t;function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r}function i(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toArray=n,r.zero2=i,r.toHex=s,r.encode=function(e,t){return"hex"===t?s(e):e}})),St=vt((function(e,t){var r=t;function n(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,s=e.clone(),o=0;o<n.length;o++){var a,c=s.andln(i-1);s.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,s.isubn(a)):a=0,n[o]=a,s.iushrn(1)}return n}function i(e,t){var r=[[],[]];e=e.clone(),t=t.clone();var n,i=0,s=0;while(e.cmpn(-i)>0||t.cmpn(-s)>0){var o,a,c=e.andln(3)+i&3,u=t.andln(3)+s&3;3===c&&(c=-1),3===u&&(u=-1),0===(1&c)?o=0:(n=e.andln(7)+i&7,o=3!==n&&5!==n||2!==u?c:-c),r[0].push(o),0===(1&u)?a=0:(n=t.andln(7)+s&7,a=3!==n&&5!==n||2!==c?u:-u),r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r}function s(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}}function o(e){return"string"===typeof e?r.toArray(e,"hex"):e}function a(e){return new(L())(e,"hex","le")}r.assert=Et,r.toArray=At.toArray,r.zero2=At.zero2,r.toHex=At.toHex,r.encode=At.encode,r.getNAF=n,r.getJSF=i,r.cachedProperty=s,r.parseBytes=o,r.intFromLE=a})),kt=St.getNAF,It=St.getJSF,Tt=St.assert;function Ct(e,t){this.type=e,this.p=new(L())(t.p,16),this.red=t.prime?L().red(t.prime):L().mont(this.p),this.zero=new(L())(0).toRed(this.red),this.one=new(L())(1).toRed(this.red),this.two=new(L())(2).toRed(this.red),this.n=t.n&&new(L())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Rt=Ct;function Pt(e,t){this.curve=e,this.type=t,this.precomputed=null}Ct.prototype.point=function(){throw new Error("Not implemented")},Ct.prototype.validate=function(){throw new Error("Not implemented")},Ct.prototype._fixedNafMul=function(e,t){Tt(e.precomputed);var r=e._getDoubles(),n=kt(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var c=s+r.step-1;c>=s;c--)o=(o<<1)+n[c];a.push(o)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(s=0;s<a.length;s++)o=a[s],o===h?l=l.mixedAdd(r.points[s]):o===-h&&(l=l.mixedAdd(r.points[s].neg()));u=u.add(l)}return u.toP()},Ct.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=kt(t,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var u=s[a];Tt(0!==u),o="affine"===e.type?u>0?o.mixedAdd(i[u-1>>1]):o.mixedAdd(i[-u-1>>1].neg()):u>0?o.add(i[u-1>>1]):o.add(i[-u-1>>1].neg())}return"affine"===e.type?o.toP():o},Ct.prototype._wnafMulAdd=function(e,t,r,n,i){var s,o,a,c=this._wnafT1,u=this._wnafT2,l=this._wnafT3,h=0;for(s=0;s<n;s++){a=t[s];var d=a._getNAFPoints(e);c[s]=d.wnd,u[s]=d.points}for(s=n-1;s>=1;s-=2){var f=s-1,p=s;if(1===c[f]&&1===c[p]){var y=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(y[1]=t[f].add(t[p]),y[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(y[1]=t[f].toJ().mixedAdd(t[p]),y[2]=t[f].add(t[p].neg())):(y[1]=t[f].toJ().mixedAdd(t[p]),y[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=It(r[f],r[p]);for(h=Math.max(m[0].length,h),l[f]=new Array(h),l[p]=new Array(h),o=0;o<h;o++){var w=0|m[0][o],v=0|m[1][o];l[f][o]=g[3*(w+1)+(v+1)],l[p][o]=0,u[f]=y}}else l[f]=kt(r[f],c[f],this._bitLength),l[p]=kt(r[p],c[p],this._bitLength),h=Math.max(l[f].length,h),h=Math.max(l[p].length,h)}var b=this.jpoint(null,null,null),E=this._wnafT4;for(s=h;s>=0;s--){var _=0;while(s>=0){var A=!0;for(o=0;o<n;o++)E[o]=0|l[o][s],0!==E[o]&&(A=!1);if(!A)break;_++,s--}if(s>=0&&_++,b=b.dblp(_),s<0)break;for(o=0;o<n;o++){var S=E[o];0!==S&&(S>0?a=u[o][S-1>>1]:S<0&&(a=u[o][-S-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(s=0;s<n;s++)u[s]=null;return i?b:b.toP()},Ct.BasePoint=Pt,Pt.prototype.eq=function(){throw new Error("Not implemented")},Pt.prototype.validate=function(){return this.curve.validate(this)},Ct.prototype.decodePoint=function(e,t){e=St.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r){6===e[0]?Tt(e[e.length-1]%2===0):7===e[0]&&Tt(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return n}if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Pt.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Pt.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Pt.prototype.encode=function(e,t){return St.encode(this._encode(t),e)},Pt.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Pt.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Pt.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},Pt.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Pt.prototype._getBeta=function(){return null},Pt.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var xt=vt((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),Ot=St.assert;function Nt(e){Rt.call(this,"short",e),this.a=new(L())(e.a,16).toRed(this.red),this.b=new(L())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}xt(Nt,Rt);var Dt=Nt;function Bt(e,t,r,n){Rt.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(L())(t,16),this.y=new(L())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Lt(e,t,r,n){Rt.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(L())(0)):(this.x=new(L())(t,16),this.y=new(L())(r,16),this.z=new(L())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Nt.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r,n;if(e.beta)t=new(L())(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)r=new(L())(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],Ot(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return n=e.basis?e.basis.map((function(e){return{a:new(L())(e.a,16),b:new(L())(e.b,16)}})):this._getEndoBasis(r),{beta:t,lambda:r,basis:n}}},Nt.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:L().mont(e),r=new(L())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(L())(3).toRed(t).redNeg().redSqrt().redMul(r),s=n.redAdd(i).fromRed(),o=n.redSub(i).fromRed();return[s,o]},Nt.prototype._getEndoBasis=function(e){var t,r,n,i,s,o,a,c,u,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,d=this.n.clone(),f=new(L())(1),p=new(L())(0),y=new(L())(0),g=new(L())(1),m=0;while(0!==h.cmpn(0)){var w=d.div(h);c=d.sub(w.mul(h)),u=y.sub(w.mul(f));var v=g.sub(w.mul(p));if(!n&&c.cmp(l)<0)t=a.neg(),r=f,n=c.neg(),i=u;else if(n&&2===++m)break;a=c,d=h,h=c,y=f,f=u,g=p,p=v}s=c.neg(),o=u;var b=n.sqr().add(i.sqr()),E=s.sqr().add(o.sqr());return E.cmp(b)>=0&&(s=t,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},Nt.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),u=s.mul(n.b),l=e.sub(o).sub(a),h=c.add(u).neg();return{k1:l,k2:h}},Nt.prototype.pointFromX=function(e,t){e=new(L())(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},Nt.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},Nt.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),l=0;l<2*s;l++)n[l]=null,i[l]=null;return u},xt(Bt,Rt.BasePoint),Nt.prototype.point=function(e,t,r){return new Bt(this,e,t,r)},Nt.prototype.pointFromJSON=function(e,t){return Bt.fromJSON(this,e,t)},Bt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Bt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Bt.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Bt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Bt.prototype.isInfinity=function(){return this.inf},Bt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Bt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},Bt.prototype.getX=function(){return this.x.fromRed()},Bt.prototype.getY=function(){return this.y.fromRed()},Bt.prototype.mul=function(e){return e=new(L())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Bt.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Bt.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Bt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Bt.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Bt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},xt(Lt,Rt.BasePoint),Nt.prototype.jpoint=function(e,t,r){return new Lt(this,e,t,r)},Lt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Lt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Lt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),h=n.redMul(u),d=c.redSqr().redIAdd(l).redISub(h).redISub(h),f=c.redMul(h.redISub(d)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},Lt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),l=r.redMul(c),h=a.redSqr().redIAdd(u).redISub(l).redISub(l),d=a.redMul(l.redISub(h)).redISub(i.redMul(u)),f=this.z.redMul(o);return this.curve.jpoint(h,d,f)},Lt.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var l=s.redSqr(),h=u.redSqr(),d=h.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(c)),p=s.redMul(h),y=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(y),m=f.redMul(g);m=m.redIAdd(m).redISub(d);var w=u.redMul(a);t+1<e&&(c=c.redMul(d)),s=y,a=w,u=m}return this.curve.jpoint(s,u.redMul(i),a)},Lt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Lt.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),e=c,t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(l).redISub(d);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),y=p.redSqr(),g=d.redIAdd(d);g=g.redIAdd(g),g=g.redIAdd(g),e=y.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,t,r)},Lt.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d);p=p.redIAdd(p);var y=p.redAdd(p);e=f.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},Lt.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t);c=c.redIAdd(c);var u=c.redMul(o),l=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(l),d=o.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var f=a.redMul(h).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,f,p)},Lt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var a=o.redSqr(),c=n.redIAdd(n);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),l=t.redMul(u);l=l.redIAdd(l),l=l.redIAdd(l);var h=this.x.redMul(a).redISub(l);h=h.redIAdd(h),h=h.redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,d,f)},Lt.prototype.mul=function(e,t){return e=new(L())(e,t),this.curve._wnafMul(this,e)},Lt.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},Lt.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Lt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Lt.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Mt=vt((function(e,t){var r=t;r.base=Rt,r.short=Dt,r.mont=null,r.edwards=null})),Ut=vt((function(e,t){var r,n=t,i=St.assert;function s(e){"short"===e.type?this.curve=new Mt.short(e):"edwards"===e.type?this.curve=new Mt.edwards(e):this.curve=new Mt.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:wt().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:wt().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:wt().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:wt().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:wt().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wt().sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:wt().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(a){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:wt().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Ft(e){if(!(this instanceof Ft))return new Ft(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=At.toArray(e.entropy,e.entropyEnc||"hex"),r=At.toArray(e.nonce,e.nonceEnc||"hex"),n=At.toArray(e.pers,e.persEnc||"hex");Et(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var jt=Ft;Ft.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Ft.prototype._hmac=function(){return new(wt().hmac)(this.hash,this.K)},Ft.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ft.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=At.toArray(e,t),r=At.toArray(r,n),Et(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Ft.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=At.toArray(r,n||"hex"),this._update(r));var i=[];while(i.length<e)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,At.encode(s,t)};var Vt=St.assert;function zt(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var $t=zt;zt.fromPublic=function(e,t,r){return t instanceof zt?t:new zt(e,{pub:t,pubEnc:r})},zt.fromPrivate=function(e,t,r){return t instanceof zt?t:new zt(e,{priv:t,privEnc:r})},zt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},zt.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},zt.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},zt.prototype._importPrivate=function(e,t){this.priv=new(L())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},zt.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Vt(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Vt(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},zt.prototype.derive=function(e){return e.validate()||Vt(e.validate(),"public point not validated"),e.mul(this.priv).getX()},zt.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},zt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},zt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var qt=St.assert;function Kt(e,t){if(e instanceof Kt)return e;this._importDER(e,t)||(qt(e.r&&e.s,"Signature without r or s"),this.r=new(L())(e.r,16),this.s=new(L())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Ht=Kt;function Gt(){this.place=0}function Wt(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function Qt(e){var t=0,r=e.length-1;while(!e[t]&&!(128&e[t+1])&&t<r)t++;return 0===t?e:e.slice(t)}function Yt(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);e.push(128|r);while(--r)e.push(t>>>(r<<3)&255);e.push(t)}}Kt.prototype._importDER=function(e,t){e=St.toArray(e,t);var r=new Gt;if(48!==e[r.place++])return!1;var n=Wt(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Wt(e,r);if(!1===i)return!1;var s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var o=Wt(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;var a=e.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(L())(s),this.s=new(L())(a),this.recoveryParam=null,!0},Kt.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Qt(t),r=Qt(r);while(!r[0]&&!(128&r[1]))r=r.slice(1);var n=[2];Yt(n,t.length),n=n.concat(t),n.push(2),Yt(n,r.length);var i=n.concat(r),s=[48];return Yt(s,i.length),s=s.concat(i),St.encode(s,e)};var Jt=function(){throw new Error("unsupported")},Xt=St.assert;function Zt(e){if(!(this instanceof Zt))return new Zt(e);"string"===typeof e&&(Xt(Object.prototype.hasOwnProperty.call(Ut,e),"Unknown curve "+e),e=Ut[e]),e instanceof Ut.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var er=Zt;Zt.prototype.keyPair=function(e){return new $t(this,e)},Zt.prototype.keyFromPrivate=function(e,t){return $t.fromPrivate(this,e,t)},Zt.prototype.keyFromPublic=function(e,t){return $t.fromPublic(this,e,t)},Zt.prototype.genKeyPair=function(e){e||(e={});for(var t=new jt({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Jt(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(L())(2));;){var i=new(L())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Zt.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Zt.prototype.sign=function(e,t,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(L())(e,16));for(var i=this.n.byteLength(),s=t.getPrivate().toArray("be",i),o=e.toArray("be",i),a=new jt({hash:this.hash,entropy:s,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"}),c=this.n.sub(new(L())(1)),u=0;;u++){var l=n.k?n.k(u):new(L())(a.generate(this.n.byteLength()));if(l=this._truncateToN(l,!0),!(l.cmpn(1)<=0||l.cmp(c)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var d=h.getX(),f=d.umod(this.n);if(0!==f.cmpn(0)){var p=l.invm(this.n).mul(f.mul(t.getPrivate()).iadd(e));if(p=p.umod(this.n),0!==p.cmpn(0)){var y=(h.getY().isOdd()?1:0)|(0!==d.cmp(f)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),y^=1),new Ht({r:f,s:p,recoveryParam:y})}}}}}},Zt.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(L())(e,16)),r=this.keyFromPublic(r,n),t=new Ht(t,"hex");var i=t.r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,a=s.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?(o=this.g.jmulAdd(c,r.getPublic(),u),!o.isInfinity()&&o.eqXToP(i)):(o=this.g.mulAdd(c,r.getPublic(),u),!o.isInfinity()&&0===o.getX().umod(this.n).cmp(i))},Zt.prototype.recoverPubKey=function(e,t,r,n){Xt((3&r)===r,"The recovery param is more than two bits"),t=new Ht(t,n);var i=this.n,s=new(L())(e),o=t.r,a=t.s,c=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var l=t.r.invm(i),h=i.sub(s).mul(l).umod(i),d=a.mul(l).umod(i);return this.g.mulAdd(h,o,d)},Zt.prototype.getKeyRecoveryParam=function(e,t,r,n){if(t=new Ht(t,n),null!==t.recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var tr=vt((function(e,t){var r=t;r.version={version:"6.5.4"}.version,r.utils=St,r.rand=function(){throw new Error("unsupported")},r.curve=Mt,r.curves=Ut,r.ec=er,r.eddsa=null})),rr=tr.ec;const nr="signing-key/5.7.0",ir=new p(nr);let sr=null;function or(){return sr||(sr=new rr("secp256k1")),sr}class ar{constructor(e){w(this,"curve","secp256k1"),w(this,"privateKey",Y(e)),32!==J(this.privateKey)&&ir.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=or().keyFromPrivate(q(this.privateKey));w(this,"publicKey","0x"+t.getPublic(!1,"hex")),w(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),w(this,"_isSigningKey",!0)}_addPoint(e){const t=or().keyFromPublic(q(this.publicKey)),r=or().keyFromPublic(q(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=or().keyFromPrivate(q(this.privateKey)),r=q(e);32!==r.length&&ir.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return ne({recoveryParam:n.recoveryParam,r:re("0x"+n.r.toString(16),32),s:re("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=or().keyFromPrivate(q(this.privateKey)),r=or().keyFromPublic(q(ur(e)));return re("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function cr(e,t){const r=ne(t),n={r:q(r.r),s:q(r.s)};return"0x"+or().recoverPubKey(q(e),n,r.recoveryParam).encode("hex",!1)}function ur(e,t){const r=q(e);if(32===r.length){const e=new ar(r);return t?"0x"+or().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?Y(r):"0x"+or().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+or().keyFromPublic(r).getPublic(!0,"hex"):Y(r):ir.throwArgumentError("invalid public or private key","key","[REDACTED]")}const lr="transactions/5.7.0",hr=new p(lr);var dr;function fr(e){return"0x"===e?null:Le(e)}function pr(e){return"0x"===e?gt:le.from(e)}(function(e){e[e["legacy"]=0]="legacy",e[e["eip2930"]=1]="eip2930",e[e["eip1559"]=2]="eip1559"})(dr||(dr={}));function yr(e){const t=ur(e);return Le(X(we(X(t,1)),12))}function gr(e,t){return yr(cr(q(e),t))}function mr(e,t){const r=H(le.from(e).toHexString());return r.length>32&&hr.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function wr(e,t){return{address:Le(e),storageKeys:(t||[]).map(((t,r)=>(32!==J(t)&&hr.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase())))}}function vr(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&hr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),wr(e[0],e[1])):wr(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return wr(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function br(e){return vr(e).map((e=>[e.address,e.storageKeys]))}function Er(e,t){if(null!=e.gasPrice){const t=le.from(e.gasPrice),r=le.from(e.maxFeePerGas||0);t.eq(r)||hr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[mr(e.chainId||0,"chainId"),mr(e.nonce||0,"nonce"),mr(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),mr(e.maxFeePerGas||0,"maxFeePerGas"),mr(e.gasLimit||0,"gasLimit"),null!=e.to?Le(e.to):"0x",mr(e.value||0,"value"),e.data||"0x",br(e.accessList||[])];if(t){const e=ne(t);r.push(mr(e.recoveryParam,"recoveryParam")),r.push(H(e.r)),r.push(H(e.s))}return Z(["0x02",Se(r)])}function _r(e,t){const r=[mr(e.chainId||0,"chainId"),mr(e.nonce||0,"nonce"),mr(e.gasPrice||0,"gasPrice"),mr(e.gasLimit||0,"gasLimit"),null!=e.to?Le(e.to):"0x",mr(e.value||0,"value"),e.data||"0x",br(e.accessList||[])];if(t){const e=ne(t);r.push(mr(e.recoveryParam,"recoveryParam")),r.push(H(e.r)),r.push(H(e.s))}return Z(["0x01",Se(r)])}function Ar(e,t,r){try{const r=pr(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(n){hr.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=re(t[1],32),e.s=re(t[2],32);try{const t=we(r(e));e.from=gr(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(n){}}function Sr(e){const t=Te(e.slice(1));9!==t.length&&12!==t.length&&hr.throwArgumentError("invalid component count for transaction type: 2","payload",Y(e));const r=pr(t[2]),n=pr(t[3]),i={type:2,chainId:pr(t[0]).toNumber(),nonce:pr(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:pr(t[4]),to:fr(t[5]),value:pr(t[6]),data:t[7],accessList:vr(t[8])};return 9===t.length||(i.hash=we(e),Ar(i,t.slice(9),Er)),i}function kr(e){const t=Te(e.slice(1));8!==t.length&&11!==t.length&&hr.throwArgumentError("invalid component count for transaction type: 1","payload",Y(e));const r={type:1,chainId:pr(t[0]).toNumber(),nonce:pr(t[1]).toNumber(),gasPrice:pr(t[2]),gasLimit:pr(t[3]),to:fr(t[4]),value:pr(t[5]),data:t[6],accessList:vr(t[7])};return 8===t.length||(r.hash=we(e),Ar(r,t.slice(8),_r)),r}function Ir(e){const t=Te(e);9!==t.length&&6!==t.length&&hr.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:pr(t[0]).toNumber(),gasPrice:pr(t[1]),gasLimit:pr(t[2]),to:fr(t[3]),value:pr(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=le.from(t[6]).toNumber()}catch(n){return r}if(r.r=re(t[7],32),r.s=re(t[8],32),le.from(r.r).isZero()&&le.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let i=r.v-27;const s=t.slice(0,6);0!==r.chainId&&(s.push(Y(r.chainId)),s.push("0x"),s.push("0x"),i-=2*r.chainId+8);const o=we(Se(s));try{r.from=gr(o,{r:Y(r.r),s:Y(r.s),recoveryParam:i})}catch(n){}r.hash=we(e)}return r.type=null,r}function Tr(e){const t=q(e);if(t[0]>127)return Ir(t);switch(t[0]){case 1:return kr(t);case 2:return Sr(t);default:break}return hr.throwError(`unsupported transaction type: ${t[0]}`,p.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}r(2801);function Cr(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return q(t)}function Rr(e){e=q(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}const Pr="web/5.7.1";var xr=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};function Or(e,t){return xr(this,void 0,void 0,(function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach(((e,t)=>{s[t.toLowerCase()]=e})):n.headers.keys().forEach((e=>{s[e.toLowerCase()]=n.headers.get(e)})),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:q(new Uint8Array(i))}}))}var Nr=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Dr=new p(Pr);function Br(e){return new Promise((t=>{setTimeout(t,e)}))}function Lr(e,t){if(null==e)return null;if("string"===typeof e)return e;if(V(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Ye(e)}catch(r){}return Y(e)}return e}function Mr(e){return We(e.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))}function Ur(e,t,r){const n="object"===typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Dr.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"===typeof e?e.throttleCallback:null,s="object"===typeof e&&"number"===typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Dr.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o="object"===typeof e&&!!e.errorPassThrough,a={};let c=null;const u={method:"GET"};let l=!1,h=12e4;if("string"===typeof e)c=e;else if("object"===typeof e){if(null!=e&&null!=e.url||Dr.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"===typeof e.timeout&&e.timeout>0&&(h=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Dr.throwError("basic authentication requires a secure https url",p.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a["authorization"]={key:"Authorization",value:"Basic "+Rr(We(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=_(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=c?c.match(d):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?Cr(f[3]):Mr(f[3])};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(w){Dr.throwError("processing response error",p.errors.SERVER_ERROR,{body:Lr(f[1],f[2]),error:w,requestBody:null,requestMethod:"GET",url:c})}t&&(u.method="POST",u.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const y={};Object.keys(a).forEach((e=>{const t=a[e];y[t.key]=t.value})),u.headers=y;const g=function(){let e=null;const t=new Promise((function(t,r){h&&(e=setTimeout((()=>{null!=e&&(e=null,r(Dr.makeError("timeout",p.errors.TIMEOUT,{requestBody:Lr(u.body,y["content-type"]),requestMethod:u.method,timeout:h,url:c})))}),h))})),r=function(){null!=e&&(clearTimeout(e),e=null)};return{promise:t,cancel:r}}(),m=function(){return Nr(this,void 0,void 0,(function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield Or(c,u),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"===typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):s*parseInt(String(Math.random()*Math.pow(2,e))),yield Br(r);continue}}}catch(w){t=w.response,null==t&&(g.cancel(),Dr.throwError("missing response",p.errors.SERVER_ERROR,{requestBody:Lr(u.body,y["content-type"]),requestMethod:u.method,serverError:w,url:c}))}let a=t.body;if(l&&304===t.statusCode?a=null:!o&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),Dr.throwError("bad response",p.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:Lr(a,t.headers?t.headers["content-type"]:null),requestBody:Lr(u.body,y["content-type"]),requestMethod:u.method,url:c})),r)try{const e=yield r(a,t);return g.cancel(),e}catch(w){if(w.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,c)),t){const t=s*parseInt(String(Math.random()*Math.pow(2,e)));yield Br(t);continue}}g.cancel(),Dr.throwError("processing response error",p.errors.SERVER_ERROR,{body:Lr(a,t.headers?t.headers["content-type"]:null),error:w,requestBody:Lr(u.body,y["content-type"]),requestMethod:u.method,url:c})}return g.cancel(),a}return Dr.throwError("failed response",p.errors.SERVER_ERROR,{requestBody:Lr(u.body,y["content-type"]),requestMethod:u.method,url:c})}))}();return Promise.race([g.promise,m])}function Fr(e,t,r){let n=(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Ye(e))}catch(i){Dr.throwError("invalid JSON",p.errors.SERVER_ERROR,{body:e,error:i})}return r&&(n=r(n,t)),n},i=null;if(null!=t){i=We(t);const r="string"===typeof e?{url:e}:_(e);if(r.headers){const e=0!==Object.keys(r.headers).filter((e=>"content-type"===e.toLowerCase())).length;e||(r.headers=_(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};e=r}return Ur(e,i,n)}function jr(e,t){return t||(t={}),t=_(t),null==t.floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout((()=>{o()&&n(new Error("timeout"))}),t.timeout));const a=t.retryLimit;let c=0;function u(){return e().then((function(e){if(void 0!==e)o()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",u);else if(t.onceBlock)t.onceBlock.once("block",u);else if(!s){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(u,e)}return null}),(function(e){o()&&n(e)}))}u()}))}const Vr="abstract-provider/5.7.0";var zr=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const $r=new p(Vr);class qr extends T{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Kr{constructor(){$r.checkAbstract(new.target,Kr),w(this,"_isProvider",!0)}getFeeData(){return zr(this,void 0,void 0,(function*(){const{block:e,gasPrice:t}=yield b({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null,i=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,i=le.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}}))}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}class Hr{constructor(e){w(this,"alphabet",e),w(this,"base",e.length),w(this,"_alphabetMap",{}),w(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=q(e);if(0===t.length)return"";let r=[0];for(let i=0;i<t.length;++i){let e=t[i];for(let t=0;t<r.length;++t)e+=r[t]<<8,r[t]=e%this.base,e=e/this.base|0;while(e>0)r.push(e%this.base),e=e/this.base|0}let n="";for(let i=0;0===t[i]&&i<t.length-1;++i)n+=this._leader;for(let i=r.length-1;i>=0;--i)n+=this.alphabet[r[i]];return n}decode(e){if("string"!==typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;while(i>0)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return q(new Uint8Array(t.reverse()))}}new Hr("abcdefghijklmnopqrstuvwxyz234567");const Gr=new Hr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Wr="0x0000000000000000000000000000000000000000000000000000000000000000";function Qr(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,(function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)}))};return i(e,t),r}function Yr(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}function Jr(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let E=1;E<n;E++)s.push(i+=r());let o=r(),a=t;t+=o;let c=0,u=0;function l(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const h=31,d=Math.pow(2,h),f=d>>>1,p=f>>1,y=d-1;let g=0;for(let E=0;E<h;E++)g=g<<1|l();let m=[],w=0,v=d;while(1){let e=Math.floor(((g-w+1)*i-1)/v),t=0,r=n;while(r-t>1){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;m.push(t);let o=w+Math.floor(v*s[t]/i),a=w+Math.floor(v*s[t+1]/i)-1;while(0==((o^a)&f))g=g<<1&y|l(),o=o<<1&y,a=a<<1&y|1;while(o&~a&p)g=g&f|g<<1&y>>>1|l(),o=o<<1^f,a=(a^f)<<1|f|1;w=o,v=1+a-o}let b=n-4;return m.map((t=>{switch(t-b){case 3:return b+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return b+256+(e[a++]<<8|e[a++]);case 1:return b+e[a++];default:return t-1}}))}function Xr(e){let t=0;return()=>e[t++]}function Zr(e){return Xr(Jr(e))}function en(e){return 1&e?~e>>1:e>>1}function tn(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}function rn(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function nn(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=en(t());return r}function sn(e,t){let r=rn(e(),e),n=e(),i=rn(n,e),s=tn(n,e);for(let o=0;o<n;o++)for(let e=0;e<s[o];e++)r.push(i[o]+e);return t?r.map((e=>t[e])):r}function on(e){let t=[];while(1){let r=e();if(0==r)break;t.push(un(r,e))}while(1){let r=e()-1;if(r<0)break;t.push(ln(r,e))}return Yr(Qr(t))}function an(e){let t=[];while(1){let r=e();if(0==r)break;t.push(r)}return t}function cn(e,t,r){let n=Array(e).fill(void 0).map((()=>[]));for(let i=0;i<t;i++)nn(e,r).forEach(((e,t)=>n[t].push(e)));return n}function un(e,t){let r=1+t(),n=t(),i=an(t),s=cn(i.length,1+e,t);return Qr(s.map(((e,t)=>{const s=e[0],o=e.slice(1);return Array(i[t]).fill(void 0).map(((e,t)=>{let i=t*n;return[s+t*r,o.map((e=>e+i))]}))})))}function ln(e,t){let r=1+t(),n=cn(r,1+e,t);return n.map((e=>[e[0],e.slice(1)]))}function hn(e){let t=sn(e).sort(((e,t)=>e-t));return r();function r(){let n=[];while(1){let i=sn(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort(((e,t)=>t.set.size-e.set.size));let i=e(),s=i%3;i=i/3|0;let o=!!(1&i);i>>=1;let a=1==i,c=2==i;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function dn(){return Zr(Cr("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const fn=dn(),pn=new Set(sn(fn)),yn=new Set(sn(fn)),gn=on(fn),mn=hn(fn),wn=45,vn=95;function bn(e){return Je(e)}function En(e){return e.filter((e=>65039!=e))}function _n(e){for(let r of e.split(".")){let e=bn(r);try{for(let t=e.lastIndexOf(vn)-1;t>=0;t--)if(e[t]!==vn)throw new Error("underscore only allowed at start");if(e.length>=4&&e.every((e=>e<128))&&e[2]===wn&&e[3]===wn)throw new Error("invalid label extension")}catch(t){throw new Error(`Invalid label "${r}": ${t.message}`)}}return e}function An(e){return _n(Sn(e,En))}function Sn(e,t){let r=bn(e).reverse(),n=[];while(r.length){let e=In(r);if(e){n.push(...t(e));continue}let i=r.pop();if(pn.has(i)){n.push(i);continue}if(yn.has(i))continue;let s=gn[i];if(!s)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...s)}return _n(kn(String.fromCodePoint(...n)))}function kn(e){return e.normalize("NFC")}function In(e,t){var r;let n,i,s=mn,o=[],a=e.length;t&&(t.length=0);while(a){let c=e[--a];if(s=null===(r=s.branches.find((e=>e.set.has(c))))||void 0===r?void 0:r.node,!s)break;if(s.save)i=c;else if(s.check&&c===i)break;o.push(c),s.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),s.valid&&(n=o.slice(),2==s.valid&&n.splice(1,1),t&&t.push(...e.slice(a).reverse()),e.length=a)}return n}const Tn=new p(Ue),Cn=new Uint8Array(32);function Rn(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function Pn(e){const t=We(An(e)),r=[];if(0===e.length)return r;let n=0;for(let i=0;i<t.length;i++){const e=t[i];46===e&&(r.push(Rn(t.slice(n,i))),n=i+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(Rn(t.slice(n))),r}function xn(e){"string"!==typeof e&&Tn.throwArgumentError("invalid ENS name; not a string","name",e);let t=Cn;const r=Pn(e);while(r.length)t=we(K([t,we(r.pop())]));return Y(t)}function On(e){return Y(K(Pn(e).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"}Cn.fill(0);const Nn="networks/5.7.1",Dn=new p(Nn);function Bn(e){return e&&"function"===typeof e.renetwork}function Ln(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(i){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(i){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(i){}if(t.PocketProvider&&"-"!==r.pocket){const s=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,r.pocket);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(i){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(i){}if(t.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],s=new t.AnkrProvider(e,r.ankr);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(i){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return Ln(e)},t}function Mn(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return Mn(e,t)},r}const Un={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Ln("homestead")},Fn={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Ln("ropsten")},jn={chainId:63,name:"classicMordor",_defaultProvider:Mn("https://www.ethercluster.com/mordor","classicMordor")},Vn={unspecified:{chainId:0,name:"unspecified"},homestead:Un,mainnet:Un,morden:{chainId:2,name:"morden"},ropsten:Fn,testnet:Fn,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Ln("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Ln("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Ln("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Ln("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Mn("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:jn,classicTestnet:jn,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Mn("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Ln("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Ln("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function zn(e){if(null==e)return null;if("number"===typeof e){for(const t in Vn){const r=Vn[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"===typeof e){const t=Vn[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=Vn[e.name];if(!t)return"number"!==typeof e.chainId&&Dn.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&Dn.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;return null==r&&t._defaultProvider&&(r=Bn(t._defaultProvider)?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}const $n="sha2/5.7.0";new p($n);function qn(e){return"0x"+wt().sha256().update(q(e)).digest("hex")}var Kn=r(1742),Hn=r.n(Kn);const Gn="0x0000000000000000000000000000000000000000",Wn=new p(C);class Qn{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this),u=e=>this.data(e,!0);return e.transaction={hash:s,type:c,accessList:Qn.allowNull(this.accessList.bind(this),null),blockHash:Qn.allowNull(s,null),blockNumber:Qn.allowNull(a,null),transactionIndex:Qn.allowNull(a,null),confirmations:Qn.allowNull(a,null),from:t,gasPrice:Qn.allowNull(r),maxPriorityFeePerGas:Qn.allowNull(r),maxFeePerGas:Qn.allowNull(r),gasLimit:r,to:Qn.allowNull(t,null),value:r,nonce:a,data:i,r:Qn.allowNull(this.uint256),s:Qn.allowNull(this.uint256),v:Qn.allowNull(a),creates:Qn.allowNull(t,null),raw:Qn.allowNull(i)},e.transactionRequest={from:Qn.allowNull(t),nonce:Qn.allowNull(a),gasLimit:Qn.allowNull(r),gasPrice:Qn.allowNull(r),maxPriorityFeePerGas:Qn.allowNull(r),maxFeePerGas:Qn.allowNull(r),to:Qn.allowNull(t),value:Qn.allowNull(r),data:Qn.allowNull(u),type:Qn.allowNull(a),accessList:Qn.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:t,topics:Qn.arrayOf(s),data:i,logIndex:a,blockHash:s},e.receipt={to:Qn.allowNull(this.address,null),from:Qn.allowNull(this.address,null),contractAddress:Qn.allowNull(t,null),transactionIndex:a,root:Qn.allowNull(o),gasUsed:r,logsBloom:Qn.allowNull(i),blockHash:s,transactionHash:s,logs:Qn.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Qn.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:Qn.allowNull(r),status:Qn.allowNull(a),type:c},e.block={hash:Qn.allowNull(s),parentHash:s,number:a,timestamp:a,nonce:Qn.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Qn.allowNull(t),extraData:i,transactions:Qn.allowNull(Qn.arrayOf(s)),baseFeePerGas:Qn.allowNull(r)},e.blockWithTransactions=_(e.block),e.blockWithTransactions.transactions=Qn.allowNull(Qn.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Qn.allowNull(n,void 0),toBlock:Qn.allowNull(n,void 0),blockHash:Qn.allowNull(s,void 0),address:Qn.allowNull(t,void 0),topics:Qn.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Qn.allowNull(a),blockHash:Qn.allowNull(s),transactionIndex:a,removed:Qn.allowNull(this.boolean.bind(this)),address:t,data:Qn.allowFalsish(i,"0x"),topics:Qn.arrayOf(s),transactionHash:s,logIndex:a},e}accessList(e){return vr(e||[])}number(e){return"0x"===e?0:le.from(e).toNumber()}type(e){return"0x"===e||null==e?0:le.from(e).toNumber()}bigNumber(e){return le.from(e)}boolean(e){if("boolean"===typeof e)return e;if("string"===typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"===typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),W(e))?e.toLowerCase():Wn.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Le(e)}callAddress(e){if(!W(e,32))return null;const t=Le(X(e,12));return t===Gn?null:t}contractAddress(e){return Me(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"===typeof e||W(e))return ee(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==J(r)?Wn.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=le.from(e);try{return t.toNumber()}catch(r){}return null}uint256(e){if(!W(e))throw new Error("invalid uint256");return re(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=Qn.check(t,e);return n._difficulty=null==r?null:le.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Qn.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&le.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=Qn.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;W(r)&&(r=le.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),W(r)&&(r=le.from(r).toNumber()),"number"!==typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!==typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return Tr(e)}receiptLog(e){return Qn.check(this.formats.receiptLog,e)}receipt(e){const t=Qn.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=le.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Wn.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Wn.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Wn.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map((e=>this.topics(e))):null!=e?this.hash(e,!0):null}filter(e){return Qn.check(this.formats.filter,e)}filterLog(e){return Qn.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const i in e)try{const n=e[i](t[i]);void 0!==n&&(r[i]=n)}catch(n){throw n.checkKey=i,n.checkValue=t[i],n}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach((function(t){r.push(e(t))})),r}}}var Yn=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Jn=new p(C),Xn=10;function Zn(e){return null==e?"null":(32!==J(e)&&Jn.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function ei(e){e=e.slice();while(e.length>0&&null==e[e.length-1])e.pop();return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[Zn(e)]=!0}));const r=Object.keys(t);return r.sort(),r.join("|")}return Zn(e)})).join("&")}function ti(e){return""===e?[]:e.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}))}function ri(e){if("string"===typeof e){if(e=e.toLowerCase(),32===J(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+ei(e);if(qr.isForkEvent(e))throw Jn.warn("not implemented"),new Error("not implemented");if(e&&"object"===typeof e)return"filter:"+(e.address||"*")+":"+ei(e.topics||[])}throw new Error("invalid event - "+e)}function ni(){return(new Date).getTime()}function ii(e){return new Promise((t=>{setTimeout(t,e)}))}const si=["block","network","pending","poll"];class oi{constructor(e,t,r){w(this,"tag",e),w(this,"listener",t),w(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=ti(e[2]),n={};return r.length>0&&(n.topics=r),t&&"*"!==t&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||si.indexOf(this.tag)>=0}}const ai={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ci(e){return re(le.from(e).toHexString(),32)}function ui(e){return Gr.encode(K([e,X(qn(qn(e)),0,4)]))}const li=new RegExp("^(ipfs)://(.*)$","i"),hi=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),li,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function di(e,t){try{return Ye(fi(e,t))}catch(r){}return null}function fi(e,t){if("0x"===e)return null;const r=le.from(X(e,t,t+32)).toNumber(),n=le.from(X(e,r,r+32)).toNumber();return X(e,r+32,r+32+n)}function pi(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Jn.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function yi(e){const t=q(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function gi(e){if(e.length%32===0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function mi(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const i=q(e[n]);t[n]=yi(r),t.push(yi(i.length)),t.push(gi(i)),r+=32+32*Math.ceil(i.length/32)}return Z(t)}class wi{constructor(e,t,r,n){w(this,"provider",e),w(this,"name",r),w(this,"address",e.formatter.address(t)),w(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>le.from(e).eq(1))).catch((e=>{if(e.code===p.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e}))),this._supportsEip2544}_fetch(e,t){return Yn(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:!0,data:Z([e,xn(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=Z(["0x9061b923",mi([On(this.name),r.data])]));try{let e=yield this.provider.call(r);return q(e).length%32===4&&Jn.throwError("resolver threw error",p.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=fi(e,0)),e}catch(i){if(i.code===p.errors.CALL_EXCEPTION)return null;throw i}}))}_fetchBytes(e,t){return Yn(this,void 0,void 0,(function*(){const r=yield this._fetch(e,t);return null!=r?fi(r,0):null}))}_getAddress(e,t){const r=ai[String(e)];if(null==r&&Jn.throwError(`unsupported coin type: ${e}`,p.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=q(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return ui(K([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return ui(K([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=Hn().toWords(n.slice(2));return e.unshift(t),Hn().encode(r.prefix,e)}}return null}getAddress(e){return Yn(this,void 0,void 0,(function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||e===Wr?null:this.provider.formatter.callAddress(e)}catch(n){if(n.code===p.errors.CALL_EXCEPTION)return null;throw n}const t=yield this._fetchBytes("0xf1cb7e06",ci(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&Jn.throwError("invalid or unsupported coin data",p.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r}))}getAvatar(){return Yn(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<hi.length;r++){const n=t.match(hi[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:pi(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=re(le.from(o[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:Z(["0x6352211e",c])}));if(s!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=le.from(yield this.provider.call({to:a,data:Z(["0x00fdd58e",re(s,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(o[0]),data:Z([r,c])};let l=di(yield this.provider.call(u),0);if(null==l)return null;e.push({type:"metadata-url-base",content:l}),"erc1155"===i&&(l=l.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=pi(l)),e.push({type:"metadata-url",content:l});const h=yield Fr(l);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let d=h.image;if("string"!==typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{const t=d.match(li);if(null==t)return null;e.push({type:"url-ipfs",content:d}),d=pi(d)}return e.push({type:"url",content:d}),{linkage:e,url:d}}}}}catch(t){}return null}))}getContentHash(){return Yn(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+Gr.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+Gr.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"},t=Rr("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]));return"sia://"+t}return Jn.throwError("invalid or unsupported content hash data",p.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return Yn(this,void 0,void 0,(function*(){let t=We(e);t=K([ci(64),ci(t.length),t]),t.length%32!==0&&(t=K([t,re("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Y(t));return null==r||"0x"===r?null:Ye(r)}))}}let vi=null,bi=1;class Ei extends Kr{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),w(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch((e=>{})),this._ready().catch((e=>{}));else{const t=v(new.target,"getNetwork")(e);t?(w(this,"_network",t),this.emit("network",t,null)):Jn.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Yn(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(e){}null==t&&(t=yield this.detectNetwork()),t||Jn.throwError("no network detected",p.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:w(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return jr((()=>this._ready().then((e=>e),(e=>{if(e.code!==p.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))))}static getFormatter(){return null==vi&&(vi=new Qn),vi}static getNetwork(e){return zn(null==e?"homestead":e)}ccipReadFetch(e,t,r){return Yn(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let e=0;e<r.length;e++){const t=r[e],o=t.replace("{sender}",n).replace("{data}",i),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),c=yield Fr({url:o,errorPassThrough:!0},a,((e,t)=>(e.status=t.statusCode,e)));if(c.data)return c.data;const u=c.message||"unknown error";if(c.status>=400&&c.status<500)return Jn.throwError(`response not found during CCIP fetch: ${u}`,p.errors.SERVER_ERROR,{url:t,errorMessage:u});s.push(u)}return Jn.throwError(`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,p.errors.SERVER_ERROR,{urls:r,errorMessages:s})}))}_getInternalBlockNumber(e){return Yn(this,void 0,void 0,(function*(){if(yield this._ready(),e>0)while(this._internalBlockNumber){const t=this._internalBlockNumber;try{const r=yield t;if(ni()-r.respTime<=e)return r.blockNumber;break}catch(n){if(this._internalBlockNumber===t)break}}const t=ni(),r=b({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=ni();return e=le.from(e).toNumber(),e<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}}));return this._internalBlockNumber=r,r.catch((e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return Yn(this,void 0,void 0,(function*(){const e=bi++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(n){return void this.emit("error",n)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Jn.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Jn.makeError("network block skew detected",p.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null)).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const s=this.getLogs(n).then((t=>{e._inflight=!1,0!==t.length&&t.forEach((t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t),e._inflight=!1}));t.push(s)}break}})),this._lastBlockNumber=r,Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}))}else this.emit("didPoll",e)}))}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Yn(this,void 0,void 0,(function*(){return Jn.throwError("provider does not support network detection",p.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return Yn(this,void 0,void 0,(function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield ii(0),this._network;const r=Jn.makeError("underlying network changed",p.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!==typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const e=ni();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=ni(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Yn(this,void 0,void 0,(function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return Yn(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise(((i,s)=>{const o=[];let a=!1;const c=function(){return!!a||(a=!0,o.forEach((e=>{e()})),!1)},u=e=>{e.confirmations<t||c()||i(e)};if(this.on(e,u),o.push((()=>{this.removeListener(e,u)})),n){let r=n.startBlock,i=null;const u=o=>Yn(this,void 0,void 0,(function*(){a||(yield ii(1e3),this.getTransactionCount(n.from).then((l=>Yn(this,void 0,void 0,(function*(){if(!a){if(l<=n.nonce)r=o;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));while(i<=o){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const o=r.transactions[i];if(o.hash===e)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,t);if(c())return;let i="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?i="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(i="cancelled"),void s(Jn.makeError("transaction was replaced",p.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(o),hash:e,receipt:r}))}}i++}}a||this.once("block",u)}}))),(e=>{a||this.once("block",u)})))}));if(a)return;this.once("block",u),o.push((()=>{this.removeListener("block",u)}))}if("number"===typeof r&&r>0){const e=setTimeout((()=>{c()||s(Jn.makeError("timeout exceeded",p.errors.TIMEOUT,{timeout:r}))}),r);e.unref&&e.unref(),o.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return Yn(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return le.from(e)}catch(t){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield b({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return le.from(n)}catch(i){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:i})}}))}getTransactionCount(e,t){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield b({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return le.from(n).toNumber()}catch(i){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:i})}}))}getCode(e,t){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield b({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return Y(n)}catch(i){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:i})}}))}getStorageAt(e,t,r){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield b({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>ee(e)))}),i=yield this.perform("getStorageAt",n);try{return Y(i)}catch(s){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:s})}}))}_wrapTransaction(e,t,r){if(null!=t&&32!==J(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&Jn.throwError("Transaction hash mismatch from Provider.sendTransaction.",p.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>Yn(this,void 0,void 0,(function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const s=yield this._waitForTransaction(e.hash,t,n,i);return null==s&&0===t?null:(this._emitted["t:"+e.hash]=s.blockNumber,0===s.status&&Jn.throwError("transaction failed",p.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:s}),s)})),n}sendTransaction(e){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>Y(e))),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(i){throw i.transaction=r,i.transactionHash=r.hash,i}}))}_getTransactionRequest(e){return Yn(this,void 0,void 0,(function*(){const t=yield e,r={};return["from","to"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?le.from(e):null)))})),["type"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>null!=e?e:null)))})),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?Y(e):null)))})),this.formatter.transactionRequest(yield b(r))}))}_getFilter(e){return Yn(this,void 0,void 0,(function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((r=>{null!=e[r]&&(t[r]=e[r])})),["fromBlock","toBlock"].forEach((r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))})),this.formatter.filter(yield b(t))}))}_call(e,t,r){return Yn(this,void 0,void 0,(function*(){r>=Xn&&Jn.throwError("CCIP read exceeded maximum redirections",p.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&J(i)%32===4)try{const s=X(i,4),o=X(s,0,32);le.from(o).eq(n)||Jn.throwError("CCIP Read sender did not match",p.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const a=[],c=le.from(X(s,32,64)).toNumber(),u=le.from(X(s,c,c+32)).toNumber(),l=X(s,c+32);for(let t=0;t<u;t++){const r=di(l,32*t);null==r&&Jn.throwError("CCIP Read contained corrupt URL string",p.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),a.push(r)}const h=fi(s,64);le.from(X(s,100,128)).isZero()||Jn.throwError("CCIP Read callback selector included junk",p.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const d=X(s,96,100),f=fi(s,128),y=yield this.ccipReadFetch(e,h,a);null==y&&Jn.throwError("CCIP Read disabled or provided no URLs",p.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const g={to:n,data:Z([d,mi([y,f])])};return this._call(g,t,r+1)}catch(s){if(s.code===p.errors.SERVER_ERROR)throw s}try{return Y(i)}catch(s){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:s})}}))}call(e,t){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield b({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(e){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield b({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return le.from(r)}catch(n){return Jn.throwError("bad result from backend",p.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:n})}}))}_getAddress(e){return Yn(this,void 0,void 0,(function*(){e=yield e,"string"!==typeof e&&Jn.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Jn.throwError("ENS name not configured",p.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t}))}_getBlock(e,t){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(W(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),W(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(i){Jn.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return jr((()=>Yn(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let n=0;n<e.transactions.length;n++){const r=e.transactions[n];if(null==r.blockNumber)r.confirmations=0;else if(null==r.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-r.blockNumber+1;e<=0&&(e=1),r.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map((e=>this._wrapTransaction(e))),r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return jr((()=>Yn(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return jr((()=>Yn(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(e){return Yn(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield b({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach((e=>{null==e.removed&&(e.removed=!1)})),Qn.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return Yn(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(e){return Yn(this,void 0,void 0,(function*(){if(e=yield e,"number"===typeof e&&e<0){e%1&&Jn.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return Yn(this,void 0,void 0,(function*(){let t=e;while(1){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new wi(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return Yn(this,void 0,void 0,(function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Jn.throwError("network does not support ENS",p.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+xn(e).substring(2)});return this.formatter.callAddress(t)}catch(n){}return null}))}resolveName(e){return Yn(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(r){if(W(e))throw r}"string"!==typeof e&&Jn.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null}))}lookupAddress(e){return Yn(this,void 0,void 0,(function*(){e=yield e,e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=di(yield this.call({to:r,data:"0x691f3431"+xn(t).substring(2)}),0),i=yield this.resolveName(n);return i!=e?null:n}))}getAvatar(e){return Yn(this,void 0,void 0,(function*(){let t=null;if(W(e)){const r=this.formatter.address(e),i=r.substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(i,"getAvatar");if(!s)return null;t=new wi(this,s,i);try{const e=yield t.getAvatar();if(e)return e.url}catch(n){if(n.code!==p.errors.CALL_EXCEPTION)throw n}try{const e=di(yield this.call({to:s,data:"0x691f3431"+xn(i).substring(2)}),0);t=yield this.getResolver(e)}catch(n){if(n.code!==p.errors.CALL_EXCEPTION)throw n;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url}))}perform(e,t){return Jn.throwError(e+" not implemented",p.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new oi(ri(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=ri(e);return this._events=this._events.filter((e=>e.tag!==i||(setTimeout((()=>{e.listener.apply(this,t)}),0),r=!0,!e.once||(n.push(e),!1)))),n.forEach((e=>{this._stopEvent(e)})),r}listenerCount(e){if(!e)return this._events.length;let t=ri(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(null==e)return this._events.map((e=>e.listener));let t=ri(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=ri(e);return this._events=this._events.filter((e=>e.tag!==i||e.listener!=t||(!!n||(n=!0,r.push(e),!1)))),r.forEach((e=>{this._stopEvent(e)})),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=ri(e);this._events=this._events.filter((e=>e.tag!==r||(t.push(e),!1)))}return t.forEach((e=>{this._stopEvent(e)})),this}}var _i=function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const Ai=new p(C),Si=["call","estimateGas"];function ki(e,t){if(null==e)return null;if("string"===typeof e.message&&e.message.match("reverted")){const r=W(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"===typeof e){for(const r in e){const n=ki(e[r],t);if(n)return n}return null}if("string"===typeof e)try{return ki(JSON.parse(e),t)}catch(r){}return null}function Ii(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=ki(t,!0);if(e)return e.data;Ai.throwError("missing revert data in call exception; Transaction reverted without a reason string",p.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=ki(t.body,!1);null==r&&(r=ki(t,!1)),r&&Ai.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",p.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let i=t.message;throw t.code===p.errors.SERVER_ERROR&&t.error&&"string"===typeof t.error.message?i=t.error.message:"string"===typeof t.body?i=t.body:"string"===typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit/i)&&Ai.throwError("insufficient funds for intrinsic transaction cost",p.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),i.match(/nonce (is )?too low/i)&&Ai.throwError("nonce has already been used",p.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&Ai.throwError("replacement fee too low",p.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),i.match(/only replay-protected/i)&&Ai.throwError("legacy pre-eip-155 transactions not supported",p.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),Si.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Ai.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",p.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function Ti(e){return new Promise((function(t){setTimeout(t,e)}))}function Ci(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function Ri(e){return e?e.toLowerCase():e}const Pi={};class xi extends D{constructor(e,t,r){if(super(),e!==Pi)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");w(this,"provider",t),null==r&&(r=0),"string"===typeof r?(w(this,"_address",this.provider.formatter.address(r)),w(this,"_index",null)):"number"===typeof r?(w(this,"_index",r),w(this,"_address",null)):Ai.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return Ai.throwError("cannot alter JSON-RPC Signer connection",p.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Oi(Pi,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&Ai.throwError("unknown account #"+this._index,p.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=_(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const r=_(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>_i(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&Ai.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),b({tx:b(e),sender:t}).then((({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&Ai.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>("string"===typeof e.message&&e.message.match(/user denied/i)&&Ai.throwError("user rejected transaction",p.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),Ii("sendTransaction",e,n))))}))}signTransaction(e){return Ai.throwError("signing transactions is unsupported",p.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return _i(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield jr((()=>_i(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(n){throw n.transactionHash=r,n}}))}signMessage(e){return _i(this,void 0,void 0,(function*(){const t="string"===typeof e?We(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Y(t),r.toLowerCase()])}catch(n){throw"string"===typeof n.message&&n.message.match(/user denied/i)&&Ai.throwError("user rejected signing",p.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),n}}))}_legacySignMessage(e){return _i(this,void 0,void 0,(function*(){const t="string"===typeof e?We(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Y(t)])}catch(n){throw"string"===typeof n.message&&n.message.match(/user denied/i)&&Ai.throwError("user rejected signing",p.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),n}}))}_signTypedData(e,t,r){return _i(this,void 0,void 0,(function*(){const n=yield yt.resolveNames(e,t,r,(e=>this.provider.resolveName(e))),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(yt.getPayload(n.domain,t,n.value))])}catch(s){throw"string"===typeof s.message&&s.message.match(/user denied/i)&&Ai.throwError("user rejected signing",p.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}}),s}}))}unlock(e){return _i(this,void 0,void 0,(function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class Oi extends xi{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const Ni={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Di extends Ei{constructor(e,t){let r=t;null==r&&(r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(r),e||(e=v(this.constructor,"defaultUrl")()),w(this,"connection","string"===typeof e?Object.freeze({url:e}):Object.freeze(_(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache["detectNetwork"]||(this._cache["detectNetwork"]=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache["detectNetwork"]=null}),0)),this._cache["detectNetwork"]}_uncachedDetectNetwork(){return _i(this,void 0,void 0,(function*(){yield Ti(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(t){}}if(null!=e){const r=v(this.constructor,"getNetwork");try{return r(le.from(e).toNumber())}catch(t){return Ai.throwError("could not detect network",p.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return Ai.throwError("could not detect network",p.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new xi(Pi,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:I(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=Fr(this.connection,JSON.stringify(r),Ci).then((e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e}));return n&&(this._cache[e]=i,setTimeout((()=>{this._cache[e]=null}),0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Ri(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Ri(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Ri(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Ri(t.address),re(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":{const e=v(this.constructor,"hexlifyTransaction");return["eth_call",[e(t.transaction,{from:!0}),t.blockTag]]}case"estimateGas":{const e=v(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[e(t.transaction,{from:!0})]]}case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=Ri(t.filter.address)),["eth_getLogs",[t.filter]];default:break}return null}perform(e,t){return _i(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&le.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=_(t),t.transaction=_(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&Ai.throwError(e+" not implemented",p.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(n){return Ii(e,n,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return Ti(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((e=>{}))}return n(),r})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=_(Ni);if(t)for(const i in t)t[i]&&(r[i]=!0);E(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const r=ee(le.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r})),["from","to","data"].forEach((function(t){null!=e[t]&&(n[t]=Y(e[t]))})),e.accessList&&(n["accessList"]=vr(e.accessList)),n}}const Bi=new p(C);let Li=1;function Mi(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:Li++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:I(i),provider:this}),t(i,((t,s)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this}),s.error){const e=new Error(s.error.message);return e.code=s.error.code,e.data=s.error.data,n(e)}e(s.result)}))}))}}function Ui(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:I(n),provider:this}),e.request(n).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e}))}}class Fi extends Di{constructor(e,t){null==e&&Bi.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"===typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=Ui(e)):e.sendAsync?n=Mi(e,e.sendAsync.bind(e)):e.send?n=Mi(e,e.send.bind(e)):Bi.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),w(this,"jsonRpcFetchFunc",n),w(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}},5186:function(e){"use strict";function t(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=!0;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function(i,o){r[n]=function(e){if(s)if(s=!1,e)o(e);else{var t=new Array(arguments.length-1),r=0;while(r<t.length)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(a){s&&(s=!1,o(a))}}))}e.exports=t},8673:function(e,t,r){"use strict";r(7658);var n=t;n.length=function(e){var t=e.length;if(!t)return 0;var r=0;while(--t%4>1&&"="===e.charAt(t))++r;return Math.ceil(3*e.length)/4-r};for(var i=new Array(64),s=new Array(123),o=0;o<64;)s[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,r){var n,s=null,o=[],a=0,c=0;while(t<r){var u=e[t++];switch(c){case 0:o[a++]=i[u>>2],n=(3&u)<<4,c=1;break;case 1:o[a++]=i[n|u>>4],n=(15&u)<<2,c=2;break;case 2:o[a++]=i[n|u>>6],o[a++]=i[63&u],c=0;break}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=i[n],o[a++]=61,1===c&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var a="invalid encoding";n.decode=function(e,t,r){for(var n,i=r,o=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&o>1)break;if(void 0===(u=s[u]))throw Error(a);switch(o){case 0:n=u,o=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:t[r++]=(3&n)<<6|u,o=0;break}}if(1===o)throw Error(a);return r-i},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},3207:function(e,t,r){"use strict";function n(e,t){"string"===typeof e&&(t=e,e=void 0);var r=[];function i(e){if("string"!==typeof e){var t=s();if(n.verbose&&console.log("codegen: "+t),t="return "+t,e){var o=Object.keys(e),a=new Array(o.length+1),c=new Array(o.length),u=0;while(u<o.length)a[u]=o[u],c[u]=e[o[u++]];return a[u]=t,Function.apply(null,a).apply(null,c)}return Function(t)()}var l=new Array(arguments.length-1),h=0;while(h<l.length)l[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[h++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),h!==l.length)throw Error("parameter count mismatch");return r.push(e),i}function s(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return i.toString=s,i}r(7658),e.exports=n,n.verbose=!1},8825:function(e,t,r){"use strict";function n(){this._listeners={}}r(7658),e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},7965:function(e,t,r){"use strict";r(7658),r(3408),r(4590),e.exports=o;var n=r(5186),i=r(6332),s=i("fs");function o(e,t,r){return"function"===typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&s&&s.readFile?s.readFile(e,(function(n,i){return n&&"undefined"!==typeof XMLHttpRequest?o.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,r):n(o,this,e,t)}o.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},2913:function(e,t,r){"use strict";function n(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),o=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|o)>>>0,r,n)}}function r(e,t,r){var n=e(t,r),i=2*(n>>31)+1,s=n>>>23&255,o=8388607&n;return 255===s?o?NaN:i*(1/0):0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,s),e.readFloatLE=r.bind(null,o),e.readFloatBE=r.bind(null,a)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,r,n,i,s){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:2147483648,i,s+r);else if(isNaN(n))e(0,i,s+t),e(2146959360,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|2146435072)>>>0,i,s+r);else{var a;if(n<22250738585072014e-324)a=n/5e-324,e(a>>>0,i,s+t),e((o<<31|a/4294967296)>>>0,i,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),a=n*Math.pow(2,-c),e(4503599627370496*a>>>0,i,s+t),e((o<<31|c+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}}function r(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+s;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,s,4,0),e.readDoubleLE=r.bind(null,o,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function i(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function s(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}r(3408),r(4590),e.exports=n(n)},6332:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1172:function(e,t){"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return r||(t=i(t)),n(t)?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},1168:function(e){"use strict";function t(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(r){if(r<1||r>i)return e(r);o+r>n&&(s=e(n),o=0);var a=t.call(s,o,o+=r);return 7&o&&(o=1+(7|o)),a}}e.exports=t},9561:function(e,t,r){"use strict";r(7658);var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){var n=r-t;if(n<1)return"";var i,s=null,o=[],a=0;while(t<r)i=e[t++],i<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))},n.write=function(e,t,r){for(var n,i,s=r,o=0;o<e.length;++o)n=e.charCodeAt(o),n<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(i=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}},2267:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0});var n=r(9763);function i(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}function s(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0}function o(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16}function a(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0}function c(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function u(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function l(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function h(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function d(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function f(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function p(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function y(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function g(e,t){void 0===t&&(t=0);var r=l(e,t),n=l(e,t+4);return 4294967296*r+n-4294967296*(n>>31)}function m(e,t){void 0===t&&(t=0);var r=h(e,t),n=h(e,t+4);return 4294967296*r+n}function w(e,t){void 0===t&&(t=0);var r=d(e,t),n=d(e,t+4);return 4294967296*n+r-4294967296*(r>>31)}function v(e,t){void 0===t&&(t=0);var r=f(e,t),n=f(e,t+4);return 4294967296*n+r}function b(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),p(e/4294967296>>>0,t,r),p(e>>>0,t,r+4),t}function E(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),y(e>>>0,t,r),y(e/4294967296>>>0,t,r+4),t}function _(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n}function A(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n}function S(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,o=e/8+i-1;o>=i;o--)r[o]=t/s&255,s*=256;return r}function k(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+e/8;o++)r[o]=t/s&255,s*=256;return r}function I(e,t){void 0===t&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}function T(e,t){void 0===t&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}function C(e,t){void 0===t&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}function R(e,t){void 0===t&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}function P(e,t,r){void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}function x(e,t,r){void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}function O(e,t,r){void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}function N(e,t,r){void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}t.readInt16BE=i,t.readUint16BE=s,t.readInt16LE=o,t.readUint16LE=a,t.writeUint16BE=c,t.writeInt16BE=c,t.writeUint16LE=u,t.writeInt16LE=u,t.readInt32BE=l,t.readUint32BE=h,t.readInt32LE=d,t.readUint32LE=f,t.writeUint32BE=p,t.writeInt32BE=p,t.writeUint32LE=y,t.writeInt32LE=y,t.readInt64BE=g,t.readUint64BE=m,t.readInt64LE=w,t.readUint64LE=v,t.writeUint64BE=b,t.writeInt64BE=b,t.writeUint64LE=E,t.writeInt64LE=E,t.readUintBE=_,t.readUintLE=A,t.writeUintBE=S,t.writeUintLE=k,t.readFloat32BE=I,t.readFloat32LE=T,t.readFloat64BE=C,t.readFloat64LE=R,t.writeFloat32BE=P,t.writeFloat32LE=x,t.writeFloat64BE=O,t.writeFloat64LE=N},3038:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0});var n=r(2267),i=r(5279),s=20;function o(e,t,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,u=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],f=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],y=r[27]<<24|r[26]<<16|r[25]<<8|r[24],g=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=t[3]<<24|t[2]<<16|t[1]<<8|t[0],w=t[7]<<24|t[6]<<16|t[5]<<8|t[4],v=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],E=i,_=o,A=a,S=c,k=u,I=l,T=h,C=d,R=f,P=p,x=y,O=g,N=m,D=w,B=v,L=b,M=0;M<s;M+=2)E=E+k|0,N^=E,N=N>>>16|N<<16,R=R+N|0,k^=R,k=k>>>20|k<<12,_=_+I|0,D^=_,D=D>>>16|D<<16,P=P+D|0,I^=P,I=I>>>20|I<<12,A=A+T|0,B^=A,B=B>>>16|B<<16,x=x+B|0,T^=x,T=T>>>20|T<<12,S=S+C|0,L^=S,L=L>>>16|L<<16,O=O+L|0,C^=O,C=C>>>20|C<<12,A=A+T|0,B^=A,B=B>>>24|B<<8,x=x+B|0,T^=x,T=T>>>25|T<<7,S=S+C|0,L^=S,L=L>>>24|L<<8,O=O+L|0,C^=O,C=C>>>25|C<<7,_=_+I|0,D^=_,D=D>>>24|D<<8,P=P+D|0,I^=P,I=I>>>25|I<<7,E=E+k|0,N^=E,N=N>>>24|N<<8,R=R+N|0,k^=R,k=k>>>25|k<<7,E=E+I|0,L^=E,L=L>>>16|L<<16,x=x+L|0,I^=x,I=I>>>20|I<<12,_=_+T|0,N^=_,N=N>>>16|N<<16,O=O+N|0,T^=O,T=T>>>20|T<<12,A=A+C|0,D^=A,D=D>>>16|D<<16,R=R+D|0,C^=R,C=C>>>20|C<<12,S=S+k|0,B^=S,B=B>>>16|B<<16,P=P+B|0,k^=P,k=k>>>20|k<<12,A=A+C|0,D^=A,D=D>>>24|D<<8,R=R+D|0,C^=R,C=C>>>25|C<<7,S=S+k|0,B^=S,B=B>>>24|B<<8,P=P+B|0,k^=P,k=k>>>25|k<<7,_=_+T|0,N^=_,N=N>>>24|N<<8,O=O+N|0,T^=O,T=T>>>25|T<<7,E=E+I|0,L^=E,L=L>>>24|L<<8,x=x+L|0,I^=x,I=I>>>25|I<<7;n.writeUint32LE(E+i|0,e,0),n.writeUint32LE(_+o|0,e,4),n.writeUint32LE(A+a|0,e,8),n.writeUint32LE(S+c|0,e,12),n.writeUint32LE(k+u|0,e,16),n.writeUint32LE(I+l|0,e,20),n.writeUint32LE(T+h|0,e,24),n.writeUint32LE(C+d|0,e,28),n.writeUint32LE(R+f|0,e,32),n.writeUint32LE(P+p|0,e,36),n.writeUint32LE(x+y|0,e,40),n.writeUint32LE(O+g|0,e,44),n.writeUint32LE(N+m|0,e,48),n.writeUint32LE(D+w|0,e,52),n.writeUint32LE(B+v|0,e,56),n.writeUint32LE(L+b|0,e,60)}function a(e,t,r,n,s){if(void 0===s&&(s=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,c;if(0===s){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),c=a.length-t.length,a.set(t,c)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=t,c=s}for(var l=new Uint8Array(64),h=0;h<r.length;h+=64){o(l,a,e);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^l[d-h];u(a,0,c)}return i.wipe(l),0===s&&i.wipe(a),n}function c(e,t,r,n){return void 0===n&&(n=0),i.wipe(r),a(e,t,r,r,n)}function u(e,t,r){var n=1;while(r--)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=a,t.stream=c},2130:function(e,t,r){"use strict";r(3408),r(4590);var n=r(3038),i=r(5910),s=r(5279),o=r(2267),a=r(4501);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),u=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,u=t.length+this.tagLength;if(i){if(i.length!==u)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(u);return n.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},e.prototype.open=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var u=new Uint8Array(this.tagLength);if(this._authenticate(u,c,t.subarray(0,t.length-this.tagLength),r),!a.equal(u,t.subarray(t.length-this.tagLength,t.length)))return null;var l,h=t.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");l=i}else l=new Uint8Array(h);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),l,4),s.wipe(o),l},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var a=new i.Poly1305(t);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var u=new Uint8Array(8);n&&o.writeUint64LE(n.length,u),a.update(u),o.writeUint64LE(r.length,u),a.update(u);for(var l=a.digest(),h=0;h<l.length;h++)e[h]=l[h];a.clean(),s.wipe(l),s.wipe(u)},e}();t.OK=u},4501:function(e,t){"use strict";function r(e,t,r){return~(e-1)&t|e-1&r}function n(e,t){return(0|e)-(0|t)-1>>>31&1}function i(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}function s(e,t){return 0!==e.length&&0!==t.length&&0!==i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.select=r,t.lessOrEqual=n,t.compare=i,t.equal=s},2270:function(e,t){"use strict";function r(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=r},6711:function(e,t,r){"use strict";r(3408),r(4590);var n=r(6702),i=r(5279),s=function(){function e(e,t,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},e}();t.t=s},6702:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0});var n=r(2270),i=r(4501),s=r(5279),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();function a(e,t,r){var n=new o(e,t);n.update(r);var i=n.digest();return n.clean(),i}t.HMAC=o,t.hmac=a,t.equal=i.equal},9763:function(e,t){"use strict";function r(e,t){var r=e>>>16&65535,n=65535&e,i=t>>>16&65535,s=65535&t;return n*s+(r*s+n*i<<16>>>0)|0}function n(e,t){return e+t|0}function i(e,t){return e-t|0}function s(e,t){return e<<t|e>>>32-t}function o(e,t){return e<<32-t|e>>>t}function a(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||r,t.add=n,t.sub=i,t.rotl=s,t.rotr=o,t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},5910:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0});var n=r(4501),i=r(5279);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=e[6]|e[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var u=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|u<<8),this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],u=this._h[5],l=this._h[6],h=this._h[7],d=this._h[8],f=this._h[9],p=this._r[0],y=this._r[1],g=this._r[2],m=this._r[3],w=this._r[4],v=this._r[5],b=this._r[6],E=this._r[7],_=this._r[8],A=this._r[9];while(r>=16){var S=e[t+0]|e[t+1]<<8;i+=8191&S;var k=e[t+2]|e[t+3]<<8;s+=8191&(S>>>13|k<<3);var I=e[t+4]|e[t+5]<<8;o+=8191&(k>>>10|I<<6);var T=e[t+6]|e[t+7]<<8;a+=8191&(I>>>7|T<<9);var C=e[t+8]|e[t+9]<<8;c+=8191&(T>>>4|C<<12),u+=C>>>1&8191;var R=e[t+10]|e[t+11]<<8;l+=8191&(C>>>14|R<<2);var P=e[t+12]|e[t+13]<<8;h+=8191&(R>>>11|P<<5);var x=e[t+14]|e[t+15]<<8;d+=8191&(P>>>8|x<<8),f+=x>>>5|n;var O=0,N=O;N+=i*p,N+=s*(5*A),N+=o*(5*_),N+=a*(5*E),N+=c*(5*b),O=N>>>13,N&=8191,N+=u*(5*v),N+=l*(5*w),N+=h*(5*m),N+=d*(5*g),N+=f*(5*y),O+=N>>>13,N&=8191;var D=O;D+=i*y,D+=s*p,D+=o*(5*A),D+=a*(5*_),D+=c*(5*E),O=D>>>13,D&=8191,D+=u*(5*b),D+=l*(5*v),D+=h*(5*w),D+=d*(5*m),D+=f*(5*g),O+=D>>>13,D&=8191;var B=O;B+=i*g,B+=s*y,B+=o*p,B+=a*(5*A),B+=c*(5*_),O=B>>>13,B&=8191,B+=u*(5*E),B+=l*(5*b),B+=h*(5*v),B+=d*(5*w),B+=f*(5*m),O+=B>>>13,B&=8191;var L=O;L+=i*m,L+=s*g,L+=o*y,L+=a*p,L+=c*(5*A),O=L>>>13,L&=8191,L+=u*(5*_),L+=l*(5*E),L+=h*(5*b),L+=d*(5*v),L+=f*(5*w),O+=L>>>13,L&=8191;var M=O;M+=i*w,M+=s*m,M+=o*g,M+=a*y,M+=c*p,O=M>>>13,M&=8191,M+=u*(5*A),M+=l*(5*_),M+=h*(5*E),M+=d*(5*b),M+=f*(5*v),O+=M>>>13,M&=8191;var U=O;U+=i*v,U+=s*w,U+=o*m,U+=a*g,U+=c*y,O=U>>>13,U&=8191,U+=u*p,U+=l*(5*A),U+=h*(5*_),U+=d*(5*E),U+=f*(5*b),O+=U>>>13,U&=8191;var F=O;F+=i*b,F+=s*v,F+=o*w,F+=a*m,F+=c*g,O=F>>>13,F&=8191,F+=u*y,F+=l*p,F+=h*(5*A),F+=d*(5*_),F+=f*(5*E),O+=F>>>13,F&=8191;var j=O;j+=i*E,j+=s*b,j+=o*v,j+=a*w,j+=c*m,O=j>>>13,j&=8191,j+=u*g,j+=l*y,j+=h*p,j+=d*(5*A),j+=f*(5*_),O+=j>>>13,j&=8191;var V=O;V+=i*_,V+=s*E,V+=o*b,V+=a*v,V+=c*w,O=V>>>13,V&=8191,V+=u*m,V+=l*g,V+=h*y,V+=d*p,V+=f*(5*A),O+=V>>>13,V&=8191;var z=O;z+=i*A,z+=s*_,z+=o*E,z+=a*b,z+=c*v,O=z>>>13,z&=8191,z+=u*w,z+=l*m,z+=h*g,z+=d*y,z+=f*p,O+=z>>>13,z&=8191,O=(O<<2)+O|0,O=O+N|0,N=8191&O,O>>>=13,D+=O,i=N,s=D,o=B,a=L,c=M,u=U,l=F,h=j,d=V,f=z,t+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=u,this._h[6]=l,this._h[7]=h,this._h[8]=d,this._h[9]=f},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){t=16-this._leftover,t>n&&(t=n);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[r+i];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=e[r+i];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();function o(e,t){var r=new s(e);r.update(t);var n=r.digest();return r.clean(),n}function a(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}t.Poly1305=s,t.oneTimeAuth=o,t.equal=a},1257:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=r(1299),i=r(2267),s=r(5279);function o(e,r=t.defaultRandomSource){return r.randomBytes(e)}function a(e=t.defaultRandomSource){const r=o(4,e),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=a;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(e,r=c,n=t.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const a=r.length,u=256-256%a;while(e>0){const t=o(Math.ceil(256*e/u),n);for(let n=0;n<t.length&&e>0;n++){const s=t[n];s<u&&(i+=r.charAt(s%a),e--)}(0,s.wipe)(t)}return i}function l(e,r=c,n=t.defaultRandomSource){const i=Math.ceil(e/(Math.log(r.length)/Math.LN2));return u(i,r,n)}t.randomString=u,t.randomStringForEntropy=l},169:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;const n=65536;class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!==typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=n)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,n)));return t}}t.BrowserRandomSource=i},9378:function(e,t,r){"use strict";r(3408),r(4590),Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const n=r(5279);class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=r(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let n=0;n<r.length;n++)r[n]=t[n];return(0,n.wipe)(t),r}}t.NodeRandomSource=i},1299:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const n=r(169),i=r(9378);class s{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}t.SystemRandomSource=s},4185:function(e,t,r){"use strict";r(3408),r(4590);var n=r(2267),i=r(5279);t.k=32,t.cn=64;var s=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){while(this._bufferLength<this.blockSize&&t>0)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);while(t>0)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,i,s){while(s>=64){for(var a=t[0],c=t[1],u=t[2],l=t[3],h=t[4],d=t[5],f=t[6],p=t[7],y=0;y<16;y++){var g=i+4*y;e[y]=n.readUint32BE(r,g)}for(y=16;y<64;y++){var m=e[y-2],w=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10;m=e[y-15];var v=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;e[y]=(w+e[y-7]|0)+(v+e[y-16]|0)}for(y=0;y<64;y++){w=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&f)|0)+(p+(o[y]+e[y]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&u^c&u)|0;p=f,f=d,d=h,h=l+w|0,l=u,u=c,c=a,a=w+v|0}t[0]+=a,t[1]+=c,t[2]+=u,t[3]+=l,t[4]+=h,t[5]+=d,t[6]+=f,t[7]+=p,i+=64,s-=64}return i}function c(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}t.vp=c},5279:function(e,t){"use strict";function r(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=r},2982:function(e,t,r){"use strict";r(3408),r(4590),t.gi=t.Au=t._w=t.KS=t.kz=void 0;const n=r(1257),i=r(5279);function s(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function u(e,t,r){const n=~(r-1);for(let i=0;i<16;i++){const r=n&(e[i]^t[i]);e[i]^=r,t[i]^=r}}function l(e,t){const r=s(),n=s();for(let i=0;i<16;i++)n[i]=t[i];c(n),c(n),c(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let t=1;t<15;t++)r[t]=n[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,u(n,r,1-e)}for(let i=0;i<16;i++)e[2*i]=255&n[i],e[2*i+1]=n[i]>>8}function h(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function d(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function f(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function p(e,t,r){let n,i,s=0,o=0,a=0,c=0,u=0,l=0,h=0,d=0,f=0,p=0,y=0,g=0,m=0,w=0,v=0,b=0,E=0,_=0,A=0,S=0,k=0,I=0,T=0,C=0,R=0,P=0,x=0,O=0,N=0,D=0,B=0,L=r[0],M=r[1],U=r[2],F=r[3],j=r[4],V=r[5],z=r[6],$=r[7],q=r[8],K=r[9],H=r[10],G=r[11],W=r[12],Q=r[13],Y=r[14],J=r[15];n=t[0],s+=n*L,o+=n*M,a+=n*U,c+=n*F,u+=n*j,l+=n*V,h+=n*z,d+=n*$,f+=n*q,p+=n*K,y+=n*H,g+=n*G,m+=n*W,w+=n*Q,v+=n*Y,b+=n*J,n=t[1],o+=n*L,a+=n*M,c+=n*U,u+=n*F,l+=n*j,h+=n*V,d+=n*z,f+=n*$,p+=n*q,y+=n*K,g+=n*H,m+=n*G,w+=n*W,v+=n*Q,b+=n*Y,E+=n*J,n=t[2],a+=n*L,c+=n*M,u+=n*U,l+=n*F,h+=n*j,d+=n*V,f+=n*z,p+=n*$,y+=n*q,g+=n*K,m+=n*H,w+=n*G,v+=n*W,b+=n*Q,E+=n*Y,_+=n*J,n=t[3],c+=n*L,u+=n*M,l+=n*U,h+=n*F,d+=n*j,f+=n*V,p+=n*z,y+=n*$,g+=n*q,m+=n*K,w+=n*H,v+=n*G,b+=n*W,E+=n*Q,_+=n*Y,A+=n*J,n=t[4],u+=n*L,l+=n*M,h+=n*U,d+=n*F,f+=n*j,p+=n*V,y+=n*z,g+=n*$,m+=n*q,w+=n*K,v+=n*H,b+=n*G,E+=n*W,_+=n*Q,A+=n*Y,S+=n*J,n=t[5],l+=n*L,h+=n*M,d+=n*U,f+=n*F,p+=n*j,y+=n*V,g+=n*z,m+=n*$,w+=n*q,v+=n*K,b+=n*H,E+=n*G,_+=n*W,A+=n*Q,S+=n*Y,k+=n*J,n=t[6],h+=n*L,d+=n*M,f+=n*U,p+=n*F,y+=n*j,g+=n*V,m+=n*z,w+=n*$,v+=n*q,b+=n*K,E+=n*H,_+=n*G,A+=n*W,S+=n*Q,k+=n*Y,I+=n*J,n=t[7],d+=n*L,f+=n*M,p+=n*U,y+=n*F,g+=n*j,m+=n*V,w+=n*z,v+=n*$,b+=n*q,E+=n*K,_+=n*H,A+=n*G,S+=n*W,k+=n*Q,I+=n*Y,T+=n*J,n=t[8],f+=n*L,p+=n*M,y+=n*U,g+=n*F,m+=n*j,w+=n*V,v+=n*z,b+=n*$,E+=n*q,_+=n*K,A+=n*H,S+=n*G,k+=n*W,I+=n*Q,T+=n*Y,C+=n*J,n=t[9],p+=n*L,y+=n*M,g+=n*U,m+=n*F,w+=n*j,v+=n*V,b+=n*z,E+=n*$,_+=n*q,A+=n*K,S+=n*H,k+=n*G,I+=n*W,T+=n*Q,C+=n*Y,R+=n*J,n=t[10],y+=n*L,g+=n*M,m+=n*U,w+=n*F,v+=n*j,b+=n*V,E+=n*z,_+=n*$,A+=n*q,S+=n*K,k+=n*H,I+=n*G,T+=n*W,C+=n*Q,R+=n*Y,P+=n*J,n=t[11],g+=n*L,m+=n*M,w+=n*U,v+=n*F,b+=n*j,E+=n*V,_+=n*z,A+=n*$,S+=n*q,k+=n*K,I+=n*H,T+=n*G,C+=n*W,R+=n*Q,P+=n*Y,x+=n*J,n=t[12],m+=n*L,w+=n*M,v+=n*U,b+=n*F,E+=n*j,_+=n*V,A+=n*z,S+=n*$,k+=n*q,I+=n*K,T+=n*H,C+=n*G,R+=n*W,P+=n*Q,x+=n*Y,O+=n*J,n=t[13],w+=n*L,v+=n*M,b+=n*U,E+=n*F,_+=n*j,A+=n*V,S+=n*z,k+=n*$,I+=n*q,T+=n*K,C+=n*H,R+=n*G,P+=n*W,x+=n*Q,O+=n*Y,N+=n*J,n=t[14],v+=n*L,b+=n*M,E+=n*U,_+=n*F,A+=n*j,S+=n*V,k+=n*z,I+=n*$,T+=n*q,C+=n*K,R+=n*H,P+=n*G,x+=n*W,O+=n*Q,N+=n*Y,D+=n*J,n=t[15],b+=n*L,E+=n*M,_+=n*U,A+=n*F,S+=n*j,k+=n*V,I+=n*z,T+=n*$,C+=n*q,R+=n*K,P+=n*H,x+=n*G,O+=n*W,N+=n*Q,D+=n*Y,B+=n*J,s+=38*E,o+=38*_,a+=38*A,c+=38*S,u+=38*k,l+=38*I,h+=38*T,d+=38*C,f+=38*R,p+=38*P,y+=38*x,g+=38*O,m+=38*N,w+=38*D,v+=38*B,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=h,e[7]=d,e[8]=f,e[9]=p,e[10]=y,e[11]=g,e[12]=m,e[13]=w,e[14]=v,e[15]=b}function y(e,t){p(e,t,t)}function g(e,t){const r=s();for(let n=0;n<16;n++)r[n]=t[n];for(let n=253;n>=0;n--)y(r,r),2!==n&&4!==n&&p(r,r,t);for(let n=0;n<16;n++)e[n]=r[n]}function m(e,t){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),c=s(),m=s(),w=s(),v=s();for(let s=0;s<31;s++)r[s]=e[s];r[31]=127&e[31]|64,r[0]&=248,h(n,t);for(let s=0;s<16;s++)o[s]=n[s];i[0]=m[0]=1;for(let s=254;s>=0;--s){const e=r[s>>>3]>>>(7&s)&1;u(i,o,e),u(c,m,e),d(w,i,c),f(i,i,c),d(c,o,m),f(o,o,m),y(m,w),y(v,i),p(i,c,i),p(c,o,w),d(w,i,c),f(i,i,c),y(o,i),f(c,m,v),p(i,c,a),d(i,i,m),p(c,c,i),p(i,m,v),p(m,o,n),y(o,w),u(i,o,e),u(c,m,e)}for(let s=0;s<16;s++)n[s+16]=i[s],n[s+32]=c[s],n[s+48]=o[s],n[s+64]=m[s];const b=n.subarray(32),E=n.subarray(16);g(b,b),p(E,E,b);const _=new Uint8Array(32);return l(_,E),_}function w(e){return m(e,o)}function v(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const r=new Uint8Array(e),n=w(r);return{publicKey:n,secretKey:r}}function b(e){const t=(0,n.randomBytes)(32,e),r=v(t);return(0,i.wipe)(t),r}function E(e,r,n=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");const i=m(e,r);if(n){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw new Error("X25519: invalid shared key")}return i}t._w=v,t.Au=b,t.gi=E},5670:function(e,t){"use strict";const r=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,n,i=0,s=0,o=0,a={};function c(t,n){return 1-r(-(t-n)/e)}return a.push=function(e,r){if(n){const a=c(e,n),u=r-t,l=a*u;t=a*r+(1-a)*t,i=(1-a)*(i+u*l),s=Math.sqrt(i),o=t+a*u}else t=r;n=e},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}},4870:function(e,t,r){"use strict";r.d(t,{B:function(){return o},BK:function(){return $e},Bj:function(){return s},Fl:function(){return We},IU:function(){return Re},Jd:function(){return S},OT:function(){return Ae},PG:function(){return ke},SU:function(){return je},Um:function(){return _e},Vh:function(){return Ke},WL:function(){return ze},X$:function(){return C},X3:function(){return Ce},XI:function(){return Me},Xl:function(){return Pe},dq:function(){return Be},iH:function(){return Le},j:function(){return I},lk:function(){return k},qj:function(){return Ee},qq:function(){return b},yT:function(){return Te}});r(7658);var n=r(7139);let i;class s{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&i&&(this.parent=i,this.index=(i.scopes||(i.scopes=[])).push(this)-1)}run(e){if(this.active){const t=i;try{return i=this,e()}finally{i=t}}else 0}on(){i=this}off(){i=this.parent}stop(e){if(this.active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function o(e){return new s(e)}function a(e,t=i){t&&t.active&&t.effects.push(e)}const c=e=>{const t=new Set(e);return t.w=0,t.n=0,t},u=e=>(e.w&y)>0,l=e=>(e.n&y)>0,h=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=y},d=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];u(i)&&!l(i)?i.delete(e):t[r++]=i,i.w&=~y,i.n&=~y}t.length=r}},f=new WeakMap;let p=0,y=1;const g=30;let m;const w=Symbol(""),v=Symbol("");class b{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,a(this,r)}run(){if(!this.active)return this.fn();let e=m,t=_;while(e){if(e===this)return;e=e.parent}try{return this.parent=m,m=this,_=!0,y=1<<++p,p<=g?h(this):E(this),this.fn()}finally{p<=g&&d(this),y=1<<--p,m=this.parent,_=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){m===this?this.deferStop=!0:this.active&&(E(this),this.onStop&&this.onStop(),this.active=!1)}}function E(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let _=!0;const A=[];function S(){A.push(_),_=!1}function k(){const e=A.pop();_=void 0===e||e}function I(e,t,r){if(_&&m){let t=f.get(e);t||f.set(e,t=new Map);let n=t.get(r);n||t.set(r,n=c());const i=void 0;T(n,i)}}function T(e,t){let r=!1;p<=g?l(e)||(e.n|=y,r=!u(e)):r=!e.has(m),r&&(e.add(m),m.deps.push(e))}function C(e,t,r,i,s,o){const a=f.get(e);if(!a)return;let u=[];if("clear"===t)u=[...a.values()];else if("length"===r&&(0,n.kJ)(e))a.forEach(((e,t)=>{("length"===t||t>=i)&&u.push(e)}));else switch(void 0!==r&&u.push(a.get(r)),t){case"add":(0,n.kJ)(e)?(0,n.S0)(r)&&u.push(a.get("length")):(u.push(a.get(w)),(0,n._N)(e)&&u.push(a.get(v)));break;case"delete":(0,n.kJ)(e)||(u.push(a.get(w)),(0,n._N)(e)&&u.push(a.get(v)));break;case"set":(0,n._N)(e)&&u.push(a.get(w));break}if(1===u.length)u[0]&&R(u[0]);else{const e=[];for(const t of u)t&&e.push(...t);R(c(e))}}function R(e,t){const r=(0,n.kJ)(e)?e:[...e];for(const n of r)n.computed&&P(n,t);for(const n of r)n.computed||P(n,t)}function P(e,t){(e!==m||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const x=(0,n.fY)("__proto__,__v_isRef,__isVue"),O=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(n.yk)),N=U(),D=U(!1,!0),B=U(!0),L=M();function M(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const r=Re(this);for(let t=0,i=this.length;t<i;t++)I(r,"get",t+"");const n=r[t](...e);return-1===n||!1===n?r[t](...e.map(Re)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){S();const r=Re(this)[t].apply(this,e);return k(),r}})),e}function U(e=!1,t=!1){return function(r,i,s){if("__v_isReactive"===i)return!e;if("__v_isReadonly"===i)return e;if("__v_isShallow"===i)return t;if("__v_raw"===i&&s===(e?t?we:me:t?ge:ye).get(r))return r;const o=(0,n.kJ)(r);if(!e&&o&&(0,n.RI)(L,i))return Reflect.get(L,i,s);const a=Reflect.get(r,i,s);return((0,n.yk)(i)?O.has(i):x(i))?a:(e||I(r,"get",i),t?a:Be(a)?o&&(0,n.S0)(i)?a:a.value:(0,n.Kn)(a)?e?Ae(a):Ee(a):a)}}const F=V(),j=V(!0);function V(e=!1){return function(t,r,i,s){let o=t[r];if(Ie(o)&&Be(o)&&!Be(i))return!1;if(!e&&(Te(i)||Ie(i)||(o=Re(o),i=Re(i)),!(0,n.kJ)(t)&&Be(o)&&!Be(i)))return o.value=i,!0;const a=(0,n.kJ)(t)&&(0,n.S0)(r)?Number(r)<t.length:(0,n.RI)(t,r),c=Reflect.set(t,r,i,s);return t===Re(s)&&(a?(0,n.aU)(i,o)&&C(t,"set",r,i,o):C(t,"add",r,i)),c}}function z(e,t){const r=(0,n.RI)(e,t),i=e[t],s=Reflect.deleteProperty(e,t);return s&&r&&C(e,"delete",t,void 0,i),s}function $(e,t){const r=Reflect.has(e,t);return(0,n.yk)(t)&&O.has(t)||I(e,"has",t),r}function q(e){return I(e,"iterate",(0,n.kJ)(e)?"length":w),Reflect.ownKeys(e)}const K={get:N,set:F,deleteProperty:z,has:$,ownKeys:q},H={get:B,set(e,t){return!0},deleteProperty(e,t){return!0}},G=(0,n.l7)({},K,{get:D,set:j}),W=e=>e,Q=e=>Reflect.getPrototypeOf(e);function Y(e,t,r=!1,n=!1){e=e["__v_raw"];const i=Re(e),s=Re(t);r||(t!==s&&I(i,"get",t),I(i,"get",s));const{has:o}=Q(i),a=n?W:r?Oe:xe;return o.call(i,t)?a(e.get(t)):o.call(i,s)?a(e.get(s)):void(e!==i&&e.get(t))}function J(e,t=!1){const r=this["__v_raw"],n=Re(r),i=Re(e);return t||(e!==i&&I(n,"has",e),I(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function X(e,t=!1){return e=e["__v_raw"],!t&&I(Re(e),"iterate",w),Reflect.get(e,"size",e)}function Z(e){e=Re(e);const t=Re(this),r=Q(t),n=r.has.call(t,e);return n||(t.add(e),C(t,"add",e,e)),this}function ee(e,t){t=Re(t);const r=Re(this),{has:i,get:s}=Q(r);let o=i.call(r,e);o||(e=Re(e),o=i.call(r,e));const a=s.call(r,e);return r.set(e,t),o?(0,n.aU)(t,a)&&C(r,"set",e,t,a):C(r,"add",e,t),this}function te(e){const t=Re(this),{has:r,get:n}=Q(t);let i=r.call(t,e);i||(e=Re(e),i=r.call(t,e));const s=n?n.call(t,e):void 0,o=t.delete(e);return i&&C(t,"delete",e,void 0,s),o}function re(){const e=Re(this),t=0!==e.size,r=void 0,n=e.clear();return t&&C(e,"clear",void 0,void 0,r),n}function ne(e,t){return function(r,n){const i=this,s=i["__v_raw"],o=Re(s),a=t?W:e?Oe:xe;return!e&&I(o,"iterate",w),s.forEach(((e,t)=>r.call(n,a(e),a(t),i)))}}function ie(e,t,r){return function(...i){const s=this["__v_raw"],o=Re(s),a=(0,n._N)(o),c="entries"===e||e===Symbol.iterator&&a,u="keys"===e&&a,l=s[e](...i),h=r?W:t?Oe:xe;return!t&&I(o,"iterate",u?v:w),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:c?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function se(e){return function(...t){return"delete"!==e&&this}}function oe(){const e={get(e){return Y(this,e)},get size(){return X(this)},has:J,add:Z,set:ee,delete:te,clear:re,forEach:ne(!1,!1)},t={get(e){return Y(this,e,!1,!0)},get size(){return X(this)},has:J,add:Z,set:ee,delete:te,clear:re,forEach:ne(!1,!0)},r={get(e){return Y(this,e,!0)},get size(){return X(this,!0)},has(e){return J.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:ne(!0,!1)},n={get(e){return Y(this,e,!0,!0)},get size(){return X(this,!0)},has(e){return J.call(this,e,!0)},add:se("add"),set:se("set"),delete:se("delete"),clear:se("clear"),forEach:ne(!0,!0)},i=["keys","values","entries",Symbol.iterator];return i.forEach((i=>{e[i]=ie(i,!1,!1),r[i]=ie(i,!0,!1),t[i]=ie(i,!1,!0),n[i]=ie(i,!0,!0)})),[e,r,t,n]}const[ae,ce,ue,le]=oe();function he(e,t){const r=t?e?le:ue:e?ce:ae;return(t,i,s)=>"__v_isReactive"===i?!e:"__v_isReadonly"===i?e:"__v_raw"===i?t:Reflect.get((0,n.RI)(r,i)&&i in t?r:t,i,s)}const de={get:he(!1,!1)},fe={get:he(!1,!0)},pe={get:he(!0,!1)};const ye=new WeakMap,ge=new WeakMap,me=new WeakMap,we=new WeakMap;function ve(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function be(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ve((0,n.W7)(e))}function Ee(e){return Ie(e)?e:Se(e,!1,K,de,ye)}function _e(e){return Se(e,!1,G,fe,ge)}function Ae(e){return Se(e,!0,H,pe,me)}function Se(e,t,r,i,s){if(!(0,n.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=s.get(e);if(o)return o;const a=be(e);if(0===a)return e;const c=new Proxy(e,2===a?i:r);return s.set(e,c),c}function ke(e){return Ie(e)?ke(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Ie(e){return!(!e||!e["__v_isReadonly"])}function Te(e){return!(!e||!e["__v_isShallow"])}function Ce(e){return ke(e)||Ie(e)}function Re(e){const t=e&&e["__v_raw"];return t?Re(t):e}function Pe(e){return(0,n.Nj)(e,"__v_skip",!0),e}const xe=e=>(0,n.Kn)(e)?Ee(e):e,Oe=e=>(0,n.Kn)(e)?Ae(e):e;function Ne(e){_&&m&&(e=Re(e),T(e.dep||(e.dep=c())))}function De(e,t){e=Re(e),e.dep&&R(e.dep)}function Be(e){return!(!e||!0!==e.__v_isRef)}function Le(e){return Ue(e,!1)}function Me(e){return Ue(e,!0)}function Ue(e,t){return Be(e)?e:new Fe(e,t)}class Fe{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Re(e),this._value=t?e:xe(e)}get value(){return Ne(this),this._value}set value(e){const t=this.__v_isShallow||Te(e)||Ie(e);e=t?e:Re(e),(0,n.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:xe(e),De(this,e))}}function je(e){return Be(e)?e.value:e}const Ve={get:(e,t,r)=>je(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return Be(i)&&!Be(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function ze(e){return ke(e)?e:new Proxy(e,Ve)}function $e(e){const t=(0,n.kJ)(e)?new Array(e.length):{};for(const r in e)t[r]=Ke(e,r);return t}class qe{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Ke(e,t,r){const n=e[t];return Be(n)?n:new qe(e,t,r)}var He;class Ge{constructor(e,t,r,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[He]=!1,this._dirty=!0,this.effect=new b(e,(()=>{this._dirty||(this._dirty=!0,De(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!n,this["__v_isReadonly"]=r}get value(){const e=Re(this);return Ne(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function We(e,t,r=!1){let i,s;const o=(0,n.mf)(e);o?(i=e,s=n.dG):(i=e.get,s=e.set);const a=new Ge(i,s,o||!s,r);return a}He="__v_isReadonly"},3396:function(e,t,r){"use strict";r.d(t,{$d:function(){return o},Ah:function(){return Ie},FN:function(){return fr},Fl:function(){return Rr},HY:function(){return Nt},JJ:function(){return q},Jd:function(){return ke},Ko:function(){return Ve},LL:function(){return Me},P$:function(){return re},Q2:function(){return Ue},Q6:function(){return ce},U2:function(){return ie},Uk:function(){return rr},Us:function(){return Tt},Wm:function(){return Xt},Y3:function(){return w},Y8:function(){return Z},YP:function(){return W},_:function(){return Jt},aZ:function(){return ue},bv:function(){return _e},dG:function(){return ar},dl:function(){return fe},f3:function(){return K},h:function(){return Pr},iD:function(){return qt},ic:function(){return Se},j4:function(){return Kt},kq:function(){return nr},m0:function(){return H},nK:function(){return ae},se:function(){return pe},up:function(){return Be},w5:function(){return B},wF:function(){return Ee},wg:function(){return Ft},wy:function(){return xe}});r(7658),r(541);var n=r(4870),i=r(7139);function s(e,t,r,n){let i;try{i=n?e(...n):e()}catch(s){a(s,t,r)}return i}function o(e,t,r,n){if((0,i.mf)(e)){const o=s(e,t,r,n);return o&&(0,i.tI)(o)&&o.catch((e=>{a(e,t,r)})),o}const c=[];for(let i=0;i<e.length;i++)c.push(o(e[i],t,r,n));return c}function a(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let n=t.parent;const i=t.proxy,o=r;while(n){const t=n.ec;if(t)for(let r=0;r<t.length;r++)if(!1===t[r](e,i,o))return;n=n.parent}const a=t.appContext.config.errorHandler;if(a)return void s(a,null,10,[e,i,o])}c(e,r,i,n)}function c(e,t,r,n=!0){console.error(e)}let u=!1,l=!1;const h=[];let d=0;const f=[];let p=null,y=0;const g=Promise.resolve();let m=null;function w(e){const t=m||g;return e?t.then(this?e.bind(this):e):t}function v(e){let t=d+1,r=h.length;while(t<r){const n=t+r>>>1,i=I(h[n]);i<e?t=n+1:r=n}return t}function b(e){h.length&&h.includes(e,u&&e.allowRecurse?d+1:d)||(null==e.id?h.push(e):h.splice(v(e.id),0,e),E())}function E(){u||l||(l=!0,m=g.then(C))}function _(e){const t=h.indexOf(e);t>d&&h.splice(t,1)}function A(e){(0,i.kJ)(e)?f.push(...e):p&&p.includes(e,e.allowRecurse?y+1:y)||f.push(e),E()}function S(e,t=(u?d+1:0)){for(0;t<h.length;t++){const e=h[t];e&&e.pre&&(h.splice(t,1),t--,e())}}function k(e){if(f.length){const e=[...new Set(f)];if(f.length=0,p)return void p.push(...e);for(p=e,p.sort(((e,t)=>I(e)-I(t))),y=0;y<p.length;y++)p[y]();p=null,y=0}}const I=e=>null==e.id?1/0:e.id,T=(e,t)=>{const r=I(e)-I(t);if(0===r){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function C(e){l=!1,u=!0,h.sort(T);i.dG;try{for(d=0;d<h.length;d++){const e=h[d];e&&!1!==e.active&&s(e,null,14)}}finally{d=0,h.length=0,k(e),u=!1,m=null,(h.length||f.length)&&C(e)}}new Set;new Map;function R(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||i.kT;let s=r;const a=t.startsWith("update:"),c=a&&t.slice(7);if(c&&c in n){const e=`${"modelValue"===c?"model":c}Modifiers`,{number:t,trim:o}=n[e]||i.kT;o&&(s=r.map((e=>e.trim()))),t&&(s=r.map(i.He))}let u;let l=n[u=(0,i.hR)(t)]||n[u=(0,i.hR)((0,i._A)(t))];!l&&a&&(l=n[u=(0,i.hR)((0,i.rs)(t))]),l&&o(l,e,6,s);const h=n[u+"Once"];if(h){if(e.emitted){if(e.emitted[u])return}else e.emitted={};e.emitted[u]=!0,o(h,e,6,s)}}function P(e,t,r=!1){const n=t.emitsCache,s=n.get(e);if(void 0!==s)return s;const o=e.emits;let a={},c=!1;if(!(0,i.mf)(e)){const n=e=>{const r=P(e,t,!0);r&&(c=!0,(0,i.l7)(a,r))};!r&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return o||c?((0,i.kJ)(o)?o.forEach((e=>a[e]=null)):(0,i.l7)(a,o),(0,i.Kn)(e)&&n.set(e,a),a):((0,i.Kn)(e)&&n.set(e,null),null)}function x(e,t){return!(!e||!(0,i.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,i.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,i.RI)(e,(0,i.rs)(t))||(0,i.RI)(e,t))}let O=null,N=null;function D(e){const t=O;return O=e,N=e&&e.type.__scopeId||null,t}function B(e,t=O,r){if(!t)return e;if(e._n)return e;const n=(...r)=>{n._d&&zt(-1);const i=D(t),s=e(...r);return D(i),n._d&&zt(1),s};return n._n=!0,n._c=!0,n._d=!0,n}function L(e){const{type:t,vnode:r,proxy:n,withProxy:s,props:o,propsOptions:[c],slots:u,attrs:l,emit:h,render:d,renderCache:f,data:p,setupState:y,ctx:g,inheritAttrs:m}=e;let w,v;const b=D(e);try{if(4&r.shapeFlag){const e=s||n;w=ir(d.call(e,e,f,o,y,p,g)),v=l}else{const e=t;0,w=ir(e.length>1?e(o,{attrs:l,slots:u,emit:h}):e(o,null)),v=t.props?l:M(l)}}catch(_){Mt.length=0,a(_,e,1),w=Xt(Bt)}let E=w;if(v&&!1!==m){const e=Object.keys(v),{shapeFlag:t}=E;e.length&&7&t&&(c&&e.some(i.tR)&&(v=U(v,c)),E=tr(E,v))}return r.dirs&&(E=tr(E),E.dirs=E.dirs?E.dirs.concat(r.dirs):r.dirs),r.transition&&(E.transition=r.transition),w=E,D(b),w}const M=e=>{let t;for(const r in e)("class"===r||"style"===r||(0,i.F7)(r))&&((t||(t={}))[r]=e[r]);return t},U=(e,t)=>{const r={};for(const n in e)(0,i.tR)(n)&&n.slice(9)in t||(r[n]=e[n]);return r};function F(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:c}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(!(r&&c>=0))return!(!i&&!a||a&&a.$stable)||n!==o&&(n?!o||j(n,o,u):!!o);if(1024&c)return!0;if(16&c)return n?j(n,o,u):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t];if(o[r]!==n[r]&&!x(u,r))return!0}}return!1}function j(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!x(r,s))return!0}return!1}function V({vnode:e,parent:t},r){while(t&&t.subTree===e)(e=t.vnode).el=r,t=t.parent}const z=e=>e.__isSuspense;function $(e,t){t&&t.pendingBranch?(0,i.kJ)(e)?t.effects.push(...e):t.effects.push(e):A(e)}function q(e,t){if(dr){let r=dr.provides;const n=dr.parent&&dr.parent.provides;n===r&&(r=dr.provides=Object.create(n)),r[e]=t}else 0}function K(e,t,r=!1){const n=dr||O;if(n){const s=null==n.parent?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(s&&e in s)return s[e];if(arguments.length>1)return r&&(0,i.mf)(t)?t.call(n.proxy):t}else 0}function H(e,t){return Q(e,null,t)}const G={};function W(e,t,r){return Q(e,t,r)}function Q(e,t,{immediate:r,deep:a,flush:c,onTrack:u,onTrigger:l}=i.kT){const h=dr;let d,f,p=!1,y=!1;if((0,n.dq)(e)?(d=()=>e.value,p=(0,n.yT)(e)):(0,n.PG)(e)?(d=()=>e,a=!0):(0,i.kJ)(e)?(y=!0,p=e.some((e=>(0,n.PG)(e)||(0,n.yT)(e))),d=()=>e.map((e=>(0,n.dq)(e)?e.value:(0,n.PG)(e)?X(e):(0,i.mf)(e)?s(e,h,2):void 0))):d=(0,i.mf)(e)?t?()=>s(e,h,2):()=>{if(!h||!h.isUnmounted)return f&&f(),o(e,h,3,[g])}:i.dG,t&&a){const e=d;d=()=>X(e())}let g=e=>{f=E.onStop=()=>{s(e,h,4)}};if(vr)return g=i.dG,t?r&&o(t,h,3,[d(),y?[]:void 0,g]):d(),i.dG;let m=y?[]:G;const w=()=>{if(E.active)if(t){const e=E.run();(a||p||(y?e.some(((e,t)=>(0,i.aU)(e,m[t]))):(0,i.aU)(e,m)))&&(f&&f(),o(t,h,3,[e,m===G?void 0:m,g]),m=e)}else E.run()};let v;w.allowRecurse=!!t,"sync"===c?v=w:"post"===c?v=()=>It(w,h&&h.suspense):(w.pre=!0,h&&(w.id=h.uid),v=()=>b(w));const E=new n.qq(d,v);return t?r?w():m=E.run():"post"===c?It(E.run.bind(E),h&&h.suspense):E.run(),()=>{E.stop(),h&&h.scope&&(0,i.Od)(h.scope.effects,E)}}function Y(e,t,r){const n=this.proxy,s=(0,i.HD)(e)?e.includes(".")?J(n,e):()=>n[e]:e.bind(n,n);let o;(0,i.mf)(t)?o=t:(o=t.handler,r=t);const a=dr;pr(this);const c=Q(s,o.bind(n),r);return a?pr(a):yr(),c}function J(e,t){const r=t.split(".");return()=>{let t=e;for(let e=0;e<r.length&&t;e++)t=t[r[e]];return t}}function X(e,t){if(!(0,i.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,n.dq)(e))X(e.value,t);else if((0,i.kJ)(e))for(let r=0;r<e.length;r++)X(e[r],t);else if((0,i.DM)(e)||(0,i._N)(e))e.forEach((e=>{X(e,t)}));else if((0,i.PO)(e))for(const r in e)X(e[r],t);return e}function Z(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _e((()=>{e.isMounted=!0})),ke((()=>{e.isUnmounting=!0})),e}const ee=[Function,Array],te={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ee,onEnter:ee,onAfterEnter:ee,onEnterCancelled:ee,onBeforeLeave:ee,onLeave:ee,onAfterLeave:ee,onLeaveCancelled:ee,onBeforeAppear:ee,onAppear:ee,onAfterAppear:ee,onAppearCancelled:ee},setup(e,{slots:t}){const r=fr(),i=Z();let s;return()=>{const o=t.default&&ce(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let e=!1;for(const t of o)if(t.type!==Bt){0,a=t,e=!0;break}}const c=(0,n.IU)(e),{mode:u}=c;if(i.isLeaving)return se(a);const l=oe(a);if(!l)return se(a);const h=ie(l,c,i,r);ae(l,h);const d=r.subTree,f=d&&oe(d);let p=!1;const{getTransitionKey:y}=l.type;if(y){const e=y();void 0===s?s=e:e!==s&&(s=e,p=!0)}if(f&&f.type!==Bt&&(!Gt(l,f)||p)){const e=ie(f,c,i,r);if(ae(f,e),"out-in"===u)return i.isLeaving=!0,e.afterLeave=()=>{i.isLeaving=!1,r.update()},se(a);"in-out"===u&&l.type!==Bt&&(e.delayLeave=(e,t,r)=>{const n=ne(i,f);n[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=r})}return a}}},re=te;function ne(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function ie(e,t,r,n){const{appear:s,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:y,onLeaveCancelled:g,onBeforeAppear:m,onAppear:w,onAfterAppear:v,onAppearCancelled:b}=t,E=String(e.key),_=ne(r,e),A=(e,t)=>{e&&o(e,n,9,t)},S=(e,t)=>{const r=t[1];A(e,t),(0,i.kJ)(e)?e.every((e=>e.length<=1))&&r():e.length<=1&&r()},k={mode:a,persisted:c,beforeEnter(t){let n=u;if(!r.isMounted){if(!s)return;n=m||u}t._leaveCb&&t._leaveCb(!0);const i=_[E];i&&Gt(e,i)&&i.el._leaveCb&&i.el._leaveCb(),A(n,[t])},enter(e){let t=l,n=h,i=d;if(!r.isMounted){if(!s)return;t=w||l,n=v||h,i=b||d}let o=!1;const a=e._enterCb=t=>{o||(o=!0,A(t?i:n,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?S(t,[e,a]):a()},leave(t,n){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),r.isUnmounting)return n();A(f,[t]);let s=!1;const o=t._leaveCb=r=>{s||(s=!0,n(),A(r?g:y,[t]),t._leaveCb=void 0,_[i]===e&&delete _[i])};_[i]=e,p?S(p,[t,o]):o()},clone(e){return ie(e,t,r,n)}};return k}function se(e){if(he(e))return e=tr(e),e.children=null,e}function oe(e){return he(e)?e.children?e.children[0]:void 0:e}function ae(e,t){6&e.shapeFlag&&e.component?ae(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ce(e,t=!1,r){let n=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=null==r?o.key:String(r)+String(null!=o.key?o.key:s);o.type===Nt?(128&o.patchFlag&&i++,n=n.concat(ce(o.children,t,a))):(t||o.type!==Bt)&&n.push(null!=a?tr(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function ue(e){return(0,i.mf)(e)?{setup:e,name:e.name}:e}const le=e=>!!e.type.__asyncLoader;const he=e=>e.type.__isKeepAlive;RegExp,RegExp;function de(e,t){return(0,i.kJ)(e)?e.some((e=>de(e,t))):(0,i.HD)(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function fe(e,t){ye(e,"a",t)}function pe(e,t){ye(e,"da",t)}function ye(e,t,r=dr){const n=e.__wdc||(e.__wdc=()=>{let t=r;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(ve(t,n,r),r){let e=r.parent;while(e&&e.parent)he(e.parent.vnode)&&ge(n,t,r,e),e=e.parent}}function ge(e,t,r,n){const s=ve(t,e,n,!0);Ie((()=>{(0,i.Od)(n[t],s)}),r)}function me(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function we(e){return 128&e.shapeFlag?e.ssContent:e}function ve(e,t,r=dr,i=!1){if(r){const s=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...i)=>{if(r.isUnmounted)return;(0,n.Jd)(),pr(r);const s=o(t,r,e,i);return yr(),(0,n.lk)(),s});return i?s.unshift(a):s.push(a),a}}const be=e=>(t,r=dr)=>(!vr||"sp"===e)&&ve(e,((...e)=>t(...e)),r),Ee=be("bm"),_e=be("m"),Ae=be("bu"),Se=be("u"),ke=be("bum"),Ie=be("um"),Te=be("sp"),Ce=be("rtg"),Re=be("rtc");function Pe(e,t=dr){ve("ec",e,t)}function xe(e,t){const r=O;if(null===r)return e;const n=Ir(r)||r.proxy,s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,r,a,c=i.kT]=t[o];(0,i.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&X(r),s.push({dir:e,instance:n,value:r,oldValue:void 0,arg:a,modifiers:c})}return e}function Oe(e,t,r,i){const s=e.dirs,a=t&&t.dirs;for(let c=0;c<s.length;c++){const u=s[c];a&&(u.oldValue=a[c].value);let l=u.dir[i];l&&((0,n.Jd)(),o(l,r,8,[e.el,u,e,t]),(0,n.lk)())}}const Ne="components",De="directives";function Be(e,t){return Fe(Ne,e,!0,t)||e}const Le=Symbol();function Me(e){return(0,i.HD)(e)?Fe(Ne,e,!1)||e:e||Le}function Ue(e){return Fe(De,e)}function Fe(e,t,r=!0,n=!1){const s=O||dr;if(s){const r=s.type;if(e===Ne){const e=Tr(r,!1);if(e&&(e===t||e===(0,i._A)(t)||e===(0,i.kC)((0,i._A)(t))))return r}const o=je(s[e]||r[e],t)||je(s.appContext[e],t);return!o&&n?r:o}}function je(e,t){return e&&(e[t]||e[(0,i._A)(t)]||e[(0,i.kC)((0,i._A)(t))])}function Ve(e,t,r,n){let s;const o=r&&r[n];if((0,i.kJ)(e)||(0,i.HD)(e)){s=new Array(e.length);for(let r=0,n=e.length;r<n;r++)s[r]=t(e[r],r,void 0,o&&o[r])}else if("number"===typeof e){0,s=new Array(e);for(let r=0;r<e;r++)s[r]=t(r+1,r,void 0,o&&o[r])}else if((0,i.Kn)(e))if(e[Symbol.iterator])s=Array.from(e,((e,r)=>t(e,r,void 0,o&&o[r])));else{const r=Object.keys(e);s=new Array(r.length);for(let n=0,i=r.length;n<i;n++){const i=r[n];s[n]=t(e[i],i,n,o&&o[n])}}else s=[];return r&&(r[n]=s),s}const ze=e=>e?gr(e)?Ir(e)||e.proxy:ze(e.parent):null,$e=(0,i.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ze(e.parent),$root:e=>ze(e.root),$emit:e=>e.emit,$options:e=>Ye(e),$forceUpdate:e=>e.f||(e.f=()=>b(e.update)),$nextTick:e=>e.n||(e.n=w.bind(e.proxy)),$watch:e=>Y.bind(e)}),qe={get({_:e},t){const{ctx:r,setupState:s,data:o,props:a,accessCache:c,type:u,appContext:l}=e;let h;if("$"!==t[0]){const n=c[t];if(void 0!==n)switch(n){case 1:return s[t];case 2:return o[t];case 4:return r[t];case 3:return a[t]}else{if(s!==i.kT&&(0,i.RI)(s,t))return c[t]=1,s[t];if(o!==i.kT&&(0,i.RI)(o,t))return c[t]=2,o[t];if((h=e.propsOptions[0])&&(0,i.RI)(h,t))return c[t]=3,a[t];if(r!==i.kT&&(0,i.RI)(r,t))return c[t]=4,r[t];Ke&&(c[t]=0)}}const d=$e[t];let f,p;return d?("$attrs"===t&&(0,n.j)(e,"get",t),d(e)):(f=u.__cssModules)&&(f=f[t])?f:r!==i.kT&&(0,i.RI)(r,t)?(c[t]=4,r[t]):(p=l.config.globalProperties,(0,i.RI)(p,t)?p[t]:void 0)},set({_:e},t,r){const{data:n,setupState:s,ctx:o}=e;return s!==i.kT&&(0,i.RI)(s,t)?(s[t]=r,!0):n!==i.kT&&(0,i.RI)(n,t)?(n[t]=r,!0):!(0,i.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=r,!0))},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:s,propsOptions:o}},a){let c;return!!r[a]||e!==i.kT&&(0,i.RI)(e,a)||t!==i.kT&&(0,i.RI)(t,a)||(c=o[0])&&(0,i.RI)(c,a)||(0,i.RI)(n,a)||(0,i.RI)($e,a)||(0,i.RI)(s.config.globalProperties,a)},defineProperty(e,t,r){return null!=r.get?e._.accessCache[t]=0:(0,i.RI)(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let Ke=!0;function He(e){const t=Ye(e),r=e.proxy,s=e.ctx;Ke=!1,t.beforeCreate&&We(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:l,inject:h,created:d,beforeMount:f,mounted:p,beforeUpdate:y,updated:g,activated:m,deactivated:w,beforeDestroy:v,beforeUnmount:b,destroyed:E,unmounted:_,render:A,renderTracked:S,renderTriggered:k,errorCaptured:I,serverPrefetch:T,expose:C,inheritAttrs:R,components:P,directives:x,filters:O}=t,N=null;if(h&&Ge(h,s,N,e.appContext.config.unwrapInjectedRef),c)for(const n in c){const e=c[n];(0,i.mf)(e)&&(s[n]=e.bind(r))}if(o){0;const t=o.call(r,r);0,(0,i.Kn)(t)&&(e.data=(0,n.qj)(t))}if(Ke=!0,a)for(const n in a){const e=a[n],t=(0,i.mf)(e)?e.bind(r,r):(0,i.mf)(e.get)?e.get.bind(r,r):i.dG;0;const o=!(0,i.mf)(e)&&(0,i.mf)(e.set)?e.set.bind(r):i.dG,c=Rr({get:t,set:o});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>c.value,set:e=>c.value=e})}if(u)for(const n in u)Qe(u[n],s,r,n);if(l){const e=(0,i.mf)(l)?l.call(r):l;Reflect.ownKeys(e).forEach((t=>{q(t,e[t])}))}function D(e,t){(0,i.kJ)(t)?t.forEach((t=>e(t.bind(r)))):t&&e(t.bind(r))}if(d&&We(d,e,"c"),D(Ee,f),D(_e,p),D(Ae,y),D(Se,g),D(fe,m),D(pe,w),D(Pe,I),D(Re,S),D(Ce,k),D(ke,b),D(Ie,_),D(Te,T),(0,i.kJ)(C))if(C.length){const t=e.exposed||(e.exposed={});C.forEach((e=>{Object.defineProperty(t,e,{get:()=>r[e],set:t=>r[e]=t})}))}else e.exposed||(e.exposed={});A&&e.render===i.dG&&(e.render=A),null!=R&&(e.inheritAttrs=R),P&&(e.components=P),x&&(e.directives=x)}function Ge(e,t,r=i.dG,s=!1){(0,i.kJ)(e)&&(e=tt(e));for(const o in e){const r=e[o];let a;a=(0,i.Kn)(r)?"default"in r?K(r.from||o,r.default,!0):K(r.from||o):K(r),(0,n.dq)(a)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[o]=a}}function We(e,t,r){o((0,i.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,r)}function Qe(e,t,r,n){const s=n.includes(".")?J(r,n):()=>r[n];if((0,i.HD)(e)){const r=t[e];(0,i.mf)(r)&&W(s,r)}else if((0,i.mf)(e))W(s,e.bind(r));else if((0,i.Kn)(e))if((0,i.kJ)(e))e.forEach((e=>Qe(e,t,r,n)));else{const n=(0,i.mf)(e.handler)?e.handler.bind(r):t[e.handler];(0,i.mf)(n)&&W(s,n,e)}else 0}function Ye(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,c=o.get(t);let u;return c?u=c:s.length||r||n?(u={},s.length&&s.forEach((e=>Je(u,e,a,!0))),Je(u,t,a)):u=t,(0,i.Kn)(t)&&o.set(t,u),u}function Je(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&Je(e,s,r,!0),i&&i.forEach((t=>Je(e,t,r,!0)));for(const o in t)if(n&&"expose"===o);else{const n=Xe[o]||r&&r[o];e[o]=n?n(e[o],t[o]):t[o]}return e}const Xe={data:Ze,props:nt,emits:nt,methods:nt,computed:nt,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:nt,directives:nt,watch:it,provide:Ze,inject:et};function Ze(e,t){return t?e?function(){return(0,i.l7)((0,i.mf)(e)?e.call(this,this):e,(0,i.mf)(t)?t.call(this,this):t)}:t:e}function et(e,t){return nt(tt(e),tt(t))}function tt(e){if((0,i.kJ)(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function nt(e,t){return e?(0,i.l7)((0,i.l7)(Object.create(null),e),t):t}function it(e,t){if(!e)return t;if(!t)return e;const r=(0,i.l7)(Object.create(null),e);for(const n in t)r[n]=rt(e[n],t[n]);return r}function st(e,t,r,s=!1){const o={},a={};(0,i.Nj)(a,Wt,1),e.propsDefaults=Object.create(null),at(e,t,o,a);for(const n in e.propsOptions[0])n in o||(o[n]=void 0);r?e.props=s?o:(0,n.Um)(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function ot(e,t,r,s){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=(0,n.IU)(o),[l]=e.propsOptions;let h=!1;if(!(s||c>0)||16&c){let n;at(e,t,o,a)&&(h=!0);for(const s in u)t&&((0,i.RI)(t,s)||(n=(0,i.rs)(s))!==s&&(0,i.RI)(t,n))||(l?!r||void 0===r[s]&&void 0===r[n]||(o[s]=ct(l,u,s,void 0,e,!0)):delete o[s]);if(a!==u)for(const e in a)t&&(0,i.RI)(t,e)||(delete a[e],h=!0)}else if(8&c){const r=e.vnode.dynamicProps;for(let n=0;n<r.length;n++){let s=r[n];if(x(e.emitsOptions,s))continue;const c=t[s];if(l)if((0,i.RI)(a,s))c!==a[s]&&(a[s]=c,h=!0);else{const t=(0,i._A)(s);o[t]=ct(l,u,t,c,e,!1)}else c!==a[s]&&(a[s]=c,h=!0)}}h&&(0,n.X$)(e,"set","$attrs")}function at(e,t,r,s){const[o,a]=e.propsOptions;let c,u=!1;if(t)for(let n in t){if((0,i.Gg)(n))continue;const l=t[n];let h;o&&(0,i.RI)(o,h=(0,i._A)(n))?a&&a.includes(h)?(c||(c={}))[h]=l:r[h]=l:x(e.emitsOptions,n)||n in s&&l===s[n]||(s[n]=l,u=!0)}if(a){const t=(0,n.IU)(r),s=c||i.kT;for(let n=0;n<a.length;n++){const c=a[n];r[c]=ct(o,t,c,s[c],e,!(0,i.RI)(s,c))}}return u}function ct(e,t,r,n,s,o){const a=e[r];if(null!=a){const e=(0,i.RI)(a,"default");if(e&&void 0===n){const e=a.default;if(a.type!==Function&&(0,i.mf)(e)){const{propsDefaults:i}=s;r in i?n=i[r]:(pr(s),n=i[r]=e.call(null,t),yr())}else n=e}a[0]&&(o&&!e?n=!1:!a[1]||""!==n&&n!==(0,i.rs)(r)||(n=!0))}return n}function ut(e,t,r=!1){const n=t.propsCache,s=n.get(e);if(s)return s;const o=e.props,a={},c=[];let u=!1;if(!(0,i.mf)(e)){const n=e=>{u=!0;const[r,n]=ut(e,t,!0);(0,i.l7)(a,r),n&&c.push(...n)};!r&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}if(!o&&!u)return(0,i.Kn)(e)&&n.set(e,i.Z6),i.Z6;if((0,i.kJ)(o))for(let h=0;h<o.length;h++){0;const e=(0,i._A)(o[h]);lt(e)&&(a[e]=i.kT)}else if(o){0;for(const e in o){const t=(0,i._A)(e);if(lt(t)){const r=o[e],n=a[t]=(0,i.kJ)(r)||(0,i.mf)(r)?{type:r}:r;if(n){const e=ft(Boolean,n.type),r=ft(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||(0,i.RI)(n,"default"))&&c.push(t)}}}}const l=[a,c];return(0,i.Kn)(e)&&n.set(e,l),l}function lt(e){return"$"!==e[0]}function ht(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function dt(e,t){return ht(e)===ht(t)}function ft(e,t){return(0,i.kJ)(t)?t.findIndex((t=>dt(t,e))):(0,i.mf)(t)&&dt(t,e)?0:-1}const pt=e=>"_"===e[0]||"$stable"===e,yt=e=>(0,i.kJ)(e)?e.map(ir):[ir(e)],gt=(e,t,r)=>{if(t._n)return t;const n=B(((...e)=>yt(t(...e))),r);return n._c=!1,n},mt=(e,t,r)=>{const n=e._ctx;for(const s in e){if(pt(s))continue;const r=e[s];if((0,i.mf)(r))t[s]=gt(s,r,n);else if(null!=r){0;const e=yt(r);t[s]=()=>e}}},wt=(e,t)=>{const r=yt(t);e.slots.default=()=>r},vt=(e,t)=>{if(32&e.vnode.shapeFlag){const r=t._;r?(e.slots=(0,n.IU)(t),(0,i.Nj)(t,"_",r)):mt(t,e.slots={})}else e.slots={},t&&wt(e,t);(0,i.Nj)(e.slots,Wt,1)},bt=(e,t,r)=>{const{vnode:n,slots:s}=e;let o=!0,a=i.kT;if(32&n.shapeFlag){const e=t._;e?r&&1===e?o=!1:((0,i.l7)(s,t),r||1!==e||delete s._):(o=!t.$stable,mt(t,s)),a=t}else t&&(wt(e,t),a={default:1});if(o)for(const i in s)pt(i)||i in a||delete s[i]};function Et(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _t=0;function At(e,t){return function(r,n=null){(0,i.mf)(r)||(r=Object.assign({},r)),null==n||(0,i.Kn)(n)||(n=null);const s=Et(),o=new Set;let a=!1;const c=s.app={_uid:_t++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:xr,get config(){return s.config},set config(e){0},use(e,...t){return o.has(e)||(e&&(0,i.mf)(e.install)?(o.add(e),e.install(c,...t)):(0,i.mf)(e)&&(o.add(e),e(c,...t))),c},mixin(e){return s.mixins.includes(e)||s.mixins.push(e),c},component(e,t){return t?(s.components[e]=t,c):s.components[e]},directive(e,t){return t?(s.directives[e]=t,c):s.directives[e]},mount(i,o,u){if(!a){0;const l=Xt(r,n);return l.appContext=s,o&&t?t(l,i):e(l,i,u),a=!0,c._container=i,i.__vue_app__=c,Ir(l.component)||l.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return s.provides[e]=t,c}};return c}}function St(e,t,r,o,a=!1){if((0,i.kJ)(e))return void e.forEach(((e,n)=>St(e,t&&((0,i.kJ)(t)?t[n]:t),r,o,a)));if(le(o)&&!a)return;const c=4&o.shapeFlag?Ir(o.component)||o.component.proxy:o.el,u=a?null:c,{i:l,r:h}=e;const d=t&&t.r,f=l.refs===i.kT?l.refs={}:l.refs,p=l.setupState;if(null!=d&&d!==h&&((0,i.HD)(d)?(f[d]=null,(0,i.RI)(p,d)&&(p[d]=null)):(0,n.dq)(d)&&(d.value=null)),(0,i.mf)(h))s(h,l,12,[u,f]);else{const t=(0,i.HD)(h),s=(0,n.dq)(h);if(t||s){const n=()=>{if(e.f){const r=t?f[h]:h.value;a?(0,i.kJ)(r)&&(0,i.Od)(r,c):(0,i.kJ)(r)?r.includes(c)||r.push(c):t?(f[h]=[c],(0,i.RI)(p,h)&&(p[h]=f[h])):(h.value=[c],e.k&&(f[e.k]=h.value))}else t?(f[h]=u,(0,i.RI)(p,h)&&(p[h]=u)):s&&(h.value=u,e.k&&(f[e.k]=u))};u?(n.id=-1,It(n,r)):n()}else 0}}function kt(){}const It=$;function Tt(e){return Ct(e)}function Ct(e,t){kt();const r=(0,i.E9)();r.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:c,createText:u,createComment:l,setText:h,setElementText:d,parentNode:f,nextSibling:p,setScopeId:y=i.dG,insertStaticContent:g}=e,m=(e,t,r,n=null,i=null,s=null,o=!1,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!Gt(e,t)&&(n=X(e),G(e,i,s,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:u,ref:l,shapeFlag:h}=t;switch(u){case Dt:w(e,t,r,n);break;case Bt:v(e,t,r,n);break;case Lt:null==e&&E(t,r,n,o);break;case Nt:D(e,t,r,n,i,s,o,a,c);break;default:1&h?T(e,t,r,n,i,s,o,a,c):6&h?B(e,t,r,n,i,s,o,a,c):(64&h||128&h)&&u.process(e,t,r,n,i,s,o,a,c,ee)}null!=l&&i&&St(l,e&&e.ref,s,t||e,!t)},w=(e,t,r,n)=>{if(null==e)s(t.el=u(t.children),r,n);else{const r=t.el=e.el;t.children!==e.children&&h(r,t.children)}},v=(e,t,r,n)=>{null==e?s(t.el=l(t.children||""),r,n):t.el=e.el},E=(e,t,r,n)=>{[e.el,e.anchor]=g(e.children,t,r,n,e.el,e.anchor)},A=({el:e,anchor:t},r,n)=>{let i;while(e&&e!==t)i=p(e),s(e,r,n),e=i;s(t,r,n)},I=({el:e,anchor:t})=>{let r;while(e&&e!==t)r=p(e),o(e),e=r;o(t)},T=(e,t,r,n,i,s,o,a,c)=>{o=o||"svg"===t.type,null==e?C(t,r,n,i,s,o,a,c):x(e,t,i,s,o,a,c)},C=(e,t,r,n,o,u,l,h)=>{let f,p;const{type:y,props:g,shapeFlag:m,transition:w,dirs:v}=e;if(f=e.el=c(e.type,u,g&&g.is,g),8&m?d(f,e.children):16&m&&P(e.children,f,null,n,o,u&&"foreignObject"!==y,l,h),v&&Oe(e,null,n,"created"),g){for(const t in g)"value"===t||(0,i.Gg)(t)||a(f,t,null,g[t],u,e.children,n,o,J);"value"in g&&a(f,"value",null,g.value),(p=g.onVnodeBeforeMount)&&cr(p,n,e)}R(f,e,e.scopeId,l,n),v&&Oe(e,null,n,"beforeMount");const b=(!o||o&&!o.pendingBranch)&&w&&!w.persisted;b&&w.beforeEnter(f),s(f,t,r),((p=g&&g.onVnodeMounted)||b||v)&&It((()=>{p&&cr(p,n,e),b&&w.enter(f),v&&Oe(e,null,n,"mounted")}),o)},R=(e,t,r,n,i)=>{if(r&&y(e,r),n)for(let s=0;s<n.length;s++)y(e,n[s]);if(i){let r=i.subTree;if(t===r){const t=i.vnode;R(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},P=(e,t,r,n,i,s,o,a,c=0)=>{for(let u=c;u<e.length;u++){const c=e[u]=a?sr(e[u]):ir(e[u]);m(null,c,t,r,n,i,s,o,a)}},x=(e,t,r,n,s,o,c)=>{const u=t.el=e.el;let{patchFlag:l,dynamicChildren:h,dirs:f}=t;l|=16&e.patchFlag;const p=e.props||i.kT,y=t.props||i.kT;let g;r&&Rt(r,!1),(g=y.onVnodeBeforeUpdate)&&cr(g,r,t,e),f&&Oe(t,e,r,"beforeUpdate"),r&&Rt(r,!0);const m=s&&"foreignObject"!==t.type;if(h?O(e.dynamicChildren,h,u,r,n,m,o):c||$(e,t,u,null,r,n,m,o,!1),l>0){if(16&l)N(u,t,p,y,r,n,s);else if(2&l&&p.class!==y.class&&a(u,"class",null,y.class,s),4&l&&a(u,"style",p.style,y.style,s),8&l){const i=t.dynamicProps;for(let t=0;t<i.length;t++){const o=i[t],c=p[o],l=y[o];l===c&&"value"!==o||a(u,o,c,l,s,e.children,r,n,J)}}1&l&&e.children!==t.children&&d(u,t.children)}else c||null!=h||N(u,t,p,y,r,n,s);((g=y.onVnodeUpdated)||f)&&It((()=>{g&&cr(g,r,t,e),f&&Oe(t,e,r,"updated")}),n)},O=(e,t,r,n,i,s,o)=>{for(let a=0;a<t.length;a++){const c=e[a],u=t[a],l=c.el&&(c.type===Nt||!Gt(c,u)||70&c.shapeFlag)?f(c.el):r;m(c,u,l,null,n,i,s,o,!0)}},N=(e,t,r,n,s,o,c)=>{if(r!==n){if(r!==i.kT)for(const u in r)(0,i.Gg)(u)||u in n||a(e,u,r[u],null,c,t.children,s,o,J);for(const u in n){if((0,i.Gg)(u))continue;const l=n[u],h=r[u];l!==h&&"value"!==u&&a(e,u,h,l,c,t.children,s,o,J)}"value"in n&&a(e,"value",r.value,n.value)}},D=(e,t,r,n,i,o,a,c,l)=>{const h=t.el=e?e.el:u(""),d=t.anchor=e?e.anchor:u("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:y}=t;y&&(c=c?c.concat(y):y),null==e?(s(h,r,n),s(d,r,n),P(t.children,r,d,i,o,a,c,l)):f>0&&64&f&&p&&e.dynamicChildren?(O(e.dynamicChildren,p,r,i,o,a,c),(null!=t.key||i&&t===i.subTree)&&Pt(e,t,!0)):$(e,t,r,d,i,o,a,c,l)},B=(e,t,r,n,i,s,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?i.ctx.activate(t,r,n,o,c):M(t,r,n,i,s,o,c):U(e,t,c)},M=(e,t,r,n,i,s,o)=>{const a=e.component=hr(e,n,i);if(he(e)&&(a.ctx.renderer=ee),br(a),a.asyncDep){if(i&&i.registerDep(a,j),!e.el){const e=a.subTree=Xt(Bt);v(null,e,t,r)}}else j(a,e,t,r,i,s,o)},U=(e,t,r)=>{const n=t.component=e.component;if(F(e,t,r)){if(n.asyncDep&&!n.asyncResolved)return void z(n,t,r);n.next=t,_(n.update),n.update()}else t.el=e.el,n.vnode=t},j=(e,t,r,s,o,a,c)=>{const u=()=>{if(e.isMounted){let t,{next:r,bu:n,u:s,parent:u,vnode:l}=e,h=r;0,Rt(e,!1),r?(r.el=l.el,z(e,r,c)):r=l,n&&(0,i.ir)(n),(t=r.props&&r.props.onVnodeBeforeUpdate)&&cr(t,u,r,l),Rt(e,!0);const d=L(e);0;const p=e.subTree;e.subTree=d,m(p,d,f(p.el),X(p),e,o,a),r.el=d.el,null===h&&V(e,d.el),s&&It(s,o),(t=r.props&&r.props.onVnodeUpdated)&&It((()=>cr(t,u,r,l)),o)}else{let n;const{el:c,props:u}=t,{bm:l,m:h,parent:d}=e,f=le(t);if(Rt(e,!1),l&&(0,i.ir)(l),!f&&(n=u&&u.onVnodeBeforeMount)&&cr(n,d,t),Rt(e,!0),c&&re){const r=()=>{e.subTree=L(e),re(c,e.subTree,e,o,null)};f?t.type.__asyncLoader().then((()=>!e.isUnmounted&&r())):r()}else{0;const n=e.subTree=L(e);0,m(null,n,r,s,e,o,a),t.el=n.el}if(h&&It(h,o),!f&&(n=u&&u.onVnodeMounted)){const e=t;It((()=>cr(n,d,e)),o)}(256&t.shapeFlag||d&&le(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&It(e.a,o),e.isMounted=!0,t=r=s=null}},l=e.effect=new n.qq(u,(()=>b(h)),e.scope),h=e.update=()=>l.run();h.id=e.uid,Rt(e,!0),h()},z=(e,t,r)=>{t.component=e;const i=e.vnode.props;e.vnode=t,e.next=null,ot(e,t.props,i,r),bt(e,t.children,r),(0,n.Jd)(),S(),(0,n.lk)()},$=(e,t,r,n,i,s,o,a,c=!1)=>{const u=e&&e.children,l=e?e.shapeFlag:0,h=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void K(u,h,r,n,i,s,o,a,c);if(256&f)return void q(u,h,r,n,i,s,o,a,c)}8&p?(16&l&&J(u,i,s),h!==u&&d(r,h)):16&l?16&p?K(u,h,r,n,i,s,o,a,c):J(u,i,s,!0):(8&l&&d(r,""),16&p&&P(h,r,n,i,s,o,a,c))},q=(e,t,r,n,s,o,a,c,u)=>{e=e||i.Z6,t=t||i.Z6;const l=e.length,h=t.length,d=Math.min(l,h);let f;for(f=0;f<d;f++){const n=t[f]=u?sr(t[f]):ir(t[f]);m(e[f],n,r,null,s,o,a,c,u)}l>h?J(e,s,o,!0,!1,d):P(t,r,n,s,o,a,c,u,d)},K=(e,t,r,n,s,o,a,c,u)=>{let l=0;const h=t.length;let d=e.length-1,f=h-1;while(l<=d&&l<=f){const n=e[l],i=t[l]=u?sr(t[l]):ir(t[l]);if(!Gt(n,i))break;m(n,i,r,null,s,o,a,c,u),l++}while(l<=d&&l<=f){const n=e[d],i=t[f]=u?sr(t[f]):ir(t[f]);if(!Gt(n,i))break;m(n,i,r,null,s,o,a,c,u),d--,f--}if(l>d){if(l<=f){const e=f+1,i=e<h?t[e].el:n;while(l<=f)m(null,t[l]=u?sr(t[l]):ir(t[l]),r,i,s,o,a,c,u),l++}}else if(l>f)while(l<=d)G(e[l],s,o,!0),l++;else{const p=l,y=l,g=new Map;for(l=y;l<=f;l++){const e=t[l]=u?sr(t[l]):ir(t[l]);null!=e.key&&g.set(e.key,l)}let w,v=0;const b=f-y+1;let E=!1,_=0;const A=new Array(b);for(l=0;l<b;l++)A[l]=0;for(l=p;l<=d;l++){const n=e[l];if(v>=b){G(n,s,o,!0);continue}let i;if(null!=n.key)i=g.get(n.key);else for(w=y;w<=f;w++)if(0===A[w-y]&&Gt(n,t[w])){i=w;break}void 0===i?G(n,s,o,!0):(A[i-y]=l+1,i>=_?_=i:E=!0,m(n,t[i],r,null,s,o,a,c,u),v++)}const S=E?xt(A):i.Z6;for(w=S.length-1,l=b-1;l>=0;l--){const e=y+l,i=t[e],d=e+1<h?t[e+1].el:n;0===A[l]?m(null,i,r,d,s,o,a,c,u):E&&(w<0||l!==S[w]?H(i,r,d,2):w--)}}},H=(e,t,r,n,i=null)=>{const{el:o,type:a,transition:c,children:u,shapeFlag:l}=e;if(6&l)return void H(e.component.subTree,t,r,n);if(128&l)return void e.suspense.move(t,r,n);if(64&l)return void a.move(e,t,r,ee);if(a===Nt){s(o,t,r);for(let e=0;e<u.length;e++)H(u[e],t,r,n);return void s(e.anchor,t,r)}if(a===Lt)return void A(e,t,r);const h=2!==n&&1&l&&c;if(h)if(0===n)c.beforeEnter(o),s(o,t,r),It((()=>c.enter(o)),i);else{const{leave:e,delayLeave:n,afterLeave:i}=c,a=()=>s(o,t,r),u=()=>{e(o,(()=>{a(),i&&i()}))};n?n(o,a,u):u()}else s(o,t,r)},G=(e,t,r,n=!1,i=!1)=>{const{type:s,props:o,ref:a,children:c,dynamicChildren:u,shapeFlag:l,patchFlag:h,dirs:d}=e;if(null!=a&&St(a,null,r,e,!0),256&l)return void t.ctx.deactivate(e);const f=1&l&&d,p=!le(e);let y;if(p&&(y=o&&o.onVnodeBeforeUnmount)&&cr(y,t,e),6&l)Y(e.component,r,n);else{if(128&l)return void e.suspense.unmount(r,n);f&&Oe(e,null,t,"beforeUnmount"),64&l?e.type.remove(e,t,r,i,ee,n):u&&(s!==Nt||h>0&&64&h)?J(u,t,r,!1,!0):(s===Nt&&384&h||!i&&16&l)&&J(c,t,r),n&&W(e)}(p&&(y=o&&o.onVnodeUnmounted)||f)&&It((()=>{y&&cr(y,t,e),f&&Oe(e,null,t,"unmounted")}),r)},W=e=>{const{type:t,el:r,anchor:n,transition:i}=e;if(t===Nt)return void Q(r,n);if(t===Lt)return void I(e);const s=()=>{o(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:n}=i,o=()=>t(r,s);n?n(e.el,s,o):o()}else s()},Q=(e,t)=>{let r;while(e!==t)r=p(e),o(e),e=r;o(t)},Y=(e,t,r)=>{const{bum:n,scope:s,update:o,subTree:a,um:c}=e;n&&(0,i.ir)(n),s.stop(),o&&(o.active=!1,G(a,e,t,r)),c&&It(c,t),It((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,r,n=!1,i=!1,s=0)=>{for(let o=s;o<e.length;o++)G(e[o],t,r,n,i)},X=e=>6&e.shapeFlag?X(e.component.subTree):128&e.shapeFlag?e.suspense.next():p(e.anchor||e.el),Z=(e,t,r)=>{null==e?t._vnode&&G(t._vnode,null,null,!0):m(t._vnode||null,e,t,null,null,null,r),S(),k(),t._vnode=e},ee={p:m,um:G,m:H,r:W,mt:M,mc:P,pc:$,pbc:O,n:X,o:e};let te,re;return t&&([te,re]=t(ee)),{render:Z,hydrate:te,createApp:At(Z,te)}}function Rt({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Pt(e,t,r=!1){const n=e.children,s=t.children;if((0,i.kJ)(n)&&(0,i.kJ)(s))for(let i=0;i<n.length;i++){const e=n[i];let t=s[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[i]=sr(s[i]),t.el=e.el),r||Pt(e,t))}}function xt(e){const t=e.slice(),r=[0];let n,i,s,o,a;const c=e.length;for(n=0;n<c;n++){const c=e[n];if(0!==c){if(i=r[r.length-1],e[i]<c){t[n]=i,r.push(n);continue}s=0,o=r.length-1;while(s<o)a=s+o>>1,e[r[a]]<c?s=a+1:o=a;c<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}s=r.length,o=r[s-1];while(s-- >0)r[s]=o,o=t[o];return r}const Ot=e=>e.__isTeleport;const Nt=Symbol(void 0),Dt=Symbol(void 0),Bt=Symbol(void 0),Lt=Symbol(void 0),Mt=[];let Ut=null;function Ft(e=!1){Mt.push(Ut=e?null:[])}function jt(){Mt.pop(),Ut=Mt[Mt.length-1]||null}let Vt=1;function zt(e){Vt+=e}function $t(e){return e.dynamicChildren=Vt>0?Ut||i.Z6:null,jt(),Vt>0&&Ut&&Ut.push(e),e}function qt(e,t,r,n,i,s){return $t(Jt(e,t,r,n,i,s,!0))}function Kt(e,t,r,n,i){return $t(Xt(e,t,r,n,i,!0))}function Ht(e){return!!e&&!0===e.__v_isVNode}function Gt(e,t){return e.type===t.type&&e.key===t.key}const Wt="__vInternal",Qt=({key:e})=>null!=e?e:null,Yt=({ref:e,ref_key:t,ref_for:r})=>null!=e?(0,i.HD)(e)||(0,n.dq)(e)||(0,i.mf)(e)?{i:O,r:e,k:t,f:!!r}:e:null;function Jt(e,t=null,r=null,n=0,s=null,o=(e===Nt?0:1),a=!1,c=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Qt(t),ref:t&&Yt(t),scopeId:N,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null};return c?(or(u,r),128&o&&e.normalize(u)):r&&(u.shapeFlag|=(0,i.HD)(r)?8:16),Vt>0&&!a&&Ut&&(u.patchFlag>0||6&o)&&32!==u.patchFlag&&Ut.push(u),u}const Xt=Zt;function Zt(e,t=null,r=null,s=0,o=null,a=!1){if(e&&e!==Le||(e=Bt),Ht(e)){const n=tr(e,t,!0);return r&&or(n,r),Vt>0&&!a&&Ut&&(6&n.shapeFlag?Ut[Ut.indexOf(e)]=n:Ut.push(n)),n.patchFlag|=-2,n}if(Cr(e)&&(e=e.__vccOpts),t){t=er(t);let{class:e,style:r}=t;e&&!(0,i.HD)(e)&&(t.class=(0,i.C_)(e)),(0,i.Kn)(r)&&((0,n.X3)(r)&&!(0,i.kJ)(r)&&(r=(0,i.l7)({},r)),t.style=(0,i.j5)(r))}const c=(0,i.HD)(e)?1:z(e)?128:Ot(e)?64:(0,i.Kn)(e)?4:(0,i.mf)(e)?2:0;return Jt(e,t,r,s,o,c,a,!0)}function er(e){return e?(0,n.X3)(e)||Wt in e?(0,i.l7)({},e):e:null}function tr(e,t,r=!1){const{props:n,ref:s,patchFlag:o,children:a}=e,c=t?ar(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Qt(c),ref:t&&t.ref?r&&s?(0,i.kJ)(s)?s.concat(Yt(t)):[s,Yt(t)]:Yt(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Nt?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&tr(e.ssContent),ssFallback:e.ssFallback&&tr(e.ssFallback),el:e.el,anchor:e.anchor};return u}function rr(e=" ",t=0){return Xt(Dt,null,e,t)}function nr(e="",t=!1){return t?(Ft(),Kt(Bt,null,e)):Xt(Bt,null,e)}function ir(e){return null==e||"boolean"===typeof e?Xt(Bt):(0,i.kJ)(e)?Xt(Nt,null,e.slice()):"object"===typeof e?sr(e):Xt(Dt,null,String(e))}function sr(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:tr(e)}function or(e,t){let r=0;const{shapeFlag:n}=e;if(null==t)t=null;else if((0,i.kJ)(t))r=16;else if("object"===typeof t){if(65&n){const r=t.default;return void(r&&(r._c&&(r._d=!1),or(e,r()),r._c&&(r._d=!0)))}{r=32;const n=t._;n||Wt in t?3===n&&O&&(1===O.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=O}}else(0,i.mf)(t)?(t={default:t,_ctx:O},r=32):(t=String(t),64&n?(r=16,t=[rr(t)]):r=8);e.children=t,e.shapeFlag|=r}function ar(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=(0,i.C_)([t.class,n.class]));else if("style"===e)t.style=(0,i.j5)([t.style,n.style]);else if((0,i.F7)(e)){const r=t[e],s=n[e];!s||r===s||(0,i.kJ)(r)&&r.includes(s)||(t[e]=r?[].concat(r,s):s)}else""!==e&&(t[e]=n[e])}return t}function cr(e,t,r,n=null){o(e,t,7,[r,n])}const ur=Et();let lr=0;function hr(e,t,r){const s=e.type,o=(t?t.appContext:e.appContext)||ur,a={uid:lr++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new n.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ut(s,o),emitsOptions:P(s,o),emit:null,emitted:null,propsDefaults:i.kT,inheritAttrs:s.inheritAttrs,ctx:i.kT,data:i.kT,props:i.kT,attrs:i.kT,slots:i.kT,refs:i.kT,setupState:i.kT,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=R.bind(null,a),e.ce&&e.ce(a),a}let dr=null;const fr=()=>dr||O,pr=e=>{dr=e,e.scope.on()},yr=()=>{dr&&dr.scope.off(),dr=null};function gr(e){return 4&e.vnode.shapeFlag}let mr,wr,vr=!1;function br(e,t=!1){vr=t;const{props:r,children:n}=e.vnode,i=gr(e);st(e,r,i,t),vt(e,n);const s=i?Er(e,t):void 0;return vr=!1,s}function Er(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=(0,n.Xl)(new Proxy(e.ctx,qe));const{setup:o}=r;if(o){const r=e.setupContext=o.length>1?kr(e):null;pr(e),(0,n.Jd)();const c=s(o,e,0,[e.props,r]);if((0,n.lk)(),yr(),(0,i.tI)(c)){if(c.then(yr,yr),t)return c.then((r=>{_r(e,r,t)})).catch((t=>{a(t,e,0)}));e.asyncDep=c}else _r(e,c,t)}else Ar(e,t)}function _r(e,t,r){(0,i.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,i.Kn)(t)&&(e.setupState=(0,n.WL)(t)),Ar(e,r)}function Ar(e,t,r){const s=e.type;if(!e.render){if(!t&&mr&&!s.render){const t=s.template||Ye(e).template;if(t){0;const{isCustomElement:r,compilerOptions:n}=e.appContext.config,{delimiters:o,compilerOptions:a}=s,c=(0,i.l7)((0,i.l7)({isCustomElement:r,delimiters:o},n),a);s.render=mr(t,c)}}e.render=s.render||i.dG,wr&&wr(e)}pr(e),(0,n.Jd)(),He(e),(0,n.lk)(),yr()}function Sr(e){return new Proxy(e.attrs,{get(t,r){return(0,n.j)(e,"get","$attrs"),t[r]}})}function kr(e){const t=t=>{e.exposed=t||{}};let r;return{get attrs(){return r||(r=Sr(e))},slots:e.slots,emit:e.emit,expose:t}}function Ir(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,n.WL)((0,n.Xl)(e.exposed)),{get(t,r){return r in t?t[r]:r in $e?$e[r](e):void 0}}))}function Tr(e,t=!0){return(0,i.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Cr(e){return(0,i.mf)(e)&&"__vccOpts"in e}const Rr=(e,t)=>(0,n.Fl)(e,t,vr);function Pr(e,t,r){const n=arguments.length;return 2===n?(0,i.Kn)(t)&&!(0,i.kJ)(t)?Ht(t)?Xt(e,null,[t]):Xt(e,t):Xt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):3===n&&Ht(r)&&(r=[r]),Xt(e,t,r))}Symbol("");const xr="3.2.40"},9242:function(e,t,r){"use strict";r.d(t,{F8:function(){return ue},W3:function(){return ie},ri:function(){return pe},uT:function(){return U}});r(7658);var n=r(7139),i=r(3396),s=r(4870);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,c=a&&a.createElement("template"),u={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?a.createElementNS(o,e):a.createElement(e,r?{is:r}:void 0);return"select"===e&&n&&null!=n.multiple&&i.setAttribute("multiple",n.multiple),i},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const o=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(t.insertBefore(i.cloneNode(!0),r),i===s||!(i=i.nextSibling))break}else{c.innerHTML=n?`<svg>${e}</svg>`:e;const i=c.content;if(n){const e=i.firstChild;while(e.firstChild)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function l(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function h(e,t,r){const i=e.style,s=(0,n.HD)(r);if(r&&!s){for(const e in r)f(i,e,r[e]);if(t&&!(0,n.HD)(t))for(const e in t)null==r[e]&&f(i,e,"")}else{const n=i.display;s?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=n)}}const d=/\s*!important$/;function f(e,t,r){if((0,n.kJ)(r))r.forEach((r=>f(e,t,r)));else if(null==r&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=g(e,t);d.test(r)?e.setProperty((0,n.rs)(i),r.replace(d,""),"important"):e[i]=r}}const p=["Webkit","Moz","ms"],y={};function g(e,t){const r=y[t];if(r)return r;let i=(0,n._A)(t);if("filter"!==i&&i in e)return y[t]=i;i=(0,n.kC)(i);for(let n=0;n<p.length;n++){const r=p[n]+i;if(r in e)return y[t]=r}return t}const m="http://www.w3.org/1999/xlink";function w(e,t,r,i,s){if(i&&t.startsWith("xlink:"))null==r?e.removeAttributeNS(m,t.slice(6,t.length)):e.setAttributeNS(m,t,r);else{const i=(0,n.Pq)(t);null==r||i&&!(0,n.yA)(r)?e.removeAttribute(t):e.setAttribute(t,i?"":r)}}function v(e,t,r,i,s,o,a){if("innerHTML"===t||"textContent"===t)return i&&a(i,s,o),void(e[t]=null==r?"":r);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=r;const n=null==r?"":r;return e.value===n&&"OPTION"!==e.tagName||(e.value=n),void(null==r&&e.removeAttribute(t))}let c=!1;if(""===r||null==r){const i=typeof e[t];"boolean"===i?r=(0,n.yA)(r):null==r&&"string"===i?(r="",c=!0):"number"===i&&(r=0,c=!0)}try{e[t]=r}catch(u){0}c&&e.removeAttribute(t)}const[b,E]=(()=>{let e=Date.now,t=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let _=0;const A=Promise.resolve(),S=()=>{_=0},k=()=>_||(A.then(S),_=b());function I(e,t,r,n){e.addEventListener(t,r,n)}function T(e,t,r,n){e.removeEventListener(t,r,n)}function C(e,t,r,n,i=null){const s=e._vei||(e._vei={}),o=s[t];if(n&&o)o.value=n;else{const[r,a]=P(t);if(n){const o=s[t]=x(n,i);I(e,r,o,a)}else o&&(T(e,r,o,a),s[t]=void 0)}}const R=/(?:Once|Passive|Capture)$/;function P(e){let t;if(R.test(e)){let r;t={};while(r=e.match(R))e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}const r=":"===e[2]?e.slice(3):(0,n.rs)(e.slice(2));return[r,t]}function x(e,t){const r=e=>{const n=e.timeStamp||b();(E||n>=r.attached-1)&&(0,i.$d)(O(e,r.value),t,5,[e])};return r.value=e,r.attached=k(),r}function O(e,t){if((0,n.kJ)(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const N=/^on[a-z]/,D=(e,t,r,i,s=!1,o,a,c,u)=>{"class"===t?l(e,i,s):"style"===t?h(e,r,i):(0,n.F7)(t)?(0,n.tR)(t)||C(e,t,r,i,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):B(e,t,i,s))?v(e,t,i,o,a,c,u):("true-value"===t?e._trueValue=i:"false-value"===t&&(e._falseValue=i),w(e,t,i,s))};function B(e,t,r,i){return i?"innerHTML"===t||"textContent"===t||!!(t in e&&N.test(t)&&(0,n.mf)(r)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!N.test(t)||!(0,n.HD)(r))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const L="transition",M="animation",U=(e,{slots:t})=>(0,i.h)(i.P$,$(e),t);U.displayName="Transition";const F={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},j=U.props=(0,n.l7)({},i.P$.props,F),V=(e,t=[])=>{(0,n.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},z=e=>!!e&&((0,n.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function $(e){const t={};for(const n in e)n in F||(t[n]=e[n]);if(!1===e.css)return t;const{name:r="v",type:i,duration:s,enterFromClass:o=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:c=`${r}-enter-to`,appearFromClass:u=o,appearActiveClass:l=a,appearToClass:h=c,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=e,y=q(s),g=y&&y[0],m=y&&y[1],{onBeforeEnter:w,onEnter:v,onEnterCancelled:b,onLeave:E,onLeaveCancelled:_,onBeforeAppear:A=w,onAppear:S=v,onAppearCancelled:k=b}=t,I=(e,t,r)=>{G(e,t?h:c),G(e,t?l:a),r&&r()},T=(e,t)=>{e._isLeaving=!1,G(e,d),G(e,p),G(e,f),t&&t()},C=e=>(t,r)=>{const n=e?S:v,s=()=>I(t,e,r);V(n,[t,s]),W((()=>{G(t,e?u:o),H(t,e?h:c),z(n)||Y(t,i,g,s)}))};return(0,n.l7)(t,{onBeforeEnter(e){V(w,[e]),H(e,o),H(e,a)},onBeforeAppear(e){V(A,[e]),H(e,u),H(e,l)},onEnter:C(!1),onAppear:C(!0),onLeave(e,t){e._isLeaving=!0;const r=()=>T(e,t);H(e,d),ee(),H(e,f),W((()=>{e._isLeaving&&(G(e,d),H(e,p),z(E)||Y(e,i,m,r))})),V(E,[e,r])},onEnterCancelled(e){I(e,!1),V(b,[e])},onAppearCancelled(e){I(e,!0),V(k,[e])},onLeaveCancelled(e){T(e),V(_,[e])}})}function q(e){if(null==e)return null;if((0,n.Kn)(e))return[K(e.enter),K(e.leave)];{const t=K(e);return[t,t]}}function K(e){const t=(0,n.He)(e);return t}function H(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function G(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function W(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let Q=0;function Y(e,t,r,n){const i=e._endId=++Q,s=()=>{i===e._endId&&n()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:c}=J(e,t);if(!o)return n();const u=o+"end";let l=0;const h=()=>{e.removeEventListener(u,d),s()},d=t=>{t.target===e&&++l>=c&&h()};setTimeout((()=>{l<c&&h()}),a+1),e.addEventListener(u,d)}function J(e,t){const r=window.getComputedStyle(e),n=e=>(r[e]||"").split(", "),i=n(L+"Delay"),s=n(L+"Duration"),o=X(i,s),a=n(M+"Delay"),c=n(M+"Duration"),u=X(a,c);let l=null,h=0,d=0;t===L?o>0&&(l=L,h=o,d=s.length):t===M?u>0&&(l=M,h=u,d=c.length):(h=Math.max(o,u),l=h>0?o>u?L:M:null,d=l?l===L?s.length:c.length:0);const f=l===L&&/\b(transform|all)(,|$)/.test(r[L+"Property"]);return{type:l,timeout:h,propCount:d,hasTransform:f}}function X(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,r)=>Z(t)+Z(e[r]))))}function Z(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ee(){return document.body.offsetHeight}const te=new WeakMap,re=new WeakMap,ne={name:"TransitionGroup",props:(0,n.l7)({},j,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=(0,i.FN)(),n=(0,i.Y8)();let o,a;return(0,i.ic)((()=>{if(!o.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!ce(o[0].el,r.vnode.el,t))return;o.forEach(se),o.forEach(oe);const n=o.filter(ae);ee(),n.forEach((e=>{const r=e.el,n=r.style;H(r,t),n.transform=n.webkitTransform=n.transitionDuration="";const i=r._moveCb=e=>{e&&e.target!==r||e&&!/transform$/.test(e.propertyName)||(r.removeEventListener("transitionend",i),r._moveCb=null,G(r,t))};r.addEventListener("transitionend",i)}))})),()=>{const c=(0,s.IU)(e),u=$(c);let l=c.tag||i.HY;o=a,a=t.default?(0,i.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,i.nK)(t,(0,i.U2)(t,u,n,r))}if(o)for(let e=0;e<o.length;e++){const t=o[e];(0,i.nK)(t,(0,i.U2)(t,u,n,r)),te.set(t,t.el.getBoundingClientRect())}return(0,i.Wm)(l,null,a)}}},ie=ne;function se(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function oe(e){re.set(e,e.el.getBoundingClientRect())}function ae(e){const t=te.get(e),r=re.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${n}px,${i}px)`,t.transitionDuration="0s",e}}function ce(e,t,r){const n=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&n.classList.remove(e)))})),r.split(/\s+/).forEach((e=>e&&n.classList.add(e))),n.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(n);const{hasTransform:s}=J(n);return i.removeChild(n),s}const ue={beforeMount(e,{value:t},{transition:r}){e._vod="none"===e.style.display?"":e.style.display,r&&t?r.beforeEnter(e):le(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!==!r&&(n?t?(n.beforeEnter(e),le(e,!0),n.enter(e)):n.leave(e,(()=>{le(e,!1)})):le(e,t))},beforeUnmount(e,{value:t}){le(e,t)}};function le(e,t){e.style.display=t?e._vod:"none"}const he=(0,n.l7)({patchProp:D},u);let de;function fe(){return de||(de=(0,i.Us)(he))}const pe=(...e)=>{const t=fe().createApp(...e);const{mount:r}=t;return t.mount=e=>{const i=ye(e);if(!i)return;const s=t._component;(0,n.mf)(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function ye(e){if((0,n.HD)(e)){const t=document.querySelector(e);return t}return e}},7139:function(e,t,r){"use strict";r.d(t,{C_:function(){return f},DM:function(){return O},E9:function(){return ne},F7:function(){return S},Gg:function(){return q},HD:function(){return B},He:function(){return te},Kn:function(){return M},NO:function(){return _},Nj:function(){return ee},Od:function(){return T},PO:function(){return z},Pq:function(){return a},RI:function(){return R},S0:function(){return $},W7:function(){return V},WV:function(){return y},Z6:function(){return b},_A:function(){return G},_N:function(){return x},aU:function(){return X},dG:function(){return E},e1:function(){return s},fY:function(){return n},hR:function(){return J},hq:function(){return g},ir:function(){return Z},j5:function(){return u},kC:function(){return Y},kJ:function(){return P},kT:function(){return v},l7:function(){return I},mf:function(){return D},rs:function(){return Q},tI:function(){return U},tR:function(){return k},yA:function(){return c},yk:function(){return L},zw:function(){return m}});r(7658);function n(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?e=>!!r[e.toLowerCase()]:e=>!!r[e]}const i="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",s=n(i);const o="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",a=n(o);function c(e){return!!e||""===e}function u(e){if(P(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=B(n)?d(n):u(n);if(i)for(const e in i)t[e]=i[e]}return t}return B(e)||M(e)?e:void 0}const l=/;(?![^(]*\))/g,h=/:(.+)/;function d(e){const t={};return e.split(l).forEach((e=>{if(e){const r=e.split(h);r.length>1&&(t[r[0].trim()]=r[1].trim())}})),t}function f(e){let t="";if(B(e))t=e;else if(P(e))for(let r=0;r<e.length;r++){const n=f(e[r]);n&&(t+=n+" ")}else if(M(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function p(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=y(e[n],t[n]);return r}function y(e,t){if(e===t)return!0;let r=N(e),n=N(t);if(r||n)return!(!r||!n)&&e.getTime()===t.getTime();if(r=L(e),n=L(t),r||n)return e===t;if(r=P(e),n=P(t),r||n)return!(!r||!n)&&p(e,t);if(r=M(e),n=M(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const r in e){const n=e.hasOwnProperty(r),i=t.hasOwnProperty(r);if(n&&!i||!n&&i||!y(e[r],t[r]))return!1}}return String(e)===String(t)}function g(e,t){return e.findIndex((e=>y(e,t)))}const m=e=>B(e)?e:null==e?"":P(e)||M(e)&&(e.toString===F||!D(e.toString))?JSON.stringify(e,w,2):String(e),w=(e,t)=>t&&t.__v_isRef?w(e,t.value):x(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,r])=>(e[`${t} =>`]=r,e)),{})}:O(t)?{[`Set(${t.size})`]:[...t.values()]}:!M(t)||P(t)||z(t)?t:String(t),v={},b=[],E=()=>{},_=()=>!1,A=/^on[^a-z]/,S=e=>A.test(e),k=e=>e.startsWith("onUpdate:"),I=Object.assign,T=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},C=Object.prototype.hasOwnProperty,R=(e,t)=>C.call(e,t),P=Array.isArray,x=e=>"[object Map]"===j(e),O=e=>"[object Set]"===j(e),N=e=>"[object Date]"===j(e),D=e=>"function"===typeof e,B=e=>"string"===typeof e,L=e=>"symbol"===typeof e,M=e=>null!==e&&"object"===typeof e,U=e=>M(e)&&D(e.then)&&D(e.catch),F=Object.prototype.toString,j=e=>F.call(e),V=e=>j(e).slice(8,-1),z=e=>"[object Object]"===j(e),$=e=>B(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,q=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),K=e=>{const t=Object.create(null);return r=>{const n=t[r];return n||(t[r]=e(r))}},H=/-(\w)/g,G=K((e=>e.replace(H,((e,t)=>t?t.toUpperCase():"")))),W=/\B([A-Z])/g,Q=K((e=>e.replace(W,"-$1").toLowerCase())),Y=K((e=>e.charAt(0).toUpperCase()+e.slice(1))),J=K((e=>e?`on${Y(e)}`:"")),X=(e,t)=>!Object.is(e,t),Z=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},ee=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},te=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let re;const ne=()=>re||(re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{})},2713:function(e,t,r){"use strict";r.d(t,{D:function(){return c}});r(3408),r(4590);var n=Object.prototype,i=n.toString,s=n.hasOwnProperty,o=Function.prototype.toString,a=new Map;function c(e,t){try{return u(e,t)}finally{a.clear()}}function u(e,t){if(e===t)return!0;var r=i.call(e),n=i.call(t);if(r!==n)return!1;switch(r){case"[object Array]":if(e.length!==t.length)return!1;case"[object Object]":if(p(e,t))return!0;var a=l(e),c=l(t),h=a.length;if(h!==c.length)return!1;for(var y=0;y<h;++y)if(!s.call(t,a[y]))return!1;for(y=0;y<h;++y){var g=a[y];if(!u(e[g],t[g]))return!1}return!0;case"[object Error]":return e.name===t.name&&e.message===t.message;case"[object Number]":if(e!==e)return t!==t;case"[object Boolean]":case"[object Date]":return+e===+t;case"[object RegExp]":case"[object String]":return e=="".concat(t);case"[object Map]":case"[object Set]":if(e.size!==t.size)return!1;if(p(e,t))return!0;var m=e.entries(),w="[object Map]"===r;while(1){var v=m.next();if(v.done)break;var b=v.value,E=b[0],_=b[1];if(!t.has(E))return!1;if(w&&!u(_,t.get(E)))return!1}return!0;case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":e=new Uint8Array(e),t=new Uint8Array(t);case"[object DataView]":var A=e.byteLength;if(A===t.byteLength)while(A--&&e[A]===t[A]);return-1===A;case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":var S=o.call(e);return S===o.call(t)&&!f(S,d)}return!1}function l(e){return Object.keys(e).filter(h,e)}function h(e){return void 0!==this[e]}var d="{ [native code] }";function f(e,t){var r=e.length-t.length;return r>=0&&e.indexOf(t,r)===r}function p(e,t){var r=a.get(e);if(r){if(r.has(t))return!0}else a.set(e,r=new Set);return r.add(t),!1}},4492:function(e,t,r){"use strict";r.d(t,{B:function(){return a}});var n=function(){return Object.create(null)},i=Array.prototype,s=i.forEach,o=i.slice,a=function(){function e(e,t){void 0===e&&(e=!0),void 0===t&&(t=n),this.weakness=e,this.makeData=t}return e.prototype.lookup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.lookupArray(e)},e.prototype.lookupArray=function(e){var t=this;return s.call(e,(function(e){return t=t.getChildTrie(e)})),t.data||(t.data=this.makeData(o.call(e)))},e.prototype.getChildTrie=function(t){var r=this.weakness&&c(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(t);return n||r.set(t,n=new e(this.weakness,this.makeData)),n},e}();function c(e){switch(typeof e){case"object":if(null===e)break;case"function":return!0}return!1}},7081:function(e,t,r){"use strict";r(7658);const{fromCallback:n}=r(8078),i=r(4334),{getCallback:s,getOptions:o}=r(6001),a=Symbol("promise"),c=Symbol("status"),u=Symbol("operations"),l=Symbol("finishClose"),h=Symbol("closeCallbacks");class d{constructor(e){if("object"!==typeof e||null===e){const t=null===e?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[u]=[],this[h]=[],this[c]="open",this[l]=this[l].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[u].length}put(e,t,r){if("open"!==this[c])throw new i("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(e)||this.db._checkValue(t);if(n)throw n;const s=r&&null!=r.sublevel?r.sublevel:this.db,o=r,a=s.keyEncoding(r&&r.keyEncoding),l=s.valueEncoding(r&&r.valueEncoding),h=a.format;r={...r,keyEncoding:h,valueEncoding:l.format},s!==this.db&&(r.sublevel=null);const d=s.prefixKey(a.encode(e),h),f=l.encode(t);return this._put(d,f,r),this[u].push({...o,type:"put",key:e,value:t}),this}_put(e,t,r){}del(e,t){if("open"!==this[c])throw new i("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const r=this.db._checkKey(e);if(r)throw r;const n=t&&null!=t.sublevel?t.sublevel:this.db,s=t,o=n.keyEncoding(t&&t.keyEncoding),a=o.format;return t={...t,keyEncoding:a},n!==this.db&&(t.sublevel=null),this._del(n.prefixKey(o.encode(e),a),t),this[u].push({...s,type:"del",key:e}),this}_del(e,t){}clear(){if("open"!==this[c])throw new i("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[u]=[],this}_clear(){}write(e,t){return t=s(e,t),t=n(t,a),e=o(e),"open"!==this[c]?this.nextTick(t,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(t):(this[c]="writing",this._write(e,(e=>{this[c]="closing",this[h].push((()=>t(e))),e||this.db.emit("batch",this[u]),this._close(this[l])}))),t[a]}_write(e,t){}close(e){return e=n(e,a),"closing"===this[c]?this[h].push(e):"closed"===this[c]?this.nextTick(e):(this[h].push(e),"writing"!==this[c]&&(this[c]="closing",this._close(this[l]))),e[a]}_close(e){this.nextTick(e)}[l](){this[c]="closed",this.db.detachResource(this);const e=this[h];this[h]=[];for(const t of e)t()}}t.AbstractChainedBatch=d},5965:function(e,t,r){"use strict";r(7658);const{fromCallback:n}=r(8078),i=r(4334),{getOptions:s,getCallback:o}=r(6001),a=Symbol("promise"),c=Symbol("callback"),u=Symbol("working"),l=Symbol("handleOne"),h=Symbol("handleMany"),d=Symbol("autoClose"),f=Symbol("finishWork"),p=Symbol("returnMany"),y=Symbol("closing"),g=Symbol("handleClose"),m=Symbol("closed"),w=Symbol("closeCallbacks"),v=Symbol("keyEncoding"),b=Symbol("valueEncoding"),E=Symbol("abortOnClose"),_=Symbol("legacy"),A=Symbol("keys"),S=Symbol("values"),k=Symbol("limit"),I=Symbol("count"),T=Object.freeze({}),C=()=>{};let R=!1;class P{constructor(e,t,r){if("object"!==typeof e||null===e){const t=null===e?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}if("object"!==typeof t||null===t)throw new TypeError("The second argument must be an options object");this[m]=!1,this[w]=[],this[u]=!1,this[y]=!1,this[d]=!1,this[c]=null,this[l]=this[l].bind(this),this[h]=this[h].bind(this),this[g]=this[g].bind(this),this[v]=t[v],this[b]=t[b],this[_]=r,this[k]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[I]=0,this[E]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[I]}get limit(){return this[k]}next(e){let t;if(void 0===e)t=new Promise(((t,r)=>{e=(e,n,i)=>{e?r(e):this[_]?void 0===n&&void 0===i?t():t([n,i]):t(n)}}));else if("function"!==typeof e)throw new TypeError("Callback must be a function");return this[y]?this.nextTick(e,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(e,new i("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[u]=!0,this[c]=e,this[I]>=this[k]?this.nextTick(this[l],null):this._next(this[l])),t}_next(e){this.nextTick(e)}nextv(e,t,r){return r=o(t,r),r=n(r,a),t=s(t,T),Number.isInteger(e)?(this[y]?this.nextTick(r,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(r,new i("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[k]<1/0&&(e=Math.min(e,this[k]-this[I])),this[u]=!0,this[c]=r,e<=0?this.nextTick(this[h],null,[]):this._nextv(e,t,this[h])),r[a]):(this.nextTick(r,new TypeError("The first argument 'size' must be an integer")),r[a])}_nextv(e,t,r){const n=[],i=(t,s,o)=>t?r(t):(this[_]?void 0===s&&void 0===o:void 0===s)?r(null,n):(n.push(this[_]?[s,o]:s),void(n.length===e?r(null,n):this._next(i)));this._next(i)}all(e,t){return t=o(e,t),t=n(t,a),e=s(e,T),this[y]?this.nextTick(t,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[u]?this.nextTick(t,new i("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[u]=!0,this[c]=t,this[d]=!0,this[I]>=this[k]?this.nextTick(this[h],null,[]):this._all(e,this[h])),t[a]}_all(e,t){let r=this[I];const n=[],i=()=>{const e=this[k]<1/0?Math.min(1e3,this[k]-r):1e3;e<=0?this.nextTick(t,null,n):this._nextv(e,T,s)},s=(e,s)=>{e?t(e):0===s.length?t(null,n):(n.push.apply(n,s),r+=s.length,i())};i()}[f](){const e=this[c];return this[E]&&null===e?C:(this[u]=!1,this[c]=null,this[y]&&this._close(this[g]),e)}[p](e,t,r){this[d]?this.close(e.bind(null,t,r)):e(t,r)}seek(e,t){if(t=s(t,T),this[y]);else{if(this[u])throw new i("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const r=this.db.keyEncoding(t.keyEncoding||this[v]),n=r.format;t.keyEncoding!==n&&(t={...t,keyEncoding:n});const i=this.db.prefixKey(r.encode(e),n);this._seek(i,t)}}}_seek(e,t){throw new i("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){if(e=n(e,a),this[m])this.nextTick(e);else if(this[y])this[w].push(e);else if(this[y]=!0,this[w].push(e),this[u]){if(this[E]){const e=this[f]();e(new i("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))}}else this._close(this[g]);return e[a]}_close(e){this.nextTick(e)}[g](){this[m]=!0,this.db.detachResource(this);const e=this[w];this[w]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;while(void 0!==(e=await this.next()))yield e}finally{this[m]||await this.close()}}}class x extends P{constructor(e,t){super(e,t,!0),this[A]=!1!==t.keys,this[S]=!1!==t.values}[l](e,t,r){const n=this[f]();if(e)return n(e);try{t=this[A]&&void 0!==t?this[v].decode(t):void 0,r=this[S]&&void 0!==r?this[b].decode(r):void 0}catch(e){return n(new D("entry",e))}void 0===t&&void 0===r||this[I]++,n(null,t,r)}[h](e,t){const r=this[f]();if(e)return this[p](r,e);try{for(const e of t){const t=e[0],r=e[1];e[0]=this[A]&&void 0!==t?this[v].decode(t):void 0,e[1]=this[S]&&void 0!==r?this[b].decode(r):void 0}}catch(e){return this[p](r,new D("entries",e))}this[I]+=t.length,this[p](r,null,t)}end(e){return R||"undefined"===typeof console||(R=!0,console.warn(new i("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}}class O extends P{constructor(e,t){super(e,t,!1)}[l](e,t){const r=this[f]();if(e)return r(e);try{t=void 0!==t?this[v].decode(t):void 0}catch(e){return r(new D("key",e))}void 0!==t&&this[I]++,r(null,t)}[h](e,t){const r=this[f]();if(e)return this[p](r,e);try{for(let e=0;e<t.length;e++){const r=t[e];t[e]=void 0!==r?this[v].decode(r):void 0}}catch(e){return this[p](r,new D("keys",e))}this[I]+=t.length,this[p](r,null,t)}}class N extends P{constructor(e,t){super(e,t,!1)}[l](e,t){const r=this[f]();if(e)return r(e);try{t=void 0!==t?this[b].decode(t):void 0}catch(e){return r(new D("value",e))}void 0!==t&&this[I]++,r(null,t)}[h](e,t){const r=this[f]();if(e)return this[p](r,e);try{for(let e=0;e<t.length;e++){const r=t[e];t[e]=void 0!==r?this[b].decode(r):void 0}}catch(e){return this[p](r,new D("values",e))}this[I]+=t.length,this[p](r,null,t)}}class D extends i{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const B of["_ended property","_nexting property","_end method"])Object.defineProperty(x.prototype,B.split(" ")[0],{get(){throw new i(`The ${B} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new i(`The ${B} has been removed`,{code:"LEVEL_LEGACY"})}});x.keyEncoding=v,x.valueEncoding=b,t.AbstractIterator=x,t.AbstractKeyIterator=O,t.AbstractValueIterator=N},2427:function(e,t,r){"use strict";r(7658);const{supports:n}=r(1723),{Transcoder:i}=r(1541),{EventEmitter:s}=r(3793),{fromCallback:o}=r(8078),a=r(4334),{AbstractIterator:c}=r(5965),{DefaultKeyIterator:u,DefaultValueIterator:l}=r(3416),{DeferredIterator:h,DeferredKeyIterator:d,DeferredValueIterator:f}=r(5502),{DefaultChainedBatch:p}=r(7492),{getCallback:y,getOptions:g}=r(6001),m=r(5780),w=Symbol("promise"),v=Symbol("landed"),b=Symbol("resources"),E=Symbol("closeResources"),_=Symbol("operations"),A=Symbol("undefer"),S=Symbol("deferOpen"),k=Symbol("options"),I=Symbol("status"),T=Symbol("defaultOptions"),C=Symbol("transcoder"),R=Symbol("keyEncoding"),P=Symbol("valueEncoding"),x=()=>{};class O extends s{constructor(e,t){if(super(),"object"!==typeof e||null===e)throw new TypeError("The first argument 'manifest' must be an object");t=g(t);const{keyEncoding:r,valueEncoding:s,passive:o,...a}=t;this[b]=new Set,this[_]=[],this[S]=!0,this[k]=a,this[I]="opening",this.supports=n(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==e.snapshots,permanence:!1!==e.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[C]=new i(B(this)),this[R]=this[C].encoding(r||"utf8"),this[P]=this[C].encoding(s||"utf8");for(const n of this[C].encodings())this.supports.encodings[n.commonName]||(this.supports.encodings[n.commonName]=!0);this[T]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[R].commonName,valueEncoding:this[P].commonName}),key:Object.freeze({keyEncoding:this[R].commonName})},this.nextTick((()=>{this[S]&&this.open({passive:!1},x)}))}get status(){return this[I]}keyEncoding(e){return this[C].encoding(null!=e?e:this[R])}valueEncoding(e){return this[C].encoding(null!=e?e:this[P])}open(e,t){t=y(e,t),t=o(t,w),e={...this[k],...g(e)},e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists;const r=e=>{"closing"===this[I]||"opening"===this[I]?this.once(v,e?()=>r(e):r):"open"!==this[I]?t(new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:e})):t()};return e.passive?"opening"===this[I]?this.once(v,r):this.nextTick(r):"closed"===this[I]||this[S]?(this[S]=!1,this[I]="opening",this.emit("opening"),this._open(e,(e=>{if(e)return this[I]="closed",this[E]((()=>{this.emit(v),r(e)})),void this[A]();this[I]="open",this[A](),this.emit(v),"open"===this[I]&&this.emit("open"),"open"===this[I]&&this.emit("ready"),r()}))):"open"===this[I]?this.nextTick(r):this.once(v,(()=>this.open(e,t))),t[w]}_open(e,t){this.nextTick(t)}close(e){e=o(e,w);const t=r=>{"opening"===this[I]||"closing"===this[I]?this.once(v,r?t(r):t):"closed"!==this[I]?e(new a("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:r})):e()};if("open"===this[I]){this[I]="closing",this.emit("closing");const e=e=>{this[I]="open",this[A](),this.emit(v),t(e)};this[E]((()=>{this._close((r=>{if(r)return e(r);this[I]="closed",this[A](),this.emit(v),"closed"===this[I]&&this.emit("closed"),t()}))}))}else"closed"===this[I]?this.nextTick(t):this.once(v,(()=>this.close(e)));return e[w]}[E](e){if(0===this[b].size)return this.nextTick(e);let t=this[b].size,r=!0;const n=()=>{0===--t&&(r?this.nextTick(e):e())};for(const i of this[b])i.close(n);r=!1,this[b].clear()}_close(e){this.nextTick(e)}get(e,t,r){if(r=y(t,r),r=o(r,w),t=g(t,this[T].entry),"opening"===this[I])return this.defer((()=>this.get(e,t,r))),r[w];if(D(this,r))return r[w];const n=this._checkKey(e);if(n)return this.nextTick(r,n),r[w];const i=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=i.format,u=s.format;return t.keyEncoding===c&&t.valueEncoding===u||(t=Object.assign({},t,{keyEncoding:c,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),c),t,((e,t)=>{if(e)return("LEVEL_NOT_FOUND"===e.code||e.notFound||/NotFound/i.test(e))&&(e.code||(e.code="LEVEL_NOT_FOUND"),e.notFound||(e.notFound=!0),e.status||(e.status=404)),r(e);try{t=s.decode(t)}catch(e){return r(new a("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[w]}_get(e,t,r){this.nextTick(r,new Error("NotFound"))}getMany(e,t,r){if(r=y(t,r),r=o(r,w),t=g(t,this[T].entry),"opening"===this[I])return this.defer((()=>this.getMany(e,t,r))),r[w];if(D(this,r))return r[w];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'keys' must be an array")),r[w];if(0===e.length)return this.nextTick(r,null,[]),r[w];const n=this.keyEncoding(t.keyEncoding),i=this.valueEncoding(t.valueEncoding),s=n.format,c=i.format;t.keyEncoding===s&&t.valueEncoding===c||(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));const u=new Array(e.length);for(let o=0;o<e.length;o++){const t=e[o],i=this._checkKey(t);if(i)return this.nextTick(r,i),r[w];u[o]=this.prefixKey(n.encode(t),s)}return this._getMany(u,t,((e,t)=>{if(e)return r(e);try{for(let e=0;e<t.length;e++)void 0!==t[e]&&(t[e]=i.decode(t[e]))}catch(e){return r(new a(`Could not decode one or more of ${t.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:e}))}r(null,t)})),r[w]}_getMany(e,t,r){this.nextTick(r,null,new Array(e.length).fill(void 0))}put(e,t,r,n){if(n=y(r,n),n=o(n,w),r=g(r,this[T].entry),"opening"===this[I])return this.defer((()=>this.put(e,t,r,n))),n[w];if(D(this,n))return n[w];const i=this._checkKey(e)||this._checkValue(t);if(i)return this.nextTick(n,i),n[w];const s=this.keyEncoding(r.keyEncoding),a=this.valueEncoding(r.valueEncoding),c=s.format,u=a.format;r.keyEncoding===c&&r.valueEncoding===u||(r=Object.assign({},r,{keyEncoding:c,valueEncoding:u}));const l=this.prefixKey(s.encode(e),c),h=a.encode(t);return this._put(l,h,r,(r=>{if(r)return n(r);this.emit("put",e,t),n()})),n[w]}_put(e,t,r,n){this.nextTick(n)}del(e,t,r){if(r=y(t,r),r=o(r,w),t=g(t,this[T].key),"opening"===this[I])return this.defer((()=>this.del(e,t,r))),r[w];if(D(this,r))return r[w];const n=this._checkKey(e);if(n)return this.nextTick(r,n),r[w];const i=this.keyEncoding(t.keyEncoding),s=i.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(i.encode(e),s),t,(t=>{if(t)return r(t);this.emit("del",e),r()})),r[w]}_del(e,t,r){this.nextTick(r)}batch(e,t,r){if(!arguments.length){if("opening"===this[I])return new p(this);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(r="function"===typeof e?e:y(t,r),r=o(r,w),t=g(t,this[T].empty),"opening"===this[I])return this.defer((()=>this.batch(e,t,r))),r[w];if(D(this,r))return r[w];if(!Array.isArray(e))return this.nextTick(r,new TypeError("The first argument 'operations' must be an array")),r[w];if(0===e.length)return this.nextTick(r),r[w];const n=new Array(e.length),{keyEncoding:i,valueEncoding:s,...c}=t;for(let o=0;o<e.length;o++){if("object"!==typeof e[o]||null===e[o])return this.nextTick(r,new TypeError("A batch operation must be an object")),r[w];const t=Object.assign({},e[o]);if("put"!==t.type&&"del"!==t.type)return this.nextTick(r,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),r[w];const a=this._checkKey(t.key);if(a)return this.nextTick(r,a),r[w];const c=null!=t.sublevel?t.sublevel:this,u=c.keyEncoding(t.keyEncoding||i),l=u.format;if(t.key=c.prefixKey(u.encode(t.key),l),t.keyEncoding=l,"put"===t.type){const e=this._checkValue(t.value);if(e)return this.nextTick(r,e),r[w];const n=c.valueEncoding(t.valueEncoding||s);t.value=n.encode(t.value),t.valueEncoding=n.format}c!==this&&(t.sublevel=null),n[o]=t}return this._batch(n,c,(t=>{if(t)return r(t);this.emit("batch",e),r()})),r[w]}_batch(e,t,r){this.nextTick(r)}sublevel(e,t){return this._sublevel(e,N.defaults(t))}_sublevel(e,t){return new N(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=y(e,t),t=o(t,w),e=g(e,this[T].empty),"opening"===this[I])return this.defer((()=>this.clear(e,t))),t[w];if(D(this,t))return t[w];const r=e,n=this.keyEncoding(e.keyEncoding);return e=m(e,n),e.keyEncoding=n.format,0===e.limit?this.nextTick(t):this._clear(e,(e=>{if(e)return t(e);this.emit("clear",r),t()})),t[w]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=m(e,t),e.keys=!1!==e.keys,e.values=!1!==e.values,e[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[I])return new h(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new c(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=m(e,t),e[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[I])return new d(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new u(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),r=this.valueEncoding(e&&e.valueEncoding);if(e=m(e,t),e[c.keyEncoding]=t,e[c.valueEncoding]=r,e.keyEncoding=t.format,e.valueEncoding=r.format,"opening"===this[I])return new f(this,e);if("open"!==this[I])throw new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new l(this,e)}defer(e){if("function"!==typeof e)throw new TypeError("The first argument must be a function");this[_].push(e)}[A](){if(0===this[_].length)return;const e=this[_];this[_]=[];for(const t of e)t()}attachResource(e){if("object"!==typeof e||null===e||"function"!==typeof e.close)throw new TypeError("The first argument must be a resource object");this[b].add(e)}detachResource(e){this[b].delete(e)}_chainedBatch(){return new p(this)}_checkKey(e){if(null===e||void 0===e)return new a("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(null===e||void 0===e)return new a("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}O.prototype.nextTick=r(6565);const{AbstractSublevel:N}=r(2775)({AbstractLevel:O});t.AbstractLevel=O,t.AbstractSublevel=N;const D=function(e,t){return"open"!==e[I]&&(e.nextTick(t,new a("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},B=function(e){return Object.keys(e.supports.encodings).filter((t=>!!e.supports.encodings[t]))}},9420:function(e,t,r){"use strict";t.AbstractLevel=r(2427).AbstractLevel,t.AbstractSublevel=r(2427).AbstractSublevel,t.AbstractIterator=r(5965).AbstractIterator,t.AbstractKeyIterator=r(5965).AbstractKeyIterator,t.AbstractValueIterator=r(5965).AbstractValueIterator,t.AbstractChainedBatch=r(7081).AbstractChainedBatch},140:function(e,t,r){"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:s}=r(5965),o=Symbol("unfix"),a=Symbol("iterator"),c=Symbol("handleOne"),u=Symbol("handleMany"),l=Symbol("callback");class h extends n{constructor(e,t,r,n){super(e,t),this[a]=r,this[o]=n,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](e,t,r){const n=this[l];if(e)return n(e);void 0!==t&&(t=this[o](t)),n(e,t,r)}[u](e,t){const r=this[l];if(e)return r(e);for(const n of t){const e=n[0];void 0!==e&&(n[0]=this[o](e))}r(e,t)}}class d extends i{constructor(e,t,r,n){super(e,t),this[a]=r,this[o]=n,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](e,t){const r=this[l];if(e)return r(e);void 0!==t&&(t=this[o](t)),r(e,t)}[u](e,t){const r=this[l];if(e)return r(e);for(let n=0;n<t.length;n++){const e=t[n];void 0!==e&&(t[n]=this[o](e))}r(e,t)}}class f extends s{constructor(e,t,r){super(e,t),this[a]=r}}for(const p of[h,d])p.prototype._next=function(e){this[l]=e,this[a].next(this[c])},p.prototype._nextv=function(e,t,r){this[l]=r,this[a].nextv(e,t,this[u])},p.prototype._all=function(e,t){this[l]=t,this[a].all(e,this[u])};for(const p of[f])p.prototype._next=function(e){this[a].next(e)},p.prototype._nextv=function(e,t,r){this[a].nextv(e,t,r)},p.prototype._all=function(e,t){this[a].all(e,t)};for(const p of[h,d,f])p.prototype._seek=function(e,t){this[a].seek(e,t)},p.prototype._close=function(e){this[a].close(e)};t.AbstractSublevelIterator=h,t.AbstractSublevelKeyIterator=d,t.AbstractSublevelValueIterator=f},2775:function(e,t,r){"use strict";r(3408),r(4590);const n=r(4334),{Buffer:i}=r(6937)||{},{AbstractSublevelIterator:s,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:a}=r(140),c=Symbol("prefix"),u=Symbol("upperBound"),l=Symbol("prefixRange"),h=Symbol("parent"),d=Symbol("unfix"),f=new TextEncoder,p={separator:"!"};e.exports=function({AbstractLevel:e}){class t extends e{static defaults(e){if("string"===typeof e)throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(e&&e.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==e?p:e.separator?e:{...e,separator:"!"}}constructor(e,r,i){const{separator:s,manifest:o,...a}=t.defaults(i);r=v(r,s);const l=s.charCodeAt(0)+1,p=e[h]||e;if(!f.encode(r).every((e=>e>l&&e<127)))throw new n(`Prefix must use bytes > ${l} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(y(p,o),a);const g=(e.prefix||"")+s+r+s,b=g.slice(0,-1)+String.fromCharCode(l);this[h]=p,this[c]=new m(g),this[u]=new m(b),this[d]=new w,this.nextTick=p.nextTick}prefixKey(e,t){if("utf8"===t)return this[c].utf8+e;if(0===e.byteLength)return this[c][t];if("view"===t){const t=this[c].view,r=new Uint8Array(t.byteLength+e.byteLength);return r.set(t,0),r.set(e,t.byteLength),r}{const t=this[c].buffer;return i.concat([t,e],t.byteLength+e.byteLength)}}[l](e,t){void 0!==e.gte?e.gte=this.prefixKey(e.gte,t):void 0!==e.gt?e.gt=this.prefixKey(e.gt,t):e.gte=this[c][t],void 0!==e.lte?e.lte=this.prefixKey(e.lte,t):void 0!==e.lt?e.lt=this.prefixKey(e.lt,t):e.lte=this[u][t]}get prefix(){return this[c].utf8}get db(){return this[h]}_open(e,t){this[h].open({passive:!0},t)}_put(e,t,r,n){this[h].put(e,t,r,n)}_get(e,t,r){this[h].get(e,t,r)}_getMany(e,t,r){this[h].getMany(e,t,r)}_del(e,t,r){this[h].del(e,t,r)}_batch(e,t,r){this[h].batch(e,t,r)}_clear(e,t){this[l](e,e.keyEncoding),this[h].clear(e,t)}_iterator(e){this[l](e,e.keyEncoding);const t=this[h].iterator(e),r=this[d].get(this[c].utf8.length,e.keyEncoding);return new s(this,e,t,r)}_keys(e){this[l](e,e.keyEncoding);const t=this[h].keys(e),r=this[d].get(this[c].utf8.length,e.keyEncoding);return new o(this,e,t,r)}_values(e){this[l](e,e.keyEncoding);const t=this[h].values(e);return new a(this,e,t)}}return{AbstractSublevel:t}};const y=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:g(e,"utf8"),buffer:g(e,"buffer"),view:g(e,"view")}}},g=function(e,t){return!!e.supports.encodings[t]&&e.keyEncoding(t).name===t};class m{constructor(e){this.utf8=e,this.view=f.encode(e),this.buffer=i?i.from(this.view.buffer,0,this.view.byteLength):{}}}class w{constructor(){this.cache=new Map}get(e,t){let r=this.cache.get(t);return void 0===r&&(r="view"===t?function(e,t){return t.subarray(e)}.bind(null,e):function(e,t){return t.slice(e)}.bind(null,e),this.cache.set(t,r)),r}}const v=function(e,t){let r=0,n=e.length;while(r<n&&e[r]===t)r++;while(n>r&&e[n-1]===t)n--;return e.slice(r,n)}},6001:function(e,t){"use strict";t.getCallback=function(e,t){return"function"===typeof e?e:t},t.getOptions=function(e,t){return"object"===typeof e&&null!==e?e:void 0!==t?t:{}}},7492:function(e,t,r){"use strict";r(7658);const{AbstractChainedBatch:n}=r(7081),i=r(4334),s=Symbol("encoded");class o extends n{constructor(e){super(e),this[s]=[]}_put(e,t,r){this[s].push({...r,type:"put",key:e,value:t})}_del(e,t){this[s].push({...t,type:"del",key:e})}_clear(){this[s]=[]}_write(e,t){"opening"===this.db.status?this.db.defer((()=>this._write(e,t))):"open"===this.db.status?0===this[s].length?this.nextTick(t):this.db._batch(this[s],e,t):this.nextTick(t,new i("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}t.DefaultChainedBatch=o},3416:function(e,t,r){"use strict";const{AbstractKeyIterator:n,AbstractValueIterator:i}=r(5965),s=Symbol("iterator"),o=Symbol("callback"),a=Symbol("handleOne"),c=Symbol("handleMany");class u extends n{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!0,values:!1}),this[a]=this[a].bind(this),this[c]=this[c].bind(this)}}class l extends i{constructor(e,t){super(e,t),this[s]=e.iterator({...t,keys:!1,values:!0}),this[a]=this[a].bind(this),this[c]=this[c].bind(this)}}for(const h of[u,l]){const e=h===u,t=e?e=>e[0]:e=>e[1];h.prototype._next=function(e){this[o]=e,this[s].next(this[a])},h.prototype[a]=function(t,r,n){const i=this[o];t?i(t):i(null,e?r:n)},h.prototype._nextv=function(e,t,r){this[o]=r,this[s].nextv(e,t,this[c])},h.prototype._all=function(e,t){this[o]=t,this[s].all(e,this[c])},h.prototype[c]=function(e,r){const n=this[o];e?n(e):n(null,r.map(t))},h.prototype._seek=function(e,t){this[s].seek(e,t)},h.prototype._close=function(e){this[s].close(e)}}t.DefaultKeyIterator=u,t.DefaultValueIterator=l},5502:function(e,t,r){"use strict";const{AbstractIterator:n,AbstractKeyIterator:i,AbstractValueIterator:s}=r(5965),o=r(4334),a=Symbol("nut"),c=Symbol("undefer"),u=Symbol("factory");class l extends n{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.iterator(t),this.db.defer((()=>this[c]()))}}class h extends i{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.keys(t),this.db.defer((()=>this[c]()))}}class d extends s{constructor(e,t){super(e,t),this[a]=null,this[u]=()=>e.values(t),this.db.defer((()=>this[c]()))}}for(const f of[l,h,d])f.prototype[c]=function(){"open"===this.db.status&&(this[a]=this[u]())},f.prototype._next=function(e){null!==this[a]?this[a].next(e):"opening"===this.db.status?this.db.defer((()=>this._next(e))):this.nextTick(e,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},f.prototype._nextv=function(e,t,r){null!==this[a]?this[a].nextv(e,t,r):"opening"===this.db.status?this.db.defer((()=>this._nextv(e,t,r))):this.nextTick(r,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},f.prototype._all=function(e,t){null!==this[a]?this[a].all(t):"opening"===this.db.status?this.db.defer((()=>this._all(e,t))):this.nextTick(t,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},f.prototype._seek=function(e,t){null!==this[a]?this[a]._seek(e,t):"opening"===this.db.status&&this.db.defer((()=>this._seek(e,t)))},f.prototype._close=function(e){null!==this[a]?this[a].close(e):"opening"===this.db.status?this.db.defer((()=>this._close(e))):this.nextTick(e)};t.DeferredIterator=l,t.DeferredKeyIterator=h,t.DeferredValueIterator=d},6565:function(e,t,r){"use strict";const n=r(3802);e.exports=function(e,...t){0===t.length?n(e):n((()=>e(...t)))}},5780:function(e,t,r){"use strict";const n=r(4334),i=Object.prototype.hasOwnProperty,s=new Set(["lt","lte","gt","gte"]);e.exports=function(e,t){const r={};for(const o in e)if(i.call(e,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new n(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===o)throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s.has(o)?r[o]=t.encode(e[o]):r[o]=e[o]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}},6937:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(3408),r(4590),r(7658);const n=r(1271),i=r(7055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=w(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"===typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function f(e){return h(e),c(e<0?0:0|v(e))}function p(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|E(e,t);let n=c(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){const t=e.length<0?0:0|v(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(oe(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function w(e){if(u.isBuffer(e)){const t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?c(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function v(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),u.alloc(+e)}function E(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function A(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function I(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(ae(n))return o;e[r+o]=n}return o}function T(e,t,r,n){return se(te(t,e.length-r),e,r,n)}function C(e,t,r,n){return se(re(t),e,r,n)}function R(e,t,r,n){return se(ie(t),e,r,n)}function P(e,t,r,n){return se(ne(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return D(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(oe(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t;const a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r);for(let u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return S(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return S(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return I(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function D(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=t;s<r;++s)i+=ce[e[s]];return i}function U(e,t,r){const n=e.slice(t,r);let i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function z(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function $(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function K(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=t,i=1,s=this[e+--n];while(n>0&&(i*=256))s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,s=0;this[t]=255&e;while(++s<r&&(i*=256))this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,s=1;this[t+i]=255&e;while(--i>=0&&(s*=256))this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=ue((function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=ue((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;this[t]=255&e;while(++i<r&&(s*=256))e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;this[t+i]=255&e;while(--i>=0&&(s*=256))e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=ue((function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=ue((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return K(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return K(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const H={};function G(e,t,r){H[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Q(e,t,r){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function Y(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new H.ERR_OUT_OF_RANGE("value",i,e)}Q(n,i,s)}function J(e,t){if("number"!==typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw J(e,r),new H.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Z,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const s=[];for(let o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function ie(e){return n.toByteArray(ee(e))}function se(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ce=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ue(e){return"undefined"===typeof BigInt?le:e}function le(){throw new Error("BigInt not supported")}},4908:function(e){function t(e){const t=new globalThis.AbortController;function r(){t.abort();for(const t of e)t&&t.removeEventListener&&t.removeEventListener("abort",r)}for(const n of e)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return t.signal}e.exports=t,e.exports.anySignal=t},1271:function(e,t,r){"use strict";r(3408),r(4590),r(7658),t.byteLength=l,t.toByteArray=d,t.fromByteArray=y;for(var n=[],i=[],s="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function l(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function h(e,t,r){return 3*(t+r)/4-r}function d(e){var t,r,n=u(e),o=n[0],a=n[1],c=new s(h(e,o,a)),l=0,d=a>0?o-4:o;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c}function f(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(f(n));return i.join("")}function y(e){for(var t,r=e.length,i=r%3,s=[],o=16383,a=0,c=r-i;a<c;a+=o)s.push(p(e,a,a+o>c?c:a+o));return 1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},1742:function(e,t,r){"use strict";r(7658);for(var n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={},s=0;s<n.length;s++){var o=n.charAt(s);if(void 0!==i[o])throw new TypeError(o+" is ambiguous");i[o]=s}function a(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function c(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=a(t)^n>>5}for(t=a(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=a(t)^31&i}return t}function u(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var i=c(e);if("string"===typeof i)throw new Error(i);for(var s=e+"1",o=0;o<t.length;++o){var u=t[o];if(u>>5!==0)throw new Error("Non 5-bit word");i=a(i)^u,s+=n.charAt(u)}for(o=0;o<6;++o)i=a(i);for(i^=1,o=0;o<6;++o){var l=i>>5*(5-o)&31;s+=n.charAt(l)}return s}function l(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;e=r;var s=e.lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var o=e.slice(0,s),u=e.slice(s+1);if(u.length<6)return"Data too short";var l=c(o);if("string"===typeof l)return l;for(var h=[],d=0;d<u.length;++d){var f=u.charAt(d),p=i[f];if(void 0===p)return"Unknown character "+f;l=a(l)^p,d+6>=u.length||h.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:o,words:h}}function h(){var e=l.apply(null,arguments);if("object"===typeof e)return e}function d(e){var t=l.apply(null,arguments);if("object"===typeof t)return t;throw new Error(t)}function f(e,t,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c){i=i<<t|e[c],s+=t;while(s>=r)s-=r,a.push(i>>s&o)}if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function p(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t}function y(e){var t=f(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)}function g(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t}function m(e){var t=f(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}e.exports={decodeUnsafe:h,decode:d,encode:u,toWordsUnsafe:p,toWords:y,fromWordsUnsafe:g,fromWords:m}},7336:function(e,t,r){"use strict";const n=r(411);function i(e){return"function"===typeof e.stream?n(e.stream()):n(new Response(e).body)}e.exports=i},2396:function(e,t,r){e=r.nmd(e),function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"===typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(6601).Buffer}catch(P){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),c=t;c<a;c++){var u=e.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&o<i,"Invalid character"),s+=o}return s}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"===typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,a+=24,a>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else{var a=e.length-t;for(n=a%2===0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8}this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=u(e,l,e.length,t),l=0;l<o;l++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){l(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){while(this.length<e)this.words[this.length++]=0;return this},s.prototype._strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(P){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var r;if(e=e||10,t=0|t||1,16===e||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,i+=2,i>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}0!==s&&(r=s.toString(16)+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],l=p[e];r="";var h=this.clone();h.negative=0;while(!h.isZero()){var y=h.modrn(l).toString(e);h=h.idivn(l),r=h.isZero()?y+r:d[u-y.length]+y+r}this.isZero()&&(r="0"+r);while(r.length%t!==0)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var y=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function g(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;i=0|e.words[p],s=0|t.words[f],o=i*s+h,l+=o/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=y(e,s),a="le"===t?"LE":"BE";return this["_toArrayLike"+a](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length){e[r++]=n;while(r<e.length)e[r++]=0}},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0){e[r--]=n;while(r>=0)e[r--]=0}},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){while(this.length<e.length)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)t=(0|r.words[o])-(0|n.words[o])+s,s=t>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)t=(0|r.words[o])+s,s=t>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var w=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,f=0|o[1],p=8191&f,y=f>>>13,g=0|o[2],m=8191&g,w=g>>>13,v=0|o[3],b=8191&v,E=v>>>13,_=0|o[4],A=8191&_,S=_>>>13,k=0|o[5],I=8191&k,T=k>>>13,C=0|o[6],R=8191&C,P=C>>>13,x=0|o[7],O=8191&x,N=x>>>13,D=0|o[8],B=8191&D,L=D>>>13,M=0|o[9],U=8191&M,F=M>>>13,j=0|a[0],V=8191&j,z=j>>>13,$=0|a[1],q=8191&$,K=$>>>13,H=0|a[2],G=8191&H,W=H>>>13,Q=0|a[3],Y=8191&Q,J=Q>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,ye=fe>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(h,V),i=Math.imul(h,z),i=i+Math.imul(d,V)|0,s=Math.imul(d,z);var ge=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,V),i=Math.imul(p,z),i=i+Math.imul(y,V)|0,s=Math.imul(y,z),n=n+Math.imul(h,q)|0,i=i+Math.imul(h,K)|0,i=i+Math.imul(d,q)|0,s=s+Math.imul(d,K)|0;var me=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,V),i=Math.imul(m,z),i=i+Math.imul(w,V)|0,s=Math.imul(w,z),n=n+Math.imul(p,q)|0,i=i+Math.imul(p,K)|0,i=i+Math.imul(y,q)|0,s=s+Math.imul(y,K)|0,n=n+Math.imul(h,G)|0,i=i+Math.imul(h,W)|0,i=i+Math.imul(d,G)|0,s=s+Math.imul(d,W)|0;var we=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(b,V),i=Math.imul(b,z),i=i+Math.imul(E,V)|0,s=Math.imul(E,z),n=n+Math.imul(m,q)|0,i=i+Math.imul(m,K)|0,i=i+Math.imul(w,q)|0,s=s+Math.imul(w,K)|0,n=n+Math.imul(p,G)|0,i=i+Math.imul(p,W)|0,i=i+Math.imul(y,G)|0,s=s+Math.imul(y,W)|0,n=n+Math.imul(h,Y)|0,i=i+Math.imul(h,J)|0,i=i+Math.imul(d,Y)|0,s=s+Math.imul(d,J)|0;var ve=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(A,V),i=Math.imul(A,z),i=i+Math.imul(S,V)|0,s=Math.imul(S,z),n=n+Math.imul(b,q)|0,i=i+Math.imul(b,K)|0,i=i+Math.imul(E,q)|0,s=s+Math.imul(E,K)|0,n=n+Math.imul(m,G)|0,i=i+Math.imul(m,W)|0,i=i+Math.imul(w,G)|0,s=s+Math.imul(w,W)|0,n=n+Math.imul(p,Y)|0,i=i+Math.imul(p,J)|0,i=i+Math.imul(y,Y)|0,s=s+Math.imul(y,J)|0,n=n+Math.imul(h,Z)|0,i=i+Math.imul(h,ee)|0,i=i+Math.imul(d,Z)|0,s=s+Math.imul(d,ee)|0;var be=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(I,V),i=Math.imul(I,z),i=i+Math.imul(T,V)|0,s=Math.imul(T,z),n=n+Math.imul(A,q)|0,i=i+Math.imul(A,K)|0,i=i+Math.imul(S,q)|0,s=s+Math.imul(S,K)|0,n=n+Math.imul(b,G)|0,i=i+Math.imul(b,W)|0,i=i+Math.imul(E,G)|0,s=s+Math.imul(E,W)|0,n=n+Math.imul(m,Y)|0,i=i+Math.imul(m,J)|0,i=i+Math.imul(w,Y)|0,s=s+Math.imul(w,J)|0,n=n+Math.imul(p,Z)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(y,Z)|0,s=s+Math.imul(y,ee)|0,n=n+Math.imul(h,re)|0,i=i+Math.imul(h,ne)|0,i=i+Math.imul(d,re)|0,s=s+Math.imul(d,ne)|0;var Ee=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(R,V),i=Math.imul(R,z),i=i+Math.imul(P,V)|0,s=Math.imul(P,z),n=n+Math.imul(I,q)|0,i=i+Math.imul(I,K)|0,i=i+Math.imul(T,q)|0,s=s+Math.imul(T,K)|0,n=n+Math.imul(A,G)|0,i=i+Math.imul(A,W)|0,i=i+Math.imul(S,G)|0,s=s+Math.imul(S,W)|0,n=n+Math.imul(b,Y)|0,i=i+Math.imul(b,J)|0,i=i+Math.imul(E,Y)|0,s=s+Math.imul(E,J)|0,n=n+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0,i=i+Math.imul(w,Z)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,i=i+Math.imul(p,ne)|0,i=i+Math.imul(y,re)|0,s=s+Math.imul(y,ne)|0,n=n+Math.imul(h,se)|0,i=i+Math.imul(h,oe)|0,i=i+Math.imul(d,se)|0,s=s+Math.imul(d,oe)|0;var _e=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(O,V),i=Math.imul(O,z),i=i+Math.imul(N,V)|0,s=Math.imul(N,z),n=n+Math.imul(R,q)|0,i=i+Math.imul(R,K)|0,i=i+Math.imul(P,q)|0,s=s+Math.imul(P,K)|0,n=n+Math.imul(I,G)|0,i=i+Math.imul(I,W)|0,i=i+Math.imul(T,G)|0,s=s+Math.imul(T,W)|0,n=n+Math.imul(A,Y)|0,i=i+Math.imul(A,J)|0,i=i+Math.imul(S,Y)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(b,Z)|0,i=i+Math.imul(b,ee)|0,i=i+Math.imul(E,Z)|0,s=s+Math.imul(E,ee)|0,n=n+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0,i=i+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(p,se)|0,i=i+Math.imul(p,oe)|0,i=i+Math.imul(y,se)|0,s=s+Math.imul(y,oe)|0,n=n+Math.imul(h,ce)|0,i=i+Math.imul(h,ue)|0,i=i+Math.imul(d,ce)|0,s=s+Math.imul(d,ue)|0;var Ae=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(B,V),i=Math.imul(B,z),i=i+Math.imul(L,V)|0,s=Math.imul(L,z),n=n+Math.imul(O,q)|0,i=i+Math.imul(O,K)|0,i=i+Math.imul(N,q)|0,s=s+Math.imul(N,K)|0,n=n+Math.imul(R,G)|0,i=i+Math.imul(R,W)|0,i=i+Math.imul(P,G)|0,s=s+Math.imul(P,W)|0,n=n+Math.imul(I,Y)|0,i=i+Math.imul(I,J)|0,i=i+Math.imul(T,Y)|0,s=s+Math.imul(T,J)|0,n=n+Math.imul(A,Z)|0,i=i+Math.imul(A,ee)|0,i=i+Math.imul(S,Z)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,i=i+Math.imul(E,re)|0,s=s+Math.imul(E,ne)|0,n=n+Math.imul(m,se)|0,i=i+Math.imul(m,oe)|0,i=i+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,n=n+Math.imul(p,ce)|0,i=i+Math.imul(p,ue)|0,i=i+Math.imul(y,ce)|0,s=s+Math.imul(y,ue)|0,n=n+Math.imul(h,he)|0,i=i+Math.imul(h,de)|0,i=i+Math.imul(d,he)|0,s=s+Math.imul(d,de)|0;var Se=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,V),i=Math.imul(U,z),i=i+Math.imul(F,V)|0,s=Math.imul(F,z),n=n+Math.imul(B,q)|0,i=i+Math.imul(B,K)|0,i=i+Math.imul(L,q)|0,s=s+Math.imul(L,K)|0,n=n+Math.imul(O,G)|0,i=i+Math.imul(O,W)|0,i=i+Math.imul(N,G)|0,s=s+Math.imul(N,W)|0,n=n+Math.imul(R,Y)|0,i=i+Math.imul(R,J)|0,i=i+Math.imul(P,Y)|0,s=s+Math.imul(P,J)|0,n=n+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,i=i+Math.imul(T,Z)|0,s=s+Math.imul(T,ee)|0,n=n+Math.imul(A,re)|0,i=i+Math.imul(A,ne)|0,i=i+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(b,se)|0,i=i+Math.imul(b,oe)|0,i=i+Math.imul(E,se)|0,s=s+Math.imul(E,oe)|0,n=n+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0,i=i+Math.imul(w,ce)|0,s=s+Math.imul(w,ue)|0,n=n+Math.imul(p,he)|0,i=i+Math.imul(p,de)|0,i=i+Math.imul(y,he)|0,s=s+Math.imul(y,de)|0,n=n+Math.imul(h,pe)|0,i=i+Math.imul(h,ye)|0,i=i+Math.imul(d,pe)|0,s=s+Math.imul(d,ye)|0;var ke=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,q),i=Math.imul(U,K),i=i+Math.imul(F,q)|0,s=Math.imul(F,K),n=n+Math.imul(B,G)|0,i=i+Math.imul(B,W)|0,i=i+Math.imul(L,G)|0,s=s+Math.imul(L,W)|0,n=n+Math.imul(O,Y)|0,i=i+Math.imul(O,J)|0,i=i+Math.imul(N,Y)|0,s=s+Math.imul(N,J)|0,n=n+Math.imul(R,Z)|0,i=i+Math.imul(R,ee)|0,i=i+Math.imul(P,Z)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,i=i+Math.imul(T,re)|0,s=s+Math.imul(T,ne)|0,n=n+Math.imul(A,se)|0,i=i+Math.imul(A,oe)|0,i=i+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,i=i+Math.imul(E,ce)|0,s=s+Math.imul(E,ue)|0,n=n+Math.imul(m,he)|0,i=i+Math.imul(m,de)|0,i=i+Math.imul(w,he)|0,s=s+Math.imul(w,de)|0,n=n+Math.imul(p,pe)|0,i=i+Math.imul(p,ye)|0,i=i+Math.imul(y,pe)|0,s=s+Math.imul(y,ye)|0;var Ie=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,G),i=Math.imul(U,W),i=i+Math.imul(F,G)|0,s=Math.imul(F,W),n=n+Math.imul(B,Y)|0,i=i+Math.imul(B,J)|0,i=i+Math.imul(L,Y)|0,s=s+Math.imul(L,J)|0,n=n+Math.imul(O,Z)|0,i=i+Math.imul(O,ee)|0,i=i+Math.imul(N,Z)|0,s=s+Math.imul(N,ee)|0,n=n+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,i=i+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(I,se)|0,i=i+Math.imul(I,oe)|0,i=i+Math.imul(T,se)|0,s=s+Math.imul(T,oe)|0,n=n+Math.imul(A,ce)|0,i=i+Math.imul(A,ue)|0,i=i+Math.imul(S,ce)|0,s=s+Math.imul(S,ue)|0,n=n+Math.imul(b,he)|0,i=i+Math.imul(b,de)|0,i=i+Math.imul(E,he)|0,s=s+Math.imul(E,de)|0,n=n+Math.imul(m,pe)|0,i=i+Math.imul(m,ye)|0,i=i+Math.imul(w,pe)|0,s=s+Math.imul(w,ye)|0;var Te=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,Y),i=Math.imul(U,J),i=i+Math.imul(F,Y)|0,s=Math.imul(F,J),n=n+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,i=i+Math.imul(L,Z)|0,s=s+Math.imul(L,ee)|0,n=n+Math.imul(O,re)|0,i=i+Math.imul(O,ne)|0,i=i+Math.imul(N,re)|0,s=s+Math.imul(N,ne)|0,n=n+Math.imul(R,se)|0,i=i+Math.imul(R,oe)|0,i=i+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,n=n+Math.imul(I,ce)|0,i=i+Math.imul(I,ue)|0,i=i+Math.imul(T,ce)|0,s=s+Math.imul(T,ue)|0,n=n+Math.imul(A,he)|0,i=i+Math.imul(A,de)|0,i=i+Math.imul(S,he)|0,s=s+Math.imul(S,de)|0,n=n+Math.imul(b,pe)|0,i=i+Math.imul(b,ye)|0,i=i+Math.imul(E,pe)|0,s=s+Math.imul(E,ye)|0;var Ce=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,Z),i=Math.imul(U,ee),i=i+Math.imul(F,Z)|0,s=Math.imul(F,ee),n=n+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,i=i+Math.imul(L,re)|0,s=s+Math.imul(L,ne)|0,n=n+Math.imul(O,se)|0,i=i+Math.imul(O,oe)|0,i=i+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,n=n+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,i=i+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(I,he)|0,i=i+Math.imul(I,de)|0,i=i+Math.imul(T,he)|0,s=s+Math.imul(T,de)|0,n=n+Math.imul(A,pe)|0,i=i+Math.imul(A,ye)|0,i=i+Math.imul(S,pe)|0,s=s+Math.imul(S,ye)|0;var Re=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,re),i=Math.imul(U,ne),i=i+Math.imul(F,re)|0,s=Math.imul(F,ne),n=n+Math.imul(B,se)|0,i=i+Math.imul(B,oe)|0,i=i+Math.imul(L,se)|0,s=s+Math.imul(L,oe)|0,n=n+Math.imul(O,ce)|0,i=i+Math.imul(O,ue)|0,i=i+Math.imul(N,ce)|0,s=s+Math.imul(N,ue)|0,n=n+Math.imul(R,he)|0,i=i+Math.imul(R,de)|0,i=i+Math.imul(P,he)|0,s=s+Math.imul(P,de)|0,n=n+Math.imul(I,pe)|0,i=i+Math.imul(I,ye)|0,i=i+Math.imul(T,pe)|0,s=s+Math.imul(T,ye)|0;var Pe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,se),i=Math.imul(U,oe),i=i+Math.imul(F,se)|0,s=Math.imul(F,oe),n=n+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,i=i+Math.imul(L,ce)|0,s=s+Math.imul(L,ue)|0,n=n+Math.imul(O,he)|0,i=i+Math.imul(O,de)|0,i=i+Math.imul(N,he)|0,s=s+Math.imul(N,de)|0,n=n+Math.imul(R,pe)|0,i=i+Math.imul(R,ye)|0,i=i+Math.imul(P,pe)|0,s=s+Math.imul(P,ye)|0;var xe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,ce),i=Math.imul(U,ue),i=i+Math.imul(F,ce)|0,s=Math.imul(F,ue),n=n+Math.imul(B,he)|0,i=i+Math.imul(B,de)|0,i=i+Math.imul(L,he)|0,s=s+Math.imul(L,de)|0,n=n+Math.imul(O,pe)|0,i=i+Math.imul(O,ye)|0,i=i+Math.imul(N,pe)|0,s=s+Math.imul(N,ye)|0;var Oe=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(U,he),i=Math.imul(U,de),i=i+Math.imul(F,he)|0,s=Math.imul(F,de),n=n+Math.imul(B,pe)|0,i=i+Math.imul(B,ye)|0,i=i+Math.imul(L,pe)|0,s=s+Math.imul(L,ye)|0;var Ne=(u+n|0)+((8191&i)<<13)|0;u=(s+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(U,pe),i=Math.imul(U,ye),i=i+Math.imul(F,pe)|0,s=Math.imul(F,ye);var De=(u+n|0)+((8191&i)<<13)|0;return u=(s+(i>>>13)|0)+(De>>>26)|0,De&=67108863,c[0]=ge,c[1]=me,c[2]=we,c[3]=ve,c[4]=be,c[5]=Ee,c[6]=_e,c[7]=Ae,c[8]=Se,c[9]=ke,c[10]=Ie,c[11]=Te,c[12]=Ce,c[13]=Re,c[14]=Pe,c[15]=xe,c[16]=Oe,c[17]=Ne,c[18]=De,0!==u&&(c[19]=u,r.length++),r};function v(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var l=s-u,h=0|e.words[l],d=0|t.words[u],f=h*d,p=67108863&f;o=o+(f/67108864|0)|0,p=p+a|0,a=67108863&p,o=o+(p>>>26)|0,i+=o>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function b(e,t,r){return v(e,t,r)}function E(e,t){this.x=e,this.y=t}Math.imul||(w=m),s.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?w(this,e,t):n<63?m(this,e,t):n<1024?v(this,e,t):b(this,e,t),r},E.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},E.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},E.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},E.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var h=c,d=u,f=0;f<o;f++){var p=r[l+f],y=n[l+f],g=r[l+f+o],m=n[l+f+o],w=h*g-d*m;m=h*m+d*g,g=w,r[l+f]=p+g,n[l+f]=y+m,r[l+f+o]=p-g,n[l+f+o]=y-m,f!==a&&(w=c*h-u*d,d=c*d+u*h,h=w)}},E.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},E.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},E.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},E.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(0===(-8192&s))},E.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},E.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,u,n),this.transform(o,s,a,c,n,i),this.transform(u,s,l,h,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*h[f];c[f]=a[f]*h[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),b(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=g(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length;n++,r=r.sqr())if(0!==t[n])break;if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return!1;var s=this.words[r];return!!(s&i)},s.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)s=(0|this.words[i+r])+a,a=s>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)s=-(0|this.words[i])+a,a=s>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),i=e,o=0|i.words[i.length-1],a=this._countBits(o);r=26-a,0!==r&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var c,u=n.length-i.length;if("mod"!==t){c=new s(null),c.length=u+1,c.words=new Array(c.length);for(var l=0;l<c.length;l++)c.words[l]=0}var h=n.clone()._ishlnsubmul(i,1,u);0===h.negative&&(n=h,c&&(c.words[u]=1));for(var d=u-1;d>=0;d--){var f=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);f=Math.min(f/o|0,67108863),n._ishlnsubmul(i,f,d);while(0!==n.negative)f--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);c&&(c.words[d]=f)}return c&&c._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:c||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;while(t.isEven()&&r.isEven())t.iushrn(1),r.iushrn(1),++u;var l=r.clone(),h=t.clone();while(!t.isZero()){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0){t.iushrn(d);while(d-- >0)(i.isOdd()||o.isOdd())&&(i.iadd(l),o.isub(h)),i.iushrn(1),o.iushrn(1)}for(var p=0,y=1;0===(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0){r.iushrn(p);while(p-- >0)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1)}t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:r.iushln(u)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();var i,o=new s(1),a=new s(0),c=r.clone();while(t.cmpn(1)>0&&r.cmpn(1)>0){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0){t.iushrn(u);while(u-- >0)o.isOdd()&&o.iadd(c),o.iushrn(1)}for(var h=0,d=1;0===(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0){r.iushrn(h);while(h-- >0)a.isOdd()&&a.iadd(c),a.iushrn(1)}t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return i=0===t.cmpn(1)?o:a,i.cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);do{while(t.isEven())t.iushrn(1);while(r.isEven())r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}while(1);return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0===(1&this.words[0])},s.prototype.isOdd=function(){return 1===(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new C(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(e){if("string"===typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function R(e){C.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},A.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),t=r.bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},A.prototype.split=function(e,t){e.iushrn(this.n,0,t)},A.prototype.imulK=function(e){return e.imul(this.k)},i(S,A),S.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},S.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(k,A),i(I,A),i(T,A),T.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new S;else if("p224"===e)t=new k;else if("p192"===e)t=new I;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return _[e]=t,t},C.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},C.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},C.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},C.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},C.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},C.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},C.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},C.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},C.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},C.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},C.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},C.prototype.isqr=function(e){return this.imul(e,e.clone())},C.prototype.sqr=function(e){return this.mul(e,e)},C.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}var i=this.m.subn(1),o=0;while(!i.isZero()&&0===i.andln(1))o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new s(2*l*l).toRed(this);while(0!==this.pow(l,u).cmp(c))l.redIAdd(c);var h=this.pow(l,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;while(0!==f.cmp(a)){for(var y=f,g=0;0!==y.cmp(a);g++)y=y.redSqr();n(g<p);var m=this.pow(h,new s(1).iushln(p-g-1));d=d.redMul(m),h=m.redSqr(),f=f.redMul(h),p=g}return d},C.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},C.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=new Array(1<<r);n[0]=new s(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],a=0,c=0,u=t.bitLength()%26;for(0===u&&(u=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],h=u-1;h>=0;h--){var d=l>>h&1;o!==n[0]&&(o=this.sqr(o)),0!==d||0!==a?(a<<=1,a|=d,c++,(c===r||0===i&&0===h)&&(o=this.mul(o,n[a]),c=0,a=0)):c=0}u=26}return o},C.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},C.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new R(e)},i(R,C),R.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},R.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},R.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},R.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},R.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}(e,this)},2196:function(e,t,r){"use strict";const{AbstractLevel:n}=r(9420),i=r(4334),s=r(9641),{fromCallback:o}=r(8078),{Iterator:a}=r(274),c=r(394),u=r(2181),l=r(3458),h="level-js-",d=Symbol("idb"),f=Symbol("namePrefix"),p=Symbol("location"),y=Symbol("version"),g=Symbol("store"),m=Symbol("onComplete"),w=Symbol("promise");class v extends n{constructor(e,t,r){if("function"===typeof t||"function"===typeof r)throw new i("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:n,version:s,...o}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),"string"!==typeof e)throw new Error("constructor requires a location string argument");this[p]=e,this[f]=null==n?h:n,this[y]=parseInt(s||1,10),this[d]=null}get location(){return this[p]}get namePrefix(){return this[f]}get version(){return this[y]}get db(){return this[d]}get type(){return"browser-level"}_open(e,t){const r=indexedDB.open(this[f]+this[p],this[y]);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this[d]=r.result,t()},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this[p])||t.createObjectStore(this[p])}}[g](e){const t=this[d].transaction([this[p]],e);return t.objectStore(this[p])}[m](e,t){const r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}}_get(e,t,r){const n=this[g]("readonly");let s;try{s=n.get(e)}catch(o){return this.nextTick(r,o)}this[m](s,(function(e,t){return e?r(e):void 0===t?r(new i("Entry not found",{code:"LEVEL_NOT_FOUND"})):void r(null,c(t))}))}_getMany(e,t,r){const n=this[g]("readonly"),i=e.map((e=>t=>{let r;try{r=n.get(e)}catch(i){return t(i)}r.onsuccess=()=>{const e=r.result;t(null,void 0===e?e:c(e))},r.onerror=e=>{e.stopPropagation(),t(r.error)}}));s(i,16,r)}_del(e,t,r){const n=this[g]("readwrite");let i;try{i=n.delete(e)}catch(s){return this.nextTick(r,s)}this[m](i,r)}_put(e,t,r,n){const i=this[g]("readwrite");let s;try{s=i.put(t,e)}catch(o){return this.nextTick(n,o)}this[m](s,n)}_iterator(e){return new a(this,this[p],e)}_batch(e,t,r){const n=this[g]("readwrite"),i=n.transaction;let s,o=0;function a(){const t=e[o++],r=t.key;let c;try{c="del"===t.type?n.delete(r):n.put(t.value,r)}catch(u){return s=u,void i.abort()}o<e.length?c.onsuccess=a:"function"===typeof i.commit&&i.commit()}i.onabort=function(){r(s||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},a()}_clear(e,t){let r,n;try{r=l(e)}catch(i){return this.nextTick(t)}if(e.limit>=0)return u(this,this[p],r,e,t);try{const e=this[g]("readwrite");n=r?e.delete(r):e.clear()}catch(s){return this.nextTick(t,s)}this[m](n,t)}_close(e){this[d].close(),this.nextTick(e)}}v.destroy=function(e,t,r){"function"===typeof t&&(r=t,t=h),r=o(r,w);const n=indexedDB.deleteDatabase(t+e);return n.onsuccess=function(){r()},n.onerror=function(e){r(e)},r[w]},t.BrowserLevel=v},274:function(e,t,r){"use strict";r(7658);const{AbstractIterator:n}=r(9420),i=r(3458),s=r(394),o=Symbol("cache"),a=Symbol("finished"),c=Symbol("options"),u=Symbol("currentOptions"),l=Symbol("position"),h=Symbol("location"),d=Symbol("first"),f={};class p extends n{constructor(e,t,r){super(e,r),this[o]=[],this[a]=0===this.limit,this[c]=r,this[u]={...r},this[l]=void 0,this[h]=t,this[d]=!0}_nextv(e,t,r){if(this[d]=!1,this[a])return this.nextTick(r,null,[]);if(this[o].length>0)return e=Math.min(e,this[o].length),this.nextTick(r,null,this[o].splice(0,e));let n;void 0!==this[l]&&(this[c].reverse?(this[u].lt=this[l],this[u].lte=void 0):(this[u].gt=this[l],this[u].gte=void 0));try{n=i(this[u])}catch(m){return this[a]=!0,this.nextTick(r,null,[])}const f=this.db.db.transaction([this[h]],"readonly"),p=f.objectStore(this[h]),g=[];if(this[c].reverse){const t=!this[c].values&&p.openKeyCursor?"openKeyCursor":"openCursor";p[t](n,"prev").onsuccess=t=>{const r=t.target.result;if(r){const{key:t,value:n}=r;this[l]=t,g.push([this[c].keys&&void 0!==t?s(t):void 0,this[c].values&&void 0!==n?s(n):void 0]),g.length<e?r.continue():y(f)}else this[a]=!0}}else{let t,r;const i=()=>{if(void 0===t||void 0===r)return;const n=Math.max(t.length,r.length);0===n||e===1/0?this[a]=!0:this[l]=t[n-1],g.length=n;for(let e=0;e<n;e++){const n=t[e],i=r[e];g[e]=[this[c].keys&&void 0!==n?s(n):void 0,this[c].values&&void 0!==i?s(i):void 0]}y(f)};this[c].keys||e<1/0?p.getAllKeys(n,e<1/0?e:void 0).onsuccess=e=>{t=e.target.result,i()}:(t=[],this.nextTick(i)),this[c].values?p.getAll(n,e<1/0?e:void 0).onsuccess=e=>{r=e.target.result,i()}:(r=[],this.nextTick(i))}f.onabort=()=>{r(f.error||new Error("aborted by user")),r=null},f.oncomplete=()=>{r(null,g),r=null}}_next(e){if(this[o].length>0){const[t,r]=this[o].shift();this.nextTick(e,null,t,r)}else if(this[a])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[d]&&(this[d]=!1,t=1),this._nextv(t,f,((t,r)=>{if(t)return e(t);this[o]=r,this._next(e)}))}}_all(e,t){this[d]=!1;const r=this[o].splice(0,this[o].length),n=this.limit-this.count-r.length;if(n<=0)return this.nextTick(t,null,r);this._nextv(n,f,((e,n)=>{if(e)return t(e);r.length>0&&(n=r.concat(n)),t(null,n)}))}_seek(e,t){let r;this[d]=!0,this[o]=[],this[a]=!1,this[l]=void 0,this[u]={...this[c]};try{r=i(this[c])}catch(n){return void(this[a]=!0)}null===r||r.includes(e)?this[c].reverse?this[u].lte=e:this[u].gte=e:this[a]=!0}}function y(e){"function"===typeof e.commit&&e.commit()}t.Iterator=p},2181:function(e){"use strict";e.exports=function(e,t,r,n,i){if(0===n.limit)return e.nextTick(i);const s=e.db.transaction([t],"readwrite"),o=s.objectStore(t);let a=0;s.oncomplete=function(){i()},s.onabort=function(){i(s.error||new Error("aborted by user"))};const c=o.openKeyCursor?"openKeyCursor":"openCursor",u=n.reverse?"prev":"next";o[c](r,u).onsuccess=function(e){const t=e.target.result;t&&(o.delete(t.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&t.continue()})}}},394:function(e,t,r){"use strict";r(3408),r(4590);const n=new TextEncoder;e.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):n.encode(e)}},3458:function(e){"use strict";e.exports=function(e){const t=void 0!==e.gte?e.gte:void 0!==e.gt?e.gt:void 0,r=void 0!==e.lte?e.lte:void 0!==e.lt?e.lt:void 0,n=void 0===e.gte,i=void 0===e.lte;return void 0!==t&&void 0!==r?IDBKeyRange.bound(t,r,n,i):void 0!==t?IDBKeyRange.lowerBound(t,n):void 0!==r?IDBKeyRange.upperBound(r,i):null}},411:function(e){"use strict";async function*t(e,t={}){const r=e.getReader();try{while(1){const e=await r.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&r.cancel(),r.releaseLock()}}e.exports=t},5361:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(3408),r(4590),r(7658);var n=r(1271),i=r(7055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;var o=2147483647;function a(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(r){return!1}}function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);var i=w(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"===typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function f(e){return h(e),c(e<0?0:0|v(e))}function p(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|E(e,t),n=c(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){for(var t=e.length<0?0:0|v(e.length),r=c(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(J(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function w(e){if(u.isBuffer(e)){var t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||X(e.length)?c(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function v(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),u.alloc(+e)}function E(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function A(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function S(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,X(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,i){var s,o=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===c)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){for(var h=!0,d=0;d<c;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return-1}function I(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(X(a))return o;e[r+o]=a}return o}function T(e,t,r,n){return Y(H(t,e.length-r),e,r,n)}function C(e,t,r,n){return Y(G(t),e,r,n)}function R(e,t,r,n){return Y(Q(t),e,r,n)}function P(e,t,r,n){return Y(W(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);var n=[],i=t;while(i<r){var s,o,a,c,u=e[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:s=e[i+1],128===(192&s)&&(c=(31&u)<<6|63&s,c>127&&(l=c));break;case 3:s=e[i+1],o=e[i+2],128===(192&s)&&128===(192&o)&&(c=(15&u)<<12|(63&s)<<6|63&o,c>2047&&(c<55296||c>57343)&&(l=c));break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a,c>65535&&c<1114112&&(l=c))}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return D(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(J(s,Uint8Array))i+s.length>n.length?u.from(s).copy(n,i):Uint8Array.prototype.set.call(n,s,i);else{if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i)}i+=s.length}return n},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var s=i-n,o=r-t,a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r),h=0;h<a;++h)if(c[h]!==l[h]){s=c[h],o=l[h];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return S(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return S(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return I(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function D(e){var t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);var r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}function B(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=Z[e[s]];return i}function U(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function z(e,t,r,n,s){return t=+t,r>>>=0,s||V(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function $(e,t,r,n,s){return t=+t,r>>>=0,s||V(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);var n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);var n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);var n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);var n=t,i=1,s=this[e+--n];while(n>0&&(i*=256))s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;j(this,e,t,r,i,0)}var s=1,o=0;this[t]=255&e;while(++o<r&&(s*=256))this[t+o]=e/s&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;j(this,e,t,r,i,0)}var s=r-1,o=1;this[t+s]=255&e;while(--s>=0&&(o*=256))this[t+s]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;this[t]=255&e;while(++s<r&&(o*=256))e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);j(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;this[t+s]=255&e;while(--s>=0&&(o*=256))e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return z(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return z(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return $(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return $(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(s=t;s<r;++s)this[s]=e;else{var o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var q=/[^+/0-9A-Za-z-_]/g;function K(e){if(e=e.split("=")[0],e=e.trim().replace(q,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function H(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function W(e,t){for(var r,n,i,s=[],o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function Q(e){return n.toByteArray(K(e))}function Y(e,t,r,n){for(var i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!==e}var Z=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},8078:function(e,t,r){"use strict";var n=r(1503);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((()=>t(null,e)))})).catch((function(e){n((()=>t(e)))}))}},1503:function(e){e.exports="function"===typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},5652:function(e,t,r){function n(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)}function s(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}}function o(){let e;try{e=t.storage.getItem("debug")}catch(r){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",BASE_URL:"/"}.DEBUG),e}function a(){try{return localStorage}catch(e){}}t.formatArgs=i,t.save=s,t.load=o,t.useColors=n,t.storage=a(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2940)(t);const{formatters:c}=e.exports;c.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2940:function(e,t,r){function n(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let t,r,s,o=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),s=i-(t||i);r.diff=s,r.prev=t,r.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";o++;const s=n.formatters[i];if("function"===typeof s){const n=e[o];t=s.call(r,n),e.splice(o,1),o--}return t})),n.formatArgs.call(r,e);const c=r.log||n.log;c.apply(r,e)}return a.namespace=e,a.useColors=n.useColors(),a.color=n.selectColor(e),a.extend=i,a.destroy=n.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(r!==n.namespaces&&(r=n.namespaces,s=n.enabled(e)),s),set:e=>{o=e}}),"function"===typeof n.init&&n.init(a),a}function i(e,t){const r=n(this.namespace+("undefined"===typeof t?":":t)+e);return r.log=this.log,r}function s(e){let t;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&(e=r[t].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.slice(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){const e=[...n.names.map(c),...n.skips.map(c).map((e=>"-"+e))].join(",");return n.enable(""),e}function a(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function u(e){return e instanceof Error?e.stack||e.message:e}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=u,n.disable=o,n.enable=s,n.enabled=a,n.humanize=r(7901),n.destroy=l,Object.keys(e).forEach((t=>{n[t]=e[t]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}r(541),r(7658),e.exports=n},8592:function(e){"use strict";const t=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),r=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},n=({clearTimeout:e,setTimeout:t,willResolve:n})=>(i,{value:s,signal:o}={})=>{if(o&&o.aborted)return Promise.reject(r());let a,c,u;const l=e||clearTimeout,h=()=>{l(a),u(r())},d=()=>{o&&o.removeEventListener("abort",h)},f=new Promise(((e,r)=>{c=()=>{d(),n?e(s):r(s)},u=r,a=(t||setTimeout)(c,i)}));return o&&o.addEventListener("abort",h,{once:!0}),f.clear=()=>{l(a),a=null,c()},f},i=e=>{const r=n({...e,willResolve:!0});return r.reject=n({...e,willResolve:!1}),r.range=(e,n,i)=>r(t(e,n),i),r},s=i();s.createWithTimers=i,e.exports=s,e.exports["default"]=s},482:function(e,t,r){"use strict";function n(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}r(541),r(7658),n.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},n.prototype.get=function(e){return this.peekAt(e)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},n.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},n.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var i,s=this._list[t];if(e<r/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-e;i>0;i--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}},n.prototype.remove=function(e,t){var r,n=e,i=t;if(n===(0|n)&&this._head!==this._tail){var s=this.size(),o=this._list.length;if(!(n>=s||n<-s||t<1)){if(n<0&&(n+=s),1===t||!t)return r=new Array(1),r[0]=this.removeOne(n),r;if(0===n&&n+t>=s)return r=this.toArray(),this.clear(),r;var a;for(n+t>s&&(t=s-n),r=new Array(t),a=0;a<t;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===s){for(this._tail=this._tail-t+o&this._capacityMask,a=t;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,a=t-1;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<s/2){for(this._head=this._head+e+t+o&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[n=n-1+o&this._capacityMask]);n=this._head-1+o&this._capacityMask;while(i>0)this._list[n=n-1+o&this._capacityMask]=void 0,i--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,a=s-(t+e);a>0;a--)this.push(this._list[n++]);n=this._tail;while(i>0)this._list[n=n+1+o&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},n.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,s,o,a=arguments.length,c=this._list.length,u=2;if(!n||r<n/2){for(s=new Array(r),i=0;i<r;i++)s[i]=this._list[this._head+i&this._capacityMask];0===t?(o=[],r>0&&(this._head=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._head=this._head+r+c&this._capacityMask);while(a>u)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(s[i-1])}else{s=new Array(n-(r+t));var l=s.length;for(i=0;i<l;i++)s[i]=this._list[this._head+r+t+i&this._capacityMask];0===t?(o=[],r!=n&&(this._tail=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._tail=this._tail-l+c&this._capacityMask);while(u<a)this.push(arguments[u++]);for(i=0;i<l;i++)this.push(s[i])}return o}return this.remove(r,t)}}},n.prototype.clear=function(){this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},n.prototype._copyArray=function(e){var t,r=[],n=this._list,i=n.length;if(e||this._head>this._tail){for(t=this._head;t<i;t++)r.push(n[t]);for(t=0;t<this._tail;t++)r.push(n[t])}else for(t=this._head;t<this._tail;t++)r.push(n[t]);return r},n.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=n},2883:function(e){!function(t,r){e.exports=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}}()},9998:function(e){"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function r(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;const r=function(){};r.prototype=Object.create(Object.getPrototypeOf(e));const s=t(new r,n);return s}}e.exports=r},4772:function(e,t,r){"use strict";r(7658);const n=r(6169);function i(e,t,r){return new n.EventIterator((({push:r})=>(this.addEventListener(e,r,t),()=>this.removeEventListener(e,r,t))),r)}t.zN=n.EventIterator,n.EventIterator},6169:function(e,t,r){"use strict";r(7658),Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch((()=>{})),this.pushQueue.push(t)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((e,t)=>{this.pullQueue.push({resolve:e,reject:t})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class i{constructor(e,{highWaterMark:t=100,lowWaterMark:r=1}={}){const i=new n;i.highWaterMark=t,i.lowWaterMark=r,i.removeCallback=e({push:e=>i.push(e),stop:()=>i.stop(),fail:e=>i.fail(e),on:(e,t)=>{i.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=i,t["default"]=i},6856:function(e,t,r){"use strict";r(7658);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||e,s),c=i?i+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0===--e._eventsCount?e._events=new s:delete e._events[t]}function u(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,s,o){var a=i?i+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,s),!0;case 6:return l.fn.call(l.context,t,r,n,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return c(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||c(this,s);else{for(var a=0,u=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||r&&o[a].context!==r)&&u.push(o[a]);u.length?this._events[s]=1===u.length?u[0]:u:c(this,s)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&c(this,t)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},3793:function(e,t,r){"use strict";r(7658),r(541);var n,i="object"===typeof Reflect?Reflect:null,s=i&&"function"===typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function o(e){console&&console.warn&&console.warn(e)}n=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function c(){c.init.call(this)}e.exports=c,e.exports.once=b,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function d(e,t,r,n){var i,s,a;if(l(r),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"===typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=h(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,o(c)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function y(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?v(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function w(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function b(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}_(e,t,s,{once:!0}),"error"!==t&&E(e,i,{once:!0})}))}function E(e,t,r){"function"===typeof e.on&&_(e,"error",t,r)}function _(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return h(this)},c.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(void 0===c)return!1;if("function"===typeof c)s(c,this,t);else{var u=c.length,l=m(c,u);for(r=0;r<u;++r)s(l[r],this,t)}return!0},c.prototype.addListener=function(e,t){return d(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return d(this,e,t,!0)},c.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},c.prototype.removeListener=function(e,t){var r,n,i,s,o;if(l(t),n=this._events,void 0===n)return this;if(r=n[e],void 0===r)return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():w(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,r,n;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)i=s[n],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},c.prototype.listeners=function(e){return y(this,e,!0)},c.prototype.rawListeners=function(e){return y(this,e,!1)},c.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},c.prototype.listenerCount=g,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},2771:function(e){e.exports=class{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},2819:function(e,t,r){r(7658);const n=r(2771);e.exports=class{constructor(e){this.hwm=e||16,this.head=new n(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new n(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},1173:function(e,t){"use strict";function r(e,t=r.BASE){const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t["default"]=r,e.exports=r},8833:function(e,t,r){"use strict";r.d(t,{Ps:function(){return te}});r(7658);var n=r(2900);function i(e){return"object"==typeof e&&null!==e}function s(e,t){const r=Boolean(e);if(!r)throw new Error(null!=t?t:"Unexpected invariant triggered.")}const o=/\r\n|[\n\r]/g;function a(e,t){let r=0,n=1;for(const i of e.body.matchAll(o)){if("number"===typeof i.index||s(!1),i.index>=t)break;r=i.index+i[0].length,n+=1}return{line:n,column:t+1-r}}function c(e){return u(e.source,a(e.source,e.start))}function u(e,t){const r=e.locationOffset.column-1,n="".padStart(r)+e.body,i=t.line-1,s=e.locationOffset.line-1,o=t.line+s,a=1===t.line?r:0,c=t.column+a,u=`${e.name}:${o}:${c}\n`,h=n.split(/\r\n|[\n\r]/g),d=h[i];if(d.length>120){const e=Math.floor(c/80),t=c%80,r=[];for(let n=0;n<d.length;n+=80)r.push(d.slice(n,n+80));return u+l([[`${o} |`,r[0]],...r.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(t)],["|",r[e+1]]])}return u+l([[o-1+" |",h[i-1]],[`${o} |`,d],["|","^".padStart(c)],[`${o+1} |`,h[i+1]]])}function l(e){const t=e.filter((([e,t])=>void 0!==t)),r=Math.max(...t.map((([e])=>e.length)));return t.map((([e,t])=>e.padStart(r)+(t?" "+t:""))).join("\n")}function h(e){const t=e[0];return null==t||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class d extends Error{constructor(e,...t){var r,n,s;const{nodes:o,source:c,positions:u,path:l,originalError:p,extensions:y}=h(t);super(e),this.name="GraphQLError",this.path=null!==l&&void 0!==l?l:void 0,this.originalError=null!==p&&void 0!==p?p:void 0,this.nodes=f(Array.isArray(o)?o:o?[o]:void 0);const g=f(null===(r=this.nodes)||void 0===r?void 0:r.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!==c&&void 0!==c?c:null===g||void 0===g||null===(n=g[0])||void 0===n?void 0:n.source,this.positions=null!==u&&void 0!==u?u:null===g||void 0===g?void 0:g.map((e=>e.start)),this.locations=u&&c?u.map((e=>a(c,e))):null===g||void 0===g?void 0:g.map((e=>a(e.source,e.start)));const m=i(null===p||void 0===p?void 0:p.extensions)?null===p||void 0===p?void 0:p.extensions:void 0;this.extensions=null!==(s=null!==y&&void 0!==y?y:m)&&void 0!==s?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!==p&&void 0!==p&&p.stack?Object.defineProperty(this,"stack",{value:p.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,d):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+="\n\n"+c(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+="\n\n"+u(this.source,t);return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function f(e){return void 0===e||0===e.length?void 0:e}function p(e,t,r){return new d(`Syntax Error: ${r}`,{source:e,positions:[t]})}var y,g=r(8027);(function(e){e["QUERY"]="QUERY",e["MUTATION"]="MUTATION",e["SUBSCRIPTION"]="SUBSCRIPTION",e["FIELD"]="FIELD",e["FRAGMENT_DEFINITION"]="FRAGMENT_DEFINITION",e["FRAGMENT_SPREAD"]="FRAGMENT_SPREAD",e["INLINE_FRAGMENT"]="INLINE_FRAGMENT",e["VARIABLE_DEFINITION"]="VARIABLE_DEFINITION",e["SCHEMA"]="SCHEMA",e["SCALAR"]="SCALAR",e["OBJECT"]="OBJECT",e["FIELD_DEFINITION"]="FIELD_DEFINITION",e["ARGUMENT_DEFINITION"]="ARGUMENT_DEFINITION",e["INTERFACE"]="INTERFACE",e["UNION"]="UNION",e["ENUM"]="ENUM",e["ENUM_VALUE"]="ENUM_VALUE",e["INPUT_OBJECT"]="INPUT_OBJECT",e["INPUT_FIELD_DEFINITION"]="INPUT_FIELD_DEFINITION"})(y||(y={}));var m,w=r(4478),v=r(7872),b=r(193);(function(e){e["SOF"]="<SOF>",e["EOF"]="<EOF>",e["BANG"]="!",e["DOLLAR"]="$",e["AMP"]="&",e["PAREN_L"]="(",e["PAREN_R"]=")",e["SPREAD"]="...",e["COLON"]=":",e["EQUALS"]="=",e["AT"]="@",e["BRACKET_L"]="[",e["BRACKET_R"]="]",e["BRACE_L"]="{",e["PIPE"]="|",e["BRACE_R"]="}",e["NAME"]="Name",e["INT"]="Int",e["FLOAT"]="Float",e["STRING"]="String",e["BLOCK_STRING"]="BlockString",e["COMMENT"]="Comment"})(m||(m={}));class E{constructor(e){const t=new g.WU(m.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;const e=this.token=this.lookahead();return e}lookahead(){let e=this.token;if(e.kind!==m.EOF)do{if(e.next)e=e.next;else{const t=R(this,e.end);e.next=t,t.prev=e,e=t}}while(e.kind===m.COMMENT);return e}}function _(e){return e===m.BANG||e===m.DOLLAR||e===m.AMP||e===m.PAREN_L||e===m.PAREN_R||e===m.SPREAD||e===m.COLON||e===m.EQUALS||e===m.AT||e===m.BRACKET_L||e===m.BRACKET_R||e===m.BRACE_L||e===m.PIPE||e===m.BRACE_R}function A(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function S(e,t){return k(e.charCodeAt(t))&&I(e.charCodeAt(t+1))}function k(e){return e>=55296&&e<=56319}function I(e){return e>=56320&&e<=57343}function T(e,t){const r=e.source.body.codePointAt(t);if(void 0===r)return m.EOF;if(r>=32&&r<=126){const e=String.fromCodePoint(r);return'"'===e?"'\"'":`"${e}"`}return"U+"+r.toString(16).toUpperCase().padStart(4,"0")}function C(e,t,r,n,i){const s=e.line,o=1+r-e.lineStart;return new g.WU(t,r,n,s,o,i)}function R(e,t){const r=e.source.body,n=r.length;let i=t;while(i<n){const t=r.charCodeAt(i);switch(t){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:10===r.charCodeAt(i+1)?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return P(e,i);case 33:return C(e,m.BANG,i,i+1);case 36:return C(e,m.DOLLAR,i,i+1);case 38:return C(e,m.AMP,i,i+1);case 40:return C(e,m.PAREN_L,i,i+1);case 41:return C(e,m.PAREN_R,i,i+1);case 46:if(46===r.charCodeAt(i+1)&&46===r.charCodeAt(i+2))return C(e,m.SPREAD,i,i+3);break;case 58:return C(e,m.COLON,i,i+1);case 61:return C(e,m.EQUALS,i,i+1);case 64:return C(e,m.AT,i,i+1);case 91:return C(e,m.BRACKET_L,i,i+1);case 93:return C(e,m.BRACKET_R,i,i+1);case 123:return C(e,m.BRACE_L,i,i+1);case 124:return C(e,m.PIPE,i,i+1);case 125:return C(e,m.BRACE_R,i,i+1);case 34:return 34===r.charCodeAt(i+1)&&34===r.charCodeAt(i+2)?F(e,i):N(e,i)}if((0,b.X1)(t)||45===t)return x(e,i,t);if((0,b.LQ)(t))return j(e,i);throw p(e.source,i,39===t?"Unexpected single quote character ('), did you mean to use a double quote (\")?":A(t)||S(r,i)?`Unexpected character: ${T(e,i)}.`:`Invalid character: ${T(e,i)}.`)}return C(e,m.EOF,n,n)}function P(e,t){const r=e.source.body,n=r.length;let i=t+1;while(i<n){const e=r.charCodeAt(i);if(10===e||13===e)break;if(A(e))++i;else{if(!S(r,i))break;i+=2}}return C(e,m.COMMENT,t,i,r.slice(t+1,i))}function x(e,t,r){const n=e.source.body;let i=t,s=r,o=!1;if(45===s&&(s=n.charCodeAt(++i)),48===s){if(s=n.charCodeAt(++i),(0,b.X1)(s))throw p(e.source,i,`Invalid number, unexpected digit after 0: ${T(e,i)}.`)}else i=O(e,i,s),s=n.charCodeAt(i);if(46===s&&(o=!0,s=n.charCodeAt(++i),i=O(e,i,s),s=n.charCodeAt(i)),69!==s&&101!==s||(o=!0,s=n.charCodeAt(++i),43!==s&&45!==s||(s=n.charCodeAt(++i)),i=O(e,i,s),s=n.charCodeAt(i)),46===s||(0,b.LQ)(s))throw p(e.source,i,`Invalid number, expected digit but got: ${T(e,i)}.`);return C(e,o?m.FLOAT:m.INT,t,i,n.slice(t,i))}function O(e,t,r){if(!(0,b.X1)(r))throw p(e.source,t,`Invalid number, expected digit but got: ${T(e,t)}.`);const n=e.source.body;let i=t+1;while((0,b.X1)(n.charCodeAt(i)))++i;return i}function N(e,t){const r=e.source.body,n=r.length;let i=t+1,s=i,o="";while(i<n){const n=r.charCodeAt(i);if(34===n)return o+=r.slice(s,i),C(e,m.STRING,t,i+1,o);if(92!==n){if(10===n||13===n)break;if(A(n))++i;else{if(!S(r,i))throw p(e.source,i,`Invalid character within String: ${T(e,i)}.`);i+=2}}else{o+=r.slice(s,i);const t=117===r.charCodeAt(i+1)?123===r.charCodeAt(i+2)?D(e,i):B(e,i):U(e,i);o+=t.value,i+=t.size,s=i}}throw p(e.source,i,"Unterminated string.")}function D(e,t){const r=e.source.body;let n=0,i=3;while(i<12){const e=r.charCodeAt(t+i++);if(125===e){if(i<5||!A(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|M(e),n<0)break}throw p(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+i)}".`)}function B(e,t){const r=e.source.body,n=L(r,t+2);if(A(n))return{value:String.fromCodePoint(n),size:6};if(k(n)&&92===r.charCodeAt(t+6)&&117===r.charCodeAt(t+7)){const e=L(r,t+8);if(I(e))return{value:String.fromCodePoint(n,e),size:12}}throw p(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+6)}".`)}function L(e,t){return M(e.charCodeAt(t))<<12|M(e.charCodeAt(t+1))<<8|M(e.charCodeAt(t+2))<<4|M(e.charCodeAt(t+3))}function M(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function U(e,t){const r=e.source.body,n=r.charCodeAt(t+1);switch(n){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw p(e.source,t,`Invalid character escape sequence: "${r.slice(t,t+2)}".`)}function F(e,t){const r=e.source.body,n=r.length;let i=e.lineStart,s=t+3,o=s,a="";const c=[];while(s<n){const n=r.charCodeAt(s);if(34===n&&34===r.charCodeAt(s+1)&&34===r.charCodeAt(s+2)){a+=r.slice(o,s),c.push(a);const n=C(e,m.BLOCK_STRING,t,s+3,(0,v.wv)(c).join("\n"));return e.line+=c.length-1,e.lineStart=i,n}if(92!==n||34!==r.charCodeAt(s+1)||34!==r.charCodeAt(s+2)||34!==r.charCodeAt(s+3))if(10!==n&&13!==n)if(A(n))++s;else{if(!S(r,s))throw p(e.source,s,`Invalid character within String: ${T(e,s)}.`);s+=2}else a+=r.slice(o,s),c.push(a),13===n&&10===r.charCodeAt(s+1)?s+=2:++s,a="",o=s,i=s;else a+=r.slice(o,s),o=s+1,s+=4}throw p(e.source,s,"Unterminated string.")}function j(e,t){const r=e.source.body,n=r.length;let i=t+1;while(i<n){const e=r.charCodeAt(i);if(!(0,b.HQ)(e))break;++i}return C(e,m.NAME,t,i,r.slice(t,i))}var V=r(9024);function z(e,t){const r=new $(e,t);return r.parseDocument()}class ${constructor(e,t={}){const r=(0,V.T)(e)?e:new V.H(e);this._lexer=new E(r),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(m.NAME);return this.node(e,{kind:w.h.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:w.h.DOCUMENT,definitions:this.many(m.SOF,this.parseDefinition,m.EOF)})}parseDefinition(){if(this.peek(m.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===m.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw p(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(m.BRACE_L))return this.node(e,{kind:w.h.OPERATION_DEFINITION,operation:g.ku.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(m.NAME)&&(r=this.parseName()),this.node(e,{kind:w.h.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(m.NAME);switch(e.value){case"query":return g.ku.QUERY;case"mutation":return g.ku.MUTATION;case"subscription":return g.ku.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(m.PAREN_L,this.parseVariableDefinition,m.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:w.h.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(m.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(m.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(m.DOLLAR),this.node(e,{kind:w.h.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:w.h.SELECTION_SET,selections:this.many(m.BRACE_L,this.parseSelection,m.BRACE_R)})}parseSelection(){return this.peek(m.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,n;return this.expectOptionalToken(m.COLON)?(r=t,n=this.parseName()):n=t,this.node(e,{kind:w.h.FIELD,alias:r,name:n,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(m.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(m.PAREN_L,t,m.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(m.COLON),this.node(t,{kind:w.h.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(m.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(m.NAME)?this.node(e,{kind:w.h.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:w.h.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables?this.node(e,{kind:w.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:w.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case m.BRACKET_L:return this.parseList(e);case m.BRACE_L:return this.parseObject(e);case m.INT:return this.advanceLexer(),this.node(t,{kind:w.h.INT,value:t.value});case m.FLOAT:return this.advanceLexer(),this.node(t,{kind:w.h.FLOAT,value:t.value});case m.STRING:case m.BLOCK_STRING:return this.parseStringLiteral();case m.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:w.h.BOOLEAN,value:!0});case"false":return this.node(t,{kind:w.h.BOOLEAN,value:!1});case"null":return this.node(t,{kind:w.h.NULL});default:return this.node(t,{kind:w.h.ENUM,value:t.value})}case m.DOLLAR:if(e){if(this.expectToken(m.DOLLAR),this._lexer.token.kind===m.NAME){const e=this._lexer.token.value;throw p(this._lexer.source,t.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(t)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:w.h.STRING,value:e.value,block:e.kind===m.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:w.h.LIST,values:this.any(m.BRACKET_L,t,m.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:w.h.OBJECT,fields:this.any(m.BRACE_L,t,m.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(m.COLON),this.node(t,{kind:w.h.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];while(this.peek(m.AT))t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(m.AT),this.node(t,{kind:w.h.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(m.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(m.BRACKET_R),t=this.node(e,{kind:w.h.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(m.BANG)?this.node(e,{kind:w.h.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:w.h.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(m.STRING)||this.peek(m.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),n=this.many(m.BRACE_L,this.parseOperationTypeDefinition,m.BRACE_R);return this.node(e,{kind:w.h.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:n})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(m.COLON);const r=this.parseNamedType();return this.node(e,{kind:w.h.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),n=this.parseConstDirectives();return this.node(e,{kind:w.h.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:n})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:w.h.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:s})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(m.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(m.BRACE_L,this.parseFieldDefinition,m.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),n=this.parseArgumentDefs();this.expectToken(m.COLON);const i=this.parseTypeReference(),s=this.parseConstDirectives();return this.node(e,{kind:w.h.FIELD_DEFINITION,description:t,name:r,arguments:n,type:i,directives:s})}parseArgumentDefs(){return this.optionalMany(m.PAREN_L,this.parseInputValueDef,m.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(m.COLON);const n=this.parseTypeReference();let i;this.expectOptionalToken(m.EQUALS)&&(i=this.parseConstValueLiteral());const s=this.parseConstDirectives();return this.node(e,{kind:w.h.INPUT_VALUE_DEFINITION,description:t,name:r,type:n,defaultValue:i,directives:s})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();return this.node(e,{kind:w.h.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:n,directives:i,fields:s})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:w.h.UNION_TYPE_DEFINITION,description:t,name:r,directives:n,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(m.EQUALS)?this.delimitedMany(m.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:w.h.ENUM_TYPE_DEFINITION,description:t,name:r,directives:n,values:i})}parseEnumValuesDefinition(){return this.optionalMany(m.BRACE_L,this.parseEnumValueDefinition,m.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),n=this.parseConstDirectives();return this.node(e,{kind:w.h.ENUM_VALUE_DEFINITION,description:t,name:r,directives:n})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw p(this._lexer.source,this._lexer.token.start,`${q(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:w.h.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:n,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(m.BRACE_L,this.parseInputValueDef,m.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===m.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(m.BRACE_L,this.parseOperationTypeDefinition,m.BRACE_R);if(0===t.length&&0===r.length)throw this.unexpected();return this.node(e,{kind:w.h.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(0===r.length)throw this.unexpected();return this.node(e,{kind:w.h.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:w.h.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(0===r.length&&0===n.length&&0===i.length)throw this.unexpected();return this.node(e,{kind:w.h.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:n,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),n=this.parseUnionMemberTypes();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:w.h.UNION_TYPE_EXTENSION,name:t,directives:r,types:n})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),n=this.parseEnumValuesDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:w.h.ENUM_TYPE_EXTENSION,name:t,directives:r,values:n})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),n=this.parseInputFieldsDefinition();if(0===r.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:w.h.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:n})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(m.AT);const r=this.parseName(),n=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const s=this.parseDirectiveLocations();return this.node(e,{kind:w.h.DIRECTIVE_DEFINITION,description:t,name:r,arguments:n,repeatable:i,locations:s})}parseDirectiveLocations(){return this.delimitedMany(m.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(y,t.value))return t;throw this.unexpected(e)}node(e,t){return!0!==this._options.noLocation&&(t.loc=new g.Ye(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw p(this._lexer.source,t.start,`Expected ${K(e)}, found ${q(t)}.`)}expectOptionalToken(e){const t=this._lexer.token;return t.kind===e&&(this.advanceLexer(),!0)}expectKeyword(e){const t=this._lexer.token;if(t.kind!==m.NAME||t.value!==e)throw p(this._lexer.source,t.start,`Expected "${e}", found ${q(t)}.`);this.advanceLexer()}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===m.NAME&&t.value===e&&(this.advanceLexer(),!0)}unexpected(e){const t=null!==e&&void 0!==e?e:this._lexer.token;return p(this._lexer.source,t.start,`Unexpected ${q(t)}.`)}any(e,t,r){this.expectToken(e);const n=[];while(!this.expectOptionalToken(r))n.push(t.call(this));return n}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const e=[];do{e.push(t.call(this))}while(!this.expectOptionalToken(r));return e}return[]}many(e,t,r){this.expectToken(e);const n=[];do{n.push(t.call(this))}while(!this.expectOptionalToken(r));return n}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do{r.push(t.call(this))}while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(void 0!==e&&t.kind!==m.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw p(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function q(e){const t=e.value;return K(e.kind)+(null!=t?` "${t}"`:"")}function K(e){return _(e)?`"${e}"`:e}var H=new Map,G=new Map,W=!0,Q=!1;function Y(e){return e.replace(/[\s,]+/g," ").trim()}function J(e){return Y(e.source.body.substring(e.start,e.end))}function X(e){var t=new Set,r=[];return e.definitions.forEach((function(e){if("FragmentDefinition"===e.kind){var n=e.name.value,i=J(e.loc),s=G.get(n);s&&!s.has(i)?W&&console.warn("Warning: fragment with name "+n+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):s||G.set(n,s=new Set),s.add(i),t.has(i)||(t.add(i),r.push(e))}else r.push(e)})),(0,n.pi)((0,n.pi)({},e),{definitions:r})}function Z(e){var t=new Set(e.definitions);t.forEach((function(e){e.loc&&delete e.loc,Object.keys(e).forEach((function(r){var n=e[r];n&&"object"===typeof n&&t.add(n)}))}));var r=e.loc;return r&&(delete r.startToken,delete r.endToken),e}function ee(e){var t=Y(e);if(!H.has(t)){var r=z(e,{experimentalFragmentVariables:Q,allowLegacyFragmentVariables:Q});if(!r||"Document"!==r.kind)throw new Error("Not a valid GraphQL document.");H.set(t,Z(X(r)))}return H.get(t)}function te(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];"string"===typeof e&&(e=[e]);var n=e[0];return t.forEach((function(t,r){t&&"Document"===t.kind?n+=t.loc.source.body:n+=t,n+=e[r+1]})),ee(n)}function re(){H.clear(),G.clear()}function ne(){W=!1}function ie(){Q=!0}function se(){Q=!1}var oe={gql:te,resetCaches:re,disableFragmentWarnings:ne,enableExperimentalFragmentVariables:ie,disableExperimentalFragmentVariables:se};(function(e){e.gql=oe.gql,e.resetCaches=oe.resetCaches,e.disableFragmentWarnings=oe.disableFragmentWarnings,e.enableExperimentalFragmentVariables=oe.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=oe.disableExperimentalFragmentVariables})(te||(te={})),te["default"]=te},8730:function(e,t,r){var n=t;n.utils=r(3610),n.common=r(9291),n.sha=r(2762),n.ripemd=r(97),n.hmac=r(4133),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},9291:function(e,t,r){"use strict";var n=r(3610),i=r(4961);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},4133:function(e,t,r){"use strict";r(7658);var n=r(3610),i=r(4961);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},97:function(e,t,r){"use strict";var n=r(3610),i=r(9291),s=n.rotl32,o=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function d(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,u),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],l=this.h[4],w=r,v=n,b=i,E=u,_=l,A=0;A<80;A++){var S=o(s(c(r,h(A,n,i,u),e[p[A]+t],d(A)),g[A]),l);r=l,l=u,u=s(i,10),i=n,n=S,S=o(s(c(w,h(79-A,v,b,E),e[y[A]+t],f(A)),m[A]),_),w=_,_=E,E=s(b,10),b=v,v=S}S=a(this.h[1],i,E),this.h[1]=a(this.h[2],u,_),this.h[2]=a(this.h[3],l,w),this.h[3]=a(this.h[4],r,v),this.h[4]=a(this.h[0],n,b),this.h[0]=S},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},2762:function(e,t,r){"use strict";t.sha1=r(1070),t.sha224=r(7031),t.sha256=r(7875),t.sha384=r(9118),t.sha512=r(2045)},1070:function(e,t,r){"use strict";var n=r(3610),i=r(9291),s=r(5366),o=n.rotl32,a=n.sum32,c=n.sum32_5,u=s.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,l),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],l=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),y=c(o(i,5),u(p,s,l,d),f,r[n],h[p]);f=d,d=l,l=o(s,30),s=i,i=y}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7031:function(e,t,r){"use strict";var n=r(3610),i=r(7875);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},7875:function(e,t,r){"use strict";var n=r(3610),i=r(9291),s=r(5366),o=r(4961),a=n.sum32,c=n.sum32_4,u=n.sum32_5,l=s.ch32,h=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,y=s.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function w(){if(!(this instanceof w))return new w;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(w,g),e.exports=w,w.blockSize=512,w.outSize=256,w.hmacStrength=192,w.padLength=64,w.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(y(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],g=this.h[2],m=this.h[3],w=this.h[4],v=this.h[5],b=this.h[6],E=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var _=u(E,f(w),l(w,v,b),this.k[n],r[n]),A=a(d(i),h(i,s,g));E=b,b=v,v=w,w=a(m,_),m=g,g=s,s=i,i=a(_,A)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],w),this.h[5]=a(this.h[5],v),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],E)},w.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},9118:function(e,t,r){"use strict";var n=r(3610),i=r(2045);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},2045:function(e,t,r){"use strict";var n=r(3610),i=r(9291),s=r(4961),o=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,l=n.sum64,h=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,y=n.sum64_5_hi,g=n.sum64_5_lo,m=i.BlockHash,w=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=w,this.W=new Array(160)}function b(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function E(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function _(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function A(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function S(e,t){var r=o(e,t,28),n=o(t,e,2),i=o(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function k(e,t){var r=a(e,t,28),n=a(t,e,2),i=a(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function I(e,t){var r=o(e,t,14),n=o(e,t,18),i=o(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function T(e,t){var r=a(e,t,14),n=a(e,t,18),i=a(t,e,9),s=r^n^i;return s<0&&(s+=4294967296),s}function C(e,t){var r=o(e,t,1),n=o(e,t,8),i=c(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function R(e,t){var r=a(e,t,1),n=a(e,t,8),i=u(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function P(e,t){var r=o(e,t,19),n=o(t,e,29),i=c(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}function x(e,t){var r=a(e,t,19),n=a(t,e,29),i=u(e,t,6),s=r^n^i;return s<0&&(s+=4294967296),s}n.inherits(v,m),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=P(r[n-4],r[n-3]),s=x(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=C(r[n-30],r[n-29]),u=R(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=f(i,s,o,a,c,u,l,h),r[n+1]=p(i,s,o,a,c,u,l,h)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],p=this.h[7],m=this.h[8],w=this.h[9],v=this.h[10],C=this.h[11],R=this.h[12],P=this.h[13],x=this.h[14],O=this.h[15];s(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var D=x,B=O,L=I(m,w),M=T(m,w),U=b(m,w,v,C,R,P),F=E(m,w,v,C,R,P),j=this.k[N],V=this.k[N+1],z=r[N],$=r[N+1],q=y(D,B,L,M,U,F,j,V,z,$),K=g(D,B,L,M,U,F,j,V,z,$);D=S(n,i),B=k(n,i),L=_(n,i,o,a,c,u),M=A(n,i,o,a,c,u);var H=h(D,B,L,M),G=d(D,B,L,M);x=R,O=P,R=v,P=C,v=m,C=w,m=h(f,p,q,K),w=d(p,p,q,K),f=c,p=u,c=o,u=a,o=n,a=i,n=h(q,K,H,G),i=d(q,K,H,G)}l(this.h,0,n,i),l(this.h,2,o,a),l(this.h,4,c,u),l(this.h,6,f,p),l(this.h,8,m,w),l(this.h,10,v,C),l(this.h,12,R,P),l(this.h,14,x,O)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},5366:function(e,t,r){"use strict";var n=r(3610),i=n.rotr32;function s(e,t,r,n){return 0===e?o(t,r,n):1===e||3===e?c(t,r,n):2===e?a(t,r,n):void 0}function o(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}function c(e,t,r){return e^t^r}function u(e){return i(e,2)^i(e,13)^i(e,22)}function l(e){return i(e,6)^i(e,11)^i(e,25)}function h(e){return i(e,7)^i(e,18)^e>>>3}function d(e){return i(e,17)^i(e,19)^e>>>10}t.ft_1=s,t.ch32=o,t.maj32=a,t.p32=c,t.s0_256=u,t.s1_256=l,t.g0_256=h,t.g1_256=d},3610:function(e,t,r){"use strict";r(7658);var n=r(4961),i=r(1923);function s(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function o(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"===typeof e)if(t){if("hex"===t)for(e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):s(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r}function a(e){for(var t="",r=0;r<e.length;r++)t+=l(e[r].toString(16));return t}function c(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24;return t>>>0}function u(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=c(i)),r+=h(i.toString(16))}return r}function l(e){return 1===e.length?"0"+e:e}function h(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function d(e,t,r,i){var s=r-t;n(s%4===0);for(var o=new Array(s/4),a=0,c=t;a<o.length;a++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],o[a]=u>>>0}return o}function f(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r}function p(e,t){return e>>>t|e<<32-t}function y(e,t){return e<<t|e>>>32-t}function g(e,t){return e+t>>>0}function m(e,t,r){return e+t+r>>>0}function w(e,t,r,n){return e+t+r+n>>>0}function v(e,t,r,n,i){return e+t+r+n+i>>>0}function b(e,t,r,n){var i=e[t],s=e[t+1],o=n+s>>>0,a=(o<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=o}function E(e,t,r,n){var i=t+n>>>0,s=(i<t?1:0)+e+r;return s>>>0}function _(e,t,r,n){var i=t+n;return i>>>0}function A(e,t,r,n,i,s,o,a){var c=0,u=t;u=u+n>>>0,c+=u<t?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+a>>>0,c+=u<a?1:0;var l=e+r+i+o+c;return l>>>0}function S(e,t,r,n,i,s,o,a){var c=t+n+s+a;return c>>>0}function k(e,t,r,n,i,s,o,a,c,u){var l=0,h=t;h=h+n>>>0,l+=h<t?1:0,h=h+s>>>0,l+=h<s?1:0,h=h+a>>>0,l+=h<a?1:0,h=h+u>>>0,l+=h<u?1:0;var d=e+r+i+o+c+l;return d>>>0}function I(e,t,r,n,i,s,o,a,c,u){var l=t+n+s+a+u;return l>>>0}function T(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}function C(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}function R(e,t,r){return e>>>r}function P(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}t.inherits=i,t.toArray=o,t.toHex=a,t.htonl=c,t.toHex32=u,t.zero2=l,t.zero8=h,t.join32=d,t.split32=f,t.rotr32=p,t.rotl32=y,t.sum32=g,t.sum32_3=m,t.sum32_4=w,t.sum32_5=v,t.sum64=b,t.sum64_hi=E,t.sum64_lo=_,t.sum64_4_hi=A,t.sum64_4_lo=S,t.sum64_5_hi=k,t.sum64_5_lo=I,t.rotr64_hi=T,t.rotr64_lo=C,t.shr64_hi=R,t.shr64_lo=P},8694:function(e){e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,t++,t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},7055:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,h=r?i-1:0,d=r?-1:1,f=e[t+h];for(h+=d,s=f&(1<<-l)-1,f>>=-l,l+=a;l>0;s=256*s+e[t+h],h+=d,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+h],h+=d,l-=8);if(0===s)s=1-u;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=u}return(f?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,u=8*s-i-1,l=(1<<u)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+h>=1?d/c:d*Math.pow(2,1-h),t*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;e[r+f]=255&o,f+=p,o/=256,u-=8);e[r+f-p]|=128*y}},1923:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},9564:function(e,t,r){r(7658),function(t){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")},i=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${o})?$`,"i")};function u(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let r,n,i=0,s=-1,o=(e.match(c.zoneIndex)||[])[0];o&&(o=o.substring(1),e=e.replace(/%.+$/,""));while((s=e.indexOf(":",s+1))>=0)i++;if("::"===e.substr(0,2)&&i--,"::"===e.substr(-2,2)&&i--,i>t)return null;n=t-i,r=":";while(n--)r+="0:";return e=e.replace("::",r),":"===e[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),t=function(){const t=e.split(":"),r=[];for(let e=0;e<t.length;e++)r.push(parseInt(t[e],16));return r}(),{parts:t,zoneId:o}}function l(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,s=0;while(n>0){if(i=r-n,i<0&&(i=0),e[s]>>i!==t[s]>>i)return!1;n-=r,s+=1}return!0}function h(e){if(s.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(i.test(e))return parseInt(e,8);throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function d(e,t){while(e.length<t)e=`0${e}`;return e}const f={};f.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,r;for(t=0;t<e.length;t++)if(r=e[t],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(s=r[i],t&&0!==s)return null;8!==s&&(t=!0),e+=s}return 32-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),f.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let s=0;while(s<4)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(e){return null!==this.parser(e)},f.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},f.IPv4.isValidFourPartDecimal=function(e){return!(!f.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e),n=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;while(r<4)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},f.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet))return function(){const e=t.slice(1,6),n=[];for(let t=0;t<e.length;t++)r=e[t],n.push(h(r));return n}();if(t=e.match(n.longValue)){if(i=h(t[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(i>>t&255);return e}().reverse()}return(t=e.match(n.twoOctet))?function(){const e=t.slice(1,4),r=[];if(i=h(e[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(e[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(t=e.match(n.threeOctet))?function(){const e=t.slice(1,5),r=[];if(i=h(e[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(e[0])),r.push(h(e[1])),r.push(i>>8&255),r.push(255&i),r}():null},f.IPv4.subnetMaskFromPrefixLength=function(e){if(e=parseInt(e),e<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},f.IPv6=function(){function e(e,t){let r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){if(n=this.parts[s],!(n in r))return null;if(i=r[n],t&&0!==i)return null;16!==i&&(t=!0),e+=i}return 128-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],r=this.parts;for(let n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(d(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],r=e[1];return new f.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let r,n=0,i=-1;while(r=e.exec(t))r[0].length>i&&(n=r.index,i=r[0].length);return i<0?t:`${t.substring(0,n)}::${t.substring(n+i)}`},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),f.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let s=0;while(s<16)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(t){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${t})`)}},f.IPv6.isIPv6=function(e){return null!==this.parser(e)},f.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(t){return!1}},f.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e),n=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;while(r<16)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${o})`)}},f.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},f.IPv6.parseCIDR=function(e){let t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]),t>=0&&t<=128))return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(e){let t,r,n,i,s,o;if(n=e.match(c.deprecatedTransitional))return this.parser(`::ffff:${n[1]}`);if(c.native.test(e))return u(e,8);if((n=e.match(c.transitional))&&(o=n[6]||"",t=u(n[1].slice(0,-1)+o,6),t.parts)){for(s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<s.length;r++)if(i=s[r],!(0<=i&&i<=255))return null;return t.parts.push(s[0]<<8|s[1]),t.parts.push(s[2]<<8|s[3]),{parts:t.parts,zoneId:t.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(e){if(e=parseInt(e),e<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},f.fromByteArray=function(e){const t=e.length;if(4===t)return new f.IPv4(e);if(16===t)return new f.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(e){return f.IPv6.isValid(e)||f.IPv4.isValid(e)},f.parse=function(e){if(f.IPv6.isValid(e))return f.IPv6.parse(e);if(f.IPv4.isValid(e))return f.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(e){try{return f.IPv6.parseCIDR(e)}catch(t){try{return f.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},f.subnetMatch=function(e,t,r){let n,i,s,o;for(i in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,i))for(s=t[i],!s[0]||s[0]instanceof Array||(s=[s]),n=0;n<s.length;n++)if(o=s[n],e.kind()===o[0].kind()&&e.match.apply(e,o))return i;return r},e.exports?e.exports=f:t.ipaddr=f}(this)},6827:function(e){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=s,e.exports.format=o,e.exports.parse=a;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,t){return"string"===typeof e?a(e):"number"===typeof e?o(e,t):null}function o(e,i){if(!Number.isFinite(e))return null;var s=Math.abs(e),o=i&&i.thousandsSeparator||"",a=i&&i.unitSeparator||"",c=i&&void 0!==i.decimalPlaces?i.decimalPlaces:2,u=Boolean(i&&i.fixedDecimals),l=i&&i.unit||"";l&&n[l.toLowerCase()]||(l=s>=n.pb?"PB":s>=n.tb?"TB":s>=n.gb?"GB":s>=n.mb?"MB":s>=n.kb?"KB":"B");var h=e/n[l.toLowerCase()],d=h.toFixed(c);return u||(d=d.replace(r,"$1")),o&&(d=d.split(".").map((function(e,r){return 0===r?e.replace(t,o):e})).join(".")),d+a+l}function a(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,r=i.exec(e),s="b";return r?(t=parseFloat(r[1]),s=r[4].toLowerCase()):(t=parseInt(e,10),s="b"),isNaN(t)?null:Math.floor(n[s]*t)}},9051:function(e,t,r){"use strict";r(7658);const{Buffer:n}=r(1547),i=Symbol.for("BufferList");function s(e){if(!(this instanceof s))return new s(e);s._init.call(this,e)}s._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},s.prototype._new=function(e){return new s(e)},s.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},s.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let n=0;n<t;n++)r+=this._bufs[n].length;return r},s.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},s.prototype.slice=function(e,t){return"number"===typeof e&&e<0&&(e+=this.length),"number"===typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);const s=!!e,o=this._offset(r),a=i-r;let c=a,u=s&&t||0,l=o[1];if(0===r&&i===this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,u),u+=this._bufs[t].length;return e}if(c<=this._bufs[o[0]].length-l)return s?this._bufs[o[0]].copy(e,t,l,l+c):this._bufs[o[0]].slice(l,l+c);s||(e=n.allocUnsafe(a));for(let n=o[0];n<this._bufs.length;n++){const t=this._bufs[n].length-l;if(!(c>t)){this._bufs[n].copy(e,u,l,l+c),u+=t;break}this._bufs[n].copy(e,u,l),u+=t,c-=t,l&&(l=0)}return e.length>u?e.slice(0,u):e},s.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!==typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},s.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},s.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;while(this._bufs.length){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"===typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"===typeof t&&(r=t,t=void 0),"function"===typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof e?e=n.from([e]):"string"===typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let s=i[0],o=i[1];for(;s<this._bufs.length;s++){const t=this._bufs[s];while(o<t.length){const r=t.length-o;if(r>=e.length){const r=t.indexOf(e,o);if(-1!==r)return this._reverseOffset([s,r]);o=t.length-e.length+1}else{const t=this._reverseOffset([s,o]);if(this._match(t,e))return t;o++}}o=0}return-1},s.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)(function(t){null===e[t]?s.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}:s.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}})(t)}(),s.prototype._isBufferList=function(e){return e instanceof s||s.isBufferList(e)},s.isBufferList=function(e){return null!=e&&e[i]},e.exports=s},1547:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(3408),r(4590),r(7658);const n=r(1271),i=r(7055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=w(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"===typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function f(e){return h(e),c(e<0?0:0|v(e))}function p(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|E(e,t);let n=c(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){const t=e.length<0?0:0|v(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(oe(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function w(e){if(u.isBuffer(e)){const t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?c(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function v(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),u.alloc(+e)}function E(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function A(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function I(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(ae(n))return o;e[r+o]=n}return o}function T(e,t,r,n){return se(te(t,e.length-r),e,r,n)}function C(e,t,r,n){return se(re(t),e,r,n)}function R(e,t,r,n){return se(ie(t),e,r,n)}function P(e,t,r,n){return se(ne(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return D(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(oe(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t;const a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r);for(let u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return S(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return S(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return I(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function D(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=t;s<r;++s)i+=ce[e[s]];return i}function U(e,t,r){const n=e.slice(t,r);let i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function z(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function $(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function K(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=t,i=1,s=this[e+--n];while(n>0&&(i*=256))s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,s=0;this[t]=255&e;while(++s<r&&(i*=256))this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,s=1;this[t+i]=255&e;while(--i>=0&&(s*=256))this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=ue((function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=ue((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;this[t]=255&e;while(++i<r&&(s*=256))e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;this[t+i]=255&e;while(--i>=0&&(s*=256))e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=ue((function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=ue((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return K(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return K(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const H={};function G(e,t,r){H[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Q(e,t,r){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function Y(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new H.ERR_OUT_OF_RANGE("value",i,e)}Q(n,i,s)}function J(e,t){if("number"!==typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw J(e,r),new H.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Z,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const s=[];for(let o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function ie(e){return n.toByteArray(ee(e))}function se(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ce=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ue(e){return"undefined"===typeof BigInt?le:e}function le(){throw new Error("BigInt not supported")}},9860:function(e,t,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(2117)["default"],Headers:r(2117).Headers,Request:r(2117).Request,Response:r(2117).Response}},2117:function(e,t){"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n)return n;throw new Error("unable to locate global object")},n=r();e.exports=t=n.fetch,n.fetch&&(t["default"]=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},798:function(e,t,r){"use strict";const n=r(4024),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,u="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!s,l="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h="undefined"!==typeof process&&!1,d="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:h,isElectron:s,isElectronMain:a,isElectronRenderer:c,isNode:u,isBrowser:o,isWebWorker:l,isEnvWithDom:i,isReactNative:d}},3223:function(e,t,r){"use strict";e.exports=r(9860)},8624:function(e,t,r){"use strict";const n=r(3436),i=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:s(e,t)});async function*s(e,t){const r=new n,i=await r.get(e,t);yield*i.iterator()}e.exports=i},3436:function(e,t,r){"use strict";const{fetch:n,Request:i,Headers:s}=r(7579),{TimeoutError:o,HTTPError:a}=r(7262),c=r(535).bind({ignoreUndefined:!0}),{URL:u,URLSearchParams:l}=r(9339),h=r(4908),d=(e,t,r)=>{if(void 0===t)return e;const n=Date.now(),i=()=>{const e=Date.now()-n;return e>=t};return new Promise(((n,s)=>{const a=setTimeout((()=>{i()&&(s(new o),r.abort())}),t),c=e=>{const t=t=>{clearTimeout(a),i()?s(new o):e(t)};return t};e.then(c(n),c(s))}))},f={throwHttpErrors:!0,credentials:"same-origin"};class p{constructor(e={}){this.opts=c(f,e)}async fetch(e,t={}){const r=c(this.opts,t),o=new s(r.headers);if("string"!==typeof e&&!(e instanceof u||e instanceof i))throw new TypeError("`resource` must be a string, URL, or Request");const f=new u(e.toString(),r.base),{searchParams:p,transformSearchParams:m,json:w}=r;p&&(f.search="function"===typeof m?m(new l(r.searchParams)):new l(r.searchParams)),w&&(r.body=JSON.stringify(r.json),o.set("content-type","application/json"));const v=new AbortController,b=h([v.signal,r.signal]),E=await d(n(f.toString(),{...r,signal:b,timeout:void 0,headers:o}),r.timeout,v);if(!E.ok&&r.throwHttpErrors)throw r.handleError&&await r.handleError(E),new a(E);return E.iterator=async function*(){yield*g(E.body)},E.ndjson=async function*(){for await(const e of y(E.iterator()))t.transform?yield t.transform(e):yield e},E}post(e,t={}){return this.fetch(e,{...t,method:"POST"})}get(e,t={}){return this.fetch(e,{...t,method:"GET"})}put(e,t={}){return this.fetch(e,{...t,method:"PUT"})}delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}options(e,t={}){return this.fetch(e,{...t,method:"OPTIONS"})}}const y=async function*(e){const t=new TextDecoder;let r="";for await(const n of e){r+=t.decode(n,{stream:!0});const e=r.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const r=e[t].trim();r.length>0&&(yield JSON.parse(r))}r=e[e.length-1]}r+=t.decode(),r=r.trim(),0!==r.length&&(yield JSON.parse(r))},g=e=>{if(v(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:r})}}}}}if(w(e)){const t=e.getReader();return async function*(){try{while(1){const{done:e,value:r}=await t.read();if(e)return;r&&(yield r)}}finally{t.releaseLock()}}()}if(m(e))return e;throw new TypeError("Body can't be converted to AsyncIterable")},m=e=>"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator],w=e=>e&&"function"===typeof e.getReader,v=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");p.HTTPError=a,p.TimeoutError=o,p.streamToAsyncIterator=g,p.post=(e,t)=>new p(t).post(e,t),p.get=(e,t)=>new p(t).get(e,t),p.put=(e,t)=>new p(t).put(e,t),p.delete=(e,t)=>new p(t).delete(e,t),p.options=(e,t)=>new p(t).options(e,t),e.exports=p},7262:function(e,t){"use strict";class r extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}t.TimeoutError=r;class n extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}t.AbortError=n;class i extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}t.HTTPError=i},7579:function(e,t,r){"use strict";const{TimeoutError:n,AbortError:i}=r(7262),{Response:s,Request:o,Headers:a,default:c}=r(3223),u=(e,t={})=>{const r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);const{timeout:o,headers:c}=t;if(o&&o>0&&o<1/0&&(r.timeout=o),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),c)for(const[n,i]of new a(c))r.setRequestHeader(n,i);return t.signal&&(t.signal.onabort=()=>r.abort()),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise(((e,o)=>{const a=t=>{switch(t.type){case"error":e(s.error());break;case"load":e(new f(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:d(r.getAllResponseHeaders())}));break;case"timeout":o(new n);break;case"abort":o(new i);break;default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)}))},l=c,h=(e,t={})=>null!=t.onUploadProgress?u(e,t):l(e,t),d=e=>{const t=new a;for(const r of e.trim().split(/[\r\n]+/)){const e=r.indexOf(": ");e>0&&t.set(r.slice(0,e),r.slice(e+1))}return t};class f extends s{constructor(e,t,r){super(t,r),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:h,Request:o,Headers:a}},1050:function(e){"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,r){if(null==r&&(r=!1),e.length<2)return!1;if(e.length>255)return!1;var n=e[e.length-1];if(r){if("."!==n)return!1}else if("."===n)return!1;return t.test(e)}},4024:function(e){function t(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}e.exports=t},3837:function(e){"use strict";e.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8,E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31,SIGUNUSED:31,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488415,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},1809:function(e,t,r){"use strict";r(3408),r(4590);const n=65536;function i(e){const t=new Uint8Array(e);let r=0;if(e>0)if(e>n)while(r<e)r+n>e?(crypto.getRandomValues(t.subarray(r,r+(e-r))),r+=e-r):(crypto.getRandomValues(t.subarray(r,r+n)),r+=n);else crypto.getRandomValues(t);return t}e.exports=i},9339:function(e,t,r){"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:o}=r(7141),a=r(7200);e.exports={URL:n,URLSearchParams:s,format:i,relative:a,defaultBase:o}},7200:function(e,t,r){"use strict";const{URLWithLegacySupport:n,format:i}=r(7141);e.exports=(e,t={},r={},s)=>{let o,a=t.protocol?t.protocol.replace(":",""):"http";a=(r[a]||s||a)+":";try{o=new n(e)}catch(u){o={}}const c=Object.assign({},t,{protocol:a||o.protocol,host:t.host||o.host});return new n(e,i(c)).toString()}},7141:function(e){"use strict";const t="undefined"!==typeof navigator&&"ReactNative"===navigator.product;function r(){return t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const n=self.URL,i=r();class s{constructor(e="",t=i){this.super=new n(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return n.createObjectURL(e)}static revokeObjectURL(e){n.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function o(e){if("string"===typeof e){const t=new n(e);return t.toString()}if(!(e instanceof n)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",s=e.host||"",o=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+a;return`${i}${t||r}${s||o+n}${l}${c}`}}e.exports={URLWithLegacySupport:s,URLSearchParams:self.URLSearchParams,defaultBase:i,format:o}},7192:function(e,t,r){"use strict";r(7658);const n=async e=>{const t=[];for await(const r of e)t.push(r);return t};e.exports=n},1131:function(e,t,r){"use strict";async function*n(e,t=1){let r=[];t<1&&(t=1);for await(const n of e){r.push(n);while(r.length>=t)yield r.slice(0,t),r=r.slice(t)}while(r.length)yield r.slice(0,t),r=r.slice(t)}r(7658),e.exports=n},9164:function(e){"use strict";const t=async e=>{for await(const t of e);};e.exports=t},3726:function(e){"use strict";const t=async function*(e,t){for await(const r of e)await t(r)&&(yield r)};e.exports=t},4461:function(e){"use strict";const t=async e=>{for await(const t of e)return t};e.exports=t},8189:function(e){"use strict";const t=async function*(e,t){for await(const r of e)await t(r),yield r};e.exports=t},7290:function(e){"use strict";const t=async e=>{let t;for await(const r of e)t=r;return t};e.exports=t},7285:function(e){"use strict";const t=async e=>{let t=0;for await(const r of e)t++;return t};e.exports=t},9927:function(e){"use strict";const t=async function*(e,t){for await(const r of e)yield t(r)};e.exports=t},940:function(e,t,r){"use strict";r(7658);const n=r(7115),i=async function*(...e){const t=n();setTimeout((async()=>{try{await Promise.all(e.map((async e=>{for await(const r of e)t.push(r)}))),t.end()}catch(r){t.end(r)}}),0),yield*t};e.exports=i},7115:function(e,t,r){r(7658);const n=r(2819);e.exports=e=>{let t;e=e||{},"function"===typeof e?(t=e,e={}):t=e.onEnd;let r,i,s,o=new n;const a=()=>{if(!o.isEmpty()){if(e.writev){let e;const t=[];while(!o.isEmpty()){if(e=o.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=o.shift();if(t.error)throw t.error;return t}return s?{done:!0}:new Promise(((t,n)=>{i=s=>(i=null,s.error?n(s.error):e.writev&&!s.done?t({done:s.done,value:[s.value]}):t(s),r)}))},c=e=>i?i(e):(o.push(e),r),u=e=>(o=new n,i?i({error:e}):(o.push({error:e}),r)),l=e=>s?r:c({done:!1,value:e}),h=e=>s?r:(s=!0,e?u(e):c({done:!0})),d=()=>(o=new n,h(),{done:!0}),f=e=>(h(e),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:a,return:d,throw:f,push:l,end:h},!t)return r;const p=r;return r={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(e){return p.throw(e),t&&(t(e),t=null),{done:!0}},return(){return p.return(),t&&(t(),t=null),{done:!0}},push:l,end(e){return p.end(e),t&&(t(e),t=null),r}},r}},8806:function(e,t,r){"use strict";const n=r(1131);async function*i(e,t=1){for await(const r of n(e,t)){const e=r.map((e=>e().then((e=>({ok:!0,value:e})),(e=>({ok:!1,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(!r.ok)throw r.err;yield r.value}}}e.exports=i},9310:function(e,t,r){"use strict";r(7658);const n=r(570),i=globalThis.CustomEvent||Event;async function*s(e,t={}){let r=t.concurrency||1/0;r<1&&(r=1/0);const s=null!=t.ordered&&t.ordered,o=new EventTarget,a=[];let c,u=n(),l=n(),h=!1,d=!1;function f(){return s?Boolean(a[0]&&a[0].done):Boolean(a.find((e=>e.done)))}function*p(){while(a.length&&a[0].done){const e=a[0];if(a.shift(),!e.ok)throw d=!0,u.resolve(),e.err;yield e.value,u.resolve()}}function*y(){while(f())for(let e=0;e<a.length;e++)if(a[e].done){const t=a[e];if(a.splice(e,1),e--,!t.ok)throw d=!0,u.resolve(),t.err;yield t.value,u.resolve()}}o.addEventListener("task-complete",(()=>{l.resolve()})),Promise.resolve().then((async()=>{try{for await(const t of e){if(a.length===r&&(u=n(),await u.promise),d)break;const e={done:!1};a.push(e),t().then((t=>{e.done=!0,e.ok=!0,e.value=t,o.dispatchEvent(new i("task-complete"))}),(t=>{e.done=!0,e.err=t,o.dispatchEvent(new i("task-complete"))}))}h=!0,o.dispatchEvent(new i("task-complete"))}catch(t){c=t,o.dispatchEvent(new i("task-complete"))}}));while(1){if(f()||(l=n(),await l.promise),c)throw c;if(s?yield*p():yield*y(),h&&0===a.length)break}}e.exports=s},570:function(e){"use strict";const t=()=>{const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e};e.exports=t},4395:function(e,t,r){"use strict";function n(e){const[t,r]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>n.length?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}r(7658),e.exports=n},640:function(e,t,r){"use strict";const n=r(7192),i=async function*(e,t){const r=await n(e);yield*r.sort(t)};e.exports=i},6855:function(e){"use strict";const t=async function*(e,t){let r=0;if(!(t<1))for await(const n of e)if(yield n,r++,r===t)return};e.exports=t},2034:function(e,t,r){"use strict";r(3408),r(4590);const{concat:n}=r(5489);async function i(e){let t=new Uint8Array(0);for await(const r of e)t=n([t,r],t.length+r.length);return t}e.exports=i},9893:function(e,t,r){var n;r(7658),r(3408),r(4590),r(541),
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
function(){"use strict";var i="input is invalid type",s="finalize already called",o="object"===typeof window,a=o?window:{};a.JS_SHA3_NO_WINDOW&&(o=!1);var c=!o&&"object"===typeof self,u=!a.JS_SHA3_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;u?a=r.g:c&&(a=self);var l=!a.JS_SHA3_NO_COMMON_JS&&e.exports,h=r.amdO,d=!a.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,f="0123456789abcdef".split(""),p=[31,7936,2031616,520093696],y=[4,1024,262144,67108864],g=[1,256,65536,16777216],m=[6,1536,393216,100663296],w=[0,8,16,24],v=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],b=[224,256,384,512],E=[128,256],_=["hex","buffer","arrayBuffer","array","digest"],A={128:168,256:136};!a.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!d||!a.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var S=function(e,t,r){return function(n){return new z(e,t,e).update(n)[r]()}},k=function(e,t,r){return function(n,i){return new z(e,t,i).update(n)[r]()}},I=function(e,t,r){return function(t,n,i,s){return D["cshake"+e].update(t,n,i,s)[r]()}},T=function(e,t,r){return function(t,n,i,s){return D["kmac"+e].update(t,n,i,s)[r]()}},C=function(e,t,r,n){for(var i=0;i<_.length;++i){var s=_[i];e[s]=t(r,n,s)}return e},R=function(e,t){var r=S(e,t,"hex");return r.create=function(){return new z(e,t,e)},r.update=function(e){return r.create().update(e)},C(r,S,e,t)},P=function(e,t){var r=k(e,t,"hex");return r.create=function(r){return new z(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},C(r,k,e,t)},x=function(e,t){var r=A[e],n=I(e,t,"hex");return n.create=function(n,i,s){return i||s?new z(e,t,n).bytepad([i,s],r):D["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},C(n,I,e,t)},O=function(e,t){var r=A[e],n=T(e,t,"hex");return n.create=function(n,i,s){return new $(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},C(n,T,e,t)},N=[{name:"keccak",padding:g,bits:b,createMethod:R},{name:"sha3",padding:m,bits:b,createMethod:R},{name:"shake",padding:p,bits:E,createMethod:P},{name:"cshake",padding:y,bits:E,createMethod:x},{name:"kmac",padding:y,bits:E,createMethod:O}],D={},B=[],L=0;L<N.length;++L)for(var M=N[L],U=M.bits,F=0;F<U.length;++F){var j=M.name+"_"+U[F];if(B.push(j),D[j]=M.createMethod(U[F],M.padding),"sha3"!==M.name){var V=M.name+U[F];B.push(V),D[V]=D[j]}}function z(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function $(e,t,r){z.call(this,e,t,r)}z.prototype.update=function(e){if(this.finalized)throw new Error(s);var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(d&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!d||!ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n,o,a=this.blocks,c=this.byteCount,u=e.length,l=this.blockCount,h=0,f=this.s;while(h<u){if(this.reset)for(this.reset=!1,a[0]=this.block,n=1;n<l+1;++n)a[n]=0;if(t)for(n=this.start;h<u&&n<c;++h)a[n>>2]|=e[h]<<w[3&n++];else for(n=this.start;h<u&&n<c;++h)o=e.charCodeAt(h),o<128?a[n>>2]|=o<<w[3&n++]:o<2048?(a[n>>2]|=(192|o>>6)<<w[3&n++],a[n>>2]|=(128|63&o)<<w[3&n++]):o<55296||o>=57344?(a[n>>2]|=(224|o>>12)<<w[3&n++],a[n>>2]|=(128|o>>6&63)<<w[3&n++],a[n>>2]|=(128|63&o)<<w[3&n++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++h)),a[n>>2]|=(240|o>>18)<<w[3&n++],a[n>>2]|=(128|o>>12&63)<<w[3&n++],a[n>>2]|=(128|o>>6&63)<<w[3&n++],a[n>>2]|=(128|63&o)<<w[3&n++]);if(this.lastByteIndex=n,n>=c){for(this.start=n-c,this.block=a[l],n=0;n<l;++n)f[n]^=a[n];q(f),this.reset=!0}else this.start=n}return this},z.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];e>>=8,r=255&e;while(r>0)i.unshift(r),e>>=8,r=255&e,++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},z.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(d&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!d||!ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n=0,s=e.length;if(t)n=s;else for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);a<128?n+=1:a<2048?n+=2:a<55296||a>=57344?n+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++o)),n+=4)}return n+=this.encode(8*n),this.update(e),n},z.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,s=[];return s.length=i,this.update(s),this},z.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];q(n)}},z.prototype.toString=z.prototype.hex=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a="";while(o<n){for(s=0;s<t&&o<n;++s,++o)e=r[s],a+=f[e>>4&15]+f[15&e]+f[e>>12&15]+f[e>>8&15]+f[e>>20&15]+f[e>>16&15]+f[e>>28&15]+f[e>>24&15];o%t===0&&(q(r),s=0)}return i&&(e=r[s],a+=f[e>>4&15]+f[15&e],i>1&&(a+=f[e>>12&15]+f[e>>8&15]),i>2&&(a+=f[e>>20&15]+f[e>>16&15])),a},z.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);var c=new Uint32Array(e);while(o<n){for(s=0;s<t&&o<n;++s,++o)c[o]=r[s];o%t===0&&q(r)}return i&&(c[s]=r[s],e=e.slice(0,a)),e},z.prototype.buffer=z.prototype.arrayBuffer,z.prototype.digest=z.prototype.array=function(){this.finalize();var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];while(a<i){for(o=0;o<r&&a<i;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&q(n)}return s&&(e=a<<2,t=n[o],c[e]=255&t,s>1&&(c[e+1]=t>>8&255),s>2&&(c[e+2]=t>>16&255)),c},$.prototype=new z,$.prototype.finalize=function(){return this.encode(this.outputBits,!0),z.prototype.finalize.call(this)};var q=function(e){var t,r,n,i,s,o,a,c,u,l,h,d,f,p,y,g,m,w,b,E,_,A,S,k,I,T,C,R,P,x,O,N,D,B,L,M,U,F,j,V,z,$,q,K,H,G,W,Q,Y,J,X,Z,ee,te,re,ne,ie,se,oe,ae,ce,ue,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],f=e[9]^e[19]^e[29]^e[39]^e[49],t=d^(o<<1|a>>>31),r=f^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=s^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(l<<1|h>>>31),r=a^(h<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(d<<1|f>>>31),r=u^(f<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|s>>>31),r=h^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,p=e[0],y=e[1],G=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,R=e[20]<<3|e[21]>>>29,P=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,$=e[40]<<18|e[41]>>>14,q=e[41]<<18|e[40]>>>14,B=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,m=e[12]<<12|e[13]>>>20,Q=e[22]<<10|e[23]>>>22,Y=e[23]<<10|e[22]>>>22,x=e[33]<<13|e[32]>>>19,O=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,M=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,w=e[25]<<11|e[24]>>>21,b=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,D=e[44]<<29|e[45]>>>3,k=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,E=e[36]<<21|e[37]>>>11,_=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,K=e[8]<<27|e[9]>>>5,H=e[9]<<27|e[8]>>>5,T=e[18]<<20|e[19]>>>12,C=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,V=e[38]<<8|e[39]>>>24,z=e[39]<<8|e[38]>>>24,A=e[48]<<14|e[49]>>>18,S=e[49]<<14|e[48]>>>18,e[0]=p^~g&w,e[1]=y^~m&b,e[10]=k^~T&R,e[11]=I^~C&P,e[20]=B^~M&F,e[21]=L^~U&j,e[30]=K^~G&Q,e[31]=H^~W&Y,e[40]=te^~ne&se,e[41]=re^~ie&oe,e[2]=g^~w&E,e[3]=m^~b&_,e[12]=T^~R&x,e[13]=C^~P&O,e[22]=M^~F&V,e[23]=U^~j&z,e[32]=G^~Q&J,e[33]=W^~Y&X,e[42]=ne^~se&ae,e[43]=ie^~oe&ce,e[4]=w^~E&A,e[5]=b^~_&S,e[14]=R^~x&N,e[15]=P^~O&D,e[24]=F^~V&$,e[25]=j^~z&q,e[34]=Q^~J&Z,e[35]=Y^~X&ee,e[44]=se^~ae&ue,e[45]=oe^~ce&le,e[6]=E^~A&p,e[7]=_^~S&y,e[16]=x^~N&k,e[17]=O^~D&I,e[26]=V^~$&B,e[27]=z^~q&L,e[36]=J^~Z&K,e[37]=X^~ee&H,e[46]=ae^~ue&te,e[47]=ce^~le&re,e[8]=A^~p&g,e[9]=S^~y&m,e[18]=N^~k&T,e[19]=D^~I&C,e[28]=$^~B&M,e[29]=q^~L&U,e[38]=Z^~K&G,e[39]=ee^~H&W,e[48]=ue^~te&ne,e[49]=le^~re&ie,e[0]^=v[n],e[1]^=v[n+1]};if(l)e.exports=D;else{for(L=0;L<B.length;++L)a[B[L]]=D[B[L]];h&&(n=function(){return D}.call(t,r,t,e),void 0===n||(e.exports=n))}}()},6657:function(e,t,r){"use strict";r(3408),r(4590),r(7658);const n=r(7602),{EventEmitter:i}=r(3793);function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function o(){return{contacts:[],dontSplit:!1,left:null,right:null}}function a(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class c extends i{constructor(e={}){super(),this.localNodeId=e.localNodeId||n(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||c.distance,this.arbiter=e.arbiter||c.arbiter,this.metadata=Object.assign({},e.metadata),a("option.localNodeId as parameter 1",this.localNodeId),this.root=o()}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let r=0,n=0;const i=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;n<i;++n)r=256*r+(e[n]^t[n]);for(;n<s;++n)r=256*r+255;return r}add(e){a("contact.id",(e||{}).id);let t=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,e.id,t++);const n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}closest(e,t=1/0){if(a("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<t;){const t=n.pop();if(null===t.contacts){const r=this._determineNode(t,e,i++);n.push(t.left===r?t.right:t.left),n.push(r)}else r=r.concat(t.contacts)}return r.map((t=>[this.distance(t.id,e),t])).sort(((e,t)=>e[0]-t[0])).slice(0,t).map((e=>e[1]))}count(){let e=0;for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}_determineNode(e,t,r){const n=r>>3,i=r%8;if(t.length<=n&&0!==i)return e.left;const s=t[n];return s&1<<7-i?e.right:e.left}get(e){a("id",e);let t=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}_indexOf(e,t){for(let r=0;r<e.contacts.length;++r)if(s(e.contacts[r].id,t))return r;return-1}remove(e){a("the id as parameter 1",e);let t=0,r=this.root;while(null===r.contacts)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);if(n>=0){const e=r.contacts.splice(n,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left=o(),e.right=o();for(const i of e.contacts)this._determineNode(e,i.id,t).contacts.push(i);e.contacts=null;const r=this._determineNode(e,this.localNodeId,t),n=e.left===r?e.right:e.left;n.dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}*toIterable(){for(const e=[this.root];e.length>0;){const t=e.pop();null===t.contacts?e.push(t.right,t.left):yield*t.contacts}}_update(e,t,r){if(!s(e.contacts[t].id,r.id))throw new Error("wrong index for _update");const n=e.contacts[t],i=this.arbiter(n,r);i===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(i),this.emit("updated",n,i))}}e.exports=c},1723:function(e,t){"use strict";t.supports=function(...e){const t=e.reduce(((e,t)=>Object.assign(e,t)),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}},1541:function(e,t,r){"use strict";const n=r(4334),i=r(8681),{Encoding:s}=r(789),{BufferFormat:o,ViewFormat:a,UTF8Format:c}=r(1657),u=Symbol("formats"),l=Symbol("encodings"),h=new Set(["buffer","view","utf8"]);class d{constructor(e){if(!Array.isArray(e))throw new TypeError("The first argument 'formats' must be an array");if(!e.every((e=>h.has(e))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[l]=new Map,this[u]=new Set(e);for(const r in i)try{this.encoding(r)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[l].values()))}encoding(e){let t=this[l].get(e);if(void 0===t){if("string"===typeof e&&""!==e){if(t=g[e],!t)throw new n(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!==typeof e||null===e)throw new TypeError("First argument 'encoding' must be a string or object");t=f(e)}const{name:r,format:i}=t;if(!this[u].has(i))if(this[u].has("view"))t=t.createViewTranscoder();else if(this[u].has("buffer"))t=t.createBufferTranscoder();else{if(!this[u].has("utf8"))throw new n(`Encoding '${r}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});t=t.createUTF8Transcoder()}for(const n of[e,r,t.name,t.commonName])this[l].set(n,t)}return t}}function f(e){if(e instanceof s)return e;const t="type"in e&&"string"===typeof e.type?e.type:void 0,r=e.name||t||"anonymous-"+m++;switch(p(e)){case"view":return new a({...e,name:r});case"utf8":return new c({...e,name:r});case"buffer":return new o({...e,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function p(e){return"format"in e&&void 0!==e.format?e.format:"buffer"in e&&"boolean"===typeof e.buffer?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}t.Transcoder=d;const y={binary:i.buffer,"utf-8":i.utf8},g={...i,...y};let m=0},789:function(e,t,r){"use strict";const n=r(4334),i=new Set(["buffer","view","utf8"]);class s{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,"function"!==typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!==typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!==typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!==typeof this.format||!i.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}t.Encoding=s},8681:function(e,t,r){"use strict";const{Buffer:n}=r(4308)||{Buffer:{isBuffer:()=>!1}},{textEncoder:i,textDecoder:s}=r(4916)(),{BufferFormat:o,ViewFormat:a,UTF8Format:c}=r(1657),u=e=>e;t.utf8=new c({encode:function(e){return n.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?s.decode(e):String(e)},decode:u,name:"utf8",createViewTranscoder(){return new a({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:function(e){return s.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new o({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}}),t.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),t.buffer=new o({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:u,name:"buffer",createViewTranscoder(){return new a({encode:function(e){return ArrayBuffer.isView(e)?e:n.from(String(e),"utf8")},decode:function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}}),t.view=new a({encode:function(e){return ArrayBuffer.isView(e)?e:i.encode(e)},decode:u,name:"view",createBufferTranscoder(){return new o({encode:function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):n.from(String(e),"utf8")},decode:u,name:`${this.name}+buffer`})}}),t.hex=new o({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"}),t.base64=new o({encode:function(e){return n.isBuffer(e)?e:n.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})},1657:function(e,t,r){"use strict";const{Buffer:n}=r(4308)||{},{Encoding:i}=r(789),s=r(4916);class o extends i{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new a({encode:this.encode,decode:e=>this.decode(n.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class a extends i{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new o({encode:e=>{const t=this.encode(e);return n.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class c extends i{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new o({encode:e=>n.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=s();return new a({encode:t=>e.encode(this.encode(t)),decode:e=>this.decode(t.decode(e)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}t.BufferFormat=o,t.ViewFormat=a,t.UTF8Format=c},4916:function(e){"use strict";let t=null;e.exports=function(){return null===t&&(t={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),t}},4308:function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(3408),r(4590),r(7658);const n=r(1271),i=r(7055),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(oe(e,ArrayBuffer)||e&&oe(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(oe(e,SharedArrayBuffer)||e&&oe(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const i=w(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e,t,r){return h(e),e<=0?c(e):void 0!==t?"string"===typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}function f(e){return h(e),c(e<0?0:0|v(e))}function p(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|E(e,t);let n=c(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function y(e){const t=e.length<0?0:0|v(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(oe(e,Uint8Array)){const t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function w(e){if(u.isBuffer(e)){const t=0|v(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!==typeof e.length||ae(e.length)?c(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}function v(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),u.alloc(+e)}function E(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||oe(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ie(e).length;default:if(i)return n?-1:te(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return L(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function A(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ae(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function I(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(ae(n))return o;e[r+o]=n}return o}function T(e,t,r,n){return se(te(t,e.length-r),e,r,n)}function C(e,t,r,n){return se(re(t),e,r,n)}function R(e,t,r,n){return se(ie(t),e,r,n)}function P(e,t,r,n){return se(ne(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return D(n)}t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return d(e,t,r)},u.allocUnsafe=function(e){return f(e)},u.allocUnsafeSlow=function(e){return f(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),oe(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(oe(t,Uint8Array))i+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},u.byteLength=E,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)A(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)A(this,t,t+3),A(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)A(this,t,t+7),A(this,t+1,t+6),A(this,t+2,t+5),A(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,i){if(oe(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,o=r-t;const a=Math.min(s,o),c=this.slice(n,i),l=e.slice(t,r);for(let u=0;u<a;++u)if(c[u]!==l[u]){s=c[u],o=l[u];break}return s<o?-1:o<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return S(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return S(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return I(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return R(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function D(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}function B(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function L(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function M(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=t;s<r;++s)i+=ce[e[s]];return i}function U(e,t,r){const n=e.slice(t,r);let i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,r,n,i,s){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function V(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function z(e,t,r,n,i){Y(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function $(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function K(e,t,r,n,s){return t=+t,r>>>=0,s||$(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){const r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e+--t],i=1;while(t>0&&(i*=256))n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||F(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),u.prototype.readBigUInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=this[e],i=1,s=0;while(++s<t&&(i*=256))n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||F(e,t,this.length);let n=t,i=1,s=this[e+--n];while(n>0&&(i*=256))s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},u.prototype.readInt8=function(e,t){return e>>>=0,t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||F(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),u.prototype.readBigInt64BE=ue((function(e){e>>>=0,J(e,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||X(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||F(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||F(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=1,s=0;this[t]=255&e;while(++s<r&&(i*=256))this[t+s]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){const n=Math.pow(2,8*r)-1;j(this,e,t,r,n,0)}let i=r-1,s=1;this[t+i]=255&e;while(--i>=0&&(s*=256))this[t+i]=e/s&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=ue((function(e,t=0){return V(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=ue((function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;this[t]=255&e;while(++i<r&&(s*=256))e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);j(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;this[t+i]=255&e;while(--i>=0&&(s*=256))e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=ue((function(e,t=0){return V(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=ue((function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return K(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return K(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},u.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=u.isBuffer(e)?e:u.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const H={};function G(e,t,r){H[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Q(e,t,r){J(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||X(t,e.length-(r+1))}function Y(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new H.ERR_OUT_OF_RANGE("value",i,e)}Q(n,i,s)}function J(e,t){if("number"!==typeof e)throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}function X(e,t,r){if(Math.floor(e)!==e)throw J(e,r),new H.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new H.ERR_BUFFER_OUT_OF_BOUNDS;throw new H.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),G("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function ee(e){if(e=e.split("=")[0],e=e.trim().replace(Z,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function te(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function re(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function ne(e,t){let r,n,i;const s=[];for(let o=0;o<e.length;++o){if((t-=2)<0)break;r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n)}return s}function ie(e){return n.toByteArray(ee(e))}function se(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function oe(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ae(e){return e!==e}const ce=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ue(e){return"undefined"===typeof BigInt?le:e}function le(){throw new Error("BigInt not supported")}},2514:function(e,t,r){t.Level=r(2196).BrowserLevel},535:function(e,t,r){"use strict";r(7658);const n=r(1800),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r)s.call(e,n)&&t.push(n)}return t};function l(e){return Array.isArray(e)?h(e):n(e)?d(e):e}function h(e){const t=e.slice(0,0);return u(e).forEach((r=>{o(t,r,l(e[r]))})),t}function d(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return u(e).forEach((r=>{o(t,r,l(e[r]))})),t}const f=(e,t,r,n)=>(r.forEach((r=>{"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?o(e,r,y(e[r],t[r],n)):o(e,r,l(t[r])))})),e),p=(e,t,r)=>{let n=e.slice(0,0),s=0;return[e,t].forEach((t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),o(n,s++,t===e?t[r]:l(t[r])));n=f(n,t,u(t).filter((e=>!a.includes(e))),r)})),n};function y(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?p(e,t,r):n(t)&&n(e)?f(e,t,u(t),r):l(t)}e.exports=function(...e){const t=y(l(c),this!==a&&this||{},c);let r={_:{}};for(const i of e)if(void 0!==i){if(!n(i))throw new TypeError("`"+i+"` is not an Option Object");r=y(r,{_:i},t)}return r._}},1800:function(e){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},4961:function(e){function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},4334:function(e){"use strict";e.exports=class extends Error{constructor(e,t){super(e||""),"object"===typeof t&&null!==t&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},7901:function(e){var t=1e3,r=60*t,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(e){if(e=String(e),!(e.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var c=parseFloat(a[1]),u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function c(e){var s=Math.abs(e);return s>=i?Math.round(e/i)+"d":s>=n?Math.round(e/n)+"h":s>=r?Math.round(e/r)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}function u(e){var s=Math.abs(e);return s>=i?l(e,s,i,"day"):s>=n?l(e,s,n,"hour"):s>=r?l(e,s,r,"minute"):s>=t?l(e,s,t,"second"):e+" ms"}function l(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return a(e);if("number"===r&&isFinite(e))return t.long?u(e):c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},716:function(e,t,r){e.exports=r(55)},55:function(e,t){(function(r,n){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e^=e>>>16,e=o(e,2246822507),e^=e>>>13,e=o(e,3266489909),e^=e>>>16,e}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){return t%=64,32===t?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function d(e,t){return t%=64,0===t?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function f(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=f(e,[0,e[0]>>>1]),e=l(e,[4283543511,3981806797]),e=f(e,[0,e[0]>>>1]),e=l(e,[3301882366,444984403]),e=f(e,[0,e[0]>>>1]),e}i.x86.hash32=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%4,u=e.length-r,l=t,h=0,d=3432918353,f=461845907,p=0;p<u;p+=4)h=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,h=o(h,d),h=a(h,15),h=o(h,f),l^=h,l=a(l,13),l=o(l,5)+3864292196;switch(h=0,r){case 3:h^=e[p+2]<<16;case 2:h^=e[p+1]<<8;case 1:h^=e[p],h=o(h,d),h=a(h,15),h=o(h,f),l^=h}return l^=e.length,l=c(l),l>>>0},i.x86.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,u=e.length-r,l=t,h=t,d=t,f=t,p=0,y=0,g=0,m=0,w=597399067,v=2869860233,b=951274213,E=2716044179,_=0;_<u;_+=16)p=e[_]|e[_+1]<<8|e[_+2]<<16|e[_+3]<<24,y=e[_+4]|e[_+5]<<8|e[_+6]<<16|e[_+7]<<24,g=e[_+8]|e[_+9]<<8|e[_+10]<<16|e[_+11]<<24,m=e[_+12]|e[_+13]<<8|e[_+14]<<16|e[_+15]<<24,p=o(p,w),p=a(p,15),p=o(p,v),l^=p,l=a(l,19),l+=h,l=o(l,5)+1444728091,y=o(y,v),y=a(y,16),y=o(y,b),h^=y,h=a(h,17),h+=d,h=o(h,5)+197830471,g=o(g,b),g=a(g,17),g=o(g,E),d^=g,d=a(d,15),d+=f,d=o(d,5)+2530024501,m=o(m,E),m=a(m,18),m=o(m,w),f^=m,f=a(f,13),f+=l,f=o(f,5)+850148119;switch(p=0,y=0,g=0,m=0,r){case 15:m^=e[_+14]<<16;case 14:m^=e[_+13]<<8;case 13:m^=e[_+12],m=o(m,E),m=a(m,18),m=o(m,w),f^=m;case 12:g^=e[_+11]<<24;case 11:g^=e[_+10]<<16;case 10:g^=e[_+9]<<8;case 9:g^=e[_+8],g=o(g,b),g=a(g,17),g=o(g,E),d^=g;case 8:y^=e[_+7]<<24;case 7:y^=e[_+6]<<16;case 6:y^=e[_+5]<<8;case 5:y^=e[_+4],y=o(y,v),y=a(y,16),y=o(y,b),h^=y;case 4:p^=e[_+3]<<24;case 3:p^=e[_+2]<<16;case 2:p^=e[_+1]<<8;case 1:p^=e[_],p=o(p,w),p=a(p,15),p=o(p,v),l^=p}return l^=e.length,h^=e.length,d^=e.length,f^=e.length,l+=h,l+=d,l+=f,h+=l,d+=l,f+=l,l=c(l),h=c(h),d=c(d),f=c(f),l+=h,l+=d,l+=f,h+=l,d+=l,f+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,o=e.length-r,a=[0,t],c=[0,t],y=[0,0],g=[0,0],m=[2277735313,289559509],w=[1291169091,658871167],v=0;v<o;v+=16)y=[e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24,e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24],g=[e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24,e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24],y=l(y,m),y=h(y,31),y=l(y,w),a=f(a,y),a=h(a,27),a=u(a,c),a=u(l(a,[0,5]),[0,1390208809]),g=l(g,w),g=h(g,33),g=l(g,m),c=f(c,g),c=h(c,31),c=u(c,a),c=u(l(c,[0,5]),[0,944331445]);switch(y=[0,0],g=[0,0],r){case 15:g=f(g,d([0,e[v+14]],48));case 14:g=f(g,d([0,e[v+13]],40));case 13:g=f(g,d([0,e[v+12]],32));case 12:g=f(g,d([0,e[v+11]],24));case 11:g=f(g,d([0,e[v+10]],16));case 10:g=f(g,d([0,e[v+9]],8));case 9:g=f(g,[0,e[v+8]]),g=l(g,w),g=h(g,33),g=l(g,m),c=f(c,g);case 8:y=f(y,d([0,e[v+7]],56));case 7:y=f(y,d([0,e[v+6]],48));case 6:y=f(y,d([0,e[v+5]],40));case 5:y=f(y,d([0,e[v+4]],32));case 4:y=f(y,d([0,e[v+3]],24));case 3:y=f(y,d([0,e[v+2]],16));case 2:y=f(y,d([0,e[v+1]],8));case 1:y=f(y,[0,e[v]]),y=l(y,m),y=h(y,31),y=l(y,w),a=f(a,y)}return a=f(a,[0,e.length]),c=f(c,[0,e.length]),a=u(a,c),c=u(c,a),a=p(a),c=p(c),a=u(a,c),c=u(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i})()},8295:function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}e.exports=function(e){var r=void 0,n=void 0;function i(e){if(!(e instanceof Object))throw new Error('Target "'+e+'" is not an object');n=e}function s(e){Object.keys(e).forEach((function(t){var r=e[t];if("function"!==typeof r)throw new Error('Trap "'+t+": "+r+'" is not a function');if(!Reflect[t])throw new Error('Trap "'+t+": "+r+'" is not a valid trap')})),r=e}i((function(){})),e&&i(e),s(Reflect);var o=new Proxy({},{get:function(e,i){return function(){for(var e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];return r[i].apply(null,[n].concat(t(s.slice(1))))}}});return{setTarget:i,setHandler:s,getTarget:function(){return n},getHandler:function(){return r},proxy:new Proxy(n,o)}}},98:function(e,t,r){r(7658),function(){var e,r,n,i,s,o,a,c;c=function(e){var t,r,n,i;return t=(e&255<<24)>>>24,r=(e&255<<16)>>>16,n=(65280&e)>>>8,i=255&e,[t,r,n,i].join(".")},a=function(e){var t,n,i,s,o,a;for(t=[],i=s=0;s<=3;i=++s){if(0===e.length)break;if(i>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}a=r(e),o=a[0],n=a[1],e=e.substring(n),t.push(o)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},n=function(e){return e.charCodeAt(0)},i=n("0"),o=n("a"),s=n("A"),r=function(e){var t,r,a,c,u;c=0,t=10,r="9",a=0,e.length>1&&"0"===e[a]&&("x"===e[a+1]||"X"===e[a+1]?(a+=2,t=16):"0"<=e[a+1]&&e[a+1]<="9"&&(a++,t=8,r="7")),u=a;while(a<e.length){if("0"<=e[a]&&e[a]<=r)c=c*t+(n(e[a])-i)>>>0;else{if(16!==t)break;if("a"<=e[a]&&e[a]<="f")c=c*t+(10+n(e[a])-o)>>>0;else{if(!("A"<=e[a]&&e[a]<="F"))break;c=c*t+(10+n(e[a])-s)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},e=function(){function e(e,t){var r,n,i;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(i=e.split("/",2),e=i[0],t=i[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=a(t)}catch(s){throw s,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(e)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(a(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(c(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;n=a(this.first),r=a(this.last),t=0;while(n<=r)e(c(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=a,t.long2ip=c,t.Netmask=e}.call(this)},22:function(e,t,r){r(7658);var n=r(5736);function i(e,t){var r=function(){return new n.aes.Algorithm(e,t)};n.cipher.registerAlgorithm(e,r)}r(298),r(2009),r(4292),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var i=y({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},n.aes.createEncryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var i=y({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},n.aes.createDecryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||d();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var i=0;i<t.length;++i)r.putByte(t[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=f(r,e.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(e,t){return l||d(),f(e,t)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,u,l=!1,h=4;function d(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),u=new Array(4);for(t=0;t<4;++t)c[t]=new Array(256),u[t]=new Array(256);var r,n,i,h,d,f,p,y=0,g=0;for(t=0;t<256;++t){h=g^g<<1^g<<2^g<<3^g<<4,h=h>>8^255&h^99,s[y]=h,o[h]=y,d=e[h],r=e[y],n=e[r],i=e[n],f=d<<24^h<<16^h<<8^h^d,p=(r^n^i)<<24^(y^i)<<16^(y^n^i)<<8^y^r^i;for(var m=0;m<4;++m)c[m][y]=f,u[m][h]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===y?y=g=1:(y=r^e[e[e[r^i]]],g^=e[e[g]])}}function f(e,t){for(var r,n=e.slice(0),i=1,o=n.length,c=o+6+1,l=h*c,d=o;d<l;++d)r=n[d-1],d%o===0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&d%o===4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[d]=n[d-o]^r;if(t){var f,p=u[0],y=u[1],g=u[2],m=u[3],w=n.slice(0);l=n.length;d=0;for(var v=l-h;d<l;d+=h,v-=h)if(0===d||d===l-h)w[d]=n[v],w[d+1]=n[v+3],w[d+2]=n[v+2],w[d+3]=n[v+1];else for(var b=0;b<h;++b)f=n[v+b],w[d+(3&-b)]=p[s[f>>>24]]^y[s[f>>>16&255]]^g[s[f>>>8&255]]^m[s[255&f]];n=w}return n}function p(e,t,r,n){var i,a,l,h,d,f,p,y,g,m,w,v,b=e.length/4-1;n?(i=u[0],a=u[1],l=u[2],h=u[3],d=o):(i=c[0],a=c[1],l=c[2],h=c[3],d=s),f=t[0]^e[0],p=t[n?3:1]^e[1],y=t[2]^e[2],g=t[n?1:3]^e[3];for(var E=3,_=1;_<b;++_)m=i[f>>>24]^a[p>>>16&255]^l[y>>>8&255]^h[255&g]^e[++E],w=i[p>>>24]^a[y>>>16&255]^l[g>>>8&255]^h[255&f]^e[++E],v=i[y>>>24]^a[g>>>16&255]^l[f>>>8&255]^h[255&p]^e[++E],g=i[g>>>24]^a[f>>>16&255]^l[p>>>8&255]^h[255&y]^e[++E],f=m,p=w,y=v;r[0]=d[f>>>24]<<24^d[p>>>16&255]<<16^d[y>>>8&255]<<8^d[255&g]^e[++E],r[n?3:1]=d[p>>>24]<<24^d[y>>>16&255]<<16^d[g>>>8&255]<<8^d[255&f]^e[++E],r[2]=d[y>>>24]<<24^d[g>>>16&255]<<16^d[f>>>8&255]<<8^d[255&p]^e[++E],r[n?1:3]=d[g>>>24]<<24^d[f>>>16&255]<<16^d[p>>>8&255]<<8^d[255&y]^e[++E]}function y(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),i="AES-"+r;t=e.decrypt?n.cipher.createDecipher(i,e.key):n.cipher.createCipher(i,e.key);var s=t.start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=e,s.call(t,r)},t}},1041:function(e,t,r){r(7658);var n=r(5736);r(4292),r(9002);var i=e.exports=n.asn1=n.asn1||{};function s(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var u={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=i.copy(u)),u},i.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var s=0;s<e.length;++s)r.push(i.copy(e[s],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},i.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!i.equals(e[s],t[s]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},i.getBerValueLength=function(e){var t=e.getByte();if(128!==t){var r,n=128&t;return r=n?e.getInt((127&t)<<3):t,r}};var o=function(e,t){var r=e.getByte();if(t--,128!==r){var n,i=128&r;if(i){var o=127&r;s(e,t,o),n=e.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}};function a(e,t,r,n){var c;s(e,t,2);var u=e.getByte();t--;var l=192&u,h=31&u;c=e.length();var d,f,p=o(e,t);if(t-=c-e.length(),void 0!==p&&p>t){if(n.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=e.length(),y.remaining=t,y.requested=p,y}p=t}var g=32===(32&u);if(g)if(d=[],void 0===p)for(;;){if(s(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}c=e.length(),d.push(a(e,t,r+1,n)),t-=c-e.length()}else while(p>0)c=e.length(),d.push(a(e,p,r+1,n)),t-=c-e.length(),p-=c-e.length();if(void 0===d&&l===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&(f=e.bytes(p)),void 0===d&&n.decodeBitStrings&&l===i.Class.UNIVERSAL&&h===i.Type.BITSTRING&&p>1){var m=e.read,w=t,v=0;if(h===i.Type.BITSTRING&&(s(e,t,1),v=e.getByte(),t--),0===v)try{c=e.length();var b={strict:!0,decodeBitStrings:!0},E=a(e,t,r+1,b),_=c-e.length();t-=_,h==i.Type.BITSTRING&&_++;var A=E.tagClass;_!==p||A!==i.Class.UNIVERSAL&&A!==i.Class.CONTEXT_SPECIFIC||(d=[E])}catch(k){}void 0===d&&(e.read=m,t=w)}if(void 0===d){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=t}if(h===i.Type.BMPSTRING)for(d="";p>0;p-=2)s(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(p),t-=p}var S=void 0===f?null:{bitStringContents:f};return i.create(l,h,g,d,S)}i.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),i=a(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=e.length(),s}return i},i.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=i.equals(e,e.original))),o)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:s.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&s.putBuffer(i.toDer(e.value[a]))}else if(e.type===i.Type.BMPSTRING)for(a=0;a<e.value.length;++a)s.putInt16(e.value.charCodeAt(a));else e.type===i.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(r),s.length()<=127)t.putByte(127&s.length());else{var c=s.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);t.putByte(128|u.length);for(a=u.length-1;a>=0;--a)t.putByte(u.charCodeAt(a))}return t.putBuffer(s),t},i.oidToDer=function(e){var t,r,i,s,o=e.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){t=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,t||(s|=128),r.push(s),t=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;var i=0;while(e.length()>0)r=e.getByte(),i<<=7,128&r?i+=127&r:(t+="."+(i+r),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),u&&(c=e.charAt(u),"+"===c||"-"===c)){var l=parseInt(e.substr(u+1,2),10),h=parseInt(e.substr(u+4,2),10),d=60*l+h;d*=6e4,"+"===c?t.setTime(+t-d):t.setTime(+t+d)}return t},i.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var h=e.length-5,d=e.charAt(h);if("+"===d||"-"===d){var f=parseInt(e.substr(h+1,2),10),p=parseInt(e.substr(h+4,2),10);u=60*f+p,u*=6e4,"+"===d&&(u*=-1),l=!0}return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(s,o,a,c)),t},i.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t},i.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t},i.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},i.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,r,s){var o=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var a=0,c=0;o&&c<t.value.length;++c)o=t.value[c].optional||!1,e.value[a]&&(o=i.validate(e.value[a],t.value[c],r,s),o?++a:t.value[c].optional&&(o=!0)),!o&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(0!==u)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var c=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,r){var s="";t=t||0,r=r||2,t>0&&(s+="\n");for(var o="",a=0;a<t*r;++a)o+=" ";switch(s+=o+"Tag: ",e.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:";break}if(e.tagClass===i.Class.UNIVERSAL)switch(s+=e.type,e.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)";break}else s+=e.type;if(s+="\n",s+=o+"Constructed: "+e.constructed+"\n",e.composed){var u=0,l="";for(a=0;a<e.value.length;++a)void 0!==e.value[a]&&(u+=1,l+=i.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(l+=","));s+=o+"Sub values: "+u+l}else{if(s+=o+"Value: ",e.type===i.Type.OID){var h=i.derToOid(e.value);s+=h,n.pki&&n.pki.oids&&h in n.pki.oids&&(s+=" ("+n.pki.oids[h]+") ")}if(e.type===i.Type.INTEGER)try{s+=i.derToInteger(e.value)}catch(f){s+="0x"+n.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){if(e.value.length>1?s+="0x"+n.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else if(e.type===i.Type.OCTETSTRING)c.test(e.value)||(s+="("+e.value+") "),s+="0x"+n.util.bytesToHex(e.value);else if(e.type===i.Type.UTF8)try{s+=n.util.decodeUtf8(e.value)}catch(p){if("URI malformed"!==p.message)throw p;s+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?s+=e.value:c.test(e.value)?s+="0x"+n.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}},3220:function(e,t,r){r(3408),r(4590),r(7658);var n={};e.exports=n;var i={};function s(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;while(a>0)s.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}n.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,o=t.length,a=t.charAt(0),c=[0];for(i=0;i<e.length;++i){for(var u=0,l=e[i];u<c.length;++u)l+=c[u]<<8,c[u]=l%o,l=l/o|0;while(l>0)c.push(l%o),l=l/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=t[c[i]]}else n=s(e,t);if(r){var h=new RegExp(".{1,"+r+"}","g");n=n.match(h).join("\r\n")}return n},n.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var r=i[t];if(!r){r=i[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var s=t.length,o=t.charAt(0),a=[0];for(n=0;n<e.length;n++){var c=r[e.charCodeAt(n)];if(void 0===c)return;for(var u=0,l=c;u<a.length;++u)l+=a[u]*s,a[u]=255&l,l>>=8;while(l>0)a.push(255&l),l>>=8}for(var h=0;e[h]===o&&h<e.length-1;++h)a.push(0);return"undefined"!==typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},298:function(e,t,r){var n=r(5736);r(4292),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in n.cipher.algorithms?n.cipher.algorithms[e]:null};var i=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){e&&this._input.putBuffer(e);while(!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish);this._input.compact()},i.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},2009:function(e,t,r){r(7658);var n=r(5736);r(4292),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function s(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var s=[],o=t/4;for(i=0;i<o;++i)s.push(e.getInt32());e=s}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{this._j0=[0,0,0,0];while(r.length()>0)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];while(t.length()>0)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>4*(7-r%8)&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,u=(n-1-o%n)*t;a[c]=1<<t-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);var s=n>>>1;while(s>0)this.pow(i[2*s],i[s]=[]),s>>=1;s=2;while(s<n){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}},8577:function(e,t,r){var n=r(5736);function i(e,t){var r=function(){return new n.des.Algorithm(e,t)};n.cipher.registerAlgorithm(e,r)}r(298),r(2009),r(4292),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var i=y({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createEncryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var i=y({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createDecryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return p(r._keys,e,t,!1)},decrypt:function(e,t){return p(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=f(t),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,m=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,b=0;b<g;b++){var E=e.getInt32(),_=e.getInt32();t=252645135&(E>>>4^_),_^=t,E^=t<<4,t=65535&(_>>>-16^E),E^=t,_^=t<<-16,t=858993459&(E>>>2^_),_^=t,E^=t<<2,t=65535&(_>>>-16^E),E^=t,_^=t<<-16,t=1431655765&(E>>>1^_),_^=t,E^=t<<1,t=16711935&(_>>>8^E),E^=t,_^=t<<8,t=1431655765&(E>>>1^_),_^=t,E^=t<<1,t=E<<8|_>>>20&240,E=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=t;for(var A=0;A<w.length;++A){w[A]?(E=E<<2|E>>>26,_=_<<2|_>>>26):(E=E<<1|E>>>27,_=_<<1|_>>>27),E&=-15,_&=-15;var S=r[E>>>28]|n[E>>>24&15]|i[E>>>20&15]|s[E>>>16&15]|o[E>>>12&15]|a[E>>>8&15]|c[E>>>4&15],k=u[_>>>28]|l[_>>>24&15]|h[_>>>20&15]|d[_>>>16&15]|f[_>>>12&15]|p[_>>>8&15]|y[_>>>4&15];t=65535&(k>>>16^S),m[v++]=S^t,m[v++]=k^t<<16}}return m}function p(e,t,r,n){var i,f,p=32===e.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var y=t[0],g=t[1];f=252645135&(y>>>4^g),g^=f,y^=f<<4,f=65535&(y>>>16^g),g^=f,y^=f<<16,f=858993459&(g>>>2^y),y^=f,g^=f<<2,f=16711935&(g>>>8^y),y^=f,g^=f<<8,f=1431655765&(y>>>1^g),g^=f,y^=f<<1,y=y<<1|y>>>31,g=g<<1|g>>>31;for(var m=0;m<p;m+=3){for(var w=i[m+1],v=i[m+2],b=i[m];b!=w;b+=v){var E=g^e[b],_=(g>>>4|g<<28)^e[b+1];f=y,y=g,g=f^(o[E>>>24&63]|c[E>>>16&63]|l[E>>>8&63]|d[63&E]|s[_>>>24&63]|a[_>>>16&63]|u[_>>>8&63]|h[63&_])}f=y,y=g,g=f}y=y>>>1|y<<31,g=g>>>1|g<<31,f=1431655765&(y>>>1^g),g^=f,y^=f<<1,f=16711935&(g>>>8^y),y^=f,g^=f<<8,f=858993459&(g>>>2^y),y^=f,g^=f<<2,f=65535&(y>>>16^g),g^=f,y^=f<<16,f=252645135&(y>>>4^g),g^=f,y^=f<<4,r[0]=y,r[1]=g}function y(e){e=e||{};var t,r=(e.mode||"CBC").toUpperCase(),i="DES-"+r;t=e.decrypt?n.cipher.createDecipher(i,e.key):n.cipher.createCipher(i,e.key);var s=t.start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),r=r||{},r.output=i,r.iv=e,s.call(t,r)},t}},5736:function(e){e.exports={options:{usePureJavaScript:!1}}},4881:function(e,t,r){var n=r(5736);r(4038),r(4292);var i=e.exports=n.hmac=n.hmac||{};i.create=function(){var e=null,t=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"===typeof s){if(s=s.toLowerCase(),!(s in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=n.md.algorithms[s].create()}else t=s;if(null===o)o=e;else{if("string"===typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<t.blockLength)for(a=t.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);e=o,r=r.bytes(),i=i.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return s.digest=s.getMac,s}},5970:function(e,t,r){var n,i=r(5736);e.exports=i.jsbn=i.jsbn||{};var s=0xdeadbeefcafe,o=15715070==(16777215&s);function a(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function c(){return new a(null)}function u(e,t,r,n,i,s){while(--s>=0){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i}function l(e,t,r,n,i,s){var o=32767&t,a=t>>15;while(--s>=0){var c=32767&this.data[e],u=this.data[e++]>>15,l=a*c+u*o;c=o*c+((32767&l)<<15)+r.data[n]+(1073741823&i),i=(c>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i}function h(e,t,r,n,i,s){var o=16383&t,a=t>>14;while(--s>=0){var c=16383&this.data[e],u=this.data[e++]>>14,l=a*c+u*o;c=o*c+((16383&l)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=a,"undefined"===typeof navigator?(a.prototype.am=h,n=28):o&&"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=l,n=30):o&&"Netscape"!=navigator.appName?(a.prototype.am=u,n=26):(a.prototype.am=h,n=28),a.prototype.DB=n,a.prototype.DM=(1<<n)-1,a.prototype.DV=1<<n;var d=52;a.prototype.FV=Math.pow(2,d),a.prototype.F1=d-n,a.prototype.F2=2*n-d;var f,p,y="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array;for(f="0".charCodeAt(0),p=0;p<=9;++p)g[f++]=p;for(f="a".charCodeAt(0),p=10;p<36;++p)g[f++]=p;for(f="A".charCodeAt(0),p=10;p<36;++p)g[f++]=p;function m(e){return y.charAt(e)}function w(e,t){var r=g[e.charCodeAt(t)];return null==r?-1:r}function v(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function b(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function E(e){var t=c();return t.fromInt(e),t}function _(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;var n=e.length,i=!1,s=0;while(--n>=0){var o=8==r?255&e[n]:w(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&a.ZERO.subTo(this,this)}function A(){var e=this.s&this.DM;while(this.t>0&&this.data[this.t-1]==e)--this.t}function S(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0){a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=m(r));while(o>=0)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=m(r))}return i?s:"0"}function k(){var e=c();return a.ZERO.subTo(this,e),e}function I(){return this.s<0?this.negate():this}function T(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;while(--r>=0)if(0!=(t=this.data[r]-e.data[r]))return t;return 0}function C(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function R(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)}function P(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function x(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function O(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function N(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}}function D(e,t){var r=0,n=0,i=Math.min(e.t,this.t);while(r<i)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){n-=e.s;while(r<this.t)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<e.t)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function B(e,t){var r=this.abs(),n=e.abs(),i=r.t;t.t=i+n.t;while(--i>=0)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&a.ZERO.subTo(t,t)}function L(e){var t=this.abs(),r=e.t=2*t.t;while(--r>=0)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function M(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=c());var s=c(),o=this.s,u=e.s,l=this.DB-C(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var h=s.t,d=s.data[h-1];if(0!=d){var f=d*(1<<this.F1)+(h>1?s.data[h-2]>>this.F2:0),p=this.FV/f,y=(1<<this.F1)/f,g=1<<this.F2,m=r.t,w=m-h,v=null==t?c():t;s.dlShiftTo(w,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),a.ONE.dlShiftTo(h,v),v.subTo(s,s);while(s.t<h)s.data[s.t++]=0;while(--w>=0){var b=r.data[--m]==d?this.DM:Math.floor(r.data[m]*p+(r.data[m-1]+g)*y);if((r.data[m]+=s.am(0,b,r,w,0,h))<b){s.dlShiftTo(w,v),r.subTo(v,r);while(r.data[m]<--b)r.subTo(v,r)}}null!=t&&(r.drShiftTo(h,t),o!=u&&a.ZERO.subTo(t,t)),r.t=h,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&a.ZERO.subTo(r,r)}}}function U(e){var t=c();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t}function F(e){this.m=e}function j(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function V(e){return e}function z(e){e.divRemTo(this.m,null,e)}function $(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function q(e,t){e.squareTo(t),this.reduce(t)}function K(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function H(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function G(e){var t=c();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t}function W(e){var t=c();return e.copyTo(t),this.reduce(t),t}function Q(e){while(e.t<=this.mt2)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);while(e.data[r]>=e.DV)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Y(e,t){e.squareTo(t),this.reduce(t)}function J(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function X(){return 0==(this.t>0?1&this.data[0]:this.s)}function Z(e,t){if(e>4294967295||e<1)return a.ONE;var r=c(),n=c(),i=t.convert(this),s=C(e)-1;i.copyTo(r);while(--s>=0)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function ee(e,t){var r;return r=e<256||t.isEven()?new F(t):new H(t),this.exp(e,r)}function te(){var e=c();return this.copyTo(e),e}function re(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function ne(){return 0==this.t?this.s:this.data[0]<<24>>24}function ie(){return 0==this.t?this.s:this.data[0]<<16>>16}function se(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function oe(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function ae(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=E(r),i=c(),s=c(),o="";this.divRemTo(n,i,s);while(i.signum()>0)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function ce(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,c=0;c<e.length;++c){var u=w(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(o=t*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&a.ZERO.subTo(this,this)}function ue(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else{this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(a.ONE.shiftLeft(e-1),me,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(t))this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(a.ONE.shiftLeft(e-1),this)}else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function le(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0){n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);while(e>=0)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r)}return t}function he(e){return 0==this.compareTo(e)}function de(e){return this.compareTo(e)<0?this:e}function fe(e){return this.compareTo(e)>0?this:e}function pe(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function ye(e,t){return e&t}function ge(e){var t=c();return this.bitwiseTo(e,ye,t),t}function me(e,t){return e|t}function we(e){var t=c();return this.bitwiseTo(e,me,t),t}function ve(e,t){return e^t}function be(e){var t=c();return this.bitwiseTo(e,ve,t),t}function Ee(e,t){return e&~t}function _e(e){var t=c();return this.bitwiseTo(e,Ee,t),t}function Ae(){for(var e=c(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Se(e){var t=c();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ke(e){var t=c();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Ie(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function Te(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+Ie(this.data[e]);return this.s<0?this.t*this.DB:-1}function Ce(e){var t=0;while(0!=e)e&=e-1,++t;return t}function Re(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Ce(this.data[r]^t);return e}function Pe(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)}function xe(e,t){var r=a.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Oe(e){return this.changeBit(e,me)}function Ne(e){return this.changeBit(e,Ee)}function De(e){return this.changeBit(e,ve)}function Be(e,t){var r=0,n=0,i=Math.min(e.t,this.t);while(r<i)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){n+=e.s;while(r<this.t)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{n+=this.s;while(r<e.t)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Le(e){var t=c();return this.addTo(e,t),t}function Me(e){var t=c();return this.subTo(e,t),t}function Ue(e){var t=c();return this.multiplyTo(e,t),t}function Fe(e){var t=c();return this.divRemTo(e,t,null),t}function je(e){var t=c();return this.divRemTo(e,null,t),t}function Ve(e){var t=c(),r=c();return this.divRemTo(e,t,r),new Array(t,r)}function ze(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function $e(e,t){if(0!=e){while(this.t<=t)this.data[this.t++]=0;this.data[t]+=e;while(this.data[t]>=this.DV)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function qe(){}function Ke(e){return e}function He(e,t,r){e.multiplyTo(t,r)}function Ge(e,t){e.squareTo(t)}function We(e){return this.exp(e,new qe)}function Qe(e,t,r){var n,i=Math.min(this.t+e.t,t);r.s=0,r.t=i;while(i>0)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()}function Ye(e,t,r){--t;var n=r.t=this.t+e.t-t;r.s=0;while(--n>=0)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Je(e){this.r2=c(),this.q3=c(),a.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Xe(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=c();return e.copyTo(t),this.reduce(t),t}function Ze(e){return e}function et(e){e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(e.compareTo(this.r2)<0)e.dAddOffset(1,this.m.t+1);e.subTo(this.r2,e);while(e.compareTo(this.m)>=0)e.subTo(this.m,e)}function tt(e,t){e.squareTo(t),this.reduce(t)}function rt(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function nt(e,t){var r,n,i=e.bitLength(),s=E(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new F(t):t.isEven()?new Je(t):new H(t);var o=new Array,a=3,u=r-1,l=(1<<r)-1;if(o[1]=n.convert(this),r>1){var h=c();n.sqrTo(o[1],h);while(a<=l)o[a]=c(),n.mulTo(h,o[a-2],o[a]),a+=2}var d,f,p=e.t-1,y=!0,g=c();i=C(e.data[p])-1;while(p>=0){i>=u?d=e.data[p]>>i-u&l:(d=(e.data[p]&(1<<i+1)-1)<<u-i,p>0&&(d|=e.data[p-1]>>this.DB+i-u)),a=r;while(0==(1&d))d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),y)o[d].copyTo(s),y=!1;else{while(a>1)n.sqrTo(s,g),n.sqrTo(g,s),a-=2;a>0?n.sqrTo(s,g):(f=s,s=g,g=f),n.mulTo(g,o[d],s)}while(p>=0&&0==(e.data[p]&1<<i))n.sqrTo(s,g),f=s,s=g,g=f,--i<0&&(i=this.DB-1,--p)}return n.revert(s)}function it(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));while(t.signum()>0)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function st(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function ot(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return a.ZERO;var r=e.clone(),n=this.clone(),i=E(1),s=E(0),o=E(0),c=E(1);while(0!=r.signum()){while(r.isEven())r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);while(n.isEven())n.rShiftTo(1,n),t?(o.isEven()&&c.isEven()||(o.addTo(this,o),c.subTo(e,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(c,s)):(n.subTo(r,n),t&&o.subTo(i,o),c.subTo(s,c))}return 0!=n.compareTo(a.ONE)?a.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c}F.prototype.convert=j,F.prototype.revert=V,F.prototype.reduce=z,F.prototype.mulTo=$,F.prototype.sqrTo=q,H.prototype.convert=G,H.prototype.revert=W,H.prototype.reduce=Q,H.prototype.mulTo=J,H.prototype.sqrTo=Y,a.prototype.copyTo=v,a.prototype.fromInt=b,a.prototype.fromString=_,a.prototype.clamp=A,a.prototype.dlShiftTo=P,a.prototype.drShiftTo=x,a.prototype.lShiftTo=O,a.prototype.rShiftTo=N,a.prototype.subTo=D,a.prototype.multiplyTo=B,a.prototype.squareTo=L,a.prototype.divRemTo=M,a.prototype.invDigit=K,a.prototype.isEven=X,a.prototype.exp=Z,a.prototype.toString=S,a.prototype.negate=k,a.prototype.abs=I,a.prototype.compareTo=T,a.prototype.bitLength=R,a.prototype.mod=U,a.prototype.modPowInt=ee,a.ZERO=E(0),a.ONE=E(1),qe.prototype.convert=Ke,qe.prototype.revert=Ke,qe.prototype.mulTo=He,qe.prototype.sqrTo=Ge,Je.prototype.convert=Xe,Je.prototype.revert=Ze,Je.prototype.reduce=et,Je.prototype.mulTo=rt,Je.prototype.sqrTo=tt;var at=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ct=(1<<26)/at[at.length-1];function ut(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=at[at.length-1]){for(t=0;t<at.length;++t)if(r.data[0]==at[t])return!0;return!1}if(r.isEven())return!1;t=1;while(t<at.length){var n=at[t],i=t+1;while(i<at.length&&n<ct)n*=at[i++];n=r.modInt(n);while(t<i)if(n%at[t++]==0)return!1}return r.millerRabin(e)}function lt(e){var t=this.subtract(a.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),s=ht(),o=0;o<e;++o){do{n=new a(this.bitLength(),s)}while(n.compareTo(a.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(a.ONE)&&0!=c.compareTo(t)){var u=1;while(u++<r&&0!=c.compareTo(t))if(c=c.modPowInt(2,this),0==c.compareTo(a.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0}function ht(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}}}a.prototype.chunkSize=se,a.prototype.toRadix=ae,a.prototype.fromRadix=ce,a.prototype.fromNumber=ue,a.prototype.bitwiseTo=pe,a.prototype.changeBit=xe,a.prototype.addTo=Be,a.prototype.dMultiply=ze,a.prototype.dAddOffset=$e,a.prototype.multiplyLowerTo=Qe,a.prototype.multiplyUpperTo=Ye,a.prototype.modInt=st,a.prototype.millerRabin=lt,a.prototype.clone=te,a.prototype.intValue=re,a.prototype.byteValue=ne,a.prototype.shortValue=ie,a.prototype.signum=oe,a.prototype.toByteArray=le,a.prototype.equals=he,a.prototype.min=de,a.prototype.max=fe,a.prototype.and=ge,a.prototype.or=we,a.prototype.xor=be,a.prototype.andNot=_e,a.prototype.not=Ae,a.prototype.shiftLeft=Se,a.prototype.shiftRight=ke,a.prototype.getLowestSetBit=Te,a.prototype.bitCount=Re,a.prototype.testBit=Pe,a.prototype.setBit=Oe,a.prototype.clearBit=Ne,a.prototype.flipBit=De,a.prototype.add=Le,a.prototype.subtract=Me,a.prototype.multiply=Ue,a.prototype.divide=Fe,a.prototype.remainder=je,a.prototype.divideAndRemainder=Ve,a.prototype.modPow=nt,a.prototype.modInverse=ot,a.prototype.pow=We,a.prototype.gcd=it,a.prototype.isProbablePrime=ut},4038:function(e,t,r){var n=r(5736);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},235:function(e,t,r){var n=r(5736);r(5219),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},5219:function(e,t,r){var n=r(5736);r(4292),n.mgf=n.mgf||{};var i=e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{};i.create=function(e){var t={generate:function(t,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/e.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),e.start(),e.update(t+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t}},9002:function(e,t,r){var n=r(5736);n.pki=n.pki||{};var i=e.exports=n.pki.oids=n.oids=n.oids||{};function s(e,t){i[e]=t,i[t]=e}function o(e,t){i[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},1352:function(e,t,r){r(7658);var n=r(5736);if(r(22),r(1041),r(8577),r(4038),r(9002),r(2515),r(7513),r(6412),r(2890),r(5070),r(4292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(e,t){return e.start().update(t).digest().getBytes()}function d(e){var t;if(e){if(t=o.oids[s.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return f(t)}function f(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function p(e,t,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),a}o.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,l=n.random.getBytesSync(r.saltSize),h=r.count,d=s.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,g,m;switch(r.algorithm){case"aes128":i=16,y=16,g=a["aes128-CBC"],m=n.aes.createEncryptionCipher;break;case"aes192":i=24,y=16,g=a["aes192-CBC"],m=n.aes.createEncryptionCipher;break;case"aes256":i=32,y=16,g=a["aes256-CBC"],m=n.aes.createEncryptionCipher;break;case"des":i=8,y=8,g=a["desCBC"],m=n.des.createEncryptionCipher;break;default:var w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=r.algorithm,w}var v="hmacWith"+r.prfAlgorithm.toUpperCase(),b=f(v),E=n.pkcs5.pbkdf2(t,l,h,i,b),_=n.random.getBytesSync(y),A=m(E);A.start(_),A.update(s.toDer(e)),A.finish(),u=A.output.getBytes();var S=p(l,d,i,v);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBES2"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pkcs5PBKDF2"]).getBytes()),S]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,_)])])])}else{if("3des"!==r.algorithm){w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=r.algorithm,w}i=24;var k=new n.util.ByteBuffer(l);E=o.pbe.generatePkcs12Key(t,k,1,h,i),_=o.pbe.generatePkcs12Key(t,k,2,h,i),A=n.des.createEncryptionCipher(E);A.start(_),A.update(s.toDer(e)),A.finish(),u=A.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,d.getBytes())])])}var I=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u)]);return I},o.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!s.validate(e,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var l=s.derToOid(i.encryptionOid),h=o.pbe.getCipher(l,i.encryptionParams,t),d=n.util.createBuffer(i.encryptedData);return h.update(d),h.finish()&&(r=s.fromDer(h.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,r),o.encryptedPrivateKeyToPem(i)}var a,c,u,l;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var d=n.pbe.opensslDeriveBytes(t,c.substr(0,8),u),f=l(d);f.start(c),f.update(s.toDer(o.privateKeyToAsn1(e))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:f.output.getBytes()};return n.pem.encode(p)},o.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(i.procType&&"ENCRYPTED"===i.procType.type){var c,u;switch(i.dekInfo.algorithm){case"DES-CBC":c=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":c=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":c=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":c=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".');throw a.algorithm=i.dekInfo.algorithm,a}var l=n.util.hexToBytes(i.dekInfo.parameters),h=n.pbe.opensslDeriveBytes(t,l.substr(0,8),c),d=u(h);if(d.start(l),d.update(n.util.createBuffer(i.body)),!d.finish())return r;r=d.output.getBytes()}else r=i.body;return r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r),null!==r&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,i,s,o){var a,c;if("undefined"===typeof o||null===o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var u=o.digestLength,l=o.blockLength,h=new n.util.ByteBuffer,d=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(c=0;c<e.length;c++)d.putInt16(e.charCodeAt(c));d.putInt16(0)}var f=d.length(),p=t.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,l);var g=l*Math.ceil(p/l),m=new n.util.ByteBuffer;for(c=0;c<g;c++)m.putByte(t.at(c%p));var w=l*Math.ceil(f/l),v=new n.util.ByteBuffer;for(c=0;c<w;c++)v.putByte(d.at(c%f));var b=m;b.putBuffer(v);for(var E=Math.ceil(s/u),_=1;_<=E;_++){var A=new n.util.ByteBuffer;A.putBytes(y.bytes()),A.putBytes(b.bytes());for(var S=0;S<i;S++)o.start(),o.update(A.getBytes()),A=o.digest();var k=new n.util.ByteBuffer;for(c=0;c<l;c++)k.putByte(A.at(c%u));var I=Math.ceil(p/l)+Math.ceil(f/l),T=new n.util.ByteBuffer;for(a=0;a<I;a++){var C=new n.util.ByteBuffer(b.getBytes(l)),R=511;for(c=k.length()-1;c>=0;c--)R>>=8,R+=k.at(c)+C.at(c),C.setAt(c,255&R);T.putBuffer(C)}b=T,h.putBuffer(A)}return h.truncate(h.length()-s),h},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids["pkcs5PBES2"]:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var i={},a=[];if(!s.validate(t,u,i,a)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}if(e=s.derToOid(i.kdfOid),e!==o.oids["pkcs5PBKDF2"]){c=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw c.oid=e,c.supportedOids=["pkcs5PBKDF2"],c}if(e=s.derToOid(i.encOid),e!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids["desCBC"]){c=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw c.oid=e,c.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],c}var l,h,f=i.kdfSalt,p=n.util.createBuffer(i.kdfIterationCount);switch(p=p.getInt(p.length()<<3),o.oids[e]){case"aes128-CBC":l=16,h=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,h=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,h=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,h=n.des.createDecryptionCipher;break;case"desCBC":l=8,h=n.des.createDecryptionCipher;break}var y=d(i.prfOid),g=n.pkcs5.pbkdf2(r,f,p,l,y),m=i.encIv,w=h(g);return w.start(m),w},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!s.validate(t,l,i,a)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=a,c}var u,h,f,p=n.util.createBuffer(i.salt),y=n.util.createBuffer(i.iterations);switch(y=y.getInt(y.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,h=8,f=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,h=8,f=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:c=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw c.oid=e,c}var g=d(i.prfOid),m=o.pbe.generatePkcs12Key(r,p,1,y,u,g);g.start();var w=o.pbe.generatePkcs12Key(r,p,2,y,h,g);return f(m,w)},o.pbe.opensslDeriveBytes=function(e,t,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t="");for(var s=[h(i,e+t)],o=16,a=1;o<r;++a,o+=16)s.push(h(i,s[a-1]+e+t));return s.join("").substr(0,r)}},2515:function(e,t,r){var n=r(5736);r(4881),r(4038),r(4292);var i,s=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(5819)),e.exports=n.pbkdf2=s.pbkdf2=function(e,t,r,s,o,a){if("function"===typeof o&&(a=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===o||"object"!==typeof o)&&(i.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!==typeof o&&(o="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(e,t,r,s,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):i.pbkdf2(e,t,r,s,o,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(e,t,r,s).toString("binary"):i.pbkdf2Sync(e,t,r,s,o).toString("binary");if("undefined"!==typeof o&&null!==o||(o="sha1"),"string"===typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var c=o.digestLength;if(s>4294967295*c){var u=new Error("Derived key is too long.");if(a)return a(u);throw u}var l=Math.ceil(s/c),h=s-(l-1)*c,d=n.hmac.create();d.start(o,e);var f,p,y,g="";if(!a){for(var m=1;m<=l;++m){d.start(null,null),d.update(t),d.update(n.util.int32ToBytes(m)),f=y=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(y),p=d.digest().getBytes(),f=n.util.xorBytes(f,p,c),y=p;g+=m<l?f:f.substr(0,h)}return g}m=1;function v(){if(m>l)return a(null,g);d.start(null,null),d.update(t),d.update(n.util.int32ToBytes(m)),f=y=d.digest().getBytes(),w=2,b()}function b(){if(w<=r)return d.start(null,null),d.update(y),p=d.digest().getBytes(),f=n.util.xorBytes(f,p,c),y=p,++w,n.util.setImmediate(b);g+=m<l?f:f.substr(0,h),++m,v()}v()}},7513:function(e,t,r){r(7658);var n=r(5736);r(4292);var i=e.exports=n.pem=n.pem||{};function s(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&-1!==o){var a=t[o];","===a?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+a+t.substr(o+1),s=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function o(e){return e.replace(/^\s+/,"")}i.encode=function(e,t){t=t||{};var r,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},i+=s(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},i+=s(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),i+=s(r)),e.headers)for(var o=0;o<e.headers.length;++o)i+=s(e.headers[o]);return e.procType&&(i+="\r\n"),i+=n.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n",i},i.decode=function(e){var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;while(1){if(t=i.exec(e),!t)break;var c=t[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(u),t[2]){var l=t[2].split(a),h=0;while(t&&h<l.length){for(var d=l[h].replace(/\s+$/,""),f=h+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;d+=p,h=f}if(t=d.match(s),t){for(var y={name:t[1],values:[]},g=t[2].split(","),m=0;m<g.length;++m)y.values.push(o(g[m]));if(u.procType)if(u.contentDomain||"Content-Domain"!==y.name)if(u.dekInfo||"DEK-Info"!==y.name)u.headers.push(y);else{if(0===y.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:g[0],parameters:g[1]||null}}else u.contentDomain=g[0]||"";else{if("Proc-Type"!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:g[0],type:g[1]}}}++h}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},902:function(e,t,r){var n=r(5736);r(4292),r(6412),r(989);var i=e.exports=n.pkcs1=n.pkcs1||{};function s(e,t,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(t/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,o,a,c;"string"===typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(e.n.bitLength()/8),l=u-2*a.digestLength-2;if(t.length>l){var h=new Error("RSAES-OAEP input message length is too long.");throw h.length=t.length,h.maxLength=l,h}i||(i=""),a.update(i,"raw");for(var d=a.digest(),f="",p=l-t.length,y=0;y<p;y++)f+="\0";var g=d.getBytes()+f+""+t;if(o){if(o.length!==a.digestLength){h=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw h.seedLength=o.length,h.digestLength=a.digestLength,h}}else o=n.random.getBytes(a.digestLength);var m=s(o,u-a.digestLength-1,c),w=n.util.xorBytes(g,m,g.length),v=s(w,a.digestLength,c),b=n.util.xorBytes(o,v,o.length);return"\0"+b+w},i.decode_rsa_oaep=function(e,t,r){var i,o,a;"string"===typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c){var u=new Error("RSAES-OAEP encoded message length is invalid.");throw u.length=t.length,u.expectedLength=c,u}if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var l=o.digest().getBytes(),h=t.charAt(0),d=t.substring(1,o.digestLength+1),f=t.substring(1+o.digestLength),p=s(f,o.digestLength,a),y=n.util.xorBytes(d,p,d.length),g=s(y,c-o.digestLength-1,a),m=n.util.xorBytes(f,g,f.length),w=m.substring(0,o.digestLength),v=(u="\0"!==h,0);v<o.digestLength;++v)u|=l.charAt(v)!==w.charAt(v);for(var b=1,E=o.digestLength,_=o.digestLength;_<m.length;_++){var A=m.charCodeAt(_),S=1&A^1,k=b?65534:0;u|=A&k,b&=S,E+=b}if(u||1!==m.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return m.substring(E+1)}},7323:function(e,t,r){r(7658);var n=r(5736);r(22),r(1041),r(8577),r(9002),r(7513),r(2193),r(6412),r(4292),r(8410);var i=n.asn1,s=e.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!i.validate(e,s.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:i.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function a(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function c(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}function u(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}function l(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var o=e.unauthenticatedAttributes[s];r.values.push(d(o))}t.value.push(r)}return t}function h(e){for(var t=[],r=0;r<e.length;++r)t.push(l(e[r]));return t}function d(e){var t;if(e.type===n.pki.oids.contentType)t=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"===typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}t=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[t])])}function f(e){return[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.algorithm).getBytes()),e.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.content.getBytes())])]}function p(e,t,r){var s={},o=[];if(!i.validate(t,r,s,o)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var c=i.derToOid(s.contentType);if(c!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var u="";if(n.util.isArray(s.encryptedContent))for(var l=0;l<s.encryptedContent.length;++l){if(s.encryptedContent[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");u+=s.encryptedContent[l].value}else u=s.encryptedContent;e.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(u)}}if(s.content){u="";if(n.util.isArray(s.content))for(l=0;l<s.content.length;++l){if(s.content[l].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");u+=s.content[l].value}else u=s.content;e.content=n.util.createBuffer(u)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function y(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids["desCBC"]:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.messageFromAsn1(o)},s.messageToPem=function(e,t){var r={type:"PKCS7",body:i.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},s.messageFromAsn1=function(e){var t={},r=[];if(!i.validate(e,s.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(t.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(p(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,i=0;i<r.length;++i)e.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;"string"===typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof o&&(o=n.pki.privateKeyFromPem(o));var a=t.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var u=!1,l=!1,h=0;h<c.length;++h){var d=c[h];if(u||d.type!==n.pki.oids.contentType){if(l||d.type!==n.pki.oids.messageDigest);else if(l=!0,u)break}else if(u=!0,l)break}if(!u||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(s){var o;(s=s||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?o=e.content.bytes():"string"===typeof e.content&&(o=n.util.encodeUtf8(e.content)),s.detached?e.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,o):e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,o)]))));if(0!==e.signers.length){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var t={},r=0;r<e.signers.length;++r){var s=e.signers[r],o=s.digestAlgorithm;o in t||(t[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=t[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return t}function r(t){var r;if(e.detachedContent?r=e.detachedContent:(r=e.contentInfo.value[1],r=r.value[0]),!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(e.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),t)t[a].start().update(o);for(var c=new Date,u=0;u<e.signers.length;++u){var l=e.signers[u];if(0===l.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),p=0;p<l.authenticatedAttributes.length;++p){var y=l.authenticatedAttributes[p];y.type===n.pki.oids.messageDigest?y.value=t[l.digestAlgorithm].digest():y.type===n.pki.oids.signingTime&&(y.value||(y.value=c)),f.value.push(d(y)),l.authenticatedAttributesAsn1.value.push(d(y))}o=i.toDer(f).getBytes(),l.md.start().update(o)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=h(e.signers)}},s.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){p(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),y(e)}},e},s.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=p(e,t,s.asn1.envelopedDataValidator);e.recipients=c(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,u(e.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,f(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}y(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var i,s,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var c=0;c<e.recipients.length;++c){var u=e.recipients[c];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},e}},2193:function(e,t,r){var n=r(5736);r(1041),r(4292);var i=n.asn1,s=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},3686:function(e,t,r){var n=r(5736);r(4292),r(5970),r(6412),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,r){"function"===typeof t&&(r=t,t={}),t=t||{};var i=t.algorithm||"PRIMEINC";"string"===typeof i&&(i={name:i}),i.options=i.options||{};var s=t.prng||n.random,o={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return a(e,o,i.options,r);throw new Error("Invalid prime generation algorithm: "+i.name)}}function a(e,t,r,n){return"workers"in r?l(e,t,r,n):c(e,t,r,n)}function c(e,t,r,n){var i=h(e,t),s=0,o=d(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var a=10;"maxBlockTime"in r&&(a=r.maxBlockTime),u(i,e,t,s,o,a,n)}function u(e,t,r,s,o,a,c){var l=+new Date;do{if(e.bitLength()>t&&(e=h(t,r)),e.isProbablePrime(o))return c(null,e);e.dAddOffset(i[s++%8],0)}while(a<0||+new Date-l<a);n.util.setImmediate((function(){u(e,t,r,s,o,a,c)}))}function l(e,t,i,s){if("undefined"===typeof Worker)return c(e,t,i,s);var o=h(e,t),a=i.workers,u=i.workLoad||100,l=30*u/8,d=i.workerScript||"forge/prime.worker.js";if(-1===a)return n.util.estimateCores((function(e,t){e&&(t=2),a=t-1,f()}));function f(){a=Math.max(1,a);for(var n=[],i=0;i<a;++i)n[i]=new Worker(d);for(i=0;i<a;++i)n[i].addEventListener("message",f);var c=!1;function f(i){if(!c){0;var a=i.data;if(a.found){for(var d=0;d<n.length;++d)n[d].terminate();return c=!0,s(null,new r(a.prime,16))}o.bitLength()>e&&(o=h(e,t));var f=o.toString(16);i.target.postMessage({hex:f,workLoad:u}),o.dAddOffset(l,0)}}}f()}function h(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}function d(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}}()},649:function(e,t,r){r(3408),r(4590);var n=r(5736);r(4292);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(5819));var s=e.exports=n.prng=n.prng||{};s.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),u(),e()}))}function c(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function l(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var s=n.util.createBuffer();if(t)while(s.length()<e){var o=Math.max(1,Math.min(e-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{t(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(f){if(!("undefined"!==typeof QuotaExceededError&&f instanceof QuotaExceededError))throw f}}if(s.length()<e){var u,l,h,d=Math.floor(65536*Math.random());while(s.length()<e){l=16807*(65535&d),u=16807*(d>>16),l+=(32767&u)<<16,l+=u>>15,l=(2147483647&l)+(l>>31),d=4294967295&l;for(c=0;c<3;++c)h=d>>>(c<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h)}}return s.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,c=t.plugin.formatSeed,u=n.util.createBuffer();function l(h){if(h)return r(h);if(u.length()>=e)return r(null,u.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return n.util.nextTick((function(){a(l)}));var d=i(t.key,t.seed);t.generated+=d.length,u.putBytes(d),t.key=o(i(t.key,s(t.seed))),t.seed=c(i(t.key,t.seed)),n.util.setImmediate(l)}t.key=null,l()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;var a=n.util.createBuffer();while(a.length()<e){t.generated>1048575&&(t.key=null),null===t.key&&c();var u=r(t.key,t.seed);t.generated+=u.length,a.putBytes(u),t.key=s(r(t.key,i(t.seed))),t.seed=o(r(t.key,t.seed))}return a.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(r){t(r)}},t.seedFileSync=l),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){function r(e){var n=e.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",r),t(n.forge.prng.err,n.forge.prng.bytes))}self.addEventListener("message",r),self.postMessage({forge:{prng:{needed:e}}})};else{var r=function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))};e.addEventListener("message",r)}},t}},5451:function(e,t,r){var n=r(5736);r(6412),r(4292);var i=e.exports=n.pss=n.pss||{};i.create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,i=e.mgf,s=r.digestLength,o=e.salt||null;if("string"===typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||n.random,c={encode:function(e,c){var u,l,h=c-1,d=Math.ceil(h/8),f=e.digest().getBytes();if(d<s+t+2)throw new Error("Message is too long to encrypt.");l=null===o?a.getBytesSync(t):o.bytes();var p=new n.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(f),p.putBytes(l),r.start(),r.update(p.getBytes());var y=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,d-t-s-2),g.putByte(1),g.putBytes(l);var m=g.getBytes(),w=d-s-1,v=i.generate(y,w),b="";for(u=0;u<w;u++)b+=String.fromCharCode(m.charCodeAt(u)^v.charCodeAt(u));var E=65280>>8*d-h&255;return b=String.fromCharCode(b.charCodeAt(0)&~E)+b.substr(1),b+y+String.fromCharCode(188)},verify:function(e,o,a){var c,u=a-1,l=Math.ceil(u/8);if(o=o.substr(-l),l<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var h=l-s-1,d=o.substr(0,h),f=o.substr(h,s),p=65280>>8*l-u&255;if(0!==(d.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var y=i.generate(f,h),g="";for(c=0;c<h;c++)g+=String.fromCharCode(d.charCodeAt(c)^y.charCodeAt(c));g=String.fromCharCode(g.charCodeAt(0)&~p)+g.substr(1);var m=l-s-t-2;for(c=0;c<m;c++)if(0!==g.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var w=g.substr(-t),v=new n.util.ByteBuffer;v.fillWithByte(0,8),v.putBytes(e),v.putBytes(w),r.start(),r.update(v.getBytes());var b=r.digest().getBytes();return f===b}};return c}},6412:function(e,t,r){var n=r(5736);r(22),r(5898),r(649),r(4292),function(){n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return e=new Array(4),e[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var a=o(),c=null,u=n.util.globalScope,l=u.crypto||u.msCrypto;if(l&&l.getRandomValues&&(c=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var h="";for(var d in navigator)try{"string"==typeof navigator[d]&&(h+=navigator[d])}catch(f){}a.collect(h),h=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(n.random)for(var d in a)n.random[d]=a[d];else n.random=a;n.random.createInstance=o,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)}()},2890:function(e,t,r){r(7658);var n=r(5736);r(4292);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,s=e,o=e.length(),a=t,c=Math.ceil(a/8),u=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&u]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(e,t,r){var i,c,u,l,h=!1,d=null,f=null,p=null,y=[];for(e=n.rc2.expandKey(e,t),u=0;u<64;u++)y.push(e.getInt16Le());r?(i=function(e){for(u=0;u<4;u++)e[u]+=y[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=o(e[u],s[u]),l++},c=function(e){for(u=0;u<4;u++)e[u]+=y[63&e[(u+3)%4]]}):(i=function(e){for(u=3;u>=0;u--)e[u]=a(e[u],s[u]),e[u]-=y[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=y[63&e[(u+3)%4]]});var g=function(e){var t=[];for(u=0;u<4;u++){var n=d.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(t[u]):t[u]^=p.getInt16Le()),f.putInt16Le(t[u])},m=null;return m={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),h=!1,d=n.util.createBuffer(),f=t||new n.util.createBuffer,p=e,m.output=f},update:function(e){h||d.putBuffer(e);while(d.length()>=8)g([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,d,!r);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(t&&(h=!0,m.update()),!r&&(t=0===d.length(),t))if(e)t=e(8,f,!r);else{var i=f.length(),s=f.at(i-1);s>i?t=!1:f.truncate(s)}return t}},m};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},5070:function(e,t,r){r(7658),r(3408),r(4590);var n=r(5736);if(r(1041),r(5970),r(9002),r(902),r(3686),r(6412),r(4292),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(5819):null,o=n.asn1,a=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},y=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},g=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(i.ONE));e=e.multiply(s.modPow(t.e,t.n)).mod(t.n);var o=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);while(o.compareTo(a)<0)o=o.add(t.p);var c=o.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return c=c.multiply(s.modInverse(t.n)).mod(t.n),c};function m(e,t,r){var i=n.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else while(c>0){var l=0,h=n.random.getBytes(c);for(u=0;u<c;++u)a=h.charCodeAt(u),0===a?++l:i.putByte(a);c=l}return i.putByte(0),i.putBytes(e),i}function w(e,t,r,i){var s=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=s-3-i;for(var l=0;l<u;++l)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c){u=0;while(o.length()>1){if(255!==o.getByte()){--o.read;break}++u}}else if(2===c){u=0;while(o.length()>1){if(0===o.getByte()){--o.read;break}++u}}var h=o.getByte();if(0!==h||u!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function v(e,t,r){"function"===typeof t&&(r=t,t={}),t=t||{};var s={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){a(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void a(e.qBits,u))}))}function a(e,t){n.prime.generateProbablePrime(e,s,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.p=null,void o();if(0!==e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.q=null,void a(e.qBits,u);if(e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(i.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,u);var l=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(s.prng=t.prng),o()}function b(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function E(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function _(e){return n.util.isNodejs&&"function"===typeof s[e]}function A(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[e]}function S(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[e]}function k(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}c.rsa.encrypt=function(e,t,r){var s,o=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=m(e,t,r)):(s=n.util.createBuffer(),s.putBytes(e));var c=new i(s.toHex(),16),u=g(c,t,o),l=u.toString(16),h=n.util.createBuffer(),d=a-Math.ceil(l.length/2);while(d>0)h.putByte(0),--d;return h.putBytes(n.util.hexToBytes(l)),h.getBytes()},c.rsa.decrypt=function(e,t,r,s){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=o,a}var c=new i(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");var u=g(c,t,r),l=u.toString(16),h=n.util.createBuffer(),d=o-Math.ceil(l.length/2);while(d>0)h.putByte(0),--d;return h.putBytes(n.util.hexToBytes(l)),!1!==s?w(h.getBytes(),t,r):h.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048,r=r||{};var s,o=r.prng||n.random,a={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return s={algorithm:c,state:0,bits:e,rng:a,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);var n,s=0,o=function(e,t){return e|t},a=+new Date,l=0;while(null===e.keys&&(t<=0||l<t)){if(0===e.state){var h=null===e.p?e.pBits:e.qBits,d=h-1;0===e.pqState?(e.num=new i(h,e.rng),e.num.testBit(d)||e.num.bitwiseTo(i.ONE.shiftLeft(d),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>h?e.pqState=0:e.num.isProbablePrime(E(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(i.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}n=+new Date,l+=n-a,a=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,i){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(i=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(i=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,i=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(i=r,r=void 0):(i=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(i){if(_("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return i(e);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(A("generateKey")&&A("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){i(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));i(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(S("generateKey")&&S("exportKey")){var u=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(e){var t=e.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){i(e)}},void(u.onerror=function(e){i(e)})}}else if(_("generateKeyPairSync")){var l=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(l.privateKey),publicKey:c.publicKeyFromPem(l.publicKey)}}var h=c.rsa.createKeyPairGenerationState(e,t,r);if(!i)return c.rsa.stepKeyPairGenerationState(h,0),h.keys;v(h,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,i){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return m(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(e,t,i,s){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(e,t){t=w(t,r,!0);var i=o.fromDer(t,{parseAllBytes:s._parseAllDigestBytes}),a={},c=[];if(!o.validate(i,p,a,c)){var u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw u.errors=c,u}var l=o.derToOid(a.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"]){u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw u.oid=l,u}if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(e,t){return t=w(t,r,!0),e===t}});var a=c.rsa.decrypt(t,r,!0,!1);return i.verify(e,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,i,s,o,a,u){var l={n:e,e:t,d:r,p:i,q:s,dP:o,dQ:a,qInv:u,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:w};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,l,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:y},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return c.rsa.encrypt(n,l,r)}};return l},c.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,s,a,u,d,f,p,y={},g=[];if(o.validate(e,l,y,g)&&(e=o.fromDer(n.util.createBuffer(y.privateKey))),y={},g=[],!o.validate(e,h,y,g)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=g,m}return t=n.util.createBuffer(y.privateKeyModulus).toHex(),r=n.util.createBuffer(y.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(y.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(y.privateKeyPrime1).toHex(),u=n.util.createBuffer(y.privateKeyPrime2).toHex(),d=n.util.createBuffer(y.privateKeyExponent1).toHex(),f=n.util.createBuffer(y.privateKeyExponent2).toHex(),p=n.util.createBuffer(y.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(t,16),new i(r,16),new i(s,16),new i(a,16),new i(u,16),new i(d,16),new i(f,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,f,t,r)){var s=o.derToOid(t.publicKeyOid);if(s!==c.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=s,a}e=t.rsaPublicKey}if(r=[],!o.validate(e,d,t,r)){a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=r,a}var u=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e))])}},989:function(e,t,r){r(7658);var n=r(5736);r(4038),r(4292);var i=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||a();var e=null,t=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,u,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,h=l&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-h));for(var d=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)a=8*i.fullMessageLength[f+1],u=a/4294967296>>>0,d+=u,o.putInt32(d>>>0),d=a>>>0;o.putInt32(d);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};c(p,r,o);var y=n.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y},i};var s=null,o=!1;function a(){s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0}function c(e,t,r){var n,i,s,o,a,c,u,l,h=r.length();while(h>=64){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=s&o|a&(s^o),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,h-=64}}},5898:function(e,t,r){r(7658);var n=r(5736);r(4038),r(4292);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||c();var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=i.fullMessageLength.length-1;c>=0;--c)i.fullMessageLength[c]+=a[1],a[1]=a[0]+(i.fullMessageLength[c]/4294967296>>>0),i.fullMessageLength[c]=i.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,c,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize,h=l&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-h));for(var d=8*i.fullMessageLength[0],f=0;f<i.fullMessageLength.length-1;++f)a=8*i.fullMessageLength[f+1],c=a/4294967296>>>0,d+=c,o.putInt32(d>>>0),d=a>>>0;o.putInt32(d);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(p,r,o);var y=n.util.createBuffer();return y.putInt32(p.h0),y.putInt32(p.h1),y.putInt32(p.h2),y.putInt32(p.h3),y.putInt32(p.h4),y.putInt32(p.h5),y.putInt32(p.h6),y.putInt32(p.h7),y},i};var s=null,o=!1,a=null;function c(){s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0}function u(e,t,r){var n,i,s,o,c,u,l,h,d,f,p,y,g,m,w,v=r.length();while(v>=64){for(l=0;l<16;++l)t[l]=r.getInt32();for(;l<64;++l)n=t[l-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[l-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[l]=n+t[l-7]+i+t[l-16]|0;for(h=e.h0,d=e.h1,f=e.h2,p=e.h3,y=e.h4,g=e.h5,m=e.h6,w=e.h7,l=0;l<64;++l)o=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),c=m^y&(g^m),s=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),u=h&d|f&(h^d),n=w+o+c+a[l]+t[l],i=s+u,w=m,m=g,g=y,y=p+n>>>0,p=f,f=d,d=h,h=n+i>>>0;e.h0=e.h0+h|0,e.h1=e.h1+d|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+y|0,e.h5=e.h5+g|0,e.h6=e.h6+m|0,e.h7=e.h7+w|0,v-=64}}},2328:function(e,t,r){r(7658);var n=r(5736);r(4038),r(4292);var i=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(e){if(a||l(),"undefined"===typeof e&&(e="SHA-512"),!(e in u))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=u[e],r=null,i=n.util.createBuffer(),s=new Array(80),c=0;c<80;++c)s[c]=new Array(2);var d=64;switch(e){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28;break}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,s=0;s<e;++s)f.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(t.length);for(s=0;s<t.length;++s)r[s]=t[s].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var o=e.length;f.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=o[1],o[1]=o[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(e),h(r,s,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var t=n.util.createBuffer();t.putBytes(i.bytes());var a,c,u=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize,l=u&f.blockLength-1;t.putBytes(o.substr(0,f.blockLength-l));for(var d=8*f.fullMessageLength[0],p=0;p<f.fullMessageLength.length-1;++p)a=8*f.fullMessageLength[p+1],c=a/4294967296>>>0,d+=c,t.putInt32(d>>>0),d=a>>>0;t.putInt32(d);var y=new Array(r.length);for(p=0;p<r.length;++p)y[p]=r[p].slice(0);h(y,s,t);var g,m=n.util.createBuffer();g="SHA-512"===e?y.length:"SHA-384"===e?y.length-2:y.length-4;for(p=0;p<g;++p)m.putInt32(y[p][0]),p===g-1&&"SHA-512/224"===e||m.putInt32(y[p][1]);return m},f};var o=null,a=!1,c=null,u=null;function l(){o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],u={},u["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0}function h(e,t,r){var n,i,s,o,a,u,l,h,d,f,p,y,g,m,w,v,b,E,_,A,S,k,I,T,C,R,P,x,O,N,D,B,L,M,U,F=r.length();while(F>=128){for(O=0;O<16;++O)t[O][0]=r.getInt32()>>>0,t[O][1]=r.getInt32()>>>0;for(;O<80;++O)B=t[O-2],N=B[0],D=B[1],n=((N>>>19|D<<13)^(D>>>29|N<<3)^N>>>6)>>>0,i=((N<<13|D>>>19)^(D<<3|N>>>29)^(N<<26|D>>>6))>>>0,M=t[O-15],N=M[0],D=M[1],s=((N>>>1|D<<31)^(N>>>8|D<<24)^N>>>7)>>>0,o=((N<<31|D>>>1)^(N<<24|D>>>8)^(N<<25|D>>>7))>>>0,L=t[O-7],U=t[O-16],D=i+L[1]+o+U[1],t[O][0]=n+L[0]+s+U[0]+(D/4294967296>>>0)>>>0,t[O][1]=D>>>0;for(g=e[0][0],m=e[0][1],w=e[1][0],v=e[1][1],b=e[2][0],E=e[2][1],_=e[3][0],A=e[3][1],S=e[4][0],k=e[4][1],I=e[5][0],T=e[5][1],C=e[6][0],R=e[6][1],P=e[7][0],x=e[7][1],O=0;O<80;++O)l=((S>>>14|k<<18)^(S>>>18|k<<14)^(k>>>9|S<<23))>>>0,h=((S<<18|k>>>14)^(S<<14|k>>>18)^(k<<23|S>>>9))>>>0,d=(C^S&(I^C))>>>0,f=(R^k&(T^R))>>>0,a=((g>>>28|m<<4)^(m>>>2|g<<30)^(m>>>7|g<<25))>>>0,u=((g<<4|m>>>28)^(m<<30|g>>>2)^(m<<25|g>>>7))>>>0,p=(g&w|b&(g^w))>>>0,y=(m&v|E&(m^v))>>>0,D=x+h+f+c[O][1]+t[O][1],n=P+l+d+c[O][0]+t[O][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=u+y,s=a+p+(D/4294967296>>>0)>>>0,o=D>>>0,P=C,x=R,C=I,R=T,I=S,T=k,D=A+i,S=_+n+(D/4294967296>>>0)>>>0,k=D>>>0,_=b,A=E,b=w,E=v,w=g,v=m,D=i+o,g=n+s+(D/4294967296>>>0)>>>0,m=D>>>0;D=e[0][1]+m,e[0][0]=e[0][0]+g+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+v,e[1][0]=e[1][0]+w+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+E,e[2][0]=e[2][0]+b+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+A,e[3][0]=e[3][0]+_+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+k,e[4][0]=e[4][0]+S+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+T,e[5][0]=e[5][0]+I+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+R,e[6][0]=e[6][0]+C+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+x,e[7][0]=e[7][0]+P+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,F-=128}}},4292:function(e,t,r){r(4633),r(7658),r(3408),r(4590),r(541);var n=r(5736),i=r(3220),s=e.exports=n.util=n.util||{};function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function a(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(s.isArrayBuffer(e)||s.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof a||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}(function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return s.nextTick=process.nextTick,void("function"===typeof setImmediate?s.setImmediate=setImmediate:s.setImmediate=s.nextTick);if("function"===typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(e){return setImmediate(e)});if(s.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];function r(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}s.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",r,!0)}if("undefined"!==typeof MutationObserver){var n=Date.now(),i=!0,o=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(o,{attributes:!0});var a=s.setImmediate;s.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),a(e)):(t.push(e),1===t.length&&o.setAttribute("a",i=!i))}}s.nextTick=s.setImmediate})(),s.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,s.globalScope=function(){return s.isNodejs?r.g:"undefined"===typeof self?window:self}(),s.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},s.isArrayBufferView=function(e){return e&&s.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},s.ByteBuffer=a,s.ByteStringBuffer=a;var c=4096;function u(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=s.isArrayBuffer(e),n=s.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}s.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>c&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},s.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);var r=this.data;while(t>0)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},s.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},s.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(s.encodeUtf8(e))},s.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},s.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},s.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},s.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},s.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},s.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},s.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var e=s.createBuffer(this.data);return e.read=this.read,e},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=u,s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},s.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},s.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},s.DataBuffer.prototype.putBytes=function(e,t){if(s.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(s.isArrayBuffer(e)){r=new Uint8Array(e);this.accommodate(r.byteLength);i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof s.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&s.isArrayBufferView(e.data)){r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof s.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var o;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(e,o,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(e,o,this.write),this;if("utf8"===t&&(e=s.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(o),this;if("utf16"===t)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},s.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},s.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},s.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},s.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},s.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},s.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},s.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},s.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},s.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},s.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},s.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8","binary"===e||"raw"===e)return s.binary.raw.encode(t);if("hex"===e)return s.binary.hex.encode(t);if("base64"===e)return s.binary.base64.encode(t);if("utf8"===e)return s.text.utf8.decode(t);if("utf16"===e)return s.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},s.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=s.encodeUtf8(e)),new s.ByteBuffer(e)},s.fillString=function(e,t){var r="";while(t>0)1&t&&(r+=e),t>>>=1,t>0&&(e+=e);return r},s.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n},s.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},s.bytesToHex=function(e){return s.createBuffer(e).toHex()},s.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(e,t){var r,n,i,s="",o="",a=0;while(a<e.length)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s,o},s.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");var t,r,n,i,s="",o=0;while(o<e.length)t=h[e.charCodeAt(o++)-43],r=h[e.charCodeAt(o++)-43],n=h[e.charCodeAt(o++)-43],i=h[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},s.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},s.decodeUtf8=function(e){return decodeURIComponent(escape(e))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},s.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},s.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},s.binary.base64.encode=function(e,t){var r,n,i,s="",o="",a=0;while(a<e.byteLength)r=e[a++],n=e[a++],i=e[a++],s+=l.charAt(r>>2),s+=l.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=l.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":l.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s,o},s.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;var c=0,u=r;while(c<e.length)n=h[e.charCodeAt(c++)-43],i=h[e.charCodeAt(c++)-43],s=h[e.charCodeAt(c++)-43],o=h[e.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return t?u-r:a.subarray(0,u)},s.binary.base58.encode=function(e,t){return s.binary.baseN.encode(e,d,t)},s.binary.base58.decode=function(e,t){return s.binary.baseN.decode(e,d,t)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(e,t,r){e=s.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},s.text.utf8.decode=function(e){return s.decodeUtf8(String.fromCharCode.apply(null,e))},s.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},s.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},s.deflate=function(e,t,r){if(t=s.decode64(e.deflate(s.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);32&i&&(n=6),t=t.substring(n,t.length-4)}return t},s.inflate=function(e,t,r){var n=e.inflate(s.encode64(t)).rval;return null===n?null:s.decode64(n)};var f=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=s.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(s.decode64(r))),r},y=function(e,t,r,n){var i=p(e,t);null===i&&(i={}),i[r]=n,f(e,t,i)},g=function(e,t,r){var n=p(e,t);return null!==n&&(n=r in n?n[r]:null),n},m=function(e,t,r){var n=p(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),f(e,t,n)}},w=function(e,t){f(e,t,null)},v=function(e,t,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};s.setItem=function(e,t,r,n,i){v(y,arguments,i)},s.getItem=function(e,t,r,n){return v(g,arguments,n)},s.removeItem=function(e,t,r,n){v(m,arguments,n)},s.clearItems=function(e,t,r){v(w,arguments,r)},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.format=function(e){var t,r,n=/%./g,i=0,s=[],o=0;while(t=n.exec(e)){r=e.substring(o,n.lastIndex-2),r.length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},s.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")},s.formatSize=function(e){return e=e>=1073741824?s.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?s.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?s.formatNumber(e/1024,0)+" KiB":s.formatNumber(e,0)+" bytes",e},s.bytesFromIP=function(e){return-1!==e.indexOf(".")?s.bytesFromIPv4(e):-1!==e.indexOf(":")?s.bytesFromIPv6(e):null},s.bytesFromIPv4=function(e){if(e=e.split("."),4!==e.length)return null;for(var t=s.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},s.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}));for(var r=2*(8-e.length+t),n=s.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var o=s.hexToBytes(e[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},s.bytesToIP=function(e){return 4===e.length?s.bytesToIPv4(e):16===e.length?s.bytesToIPv6(e):null},s.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},s.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){var o=s.bytesToHex(e[i]+e[i+1]);while("0"===o[0]&&"0"!==o)o=o.substr(1);if("0"===o){var a=r[r.length-1],c=t.length;a&&c===a.end+1?(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}t.push(o)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},s.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in s&&!e.update)return t(null,s.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,t(null,s.cores);if("undefined"===typeof Worker)return s.cores=1,t(null,s.cores);if("undefined"===typeof Blob)return s.cores=2,t(null,s.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){var t=Date.now(),r=t+4;while(Date.now()<r);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));function n(e,a,c){if(0===a){var u=Math.floor(e.reduce((function(e,t){return e+t}),0)/e.length);return s.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,s.cores)}i(c,(function(t,r){e.push(o(c,r)),n(e,a-1,c)}))}function i(e,t){for(var n=[],i=[],s=0;s<e;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}})),n.push(o)}for(s=0;s<e;++s)n[s].postMessage(s)}function o(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],s=r[n]=[],o=0;o<e;++o)if(n!==o){var a=t[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}n([],5,16)}},8410:function(e,t,r){r(7658);var n=r(5736);r(22),r(1041),r(8577),r(4038),r(235),r(9002),r(7513),r(5451),r(5070),r(4292);var i=n.asn1,s=e.exports=n.pki=n.pki||{},o=s.oids,a={};a["CN"]=o["commonName"],a["commonName"]="CN",a["C"]=o["countryName"],a["countryName"]="C",a["L"]=o["localityName"],a["localityName"]="L",a["ST"]=o["stateOrProvinceName"],a["stateOrProvinceName"]="ST",a["O"]=o["organizationName"],a["organizationName"]="O",a["OU"]=o["organizationalUnitName"],a["organizationalUnitName"]="OU",a["E"]=o["emailAddress"],a["emailAddress"]="E";var c=n.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(e,t){"string"===typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,n,s,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var l=0;l<r.value.length;++l)s={},n=r.value[l],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=i.derToOid(n.value[0].value),u=n.value[1].value,l=0;l<u.length;++l){var h={};if(h.type=c,h.value=u[l].value,h.valueTagClass=u[l].type,h.type in o&&(h.name=o[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===o.extensionRequest){h.extensions=[];for(var d=0;d<h.value.length;++d)h.extensions.push(s.certificateExtensionFromAsn1(h.value[d]))}t.push(h)}return t};var p=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o["sha1"]},mgf:{algorithmOid:o["mgf1"],hash:{algorithmOid:o["sha1"]}},saltLength:20});var s={},a=[];if(!i.validate(t,l,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n},y=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},g=function(e){var t,r=e.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s;if(i=o[r.signatureParameters.mgf.hash.algorithmOid],void 0===i||void 0===n.md[i]){var a=new Error("Unsupported MGF hash function.");throw a.oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a}if(s=o[r.signatureParameters.mgf.algorithmOid],void 0===s||void 0===n.mgf[s]){a=new Error("Unsupported MGF function.");throw a.oid=r.signatureParameters.mgf.algorithmOid,a.name=s,a}if(s=n.mgf[s].create(n.md[i].create()),i=o[r.signatureParameters.hash.algorithmOid],void 0===i||void 0===n.md[i]){a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=r.signatureParameters.hash.algorithmOid,a.name=i,a}t=n.pss.create(n.md[i].create(),s,r.signatureParameters.saltLength);break}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function m(e){for(var t,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=e.attributes,a=0;a<o.length;++a){t=o[a];var c=t.value,u=i.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass,u===i.Type.UTF8&&(c=n.util.encodeUtf8(c))),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,u,!1,c)])]),s.value.push(r)}return s}function w(e){for(var t,r=0;r<e.length;++r){if(t=e[r],"undefined"===typeof t.name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in s.oids)){var n=new Error("Attribute type not specified.");throw n.attribute=t,n}t.type=s.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var c=0;c<t.extensions.length;++c)t.value.push(s.certificateExtensionToAsn1(v(t.extensions[c])))}if("undefined"===typeof t.value){n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function v(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in s.oids)){var r=new Error("Extension ID not specified.");throw r.extension=e,r}e.id=s.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var a=0,c=0,u=0;e.digitalSignature&&(c|=128,a=7),e.nonRepudiation&&(c|=64,a=6),e.keyEncipherment&&(c|=32,a=5),e.dataEncipherment&&(c|=16,a=4),e.keyAgreement&&(c|=8,a=3),e.keyCertSign&&(c|=4,a=2),e.cRLSign&&(c|=2,a=1),e.encipherOnly&&(c|=1,a=0),e.decipherOnly&&(u|=128,a=7);var l=String.fromCharCode(a);0!==u?l+=String.fromCharCode(c)+String.fromCharCode(u):0!==c&&(l+=String.fromCharCode(c)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("basicConstraints"===e.name)e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var h=e.value.value;for(var d in e)!0===e[d]&&(d in o?h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[d]).getBytes())):-1!==d.indexOf(".")&&h.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes())))}else if("nsCertType"===e.name){a=0,c=0;e.client&&(c|=128,a=7),e.server&&(c|=64,a=6),e.email&&(c|=32,a=5),e.objsign&&(c|=16,a=4),e.reserved&&(c|=8,a=3),e.sslCA&&(c|=4,a=2),e.emailCA&&(c|=2,a=1),e.objCA&&(c|=1,a=0);l=String.fromCharCode(a);0!==c&&(l+=String.fromCharCode(c)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){v=e.altNames[f];l=v.value;if(7===v.type&&v.ip){if(l=n.util.bytesFromIP(v.ip),null===l){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else 8===v.type&&(l=v.oid?i.oidToDer(i.oidToDer(v.oid)):i.oidToDer(l));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,v.type,!1,l))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var p=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;if(e.keyIdentifier){var y=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;h.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,y))}if(e.authorityCertIssuer){var g=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];h.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var w=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);h.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,w))}}else if("cRLDistributionPoints"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);h=e.value.value;var v,b=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),E=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){v=e.altNames[f];l=v.value;if(7===v.type&&v.ip){if(l=n.util.bytesFromIP(v.ip),null===l){r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else 8===v.type&&(l=v.oid?i.oidToDer(i.oidToDer(v.oid)):i.oidToDer(l));E.value.push(i.create(i.Class.CONTEXT_SPECIFIC,v.type,!1,l))}b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[E])),h.push(b)}if("undefined"===typeof e.value){r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function b(e,t){switch(e){case o["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r);default:return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}}function E(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var u=!1;"valueConstructed"in o&&(u=o.valueConstructed);var l=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,u,a)])]);t.value.push(l)}return t}s.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,t)},s.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){t=t||{};var r,o=t.md||n.md.sha1.create(),a=t.type||"RSAPublicKey";switch(a){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var c=o.digest();if("hex"===t.encoding){var u=c.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return c.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return c},s.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,t)},s.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return f(e.issuer,t)},e.issuer.addField=function(t){w([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){w([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){w(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){w(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)v(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var u=i.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,o=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=n.attributes,a}var c=t.md;if(null===c){c=y({signatureOid:t.signatureOid,type:"certificate"});var u=t.tbsCertificate||s.getTBSCertificate(t),l=i.toDer(u);c.update(l.getBytes())}return null!==c&&(r=g({certificate:e,md:c,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o["subjectKeyIdentifier"],r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,u,r,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}var c=i.derToOid(r.publicKeyOid);if(c!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var l=s.createCertificate();l.version=r.certVersion?r.certVersion.charCodeAt(0):0;var h=n.util.createBuffer(r.certSerialNumber);l.serialNumber=h.toHex(),l.signatureOid=n.asn1.derToOid(r.certSignatureOid),l.signatureParameters=p(l.signatureOid,r.certSignatureParams,!0),l.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),l.siginfo.parameters=p(l.siginfo.algorithmOid,r.certinfoSignatureParams,!1),l.signature=r.certSignature;var d=[];if(void 0!==r.certValidity1UTCTime&&d.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&d.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&d.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&d.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(l.validity.notBefore=d[0],l.validity.notAfter=d[1],l.tbsCertificate=r.tbsCertificate,t){l.md=y({signatureOid:l.signatureOid,type:"certificate"});var g=i.toDer(l.tbsCertificate);l.md.update(g.getBytes())}var m=n.md.sha1.create(),v=i.toDer(r.certIssuer);m.update(v.getBytes()),l.issuer.getField=function(e){return f(l.issuer,e)},l.issuer.addField=function(e){w([e]),l.issuer.attributes.push(e)},l.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(l.issuer.uniqueId=r.certIssuerUniqueId),l.issuer.hash=m.digest().toHex();var b=n.md.sha1.create(),E=i.toDer(r.certSubject);return b.update(E.getBytes()),l.subject.getField=function(e){return f(l.subject,e)},l.subject.addField=function(e){w([e]),l.subject.attributes.push(e)},l.subject.attributes=s.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(l.subject.uniqueId=r.certSubjectUniqueId),l.subject.hash=b.digest().toHex(),r.certExtensions?l.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):l.extensions=[],l.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),l},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=i.fromDer(t.value),s=0,a=0;r.value.length>1&&(s=r.value.charCodeAt(1),a=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=128===(128&s),t.nonRepudiation=64===(64&s),t.keyEncipherment=32===(32&s),t.dataEncipherment=16===(16&s),t.keyAgreement=8===(8&s),t.keyCertSign=4===(4&s),t.cRLSign=2===(2&s),t.encipherOnly=1===(1&s),t.decipherOnly=128===(128&a)}else if("basicConstraints"===t.name){r=i.fromDer(t.value);r.value.length>0&&r.value[0].type===i.Type.BOOLEAN?t.cA=0!==r.value[0].value.charCodeAt(0):t.cA=!1;var c=null;r.value.length>0&&r.value[0].type===i.Type.INTEGER?c=r.value[0].value:r.value.length>1&&(c=r.value[1].value),null!==c&&(t.pathLenConstraint=i.derToInteger(c))}else if("extKeyUsage"===t.name){r=i.fromDer(t.value);for(var u=0;u<r.value.length;++u){var l=i.derToOid(r.value[u].value);l in o?t[o[l]]=!0:t[l]=!0}}else if("nsCertType"===t.name){r=i.fromDer(t.value),s=0;r.value.length>1&&(s=r.value.charCodeAt(1)),t.client=128===(128&s),t.server=64===(64&s),t.email=32===(32&s),t.objsign=16===(16&s),t.reserved=8===(8&s),t.sslCA=4===(4&s),t.emailCA=2===(2&s),t.objCA=1===(1&s)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var h;t.altNames=[];r=i.fromDer(t.value);for(var d=0;d<r.value.length;++d){h=r.value[d];var f={type:h.type,value:h.value};switch(t.altNames.push(f),h.type){case 1:case 2:case 6:break;case 7:f.ip=n.util.bytesToIP(h.value);break;case 8:f.oid=i.derToOid(h.value);break;default:}}}else if("subjectKeyIdentifier"===t.name){r=i.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(r.value)}return t},s.certificationRequestFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,d,r,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}var c=i.derToOid(r.publicKeyOid);if(c!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=p(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=p(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,t){u.md=y({signatureOid:u.signatureOid,type:"certification request"});var l=i.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var h=n.md.sha1.create();return u.subject.getField=function(e){return f(u.subject,e)},u.subject.addField=function(e){w([e]),u.subject.attributes.push(e)},u.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,h),u.subject.hash=h.digest().toHex(),u.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(e){return f(u,e)},u.addAttribute=function(e){w([e]),u.attributes.push(e)},u.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){w([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return f(e,t)},e.addAttribute=function(t){w([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){w(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){w(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var u=i.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=y({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||s.getCertificationRequestInfo(e),o=i.toDer(n);r.update(o.getBytes())}return null!==r&&(t=g({certificate:e,md:r,signature:e.signature})),t},e};var _=new Date("1950-01-01T00:00:00Z"),A=new Date("2050-01-01T00:00:00Z");function S(e){return e>=_&&e<A?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=S(e.validity.notBefore),r=S(e.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),b(e.siginfo.algorithmOid,e.siginfo.parameters)]),m(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,r]),m(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(e.extensions)),o},s.getCertificationRequestInfo=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),m(e.subject),s.publicKeyToAsn1(e.publicKey),E(e)]);return t},s.distinguishedNameToAsn1=function(e){return m(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(s.certificateExtensionToAsn1(e[n]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!==typeof e.value&&(r=i.toDer(r).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=s.RDNAttributesAsArray(m(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){var t=r(e.issuer);return t},t.addCertificate=function(e){if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=i.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){var c=i.toDer(s.certificateToAsn1(t[a])).getBytes();if(o===c)return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var i=t.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var a;if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var u=i.toDer(s.certificateToAsn1(e)).getBytes(),l=0;l<c.length;++l){var h=i.toDer(s.certificateToAsn1(c[l])).getBytes();u===h&&(a=c[l],c.splice(l,1))}return 0===c.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var c=e[a];t.addCertificate(c)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,r){"function"===typeof r&&(r={verify:r}),r=r||{},t=t.slice(0);var i=t.slice(0),o=r.validityCheckDate;"undefined"===typeof o&&(o=new Date);var a=!0,c=null,u=0;do{var l=t.shift(),h=null,d=!1;if(o&&(o<l.validity.notBefore||o>l.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:o}),null===c){if(h=t[0]||e.getIssuer(l),null===h&&l.isIssuer(l)&&(d=!0,h=l),h){var f=h;n.util.isArray(f)||(f=[f]);var p=!1;while(!p&&f.length>0){h=f.shift();try{p=h.verify(l)}catch(A){}}p||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||h&&!d||e.hasCertificate(l)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&h&&!l.isIssuer(h)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===c&&g<l.extensions.length;++g){var m=l.extensions[g];m.critical&&!(m.name in y)&&(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===t.length&&(!h||d))){var w=l.getExtension("basicConstraints"),v=l.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==w||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===w||w.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==v&&"pathLenConstraint"in w){var b=u-1;b>w.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}}var E=null===c||c.error,_=r.verify?r.verify(E,u,i):E;if(!0!==_)throw!0===E&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(_||0===_)&&("object"!==typeof _||n.util.isArray(_)?"string"===typeof _&&(c.error=_):(_.message&&(c.message=_.message),_.error&&(c.error=_.error))),c;c=null,a=!1,++u}while(t.length>0);return!0}},468:function(e,t,r){"use strict";r.d(t,{dP:function(){return j},re:function(){return $}});r(7658);var n=r(4492),i=null,s={},o=1,a=function(){return function(){function e(){this.id=["slot",o++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=i;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===s)break;return e!==i&&(i.slots[this.id]=t),!0}return i&&(i.slots[this.id]=s),!1},e.prototype.getValue=function(){if(this.hasValue())return i.slots[this.id]},e.prototype.withValue=function(e,t,r,n){var s,o=(s={__proto__:null},s[this.id]=e,s),a=i;i={parent:a,slots:o};try{return t.apply(n,r)}finally{i=a}},e.bind=function(e){var t=i;return function(){var r=i;try{return i=t,e.apply(this,arguments)}finally{i=r}}},e.noContext=function(e,t,r){if(!i)return e.apply(r,t);var n=i;try{return i=null,e.apply(r,t)}finally{i=n}},e}()},c="@wry/context:Slot",u=Array,l=u[c]||function(){var e=a();try{Object.defineProperty(u,c,{value:u[c]=e,enumerable:!1,writable:!1,configurable:!1})}finally{return e}}();l.bind,l.noContext;function h(){}var d,f=function(){function e(e,t){void 0===e&&(e=1/0),void 0===t&&(t=h),this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}return e.prototype.has=function(e){return this.map.has(e)},e.prototype.get=function(e){var t=this.getNode(e);return t&&t.value},e.prototype.getNode=function(e){var t=this.map.get(e);if(t&&t!==this.newest){var r=t.older,n=t.newer;n&&(n.older=r),r&&(r.newer=n),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=n)}return t},e.prototype.set=function(e,t){var r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)},e.prototype.clean=function(){while(this.oldest&&this.map.size>this.max)this.delete(this.oldest.key)},e.prototype.delete=function(e){var t=this.map.get(e);return!!t&&(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0)},e}(),p=new l,y=Object.prototype.hasOwnProperty,g=(d=Array.from,void 0===d?function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t}:d);function m(e){var t=e.unsubscribe;"function"===typeof t&&(e.unsubscribe=void 0,t())}var w=[],v=100;function b(e,t){if(!e)throw new Error(t||"assertion failure")}function E(e,t){var r=e.length;return r>0&&r===t.length&&e[r-1]===t[r-1]}function _(e){switch(e.length){case 0:throw new Error("unknown value");case 1:return e[0];case 2:throw e[1]}}function A(e){return e.slice(0)}var S=function(){function e(t){this.fn=t,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++e.count}return e.prototype.peek=function(){if(1===this.value.length&&!C(this))return k(this),this.value[0]},e.prototype.recompute=function(e){return b(!this.recomputing,"already recomputing"),k(this),C(this)?I(this,e):_(this.value)},e.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,P(this),m(this))},e.prototype.dispose=function(){var e=this;this.setDirty(),L(this),O(this,(function(t,r){t.setDirty(),M(t,e)}))},e.prototype.forget=function(){this.dispose()},e.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=w.pop()||new Set),this.deps.add(e)},e.prototype.forgetDeps=function(){var e=this;this.deps&&(g(this.deps).forEach((function(t){return t.delete(e)})),this.deps.clear(),w.push(this.deps),this.deps=null)},e.count=0,e}();function k(e){var t=p.getValue();if(t)return e.parents.add(t),t.childValues.has(e)||t.childValues.set(e,[]),C(e)?N(t,e):D(t,e),t}function I(e,t){return L(e),p.withValue(e,T,[e,t]),U(e,t)&&R(e),_(e.value)}function T(e,t){e.recomputing=!0,e.value.length=0;try{e.value[0]=e.fn.apply(null,t)}catch(r){e.value[1]=r}e.recomputing=!1}function C(e){return e.dirty||!(!e.dirtyChildren||!e.dirtyChildren.size)}function R(e){e.dirty=!1,C(e)||x(e)}function P(e){O(e,N)}function x(e){O(e,D)}function O(e,t){var r=e.parents.size;if(r)for(var n=g(e.parents),i=0;i<r;++i)t(n[i],e)}function N(e,t){b(e.childValues.has(t)),b(C(t));var r=!C(e);if(e.dirtyChildren){if(e.dirtyChildren.has(t))return}else e.dirtyChildren=w.pop()||new Set;e.dirtyChildren.add(t),r&&P(e)}function D(e,t){b(e.childValues.has(t)),b(!C(t));var r=e.childValues.get(t);0===r.length?e.childValues.set(t,A(t.value)):E(r,t.value)||e.setDirty(),B(e,t),C(e)||x(e)}function B(e,t){var r=e.dirtyChildren;r&&(r.delete(t),0===r.size&&(w.length<v&&w.push(r),e.dirtyChildren=null))}function L(e){e.childValues.size>0&&e.childValues.forEach((function(t,r){M(e,r)})),e.forgetDeps(),b(null===e.dirtyChildren)}function M(e,t){t.parents.delete(e),e.childValues.delete(t),B(e,t)}function U(e,t){if("function"===typeof e.subscribe)try{m(e),e.unsubscribe=e.subscribe.apply(null,t)}catch(r){return e.setDirty(),!1}return!0}var F={setDirty:!0,dispose:!0,forget:!0};function j(e){var t=new Map,r=e&&e.subscribe;function n(e){var n=p.getValue();if(n){var i=t.get(e);i||t.set(e,i=new Set),n.dependOn(i),"function"===typeof r&&(m(i),i.unsubscribe=r(e))}}return n.dirty=function(e,r){var n=t.get(e);if(n){var i=r&&y.call(F,r)?r:"setDirty";g(n).forEach((function(e){return e[i]()})),t.delete(e),m(n)}},n}function V(){var e=new n.B("function"===typeof WeakMap);return function(){return e.lookupArray(arguments)}}V();var z=new Set;function $(e,t){void 0===t&&(t=Object.create(null));var r=new f(t.max||Math.pow(2,16),(function(e){return e.dispose()})),n=t.keyArgs,i=t.makeCacheKey||V(),s=function(){var s=i.apply(null,n?n.apply(null,arguments):arguments);if(void 0===s)return e.apply(null,arguments);var o=r.get(s);o||(r.set(s,o=new S(e)),o.subscribe=t.subscribe,o.forget=function(){return r.delete(s)});var a=o.recompute(Array.prototype.slice.call(arguments));return r.set(s,o),z.add(r),p.hasValue()||(z.forEach((function(e){return e.clean()})),z.clear()),a};function o(e){var t=r.get(e);t&&t.setDirty()}function a(e){var t=r.get(e);if(t)return t.peek()}function c(e){return r.delete(e)}return Object.defineProperty(s,"size",{get:function(){return r["map"].size},configurable:!1,enumerable:!1}),s.dirtyKey=o,s.dirty=function(){o(i.apply(null,arguments))},s.peekKey=a,s.peek=function(){return a(i.apply(null,arguments))},s.forgetKey=c,s.forget=function(){return c(i.apply(null,arguments))},s.makeCacheKey=i,s.getKey=n?function(){return i.apply(null,n.apply(null,arguments))}:i,Object.freeze(s)}},1838:function(e,t,r){r(7658);const n=r(2819),i=r(9044);e.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(e){const{promise:t,resolve:r}=i();return this._buffer.push({chunk:e,resolve:r}),this._consume(),t}_consume(){while(!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty()){const e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}shift(){const{promise:e,resolve:t}=i();return this._waitingConsumers.push({resolve:t}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}},9044:function(e){"use strict";const t=()=>{const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e};e.exports=t},2645:function(e,t,r){"use strict";e.exports=r(1145)["default"]},1145:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(98),s=n(r(9840)),o=n(r(1646)),a=r(9564),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],u=c.map((e=>new i.Netmask(e)));function l(e){for(let t of u)if(t.contains(e))return!0;return!1}function h(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}t["default"]=e=>{if((0,a.isValid)(e)){const t=(0,a.parse)(e);if("ipv4"===t.kind())return l(t.toNormalizedString());if("ipv6"===t.kind())return h(e)}else if((0,o.default)(e)&&s.default.v6().test(e))return h(e)}},9840:function(e){"use strict";const t="[a-fA-F\\d:]",r=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(?::${i}){0,1}:${n}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(?::${i}){0,2}:${n}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(?::${i}){0,3}:${n}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(?::${i}){0,4}:${n}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${i}){0,5}:${n}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${n}$)|(?:^${s}$)`),a=new RegExp(`^${n}$`),c=new RegExp(`^${s}$`),u=e=>e&&e.exact?o:new RegExp(`(?:${r(e)}${n}${r(e)})|(?:${r(e)}${s}${r(e)})`,"g");u.v4=e=>e&&e.exact?a:new RegExp(`${r(e)}${n}${r(e)}`,"g"),u.v6=e=>e&&e.exact?c:new RegExp(`${r(e)}${s}${r(e)}`,"g"),e.exports=u},1646:function(e,t,r){"use strict";const n=r(9840),i=e=>n({exact:!0}).test(e);i.v4=e=>n.v4({exact:!0}).test(e),i.v6=e=>n.v6({exact:!0}).test(e),i.version=e=>i(e)?i.v4(e)?4:6:void 0,e.exports=i},8366:function(e,t,r){"use strict";e.exports=r(162)},6425:function(e,t,r){"use strict";e.exports=r(9507)},4178:function(e){"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},3520:function(e,t,r){"use strict";r(7658);var n=t,i=r(6445),s=r(965);function o(e,t,r,n){var s=!1;if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var o=t.resolvedType.values,a=Object.keys(o),c=0;c<a.length;++c)o[a[c]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",a[c])("case %i:",o[a[c]])("m%s=%j",n,o[a[c]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n);break}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n);break}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=s.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof i||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?o:c).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),u=0;u<o.length;++u)r("d%s={}",s.safeProp(o[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var l=c[u],h=s.safeProp(l.name);if(l.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",h,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",h,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else r("d%s=%j",h,l.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){l=t[u];var p=e._fieldsArray.indexOf(l);h=s.safeProp(l.name);l.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),a(r,l,p,h+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),a(r,l,p,h+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",h,l.name),a(r,l,p,h),l.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},1711:function(e,t,r){"use strict";e.exports=a;var n=r(6445),i=r(4470),s=r(965);function o(e){return"missing required '"+e.name+"'"}function a(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,u="m"+s.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",o(l))}return t("return m")}},9991:function(e,t,r){"use strict";e.exports=a;var n=r(6445),i=r(4470),s=r(965);function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function a(e){for(var t,r=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(s.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),l=e._fieldsArray.indexOf(u),h=u.resolvedType instanceof n?"int32":u.type,d=i.basic[h];t="m"+s.safeProp(u.name),u.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,t),r("}")("}")):u.repeated?(r("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==i.packed[h]?r("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===d?o(r,u,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(u.id<<3|d)>>>0,h,t)),r("}")):(u.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===d?o(r,u,l,t):r("w.uint32(%i).%s(%s)",(u.id<<3|d)>>>0,h,t))}return r("return w")}},6445:function(e,t,r){"use strict";e.exports=o;var n=r(6133);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var i=r(3595),s=r(965);function o(e,t,r,i,s,o){if(n.call(this,e,r),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=o,this.reserved=void 0,t)for(var a=Object.keys(t),c=0;c<a.length;++c)"number"===typeof t[a[c]]&&(this.valuesById[this.values[a[c]]=t[a[c]]]=a[c])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},4434:function(e,t,r){"use strict";e.exports=u;var n=r(6133);((u.prototype=Object.create(n.prototype)).constructor=u).className="Field";var i,s=r(6445),o=r(4470),a=r(965),c=/^required|optional|repeated$/;function u(e,t,r,i,s,u,l){if(a.isObject(i)?(l=s,u=i,i=s=void 0):a.isObject(s)&&(l=u,u=s,s=void 0),n.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options["default"]&&(this.typeDefault=this.options["default"],this.resolvedType instanceof s&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"===typeof t?t=a.decorateType(t).name:t&&"object"===typeof t&&(t=a.decorateEnum(t).name),function(i,s){a.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){i=e}},7412:function(e,t,r){"use strict";var n=e.exports=r(9507);function i(e,t,r){return"function"===typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(9991),n.decoder=r(1711),n.verifier=r(3478),n.converter=r(3520),n.ReflectionObject=r(6133),n.Namespace=r(3595),n.Root=r(309),n.Enum=r(6445),n.Type=r(9705),n.Field=r(4434),n.OneOf=r(369),n.MapField=r(4147),n.Service=r(2531),n.Method=r(2946),n.Message=r(1373),n.wrappers=r(1130),n.types=r(4470),n.util=r(965),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},9507:function(e,t,r){"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7156),n.BufferWriter=r(8252),n.Reader=r(9799),n.BufferReader=r(8894),n.util=r(7102),n.rpc=r(7753),n.roots=r(358),n.configure=i,i()},162:function(e,t,r){"use strict";var n=e.exports=r(7412);n.build="full",n.tokenize=r(1098),n.parse=r(9822),n.common=r(4178),n.Root._configure(n.Type,n.parse,n.common)},4147:function(e,t,r){"use strict";e.exports=o;var n=r(4434);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var i=r(4470),s=r(965);function o(e,t,r,i,o,a){if(n.call(this,e,t,i,void 0,void 0,o,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"===typeof r?r=s.decorateType(r).name:r&&"object"===typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new o(i,e,t,r))}}},1373:function(e,t,r){"use strict";e.exports=i;var n=r(7102);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},2946:function(e,t,r){"use strict";e.exports=s;var n=r(6133);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(965);function s(e,t,r,s,o,a,c,u,l){if(i.isObject(o)?(c=o,o=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=l}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},3595:function(e,t,r){"use strict";e.exports=h;var n=r(6133);((h.prototype=Object.create(n.prototype)).constructor=h).className="Namespace";var i,s,o,a=r(4434),c=r(965),u=r(369);function l(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function h(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}h.fromJSON=function(e,t){return new h(e,t.options).addJSON(t.nested)},h.arrayToJSON=l,h.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},h.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),h.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},h.prototype.addJSON=function(e){var t=this;if(e)for(var r,n=Object.keys(e),c=0;c<n.length;++c)r=e[n[c]],t.add((void 0!==r.fields?i.fromJSON:void 0!==r.values?o.fromJSON:void 0!==r.methods?s.fromJSON:void 0!==r.id?a.fromJSON:h.fromJSON)(n[c],r));return this},h.prototype.get=function(e){return this.nested&&this.nested[e]||null},h.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},h.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof u||e instanceof o||e instanceof s||e instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof h&&e instanceof h)||t instanceof i||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},h.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},h.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");var r=this;while(e.length>0){var n=e.shift();if(r.nested&&r.nested[n]){if(r=r.nested[n],!(r instanceof h))throw Error("path conflicts with non-namespace objects")}else r.add(r=new h(n))}return t&&r.addJSON(t),r},h.prototype.resolveAll=function(){var e=this.nestedArray,t=0;while(t<e.length)e[t]instanceof h?e[t++].resolveAll():e[t++].resolve();return this.resolve()},h.prototype.lookup=function(e,t,r){if("boolean"===typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof h&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof h&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},h.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},h.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},h.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},h.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},h._configure=function(e,t,r){i=e,s=t,o=r}},6133:function(e,t,r){"use strict";r(541),r(7658),e.exports=s,s.className="ReflectionObject";var n,i=r(965);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){var e=this;while(null!==e.parent)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];i.setProperty(o,r,t)}else s={},s[e]=i.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},369:function(e,t,r){"use strict";r(7658),e.exports=o;var n=r(6133);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var i=r(4434),s=r(965);function o(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){var e=new Array(arguments.length),t=0;while(t<arguments.length)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},9822:function(e,t,r){"use strict";r(7658),e.exports=S,S.filename=null,S.defaults={keepCase:!1};var n=r(1098),i=r(309),s=r(9705),o=r(4434),a=r(4147),c=r(369),u=r(6445),l=r(2531),h=r(2946),d=r(4470),f=r(965),p=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,m=/^-?0[x][0-9a-fA-F]+$/,w=/^0[0-7]+$/,v=/^-?0[0-7]+$/,b=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,E=/^[a-zA-Z_][a-zA-Z_0-9]*$/,_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,A=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function S(e,t,r){t instanceof i||(r=t,t=new i),r||(r=S.defaults);var k,I,T,C,R,P=r.preferTrailingComment||!1,x=n(e,r.alternateCommentMode||!1),O=x.next,N=x.push,D=x.peek,B=x.skip,L=x.cmnt,M=!0,U=!1,F=t,j=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=S.filename;return r||(S.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+x.line+")")}function z(){var e,t=[];do{if('"'!==(e=O())&&"'"!==e)throw V(e);t.push(O()),B(e),e=D()}while('"'===e||"'"===e);return t.join("")}function $(e){var t=O();switch(t){case"'":case'"':return N(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return K(t,!0)}catch(r){if(e&&_.test(t))return t;throw V(t,"value")}}function q(e,t){var r,n;do{!t||'"'!==(r=D())&&"'"!==r?e.push([n=H(O()),B("to",!0)?H(O()):n]):e.push(z())}while(B(",",!0));B(";")}function K(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(w.test(e))return r*parseInt(e,8);if(b.test(e))return r*parseFloat(e);throw V(e,"number",t)}function H(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(y.test(e))return parseInt(e,10);if(m.test(e))return parseInt(e,16);if(v.test(e))return parseInt(e,8);throw V(e,"id")}function G(){if(void 0!==k)throw V("package");if(k=O(),!_.test(k))throw V(k,"name");F=F.define(k),B(";")}function W(){var e,t=D();switch(t){case"weak":e=T||(T=[]),O();break;case"public":O();default:e=I||(I=[]);break}t=z(),B(";"),e.push(t)}function Q(){if(B("="),C=z(),U="proto3"===C,!U&&"proto2"!==C)throw V(C,"syntax");B(";")}function Y(e,t){switch(t){case"option":return se(e,t),B(";"),!0;case"message":return X(e,t),!0;case"enum":return ne(e,t),!0;case"service":return le(e,t),!0;case"extend":return de(e,t),!0}return!1}function J(e,t,r){var n=x.line;if(e&&("string"!==typeof e.comment&&(e.comment=L()),e.filename=S.filename),B("{",!0)){var i;while("}"!==(i=O()))t(i);B(";",!0)}else r&&r(),B(";"),e&&("string"!==typeof e.comment||P)&&(e.comment=L(n)||e.comment)}function X(e,t){if(!E.test(t=O()))throw V(t,"type name");var r=new s(t);J(r,(function(e){if(!Y(r,e))switch(e){case"map":te(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":Z(r,U?"proto3_optional":"optional");break;case"oneof":re(r,e);break;case"extensions":q(r.extensions||(r.extensions=[]));break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:if(!U||!_.test(e))throw V(e);N(e),Z(r,"optional");break}})),e.add(r)}function Z(e,t,r){var n=O();if("group"!==n){if(!_.test(n))throw V(n,"type");var i=O();if(!E.test(i))throw V(i,"name");i=j(i),B("=");var s=new o(i,H(O()),n,t,r);if(J(s,(function(e){if("option"!==e)throw V(e);se(s,e),B(";")}),(function(){ue(s)})),"proto3_optional"===t){var a=new c("_"+i);s.setOption("proto3_optional",!0),a.add(s),e.add(a)}else e.add(s);U||!s.repeated||void 0===d.packed[n]&&void 0!==d.basic[n]||s.setOption("packed",!1,!0)}else ee(e,t)}function ee(e,t){var r=O();if(!E.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),B("=");var i=H(O()),a=new s(r);a.group=!0;var c=new o(n,i,r,t);c.filename=S.filename,J(a,(function(e){switch(e){case"option":se(a,e),B(";");break;case"required":case"repeated":Z(a,e);break;case"optional":Z(a,U?"proto3_optional":"optional");break;case"message":X(a,e);break;case"enum":ne(a,e);break;default:throw V(e)}})),e.add(a).add(c)}function te(e){B("<");var t=O();if(void 0===d.mapKey[t])throw V(t,"type");B(",");var r=O();if(!_.test(r))throw V(r,"type");B(">");var n=O();if(!E.test(n))throw V(n,"name");B("=");var i=new a(j(n),H(O()),t,r);J(i,(function(e){if("option"!==e)throw V(e);se(i,e),B(";")}),(function(){ue(i)})),e.add(i)}function re(e,t){if(!E.test(t=O()))throw V(t,"name");var r=new c(j(t));J(r,(function(e){"option"===e?(se(r,e),B(";")):(N(e),Z(r,"optional"))})),e.add(r)}function ne(e,t){if(!E.test(t=O()))throw V(t,"name");var r=new u(t);J(r,(function(e){switch(e){case"option":se(r,e),B(";");break;case"reserved":q(r.reserved||(r.reserved=[]),!0);break;default:ie(r,e)}})),e.add(r)}function ie(e,t){if(!E.test(t))throw V(t,"name");B("=");var r=H(O(),!0),n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};J(n,(function(e){if("option"!==e)throw V(e);se(n,e),B(";")}),(function(){ue(n)})),e.add(t,r,n.comment,n.options)}function se(e,t){var r=B("(",!0);if(!_.test(t=O()))throw V(t,"name");var n,i=t,s=i;r&&(B(")"),i="("+i+")",s=i,t=D(),A.test(t)&&(n=t.slice(1),i+=t,O())),B("=");var o=oe(e,i);ce(e,s,o,n)}function oe(e,t){if(B("{",!0)){var r={};while(!B("}",!0)){if(!E.test(R=O()))throw V(R,"name");var n,i=R;if(B(":",!0),"{"===D())n=oe(e,t+"."+R);else if("["===D()){var s;if(n=[],B("[",!0)){do{s=$(!0),n.push(s)}while(B(",",!0));B("]"),"undefined"!==typeof s&&ae(e,t+"."+R,s)}}else n=$(!0),ae(e,t+"."+R,n);var o=r[i];o&&(n=[].concat(o).concat(n)),r[i]=n,B(",",!0),B(";",!0)}return r}var a=$(!0);return ae(e,t,a),a}function ae(e,t,r){e.setOption&&e.setOption(t,r)}function ce(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function ue(e){if(B("[",!0)){do{se(e,"option")}while(B(",",!0));B("]")}return e}function le(e,t){if(!E.test(t=O()))throw V(t,"service name");var r=new l(t);J(r,(function(e){if(!Y(r,e)){if("rpc"!==e)throw V(e);he(r,e)}})),e.add(r)}function he(e,t){var r=L(),n=t;if(!E.test(t=O()))throw V(t,"name");var i,s,o,a,c=t;if(B("("),B("stream",!0)&&(s=!0),!_.test(t=O()))throw V(t);if(i=t,B(")"),B("returns"),B("("),B("stream",!0)&&(a=!0),!_.test(t=O()))throw V(t);o=t,B(")");var u=new h(c,n,i,o,s,a);u.comment=r,J(u,(function(e){if("option"!==e)throw V(e);se(u,e),B(";")})),e.add(u)}function de(e,t){if(!_.test(t=O()))throw V(t,"reference");var r=t;J(null,(function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":Z(e,U?"proto3_optional":"optional",r);break;default:if(!U||!_.test(t))throw V(t);N(t),Z(e,"optional",r);break}}))}while(null!==(R=O()))switch(R){case"package":if(!M)throw V(R);G();break;case"import":if(!M)throw V(R);W();break;case"syntax":if(!M)throw V(R);Q();break;case"option":se(F,R),B(";");break;default:if(Y(F,R)){M=!1;continue}throw V(R)}return S.filename=null,{package:k,imports:I,weakImports:T,syntax:C,root:t}}},9799:function(e,t,r){"use strict";r(3408),r(4590),e.exports=c;var n,i=r(7102),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while(4!==(e=7&this.uint32()))this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=l(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},8894:function(e,t,r){"use strict";e.exports=s;var n=r(9799);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(7102);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},309:function(e,t,r){"use strict";r(7658),e.exports=h;var n=r(3595);((h.prototype=Object.create(n.prototype)).constructor=h).className="Root";var i,s,o,a=r(4434),c=r(6445),u=r(369),l=r(965);function h(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=l.path.resolve,h.prototype.fetch=l.fetch,h.prototype.load=function e(t,r,n){"function"===typeof r&&(n=r,r=void 0);var i=this;if(!n)return l.asPromise(e,i,t,r);var a=n===d;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function h(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){s.filename=e;var n,o=s(t,i,r),h=0;if(o.imports)for(;h<o.imports.length;++h)(n=u(o.imports[h])||i.resolvePath(e,o.imports[h]))&&f(n);if(o.weakImports)for(h=0;h<o.weakImports.length;++h)(n=u(o.weakImports[h])||i.resolvePath(e,o.weakImports[h]))&&f(n,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(d){c(d)}a||p||c(null,i)}function f(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in o)a?h(e,o[e]):(++p,setTimeout((function(){--p,h(e,o[e])})));else if(a){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(s){return void(t||c(s))}h(e,r)}else++p,i.fetch(e,(function(r,s){--p,n&&(r?t?p||c(null,i):c(r):h(e,s))}))}var p=0;l.isString(t)&&(t=[t]);for(var y,g=0;g<t.length;++g)(y=i.resolvePath("",t[g]))&&f(y);if(a)return i;p||c(null,i)},h.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof c)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof i)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,r){i=e,s=t,o=r}},358:function(e){"use strict";e.exports={}},7753:function(e,t,r){"use strict";var n=t;n.Service=r(964)},964:function(e,t,r){"use strict";e.exports=i;var n=r(7102);function i(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){o(c)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},2531:function(e,t,r){"use strict";e.exports=a;var n=r(3595);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var i=r(2946),s=r(965),o=r(7753);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,i=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=s.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},1098:function(e,t,r){"use strict";r(7658),e.exports=f;var n=/[\s{}=;:[\],'"()<>]/g,i=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,s=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,o=/^ *[*/]+ */,a=/^\s*\*?\/*/,c=/\n/g,u=/\s/,l=/\\(.?)/g,h={0:"\0",r:"\r",n:"\n",t:"\t"};function d(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return h[t]||""}}))}function f(e,t){e=e.toString();var r=0,l=e.length,h=1,f=0,p={},y=[],g=null;function m(e){return Error("illegal "+e+" (line "+h+")")}function w(){var t="'"===g?s:i;t.lastIndex=r-1;var n=t.exec(e);if(!n)throw m("string");return r=t.lastIndex,S(g),g=null,d(n[1])}function v(t){return e.charAt(t)}function b(r,n,i){var s,u={type:e.charAt(r++),lineEmpty:!1,leading:i};s=t?2:3;var l,d=r-s;do{if(--d<0||"\n"===(l=e.charAt(d))){u.lineEmpty=!0;break}}while(" "===l||"\t"===l);for(var y=e.substring(r,n).split(c),g=0;g<y.length;++g)y[g]=y[g].replace(t?a:o,"").trim();u.text=y.join("\n").trim(),p[h]=u,f=h}function E(t){var r=_(t),n=e.substring(t,r),i=/^\s*\/{1,2}/.test(n);return i}function _(e){var t=e;while(t<l&&"\n"!==v(t))t++;return t}function A(){if(y.length>0)return y.shift();if(g)return w();var i,s,o,a,c,d=0===r;do{if(r===l)return null;i=!1;while(u.test(o=v(r)))if("\n"===o&&(d=!0,++h),++r===l)return null;if("/"===v(r)){if(++r===l)throw m("comment");if("/"===v(r))if(t){if(a=r,c=!1,E(r)){c=!0;do{if(r=_(r),r===l)break;if(r++,!d)break}while(E(r))}else r=Math.min(l,_(r)+1);c&&(b(a,r,d),d=!0),h++,i=!0}else{c="/"===v(a=r+1);while("\n"!==v(++r))if(r===l)return null;++r,c&&(b(a,r-1,d),d=!0),++h,i=!0}else{if("*"!==(o=v(r)))return"/";a=r+1,c=t||"*"===v(a);do{if("\n"===o&&++h,++r===l)throw m("comment");s=o,o=v(r)}while("*"!==s||"/"!==o);++r,c&&(b(a,r-2,d),d=!0),i=!0}}}while(i);var f=r;n.lastIndex=0;var p=n.test(v(f++));if(!p)while(f<l&&!n.test(v(f)))++f;var A=e.substring(r,r=f);return'"'!==A&&"'"!==A||(g=A),A}function S(e){y.push(e)}function k(){if(!y.length){var e=A();if(null===e)return null;S(e)}return y[0]}function I(e,t){var r=k(),n=r===e;if(n)return A(),!0;if(!t)throw m("token '"+r+"', '"+e+"' expected");return!1}function T(e){var r,n=null;return void 0===e?(r=p[h-1],delete p[h-1],r&&(t||"*"===r.type||r.lineEmpty)&&(n=r.leading?r.text:null)):(f<e&&k(),r=p[e],delete p[e],!r||r.lineEmpty||!t&&"/"!==r.type||(n=r.leading?null:r.text)),n}return Object.defineProperty({next:A,peek:k,push:S,skip:I,cmnt:T},"line",{get:function(){return h}})}f.unescape=d},9705:function(e,t,r){"use strict";r(7658),e.exports=w;var n=r(3595);((w.prototype=Object.create(n.prototype)).constructor=w).className="Type";var i=r(6445),s=r(369),o=r(4434),a=r(4147),c=r(2531),u=r(1373),l=r(9799),h=r(7156),d=r(965),f=r(9991),p=r(1711),y=r(3478),g=r(3520),m=r(1130);function w(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=w.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),w.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},w.fromJSON=function(e,t){var r=new w(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),l=0;l<u.length;++l)r.add(("undefined"!==typeof t.fields[u[l]].keyType?a.fromJSON:o.fromJSON)(u[l],t.fields[u[l]]));if(t.oneofs)for(u=Object.keys(t.oneofs),l=0;l<u.length;++l)r.add(s.fromJSON(u[l],t.oneofs[u[l]]));if(t.nested)for(u=Object.keys(t.nested),l=0;l<u.length;++l){var h=t.nested[u[l]];r.add((void 0!==h.id?o.fromJSON:void 0!==h.fields?w.fromJSON:void 0!==h.values?i.fromJSON:void 0!==h.methods?c.fromJSON:n.fromJSON)(u[l],h))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},w.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},w.prototype.resolveAll=function(){var e=this.fieldsArray,t=0;while(t<e.length)e[t++].resolve();var r=this.oneofsArray;t=0;while(t<r.length)r[t++].resolve();return n.prototype.resolveAll.call(this)},w.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},w.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):n.prototype.add.call(this,e)},w.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return n.prototype.remove.call(this,e)},w.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},w.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},w.prototype.create=function(e){return new this.ctor(e)},w.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:h,types:t,util:d}),this.decode=p(this)({Reader:l,types:t,util:d}),this.verify=y(this)({types:t,util:d}),this.fromObject=g.fromObject(this)({types:t,util:d}),this.toObject=g.toObject(this)({types:t,util:d});var n=m[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},w.prototype.encode=function(e,t){return this.setup().encode(e,t)},w.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},w.prototype.decode=function(e,t){return this.setup().decode(e,t)},w.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},w.prototype.verify=function(e){return this.setup().verify(e)},w.prototype.fromObject=function(e){return this.setup().fromObject(e)},w.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},w.d=function(e){return function(t){d.decorateType(t,e)}}},4470:function(e,t,r){"use strict";var n=t,i=r(965),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};t|=0;while(r<e.length)n[s[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},965:function(e,t,r){"use strict";var n,i,s=e.exports=r(7102),o=r(358);s.codegen=r(3207),s.fetch=r(7965),s.path=r(1172),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){var t=Object.keys(e),r=new Array(t.length),n=0;while(n<t.length)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){var t={},r=0;while(r<e.length){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var a=/\\/g,c=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(9705));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var l=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(6445));var t=new i("Enum"+l++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return t=t.split("."),n(e,t,r)},Object.defineProperty(s,"decorateRoot",{get:function(){return o["decorated"]||(o["decorated"]=new(r(309)))}})},6350:function(e,t,r){"use strict";e.exports=i;var n=r(7102);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"===typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},7102:function(e,t,r){"use strict";r(3408),r(4590);var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(5186),n.base64=r(8673),n.EventEmitter=r(8825),n.float=r(2913),n.inquire=r(6332),n.utf8=r(9561),n.pool=r(1168),n.LongBits=r(6350),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},3478:function(e,t,r){"use strict";e.exports=c;var n=r(6445),i=r(965);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"));break}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"));break}return e}function c(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),l="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,u.name),u.map)t("if(!util.isObject(%s))",l)("return%j",s(u,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,c,l+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",l)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",l),o(t,u,c,l+"[i]")("}");else{if(u.partOf){var h=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",h)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",h)}o(t,u,c,l)}u.optional&&t("}")}return t("return null")}},1130:function(e,t,r){"use strict";var n=t,i=r(1373);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t),c="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+c,a["@type"]=s,a}return this.toObject(e,t)}}},7156:function(e,t,r){"use strict";e.exports=h;var n,i=r(7102),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function f(e,t,r){t[r]=255&e}function p(e,t,r){while(e>127)t[r++]=127&e|128,e>>>=7;t[r]=e}function y(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){while(e.hi)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;while(e.lo>127)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},y.prototype=Object.create(c.prototype),y.prototype.fn=p,h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new y((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var w=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(w,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},8252:function(e,t,r){"use strict";r(3408),r(4590),e.exports=s;var n=r(7156);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(7102);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},3802:function(e,t,r){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},3864:function(e,t,r){r(3408),r(4590);const{instantiate:n}=r(5713);function i(e={}){if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!==typeof WebAssembly,e.exports=i},7393:function(e,t,r){const n=r(2282),i=r(3864),s=async(e,t,r,s,o)=>{const a=await i();return new n(a,e,t,r,s,o)};e.exports={Rabin:n,create:s}},2282:function(e,t,r){r(3408),r(4590);class n{constructor(e,t=12,r=8192,n=32768,i=64,s){this.bits=t,this.min=r,this.max=n,this.asModule=e,this.rabin=new e.Rabin(t,r,n,i,s),this.polynomial=s}fingerprint(e){const{__retain:t,__release:r,__allocArray:n,__getInt32Array:i,Int32Array_ID:s,Uint8Array_ID:o}=this.asModule,a=new Int32Array(Math.ceil(e.length/this.min)),c=t(n(s,a)),u=t(n(o,e)),l=this.rabin.fingerprint(u,c),h=i(l);r(u),r(c);const d=h.indexOf(0);return d>=0?h.subarray(0,d):h}}e.exports=n},7602:function(e,t,r){"use strict";var n=65536,i=4294967295;function s(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var o=r(6779).Buffer,a=r.g.crypto||r.g.msCrypto;function c(e,t){if(e>i)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>n)for(var s=0;s<e;s+=n)a.getRandomValues(r.slice(s,s+n));else a.getRandomValues(r);return"function"===typeof t?process.nextTick((function(){t(null,r)})):r}a&&a.getRandomValues?e.exports=c:e.exports=s},5024:function(e,t,r){const n=r(8459),i=r(278),s=r(690),o=r(6308),{RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u}=r(7305),l=r(5281),h=r(8038),d=r(4972),f=r(4564),p=r(6486),y=r(555),g=r(1196);e.exports={RateLimiterRedis:n,RateLimiterMongo:i,RateLimiterMySQL:s,RateLimiterPostgres:o,RateLimiterMemory:l,RateLimiterMemcache:h,RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u,RLWrapperBlackAndWhite:d,RateLimiterUnion:f,RateLimiterQueue:p,BurstyRateLimiter:y,RateLimiterRes:g}},555:function(e,t,r){const n=r(1196);e.exports=class{constructor(e,t){this._rateLimiter=e,this._burstLimiter=t}_combineRes(e,t){return new n(e.remainingPoints,Math.min(e.msBeforeNext,t.msBeforeNext),e.consumedPoints,e.isFirstInDuration)}consume(e,t=1,r={}){return this._rateLimiter.consume(e,t,r).catch((i=>i instanceof n?this._burstLimiter.consume(e,t,r).then((e=>Promise.resolve(this._combineRes(i,e)))).catch((e=>e instanceof n?Promise.reject(this._combineRes(i,e)):Promise.reject(e))):Promise.reject(i)))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then((([e,t])=>this._combineRes(e,t)))}get points(){return this._rateLimiter.points}}},4972:function(e,t,r){const n=r(1196);e.exports=class{constructor(e={}){this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if("undefined"===typeof e)throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway="undefined"!==typeof e&&e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new n(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new n(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e,t=1){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.rejectBlack()),"undefined"===typeof r?this.limiter.consume(e,t):(this.runActionAnyway&&this.limiter.consume(e,t).catch((()=>{})),r)}block(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch((()=>{})),r)}penalty(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch((()=>{})),r)}reward(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch((()=>{})),r)}get(e){let t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),"undefined"===typeof t||this.runActionAnyway?this.limiter.get(e):t}delete(e){return this.limiter.delete(e)}}},438:function(e){e.exports=class{constructor(e={}){this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration="undefined"===typeof e?1:e}get msDuration(){return 1e3*this.duration}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration="undefined"===typeof e?0:e}get msBlockDuration(){return 1e3*this.blockDuration}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly="undefined"!==typeof e&&Boolean(e)}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs="undefined"===typeof e?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if("undefined"===typeof e&&(e="rlflx"),"string"!==typeof e)throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(e={}){return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}}},7305:function(e,t,r){const n=r(1265),i=r(5539),s=r(438),o=r(5281),a=r(1196),c="rate_limiter_flexible";let u=null;const l=function(e,t,r,n){let i;i=null===n||!0===n||!1===n?n:{remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},e.send({channel:c,keyPrefix:t.keyPrefix,promiseId:t.promiseId,type:r,data:i})},h=function(e){setTimeout((()=>{this._initiated?process.send(e):"undefined"!==typeof this._promises[e.promiseId]&&h.call(this,e)}),30)},d=function(e,t,r,n,i){const s={channel:c,keyPrefix:this.keyPrefix,func:e,promiseId:t,data:{key:r,arg:n,opts:i}};this._initiated?process.send(s):h.call(this,s)},f=function(e,t){if(!t||t.channel!==c||"undefined"===typeof this._rateLimiters[t.keyPrefix])return!1;let r;switch(t.func){case"consume":r=this._rateLimiters[t.keyPrefix].consume(t.data.key,t.data.arg,t.data.opts);break;case"penalty":r=this._rateLimiters[t.keyPrefix].penalty(t.data.key,t.data.arg,t.data.opts);break;case"reward":r=this._rateLimiters[t.keyPrefix].reward(t.data.key,t.data.arg,t.data.opts);break;case"block":r=this._rateLimiters[t.keyPrefix].block(t.data.key,t.data.arg,t.data.opts);break;case"get":r=this._rateLimiters[t.keyPrefix].get(t.data.key,t.data.opts);break;case"delete":r=this._rateLimiters[t.keyPrefix].delete(t.data.key,t.data.opts);break;default:return!1}r&&r.then((r=>{l(e,t,"resolve",r)})).catch((r=>{l(e,t,"reject",r)}))},p=function(e){if(!e||e.channel!==c||e.keyPrefix!==this.keyPrefix)return!1;if(this._promises[e.promiseId]){let t;switch(clearTimeout(this._promises[e.promiseId].timeoutId),t=null===e.data||!0===e.data||!1===e.data?e.data:new a(e.data.remainingPoints,e.data.msBeforeNext,e.data.consumedPoints,e.data.isFirstInDuration),e.type){case"resolve":this._promises[e.promiseId].resolve(t);break;case"reject":this._promises[e.promiseId].reject(t);break;default:throw new Error(`RateLimiterCluster: no such message type '${e.type}'`)}delete this._promises[e.promiseId]}},y=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},g=function(e,t){const r=process.hrtime();let n=r[0].toString()+r[1].toString();return"undefined"!==typeof this._promises[n]&&(n+=i.randomBytes(12).toString("base64")),this._promises[n]={resolve:e,reject:t,timeoutId:setTimeout((()=>{delete this._promises[n],t(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},n};class m{constructor(){if(u)return u;this._rateLimiters={},n.setMaxListeners(0),n.on("message",((e,t)=>{t&&t.channel===c&&"init"===t.type?("undefined"===typeof this._rateLimiters[t.opts.keyPrefix]&&(this._rateLimiters[t.opts.keyPrefix]=new o(t.opts)),e.send({channel:c,type:"init",keyPrefix:t.opts.keyPrefix})):f.call(this,e,t)})),u=this}}class w{constructor(e){if(u)return u;this._rateLimiters={},e.launchBus(((t,r)=>{r.on("process:msg",(t=>{const r=t.raw;if(r&&r.channel===c&&"init"===r.type)"undefined"===typeof this._rateLimiters[r.opts.keyPrefix]&&(this._rateLimiters[r.opts.keyPrefix]=new o(r.opts)),e.sendDataToProcessId(t.process.pm_id,{data:{},topic:c,channel:c,type:"init",keyPrefix:r.opts.keyPrefix},((e,t)=>{e&&console.log(e,t)}));else{const n={send:r=>{const n=r;n.topic=c,"undefined"===typeof n.data&&(n.data={}),e.sendDataToProcessId(t.process.pm_id,n,((e,t)=>{e&&console.log(e,t)}))}};f.call(this,n,r)}}))})),u=this}}class v extends s{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs="undefined"===typeof e?5e3:Math.abs(parseInt(e))}constructor(e={}){super(e),process.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process.on("message",(e=>{e&&e.channel===c&&"init"===e.type&&e.keyPrefix===this.keyPrefix?this._initiated=!0:p.call(this,e)})),process.send({channel:c,type:"init",opts:y.call(this)}),this._promises={}}consume(e,t=1,r={}){return new Promise(((n,i)=>{const s=g.call(this,n,i);d.call(this,"consume",s,e,t,r)}))}penalty(e,t=1,r={}){return new Promise(((n,i)=>{const s=g.call(this,n,i);d.call(this,"penalty",s,e,t,r)}))}reward(e,t=1,r={}){return new Promise(((n,i)=>{const s=g.call(this,n,i);d.call(this,"reward",s,e,t,r)}))}block(e,t,r={}){return new Promise(((n,i)=>{const s=g.call(this,n,i);d.call(this,"block",s,e,t,r)}))}get(e,t={}){return new Promise(((r,n)=>{const i=g.call(this,r,n);d.call(this,"get",i,e,t)}))}delete(e,t={}){return new Promise(((r,n)=>{const i=g.call(this,r,n);d.call(this,"delete",i,e,t)}))}}e.exports={RateLimiterClusterMaster:m,RateLimiterClusterMasterPM2:w,RateLimiterCluster:v}},8038:function(e,t,r){const n=r(8627),i=r(1196);class s extends n{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,t,r){const n=new i;return n.consumedPoints=parseInt(r.consumedPoints),n.isFirstInDuration=r.consumedPoints===t,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=r.msBeforeNext,n}_upsert(e,t,r,n=!1,i={}){return new Promise(((s,o)=>{const a=Date.now(),c=Math.floor(r/1e3);n?this.client.set(e,t,c,(r=>{r?o(r):this.client.set(`${e}_expire`,c>0?a+1e3*c:-1,c,(()=>{const e={consumedPoints:t,msBeforeNext:c>0?1e3*c:-1};s(e)}))})):this.client.incr(e,t,((u,l)=>{u||!1===l?this.client.add(e,t,c,((u,l)=>{if(u||!l)if("undefined"===typeof i.attemptNumber||i.attemptNumber<3){const a=Object.assign({},i);a.attemptNumber=a.attemptNumber?a.attemptNumber+1:1,this._upsert(e,t,r,n,a).then((e=>s(e))).catch((e=>o(e)))}else o(new Error("Can not add key"));else this.client.add(`${e}_expire`,c>0?a+1e3*c:-1,c,(()=>{const e={consumedPoints:t,msBeforeNext:c>0?1e3*c:-1};s(e)}))})):this.client.get(`${e}_expire`,((e,t)=>{if(e)o(e);else{const e=!1===t?0:t,r={consumedPoints:l,msBeforeNext:e>=0?Math.max(e-a,0):-1};s(r)}}))}))}))}_get(e){return new Promise(((t,r)=>{const n=Date.now();this.client.get(e,((i,s)=>{s?this.client.get(`${e}_expire`,((e,i)=>{if(e)r(e);else{const e=!1===i?0:i,r={consumedPoints:s,msBeforeNext:e>=0?Math.max(e-n,0):-1};t(r)}})):t(null)}))}))}_delete(e){return new Promise(((t,r)=>{this.client.del(e,((n,i)=>{n?r(n):!1===i?t(i):this.client.del(`${e}_expire`,(e=>{e?r(e):t(i)}))}))}))}}e.exports=s},5281:function(e,t,r){const n=r(438),i=r(6163),s=r(1196);class o extends n{constructor(e={}){super(e),this._memoryStorage=new i}consume(e,t=1,r={}){return new Promise(((n,i)=>{const s=this.getKey(e),o=this._getKeySecDuration(r);let a=this._memoryStorage.incrby(s,t,o);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)this.blockDuration>0&&a.consumedPoints<=this.points+t&&(a=this._memoryStorage.set(s,a.consumedPoints,this.blockDuration)),i(a);else if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let e=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));e<this.execEvenlyMinDelayMs&&(e=a.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(n,e,a)}else n(a)}))}penalty(e,t=1,r={}){const n=this.getKey(e);return new Promise((e=>{const i=this._getKeySecDuration(r),s=this._memoryStorage.incrby(n,t,i);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),e(s)}))}reward(e,t=1,r={}){const n=this.getKey(e);return new Promise((e=>{const i=this._getKeySecDuration(r),s=this._memoryStorage.incrby(n,-t,i);s.remainingPoints=Math.max(this.points-s.consumedPoints,0),e(s)}))}block(e,t){const r=1e3*t,n=this.points+1;return this._memoryStorage.set(this.getKey(e),n,t),Promise.resolve(new s(0,0===r?-1:r,n))}set(e,t,r){const n=1e3*(r>=0?r:this.duration);return this._memoryStorage.set(this.getKey(e),t,r),Promise.resolve(new s(0,0===n?-1:n,t))}get(e){const t=this._memoryStorage.get(this.getKey(e));return null!==t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}}e.exports=o},278:function(e,t,r){const n=r(8627),i=r(1196);function s(e){try{const t=e.client?e.client:e,{version:r}=t.topology.s.options.metadata.driver,n=r.split(".").map((e=>parseInt(e)));return{major:n[0],feature:n[1],patch:n[2]}}catch(t){return{major:0,feature:0,patch:0}}}class o extends n{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,"function"===typeof this.client.then?this.client.then((e=>{this.client=e,this._initCollection(),this._driverVersion=s(this.client)})):(this._initCollection(),this._driverVersion=s(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?o.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){const e="function"===typeof this.client.db?this.client.db(this.dbName):this.client,t=e.collection(this.tableName);t.createIndex({expire:-1},{expireAfterSeconds:0}),t.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=t}_getRateLimiterRes(e,t,r){const n=new i;let s;return s="undefined"===typeof r.value?r:r.value,n.isFirstInDuration=s.points===t,n.consumedPoints=s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=null!==s.expire?Math.max(new Date(s.expire).getTime()-Date.now(),0):-1,n}_upsert(e,t,r,n=!1,i={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const s=i.attrs||{};let o,a;n?(o={key:e},o=Object.assign(o,s),a={$set:{key:e,points:t,expire:r>0?new Date(Date.now()+r):null}},a.$set=Object.assign(a.$set,s)):(o={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},o=Object.assign(o,s),a={$setOnInsert:{key:e,expire:r>0?new Date(Date.now()+r):null},$inc:{points:t}},a.$setOnInsert=Object.assign(a.$setOnInsert,s));const c={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?c.returnDocument="after":c.returnOriginal=!1,new Promise(((i,u)=>{this._collection.findOneAndUpdate(o,a,c).then((e=>{i(e)})).catch((o=>{if(o&&11e3===o.code){const o=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},s),a={$set:Object.assign({key:e,points:t,expire:r>0?new Date(Date.now()+r):null},s)};this._collection.findOneAndUpdate(o,a,c).then((e=>{i(e)})).catch((s=>{s&&11e3===s.code?this._upsert(e,t,r,n).then((e=>i(e))).catch((e=>u(e))):u(s)}))}else u(o)}))}))}_get(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=t.attrs||{},n=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},r);return this._collection.findOne(n)}_delete(e,t={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=t.attrs||{},n=Object.assign({key:e},r);return this._collection.deleteOne(n).then((e=>e.deletedCount>0))}}e.exports=o},690:function(e,t,r){const n=r(8627),i=r(1196);class s extends n{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()):this._createDbAndTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}clearExpired(e){return new Promise((t=>{this._getConnection().then((r=>{r.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],(()=>{this._releaseConnection(r),t()}))})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise(((e,t)=>{this.client.getConnection(((r,n)=>{if(r)return t(r);e(n)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise(((e,t)=>{this._getConnection().then((r=>{r.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,(n=>{if(n)return this._releaseConnection(r),t(n);r.query(this._getCreateTableStmt(),(n=>{if(n)return this._releaseConnection(r),t(n);this._releaseConnection(r),e()}))}))})).catch((e=>{t(e)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(e){if("undefined"===typeof e)if("Connection"===this.client.constructor.name)e="connection";else if("Pool"===this.client.constructor.name)e="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,r){const n=new i,[s]=r;return n.isFirstInDuration=t===s.points,n.consumedPoints=n.isFirstInDuration?t:s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,n}_upsertTransaction(e,t,r,n,i){return new Promise(((s,o)=>{e.query("BEGIN",(a=>{if(a)return e.rollback(),o(a);const c=Date.now(),u=n>0?c+n:null;let l,h;i?(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",h=[this.dbName,this.tableName,t,r,u,r,u]):(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",h=[this.dbName,this.tableName,t,r,u,c,r,r,c,u]),e.query(l,h,(r=>{if(r)return e.rollback(),o(r);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,t],((t,r)=>{if(t)return e.rollback(),o(t);e.query("COMMIT",(t=>{if(t)return e.rollback(),o(t);s(r)}))}))}))}))}))}_upsert(e,t,r,n=!1){return this.tableCreated?new Promise(((i,s)=>{this._getConnection().then((o=>{this._upsertTransaction(o,e,t,r,n).then((e=>{i(e),this._releaseConnection(o)})).catch((e=>{s(e),this._releaseConnection(o)}))})).catch((e=>{s(e)}))})):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise(((t,r)=>{this._getConnection().then((n=>{n.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],((e,i)=>{e?r(e):0===i.length?t(null):t(i),this._releaseConnection(n)}))})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise(((t,r)=>{this._getConnection().then((n=>{n.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],((e,i)=>{e?r(e):t(i.affectedRows>0),this._releaseConnection(n)}))})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}}e.exports=s},6308:function(e,t,r){const n=r(8627),i=r(1196);class s extends n{constructor(e,t=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?"function"===typeof t&&t():this._createTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}clearExpired(e){return new Promise((t=>{const r={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[e]};this._query(r).then((()=>{t()})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master);default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);case"typeorm":return!0;default:return!0}}_createTable(){return new Promise(((e,t)=>{this._query({text:this._getCreateTableStmt()}).then((()=>{e()})).catch((r=>{"23505"===r.code?e():t(r)}))}))}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( \n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );`}get clientType(){return this._clientType}set clientType(e){const t=this.client.constructor.name;if("undefined"===typeof e)if("Client"===t)e="client";else if("Pool"===t||"BoundPool"===t)e="pool";else{if("Sequelize"!==t)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,r){const n=new i,s=r.rows[0];return n.isFirstInDuration=t===s.points,n.consumedPoints=n.isFirstInDuration?t:s.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=s.expire?Math.max(s.expire-Date.now(),0):-1,n}_query(e){const t=this.tableName.toLowerCase(),r={name:`${t}:${e.name}`,text:e.text,values:e.values};return new Promise(((e,t)=>{this._getConnection().then((n=>{n.query(r).then((t=>{e(t),this._releaseConnection(n)})).catch((e=>{t(e),this._releaseConnection(n)}))})).catch((e=>{t(e)}))}))}_upsert(e,t,r,n=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const i=r>0?Date.now()+r:null,s=n?" $3 ":` CASE\n             WHEN ${this.tableName}.expire <= $4 THEN $3\n             ELSE ${this.tableName}.expire\n            END `;return this._query({name:n?"rlflx-upsert-force":"rlflx-upsert",text:`\n            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (${this.tableName}.expire <= $4 OR 1=${n?1:0}) THEN $2\n                          ELSE ${this.tableName}.points + ($2)\n                         END,\n                expire = ${s}\n            RETURNING points, expire;`,values:[e,t,i,Date.now()]})}_get(e){return this.tableCreated?new Promise(((t,r)=>{this._query({name:"rlflx-get",text:`\n            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[e,Date.now()]}).then((e=>{0===e.rowCount&&(e=null),t(e)})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[e]}).then((e=>e.rowCount>0)):Promise.reject(Error("Table is not created yet"))}}e.exports=s},6486:function(e,t,r){r(7658),r(541);const n=r(5375),i=4294967295,s="limiter";e.exports=class{constructor(e,t={maxQueueSize:i}){this._queueLimiters={KEY_DEFAULT:new o(e,t)},this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(e=s){return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e,t=s){return this._queueLimiters[t]||(this._queueLimiters[t]=new o(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}};class o{constructor(e,t={maxQueueSize:i,key:s}){this._key=t.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then((e=>null!==e?e.remainingPoints:this._limiterFlexible.points))}removeTokens(e){const t=this;return new Promise(((r,i)=>{e>t._limiterFlexible.points?i(new n(`Requested tokens ${e} exceeds maximum ${t._limiterFlexible.points} tokens per interval`)):t._queue.length>0?t._queueRequest.call(t,r,i,e):t._limiterFlexible.consume(t._key,e).then((e=>{r(e.remainingPoints)})).catch((n=>{n instanceof Error?i(n):(t._queueRequest.call(t,r,i,e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),n.msBeforeNext)))}))}))}_queueRequest(e,t,r){const i=this;i._queue.length<i._maxQueueSize?i._queue.push({resolve:e,reject:t,tokens:r}):t(new n(`Number of requests reached it's maximum ${i._maxQueueSize}`))}_processFIFO(){const e=this;if(null!==e._waitTimeout&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),0===e._queue.length)return;const t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then((r=>{t.resolve(r.remainingPoints),e._processFIFO.call(e)})).catch((r=>{r instanceof Error?(t.reject(r),e._processFIFO.call(e)):(e._queue.unshift(t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),r.msBeforeNext)))}))}}},8459:function(e,t,r){const n=r(8627),i=r(1196),s="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";class o extends n{constructor(e){super(e),e.redis?this.client=e.redis:this.client=e.storeClient,"function"===typeof this.client.defineCommand&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:s})}_getRateLimiterRes(e,t,r){let[n,s]=r;Array.isArray(n)&&([,n]=n,[,s]=s);const o=new i;return o.consumedPoints=parseInt(n),o.isFirstInDuration=o.consumedPoints===t,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=s,o}_upsert(e,t,r,n=!1){return new Promise(((i,o)=>{const a=Math.floor(r/1e3),c=this.client.multi();if(n)a>0?c.set(e,t,"EX",a):c.set(e,t),c.pttl(e).exec(((e,t)=>e?o(e):i(t)));else if(a>0){const r=function(e,t){return e?o(e):i(t)};"function"===typeof this.client.rlflxIncr?this.client.rlflxIncr(e,t,a,r):this.client.eval(s,1,e,t,a,r)}else c.incrby(e,t).pttl(e).exec(((e,t)=>e?o(e):i(t)))}))}_get(e){return new Promise(((t,r)=>{this.client.multi().get(e).pttl(e).exec(((e,n)=>{if(e)r(e);else{const[e]=n;if(null===e)return t(null);t(n)}}))}))}_delete(e){return new Promise(((t,r)=>{this.client.del(e,((e,n)=>{e?r(e):t(n>0)}))}))}}e.exports=o},1196:function(e){e.exports=class{constructor(e,t,r,n){this.remainingPoints="undefined"===typeof e?0:e,this.msBeforeNext="undefined"===typeof t?0:t,this.consumedPoints="undefined"===typeof r?0:r,this.isFirstInDuration="undefined"!==typeof n&&n}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=Boolean(e)}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}}},8627:function(e,t,r){const n=r(438),i=r(399),s=r(1196);e.exports=class extends n{constructor(e={}){super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed||e.inmemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration||e.inmemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new i}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("storeClient is not set");this._client=e}_afterConsume(e,t,r,n,i,s={}){const o=this._getRateLimiterRes(r,n,i);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&o.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(r,o.msBeforeNext),o.consumedPoints>this.points?t(o):e(o);if(o.consumedPoints>this.points){let e=Promise.resolve();this.blockDuration>0&&o.consumedPoints<=this.points+n&&(o.msBeforeNext=this.msBlockDuration,e=this._block(r,o.consumedPoints,this.msBlockDuration,s)),this.inMemoryBlockOnConsumed>0&&o.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(r,this.inMemoryBlockDuration),o.msBeforeNext=this.msInMemoryBlockDuration),e.then((()=>{t(o)})).catch((e=>{t(e)}))}else if(this.execEvenly&&o.msBeforeNext>0&&!o.isFirstInDuration){let t=Math.ceil(o.msBeforeNext/(o.remainingPoints+2));t<this.execEvenlyMinDelayMs&&(t=o.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,t,o)}else e(o)}_handleError(e,t,r,i,s,o=!1,a={}){this.insuranceLimiter instanceof n?this.insuranceLimiter[t](s,o,a).then((e=>{r(e)})).catch((e=>{i(e)})):i(e)}get _inmemoryBlockedKeys(){return this._inMemoryBlockedKeys}getInmemoryBlockMsBeforeExpire(e){return this.getInMemoryBlockMsBeforeExpire(e)}get inmemoryBlockOnConsumed(){return this.inMemoryBlockOnConsumed}set inmemoryBlockOnConsumed(e){this.inMemoryBlockOnConsumed=e}get inmemoryBlockDuration(){return this.inMemoryBlockDuration}set inmemoryBlockDuration(e){this.inMemoryBlockDuration=e}get msInmemoryBlockDuration(){return 1e3*this.inMemoryBlockDuration}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return 1e3*this._inMemoryBlockDuration}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if("undefined"!==typeof e&&!(e instanceof n))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,t,r={}){const n=1e3*t;return this._block(this.getKey(e),this.points+1,n,r)}set(e,t,r,n={}){const i=1e3*(r>=0?r:this.duration);return this._block(this.getKey(e),t,i,n)}consume(e,t=1,r={}){return new Promise(((n,i)=>{const o=this.getKey(e),a=this.getInMemoryBlockMsBeforeExpire(o);if(a>0)return i(new s(0,a));this._upsert(o,t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{this._afterConsume(n,i,o,t,e)})).catch((s=>{this._handleError(s,"consume",n,i,e,t,r)}))}))}penalty(e,t=1,r={}){const n=this.getKey(e);return new Promise(((i,s)=>{this._upsert(n,t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{i(this._getRateLimiterRes(n,t,e))})).catch((n=>{this._handleError(n,"penalty",i,s,e,t,r)}))}))}reward(e,t=1,r={}){const n=this.getKey(e);return new Promise(((i,s)=>{this._upsert(n,-t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{i(this._getRateLimiterRes(n,-t,e))})).catch((n=>{this._handleError(n,"reward",i,s,e,t,r)}))}))}get(e,t={}){const r=this.getKey(e);return new Promise(((n,i)=>{this._get(r,t).then((e=>{n(null===e||"undefined"===typeof e?null:this._getRateLimiterRes(r,0,e))})).catch((r=>{this._handleError(r,"get",n,i,e,t)}))}))}delete(e,t={}){const r=this.getKey(e);return new Promise(((n,i)=>{this._delete(r,t).then((e=>{this._inMemoryBlockedKeys.delete(r),n(e)})).catch((r=>{this._handleError(r,"delete",n,i,e,t)}))}))}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,t,r){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,t,r,n={}){return new Promise(((i,o)=>{this._upsert(e,t,r,!0,n).then((()=>{i(new s(0,r>0?r:-1,t))})).catch((t=>{this._handleError(t,"block",i,o,this.parseKey(e),r/1e3,n)}))}))}_get(e,t={}){throw new Error("You have to implement the method '_get'!")}_delete(e,t={}){throw new Error("You have to implement the method '_delete'!")}_upsert(e,t,r,n=!1,i={}){throw new Error("You have to implement the method '_upsert'!")}}},4564:function(e,t,r){r(7658);const n=r(438);e.exports=class{constructor(...e){if(e.length<2)throw new Error("RateLimiterUnion: at least two limiters have to be set");e.forEach((e=>{if(!(e instanceof n))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=e}consume(e,t=1){return new Promise(((r,n)=>{const i=[];this._limiters.forEach((r=>{i.push(r.consume(e,t).catch((e=>({rejected:!0,rej:e}))))})),Promise.all(i).then((e=>{const t={};let i=!1;e.forEach((e=>{!0===e.rejected&&(i=!0)}));for(let r=0;r<e.length;r++)i&&!0===e[r].rejected?t[this._limiters[r].keyPrefix]=e[r].rej:i||(t[this._limiters[r].keyPrefix]=e[r]);i?n(t):r(t)}))}))}}},7725:function(e){e.exports=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const e=Date.now();Object.keys(this._keys).forEach((t=>{this._keys[t]<=e&&delete this._keys[t]})),this._addedKeysAmount=Object.keys(this._keys).length}add(e,t){this.addMs(e,1e3*t)}addMs(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){const t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();const e=Date.now();return t>=e?t-e:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach((e=>{delete this._keys[e]}))}}},399:function(e,t,r){const n=r(7725);e.exports=n},6163:function(e,t,r){const n=r(7404),i=r(1196);e.exports=class{constructor(){this._storage={}}incrby(e,t,r){if(this._storage[e]){const n=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return 0!==n?(this._storage[e].value=this._storage[e].value+t,new i(0,n,this._storage[e].value,!1)):this.set(e,t,r)}return this.set(e,t,r)}set(e,t,r){const s=1e3*r;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new n(t,s>0?new Date(Date.now()+s):null),s>0&&(this._storage[e].timeoutId=setTimeout((()=>{delete this._storage[e]}),s),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new i(0,0===s?-1:s,this._storage[e].value,!0)}get(e){if(this._storage[e]){const t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return new i(0,t,this._storage[e].value,!1)}return null}delete(e){return!!this._storage[e]&&(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0)}}},7404:function(e){e.exports=class{constructor(e,t,r=null){this.value=e,this.expiresAt=t,this.timeoutId=r}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){e instanceof Date||!Number.isInteger(e)||(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}}},5375:function(e){e.exports=class extends Error{constructor(e,t){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,t&&(this.extra=t)}}},3061:function(e,t,r){"use strict";r(7658),e.exports=a;var n=r(7901),i=a.prototype,s=new Date%1e9;function o(){return(1e9*Math.random()>>>0)+s++}function a(e){e=e||{},this.id=e.id||o(),this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}i.has=function(e){return e in this._lookup},i.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},i.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},i.set=function(e,t,r){var n=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},i.expire=function(e,t){var r=t||0,i=this._lookup[e];if(!i)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},i.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},3057:function(e,t,r){"use strict";const n=r(9723);class i{constructor(e,t,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=t,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);const t=n();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}function s(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}e.exports=s},9723:function(e){"use strict";e.exports=function(){return Date.now()}},9641:function(e,t,r){
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.exports=i;const n=r(3802);function i(e,t,r){if("number"!==typeof t)throw new Error("second argument must be a Number");let i,s,o,a,c,u,l=!0;function h(e){function t(){r&&r(e,i),r=null}l?n(t):t()}function d(t,r,n){if(i[t]=n,r&&(c=!0),0===--o||r)h(r);else if(!c&&u<s){let t;a?(t=a[u],u+=1,e[t]((function(e,r){d(t,e,r)}))):(t=u,u+=1,e[t]((function(e,r){d(t,e,r)})))}}Array.isArray(e)?(i=[],o=s=e.length):(a=Object.keys(e),i={},o=s=a.length),u=t,o?a?a.some((function(r,n){return e[r]((function(e,t){d(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){d(r,e,t)})),r===t-1})):h(null),l=!1}},6779:function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(5361),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},4840:function(e,t,r){"use strict";var n=r(7339),i=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(s,t).replace(o,t).replace(a,t).replace(c,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=u(e,r);return""===r?n:u(n,"")}},2407:function(e){"use strict";const t=new Map,r=()=>`${Date.now()}:${Math.floor(1e6*Math.random())}`;async function n(e,r,n){while(t.get(n)){try{await e()}catch(i){setTimeout((()=>{throw i}),1);break}if(!t.get(n))break;await new Promise((e=>{const i=setTimeout(e,r);t.set(n,i)}))}}function i(e,i,s){s=s||i;const o=r(),a=setTimeout((()=>{n(e,i,o)}),s);return t.set(o,a),o}function s(e){const r=t.get(e);r&&(clearTimeout(r),t.delete(e))}e.exports={setDelayedInterval:i,clearDelayedInterval:s}},1946:function(e,t,r){"use strict";r(7658),r(541);const n=7;function i(e,t){return e+s(t)}function s(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function a(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;while(t<this.length)e(this.get(t),t,this),t++}map(e){let t=0,r=new Array(this.length);while(t<this.length)r[t]=e(this.get(t),t,this),t++;return r}reduce(e,t){let r=0,n=t;while(r<this.length){const t=this.get(r);n=e(n,t,r),r++}return n}find(e){let t,r,n=0;while(n<this.length&&!t)r=this.get(n),t=e(r),n++;return t?r:void 0}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;const o=this._bitArrays[r],a=e-r*n,c=(o&1<<a)>0;if(!c)return-1;const u=this._bitArrays.slice(0,r).reduce(i,0),l=~(4294967295<<a+1),h=s(o&l),d=u+h-1;return d}_bytePosFor(e,t){const r=Math.floor(e/n),i=r+1;while(!t&&this._bitArrays.length<i)this._bitArrays.push(0);return r}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*n}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*n)}_setInternalPos(e,t,r,n){const i=this._data,s=[t,r];if(n)this._sortData(),i[e]=s;else{if(i.length)if(i[i.length-1][0]>=t)i.push(s);else if(i[0][0]<=t)i.unshift(s);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(o),this._changedData=!1}bitField(){const e=[];let t,r=8,n=0,i=0;const s=this._bitArrays.slice();while(s.length||n){0===n&&(t=s.shift(),n=7);const o=Math.min(n,r),a=~(255<<o),c=t&a;i|=c<<8-r,t>>>=o,n-=o,r-=o,r&&(n||s.length)||(e.push(i),i=0,r=8)}for(var o=e.length-1;o>0;o--){const t=e[o];if(0!==t)break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(a)}}},7966:function(e){e.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){const t=e.getReader();try{while(1){const{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}();throw new Error("unknown stream")}},2856:function(e,t,r){"use strict";const{AbortController:n}=globalThis,i=r(3057);class s extends n{constructor(e){super(),this._ms=e,this._timer=i((()=>this.abort()),e),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}e.exports={TimeoutController:s}},7471:function(e){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
(function(){e.exports=w;var t=86400,r=3200,n=146097*r/400,i=t*n,s=1e3*i,o=1e11*t,a=16777216,c=4294967296,u=1e6,l=1e9,h="000000000",d=Math.trunc||B,f=w.prototype;w.fromDate=I,w.fromInt64BE=N(0,1,2,3,0,4),w.fromInt64LE=N(3,2,1,0,4,0),w.fromString=k,w.fromTimeT=T,f.year=0,f.time=0,f.nano=0,f.addNano=A,f.getNano=S,f.getTimeT=R,f.getYear=v,f.toDate=E,f.toJSON=P,f.toString=x,f.writeInt64BE=O(0,1,2,3,0,4),f.writeInt64LE=O(3,2,1,0,4,0);var p="%Y-%m-%dT%H:%M:%S.%NZ",y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return w;function w(e,t,r){var n=this;if(!(n instanceof w))return new w(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,b(n)}function v(){var e=this.toDate().getUTCFullYear();return e+this.year}function b(e){var t,n,i=e.year,a=e.time,c=e.nano;if(c<0||u<=c){var l=Math.floor(c/u);c-=l*u,a+=l,t=1}var h=i%r;if(a<-o||o<a||h){n=d(a/s),n&&(i+=n*r,a-=n*s);var f=_(a);f.setUTCFullYear(h+f.getUTCFullYear()),i-=h,a=+f,n=d(i/r);var p=a+n*s;n&&-o<=p&&p<=o&&(i-=n*r,a=p),t=1}return t&&(e.year=i,e.time=a,e.nano=c),e}function E(){var e=b(this);return _(e.time)}function _(e){var t=new Date(0);return t.setTime(e),t}function A(e){return this.nano+=+e||0,this}function S(){var e=b(this);return(e.time%1e3*u+ +e.nano+l)%l}function k(e){var t,r=new w;e+="";var n=e.replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+h).substr(1,9),""})).split(/\D+/);if(n.length>1?n[1]--:n[1]=0,r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(r)}function I(e){return new w(+e)}function T(e){return C(e,0)}function C(e,t){t|=0,t*=c,e=+e||0;var n=d(t/i)+d(e/i),s=t%i+e%i,o=d(s/i);return o&&(n+=o,s-=o*i),new w(1e3*s,0,n*r)}function R(){var e=b(this),i=Math.floor(e.time/1e3),s=e.year;return s&&(i+=s*n*t/r),i}function P(){return this.toString().replace(/0{1,6}Z$/,"Z")}function x(e){var t=this,r=t.toDate(),n={H:u,L:d,M:l,N:f,S:h,Y:s,a:w,b:v,d:a,e:c,m:o};return i(e||p);function i(e){return e.replace(/%./g,(function(e){var t=e[1],r=m[t],s=n[t];return r?i(r):s?s():e}))}function s(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+U(e,6):e>=0?U(e,4):e>=-999999?"-"+U(-e,6):e}function o(){return M(r.getUTCMonth()+1)}function a(){return M(r.getUTCDate())}function c(){return L(r.getUTCDate())}function u(){return M(r.getUTCHours())}function l(){return M(r.getUTCMinutes())}function h(){return M(r.getUTCSeconds())}function d(){return U(r.getUTCMilliseconds(),3)}function f(){return U(t.getNano(),9)}function w(){return g[r.getUTCDay()]}function v(){return y[r.getUTCMonth()]}}function O(e,i,s,o,a,u){return l;function l(e,i){var s=b(this);e||(e=new Array(8)),D(e,i|=0);var o=Math.floor(s.time/1e3),l=s.year*(n*t/r),f=d(l/c)+d(o/c),p=l%c+o%c,y=Math.floor(p/c);return y&&(f+=y,p-=y*c),h(e,i+a,f),h(e,i+u,p),e}function h(t,r,n){t[r+e]=n>>24&255,t[r+i]=n>>16&255,t[r+s]=n>>8&255,t[r+o]=255&n}}function N(e,t,r,n,i,s){return o;function o(e,t){D(e,t|=0);var r=c(e,t+i),n=c(e,t+s);return C(n,r)}function c(i,s){return i[s+e]*a+(i[s+t]<<16|i[s+r]<<8|i[s+n])}}function D(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function B(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!==1/0)?-0:t}function L(e){return(e>9?"":" ")+(0|e)}function M(e){return(e>9?"":"0")+(0|e)}function U(e,t){return(h+(0|e)).substr(-t)}})()},7339:function(e,t,r){"use strict";var n=r(432),i=r(1725);e.exports=n.bind(null,i)},432:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,i){if("string"!==typeof n)throw new Error("Input must be string");for(var s,o,a=n.length,c=0,u=0;u<a;u+=1){if(s=n.charCodeAt(u),o=n[u],t(s)&&r(n.charCodeAt(u+1))&&(u+=1,o+=n[u]),c+=e(o),c===i)return n.slice(0,u+1);if(c>i)return n.slice(0,u-o.length+1)}return n}},2900:function(e,t,r){"use strict";r.d(t,{Jh:function(){return c},ZT:function(){return i},_T:function(){return o},ev:function(){return u},mG:function(){return a},pi:function(){return s}});r(7658);var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?r(e.value):i(e.value).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function c(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return c([e,t])}}function c(s){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(i=2&s[0]?n["return"]:s[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}Object.create;function u(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create},1725:function(e){"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,i=0,s=null,o=null,a=0;a<n;a++)s=e.charCodeAt(a),r(s)?null!=o&&t(o)?i+=1:i+=3:s<=127?i+=1:s>=128&&s<=2047?i+=2:s>=2048&&s<=65535&&(i+=3),o=s;return i}},4402:function(e){e.exports=n;var t=128,r=127;function n(e,i){var s,o=0,a=(i=i||0,0),c=i,u=e.length;do{if(c>=u)throw n.bytes=0,new RangeError("Could not decode varint");s=e[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=t);return n.bytes=c-i,o}},4146:function(e){e.exports=s;var t=128,r=127,n=~r,i=Math.pow(2,31);function s(e,r,o){r=r||[],o=o||0;var a=o;while(e>=i)r[o++]=255&e|t,e/=128;while(e&n)r[o++]=255&e|t,e>>>=7;return r[o]=0|e,s.bytes=o-a+1,r}},2847:function(e,t,r){e.exports={encode:r(4146),decode:r(4402),encodingLength:r(54)}},54:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<i?4:e<s?5:e<o?6:e<a?7:e<c?8:e<u?9:10}},7691:function(e,t,r){"use strict";r(3408),r(4590),r(7658);const n=r(2847);e.exports=e=>{if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const t=[];while(e.length>0){const r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}},2706:function(e){e.exports=n;var t=128,r=127;function n(e,i){var s,o=0,a=(i=i||0,0),c=i,u=e.length;do{if(c>=u||a>49)throw n.bytes=0,new RangeError("Could not decode varint");s=e[c++],o+=a<28?(s&r)<<a:(s&r)*Math.pow(2,a),a+=7}while(s>=t);return n.bytes=c-i,o}},799:function(e){e.exports=s;var t=128,r=127,n=~r,i=Math.pow(2,31);function s(e,r,o){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw s.bytes=0,new RangeError("Could not encode varint");r=r||[],o=o||0;var a=o;while(e>=i)r[o++]=255&e|t,e/=128;while(e&n)r[o++]=255&e|t,e>>>=7;return r[o]=0|e,s.bytes=o-a+1,r}},2611:function(e,t,r){e.exports={encode:r(799),decode:r(2706),encodingLength:r(3303)}},3303:function(e){var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<i?4:e<s?5:e<o?6:e<a?7:e<c?8:e<u?9:10}},89:function(e,t){"use strict";t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r}},4482:function(e,t,r){"use strict";var n,i,s;(function(o,a){i=[r(5797)],n=a,s="function"===typeof n?n.apply(t,i):n,void 0===s||(e.exports=s)})(0,(function(e){var t=e.Reader,r=e.Writer,n=e.util,i=e.roots["default"]||(e.roots["default"]={});return i.RPC=function(){function s(e){if(this.subscriptions=[],this.messages=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.subscriptions=n.emptyArray,s.prototype.messages=n.emptyArray,s.prototype.control=null,Object.defineProperty(s.prototype,"_control",{get:n.oneOfGetter(o=["control"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.subscriptions&&e.subscriptions.length)for(var n=0;n<e.subscriptions.length;++n)i.RPC.SubOpts.encode(e.subscriptions[n],t.uint32(10).fork()).ldelim();if(null!=e.messages&&e.messages.length)for(n=0;n<e.messages.length;++n)i.RPC.Message.encode(e.messages[n],t.uint32(18).fork()).ldelim();return null!=e.control&&Object.hasOwnProperty.call(e,"control")&&i.RPC.ControlMessage.encode(e.control,t.uint32(26).fork()).ldelim(),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(i.RPC.SubOpts.decode(e,e.uint32()));break;case 2:s.messages&&s.messages.length||(s.messages=[]),s.messages.push(i.RPC.Message.decode(e,e.uint32()));break;case 3:s.control=i.RPC.ControlMessage.decode(e,e.uint32());break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC)return e;var t=new i.RPC;if(e.subscriptions){if(!Array.isArray(e.subscriptions))throw TypeError(".RPC.subscriptions: array expected");t.subscriptions=[];for(var r=0;r<e.subscriptions.length;++r){if("object"!==typeof e.subscriptions[r])throw TypeError(".RPC.subscriptions: object expected");t.subscriptions[r]=i.RPC.SubOpts.fromObject(e.subscriptions[r])}}if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".RPC.messages: array expected");t.messages=[];for(r=0;r<e.messages.length;++r){if("object"!==typeof e.messages[r])throw TypeError(".RPC.messages: object expected");t.messages[r]=i.RPC.Message.fromObject(e.messages[r])}}if(null!=e.control){if("object"!==typeof e.control)throw TypeError(".RPC.control: object expected");t.control=i.RPC.ControlMessage.fromObject(e.control)}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.subscriptions=[],r.messages=[]),e.subscriptions&&e.subscriptions.length){r.subscriptions=[];for(var n=0;n<e.subscriptions.length;++n)r.subscriptions[n]=i.RPC.SubOpts.toObject(e.subscriptions[n],t)}if(e.messages&&e.messages.length){r.messages=[];for(n=0;n<e.messages.length;++n)r.messages[n]=i.RPC.Message.toObject(e.messages[n],t)}return null!=e.control&&e.hasOwnProperty("control")&&(r.control=i.RPC.ControlMessage.toObject(e.control,t),t.oneofs&&(r._control="control")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s.SubOpts=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.subscribe=null,s.prototype.topic=null,Object.defineProperty(s.prototype,"_subscribe",{get:n.oneOfGetter(o=["subscribe"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_topic",{get:n.oneOfGetter(o=["topic"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.subscribe&&Object.hasOwnProperty.call(e,"subscribe")&&t.uint32(8).bool(e.subscribe),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).string(e.topic),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.SubOpts;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.subscribe=e.bool();break;case 2:s.topic=e.string();break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.SubOpts)return e;var t=new i.RPC.SubOpts;return null!=e.subscribe&&(t.subscribe=Boolean(e.subscribe)),null!=e.topic&&(t.topic=String(e.topic)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.subscribe&&e.hasOwnProperty("subscribe")&&(r.subscribe=e.subscribe,t.oneofs&&(r._subscribe="subscribe")),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic,t.oneofs&&(r._topic="topic")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.Message=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.from=null,s.prototype.data=null,s.prototype.seqno=null,s.prototype.topic="",s.prototype.signature=null,s.prototype.key=null,Object.defineProperty(s.prototype,"_from",{get:n.oneOfGetter(o=["from"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_data",{get:n.oneOfGetter(o=["data"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_seqno",{get:n.oneOfGetter(o=["seqno"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signature",{get:n.oneOfGetter(o=["signature"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_key",{get:n.oneOfGetter(o=["key"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(10).bytes(e.from),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.seqno&&Object.hasOwnProperty.call(e,"seqno")&&t.uint32(26).bytes(e.seqno),t.uint32(34).string(e.topic),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(50).bytes(e.key),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var s=void 0===r?e.len:e.pos+r,o=new i.RPC.Message;while(e.pos<s){var a=e.uint32();switch(a>>>3){case 1:o.from=e.bytes();break;case 2:o.data=e.bytes();break;case 3:o.seqno=e.bytes();break;case 4:o.topic=e.string();break;case 5:o.signature=e.bytes();break;case 6:o.key=e.bytes();break;default:e.skipType(7&a);break}}if(!o.hasOwnProperty("topic"))throw n.ProtocolError("missing required 'topic'",{instance:o});return o},s.fromObject=function(e){if(e instanceof i.RPC.Message)return e;var t=new i.RPC.Message;return null!=e.from&&("string"===typeof e.from?n.base64.decode(e.from,t.from=n.newBuffer(n.base64.length(e.from)),0):e.from.length&&(t.from=e.from)),null!=e.data&&("string"===typeof e.data?n.base64.decode(e.data,t.data=n.newBuffer(n.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.seqno&&("string"===typeof e.seqno?n.base64.decode(e.seqno,t.seqno=n.newBuffer(n.base64.length(e.seqno)),0):e.seqno.length&&(t.seqno=e.seqno)),null!=e.topic&&(t.topic=String(e.topic)),null!=e.signature&&("string"===typeof e.signature?n.base64.decode(e.signature,t.signature=n.newBuffer(n.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),null!=e.key&&("string"===typeof e.key?n.base64.decode(e.key,t.key=n.newBuffer(n.base64.length(e.key)),0):e.key.length&&(t.key=e.key)),t},s.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.topic=""),null!=e.from&&e.hasOwnProperty("from")&&(r.from=t.bytes===String?n.base64.encode(e.from,0,e.from.length):t.bytes===Array?Array.prototype.slice.call(e.from):e.from,t.oneofs&&(r._from="from")),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?n.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data,t.oneofs&&(r._data="data")),null!=e.seqno&&e.hasOwnProperty("seqno")&&(r.seqno=t.bytes===String?n.base64.encode(e.seqno,0,e.seqno.length):t.bytes===Array?Array.prototype.slice.call(e.seqno):e.seqno,t.oneofs&&(r._seqno="seqno")),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?n.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature,t.oneofs&&(r._signature="signature")),null!=e.key&&e.hasOwnProperty("key")&&(r.key=t.bytes===String?n.base64.encode(e.key,0,e.key.length):t.bytes===Array?Array.prototype.slice.call(e.key):e.key,t.oneofs&&(r._key="key")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlMessage=function(){function s(e){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return s.prototype.ihave=n.emptyArray,s.prototype.iwant=n.emptyArray,s.prototype.graft=n.emptyArray,s.prototype.prune=n.emptyArray,s.encode=function(e,t){if(t||(t=r.create()),null!=e.ihave&&e.ihave.length)for(var n=0;n<e.ihave.length;++n)i.RPC.ControlIHave.encode(e.ihave[n],t.uint32(10).fork()).ldelim();if(null!=e.iwant&&e.iwant.length)for(n=0;n<e.iwant.length;++n)i.RPC.ControlIWant.encode(e.iwant[n],t.uint32(18).fork()).ldelim();if(null!=e.graft&&e.graft.length)for(n=0;n<e.graft.length;++n)i.RPC.ControlGraft.encode(e.graft[n],t.uint32(26).fork()).ldelim();if(null!=e.prune&&e.prune.length)for(n=0;n<e.prune.length;++n)i.RPC.ControlPrune.encode(e.prune[n],t.uint32(34).fork()).ldelim();return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlMessage;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.ihave&&s.ihave.length||(s.ihave=[]),s.ihave.push(i.RPC.ControlIHave.decode(e,e.uint32()));break;case 2:s.iwant&&s.iwant.length||(s.iwant=[]),s.iwant.push(i.RPC.ControlIWant.decode(e,e.uint32()));break;case 3:s.graft&&s.graft.length||(s.graft=[]),s.graft.push(i.RPC.ControlGraft.decode(e,e.uint32()));break;case 4:s.prune&&s.prune.length||(s.prune=[]),s.prune.push(i.RPC.ControlPrune.decode(e,e.uint32()));break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlMessage)return e;var t=new i.RPC.ControlMessage;if(e.ihave){if(!Array.isArray(e.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");t.ihave=[];for(var r=0;r<e.ihave.length;++r){if("object"!==typeof e.ihave[r])throw TypeError(".RPC.ControlMessage.ihave: object expected");t.ihave[r]=i.RPC.ControlIHave.fromObject(e.ihave[r])}}if(e.iwant){if(!Array.isArray(e.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");t.iwant=[];for(r=0;r<e.iwant.length;++r){if("object"!==typeof e.iwant[r])throw TypeError(".RPC.ControlMessage.iwant: object expected");t.iwant[r]=i.RPC.ControlIWant.fromObject(e.iwant[r])}}if(e.graft){if(!Array.isArray(e.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");t.graft=[];for(r=0;r<e.graft.length;++r){if("object"!==typeof e.graft[r])throw TypeError(".RPC.ControlMessage.graft: object expected");t.graft[r]=i.RPC.ControlGraft.fromObject(e.graft[r])}}if(e.prune){if(!Array.isArray(e.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");t.prune=[];for(r=0;r<e.prune.length;++r){if("object"!==typeof e.prune[r])throw TypeError(".RPC.ControlMessage.prune: object expected");t.prune[r]=i.RPC.ControlPrune.fromObject(e.prune[r])}}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.ihave=[],r.iwant=[],r.graft=[],r.prune=[]),e.ihave&&e.ihave.length){r.ihave=[];for(var n=0;n<e.ihave.length;++n)r.ihave[n]=i.RPC.ControlIHave.toObject(e.ihave[n],t)}if(e.iwant&&e.iwant.length){r.iwant=[];for(n=0;n<e.iwant.length;++n)r.iwant[n]=i.RPC.ControlIWant.toObject(e.iwant[n],t)}if(e.graft&&e.graft.length){r.graft=[];for(n=0;n<e.graft.length;++n)r.graft[n]=i.RPC.ControlGraft.toObject(e.graft[n],t)}if(e.prune&&e.prune.length){r.prune=[];for(n=0;n<e.prune.length;++n)r.prune[n]=i.RPC.ControlPrune.toObject(e.prune[n],t)}return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIHave=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,s.prototype.messageIDs=n.emptyArray,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.messageIDs&&e.messageIDs.length)for(var n=0;n<e.messageIDs.length;++n)t.uint32(18).bytes(e.messageIDs[n]);return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlIHave;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.topicID=e.string();break;case 2:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes());break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlIHave)return e;var t=new i.RPC.ControlIHave;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");t.messageIDs=[];for(var r=0;r<e.messageIDs.length;++r)"string"===typeof e.messageIDs[r]?n.base64.decode(e.messageIDs[r],t.messageIDs[r]=n.newBuffer(n.base64.length(e.messageIDs[r])),0):e.messageIDs[r].length&&(t.messageIDs[r]=e.messageIDs[r])}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messageIDs=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),e.messageIDs&&e.messageIDs.length){r.messageIDs=[];for(var i=0;i<e.messageIDs.length;++i)r.messageIDs[i]=t.bytes===String?n.base64.encode(e.messageIDs[i],0,e.messageIDs[i].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[i]):e.messageIDs[i]}return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlIWant=function(){function s(e){if(this.messageIDs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return s.prototype.messageIDs=n.emptyArray,s.encode=function(e,t){if(t||(t=r.create()),null!=e.messageIDs&&e.messageIDs.length)for(var n=0;n<e.messageIDs.length;++n)t.uint32(10).bytes(e.messageIDs[n]);return t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlIWant;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.messageIDs&&s.messageIDs.length||(s.messageIDs=[]),s.messageIDs.push(e.bytes());break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlIWant)return e;var t=new i.RPC.ControlIWant;if(e.messageIDs){if(!Array.isArray(e.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");t.messageIDs=[];for(var r=0;r<e.messageIDs.length;++r)"string"===typeof e.messageIDs[r]?n.base64.decode(e.messageIDs[r],t.messageIDs[r]=n.newBuffer(n.base64.length(e.messageIDs[r])),0):e.messageIDs[r].length&&(t.messageIDs[r]=e.messageIDs[r])}return t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messageIDs=[]),e.messageIDs&&e.messageIDs.length){r.messageIDs=[];for(var i=0;i<e.messageIDs.length;++i)r.messageIDs[i]=t.bytes===String?n.base64.encode(e.messageIDs[i],0,e.messageIDs[i].length):t.bytes===Array?Array.prototype.slice.call(e.messageIDs[i]):e.messageIDs[i]}return r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlGraft=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlGraft;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.topicID=e.string();break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlGraft)return e;var t=new i.RPC.ControlGraft;return null!=e.topicID&&(t.topicID=String(e.topicID)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.ControlPrune=function(){function s(e){if(this.peers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.topicID=null,s.prototype.peers=n.emptyArray,s.prototype.backoff=null,Object.defineProperty(s.prototype,"_topicID",{get:n.oneOfGetter(o=["topicID"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_backoff",{get:n.oneOfGetter(o=["backoff"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){if(t||(t=r.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&t.uint32(10).string(e.topicID),null!=e.peers&&e.peers.length)for(var n=0;n<e.peers.length;++n)i.RPC.PeerInfo.encode(e.peers[n],t.uint32(18).fork()).ldelim();return null!=e.backoff&&Object.hasOwnProperty.call(e,"backoff")&&t.uint32(24).uint64(e.backoff),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.ControlPrune;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.topicID=e.string();break;case 2:s.peers&&s.peers.length||(s.peers=[]),s.peers.push(i.RPC.PeerInfo.decode(e,e.uint32()));break;case 3:s.backoff=e.uint64();break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.ControlPrune)return e;var t=new i.RPC.ControlPrune;if(null!=e.topicID&&(t.topicID=String(e.topicID)),e.peers){if(!Array.isArray(e.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");t.peers=[];for(var r=0;r<e.peers.length;++r){if("object"!==typeof e.peers[r])throw TypeError(".RPC.ControlPrune.peers: object expected");t.peers[r]=i.RPC.PeerInfo.fromObject(e.peers[r])}}return null!=e.backoff&&(n.Long?(t.backoff=n.Long.fromValue(e.backoff)).unsigned=!0:"string"===typeof e.backoff?t.backoff=parseInt(e.backoff,10):"number"===typeof e.backoff?t.backoff=e.backoff:"object"===typeof e.backoff&&(t.backoff=new n.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0))),t},s.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.peers=[]),null!=e.topicID&&e.hasOwnProperty("topicID")&&(r.topicID=e.topicID,t.oneofs&&(r._topicID="topicID")),e.peers&&e.peers.length){r.peers=[];for(var s=0;s<e.peers.length;++s)r.peers[s]=i.RPC.PeerInfo.toObject(e.peers[s],t)}return null!=e.backoff&&e.hasOwnProperty("backoff")&&("number"===typeof e.backoff?r.backoff=t.longs===String?String(e.backoff):e.backoff:r.backoff=t.longs===String?n.Long.prototype.toString.call(e.backoff):t.longs===Number?new n.LongBits(e.backoff.low>>>0,e.backoff.high>>>0).toNumber(!0):e.backoff,t.oneofs&&(r._backoff="backoff")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s.PeerInfo=function(){function s(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var o;return s.prototype.peerID=null,s.prototype.signedPeerRecord=null,Object.defineProperty(s.prototype,"_peerID",{get:n.oneOfGetter(o=["peerID"]),set:n.oneOfSetter(o)}),Object.defineProperty(s.prototype,"_signedPeerRecord",{get:n.oneOfGetter(o=["signedPeerRecord"]),set:n.oneOfSetter(o)}),s.encode=function(e,t){return t||(t=r.create()),null!=e.peerID&&Object.hasOwnProperty.call(e,"peerID")&&t.uint32(10).bytes(e.peerID),null!=e.signedPeerRecord&&Object.hasOwnProperty.call(e,"signedPeerRecord")&&t.uint32(18).bytes(e.signedPeerRecord),t},s.decode=function(e,r){e instanceof t||(e=t.create(e));var n=void 0===r?e.len:e.pos+r,s=new i.RPC.PeerInfo;while(e.pos<n){var o=e.uint32();switch(o>>>3){case 1:s.peerID=e.bytes();break;case 2:s.signedPeerRecord=e.bytes();break;default:e.skipType(7&o);break}}return s},s.fromObject=function(e){if(e instanceof i.RPC.PeerInfo)return e;var t=new i.RPC.PeerInfo;return null!=e.peerID&&("string"===typeof e.peerID?n.base64.decode(e.peerID,t.peerID=n.newBuffer(n.base64.length(e.peerID)),0):e.peerID.length&&(t.peerID=e.peerID)),null!=e.signedPeerRecord&&("string"===typeof e.signedPeerRecord?n.base64.decode(e.signedPeerRecord,t.signedPeerRecord=n.newBuffer(n.base64.length(e.signedPeerRecord)),0):e.signedPeerRecord.length&&(t.signedPeerRecord=e.signedPeerRecord)),t},s.toObject=function(e,t){t||(t={});var r={};return null!=e.peerID&&e.hasOwnProperty("peerID")&&(r.peerID=t.bytes===String?n.base64.encode(e.peerID,0,e.peerID.length):t.bytes===Array?Array.prototype.slice.call(e.peerID):e.peerID,t.oneofs&&(r._peerID="peerID")),null!=e.signedPeerRecord&&e.hasOwnProperty("signedPeerRecord")&&(r.signedPeerRecord=t.bytes===String?n.base64.encode(e.signedPeerRecord,0,e.signedPeerRecord.length):t.bytes===Array?Array.prototype.slice.call(e.signedPeerRecord):e.signedPeerRecord,t.oneofs&&(r._signedPeerRecord="signedPeerRecord")),r},s.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},s}(),s}(),i}))},8840:function(e,t,r){"use strict";r.d(t,{$O:function(){return w},E_:function(){return v},Is:function(){return A},RC:function(){return b},RI:function(){return l},ig:function(){return _},j:function(){return E},jS:function(){return y},jp:function(){return m},kJ:function(){return d},lg:function(){return g},uG:function(){return f}});var n=r(8257),i=r(7491),s=r(6867),o=r(1495),a=r(544),c=r(2157),u=r(958),l=Object.prototype.hasOwnProperty;function h(e){return null===e||void 0===e}var d=Array.isArray;function f(e,t){var r=e.__typename,n=e.id,i=e._id;if("string"===typeof r&&(t&&(t.keyObject=h(n)?h(i)?void 0:{_id:i}:{id:n}),h(n)&&!h(i)&&(n=i),!h(n)))return"".concat(r,":").concat("number"===typeof n||"string"===typeof n?n:JSON.stringify(n))}var p={dataIdFromObject:f,addTypename:!0,resultCaching:!0,canonizeResults:!1};function y(e){return(0,n.o)(p,e)}function g(e){var t=e.canonizeResults;return void 0===t?p.canonizeResults:t}function m(e,t){return(0,i.Yk)(t)?e.get(t.__ref,"__typename"):t&&t.__typename}var w=/^[_a-z][_0-9a-z]*/i;function v(e){var t=e.match(w);return t?t[0]:e}function b(e,t,r){return!!(0,s.s)(t)&&(d(t)?t.every((function(t){return b(e,t,r)})):e.selections.every((function(e){if((0,i.My)(e)&&(0,o.LZ)(e,r)){var n=(0,i.u2)(e);return l.call(t,n)&&(!e.selectionSet||b(e.selectionSet,t[n],r))}return!0})))}function E(e){return(0,s.s)(e)&&!(0,i.Yk)(e)&&!d(e)}function _(){return new a.w0}function A(e,t){var r=(0,c.F)((0,u.kU)(e));return{fragmentMap:r,lookupFragment:function(e){var n=r[e];return!n&&t&&(n=t.lookup(e)),n||null}}}},8085:function(e,t,r){"use strict";r.d(t,{h:function(){return we}});var n=r(2900),i=r(9926),s=r(468),o=r(2713),a=r(2157),c=function(){function e(){this.getFragmentDoc=(0,s.re)(a.Yk)}return e.prototype.batch=function(e){var t,r=this,n="string"===typeof e.optimistic?e.optimistic:!1===e.optimistic?null:void 0;return this.performTransaction((function(){return t=e.update(r)}),n),t},e.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.identify=function(e){},e.prototype.gc=function(){return[]},e.prototype.modify=function(e){return!1},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,n.pi)((0,n.pi)({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!!e.optimistic),this.read((0,n.pi)((0,n.pi)({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},e.prototype.writeQuery=function(e){var t=e.id,r=e.data,i=(0,n._T)(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:r}))},e.prototype.writeFragment=function(e){var t=e.id,r=e.data,i=e.fragment,s=e.fragmentName,o=(0,n._T)(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,s),dataId:t,result:r}))},e.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var i=r.readQuery(e),s=t(i);return void 0===s||null===s?i:(r.writeQuery((0,n.pi)((0,n.pi)({},e),{data:s})),s)}})},e.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var i=r.readFragment(e),s=t(i);return void 0===s||null===s?i:(r.writeFragment((0,n.pi)((0,n.pi)({},e),{data:s})),s)}})},e}(),u=function(e){function t(r,n,i,s){var o,a=e.call(this,r)||this;if(a.message=r,a.path=n,a.query=i,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var c=a.path.length-1;c>=0;--c)a.missing=(o={},o[a.path[c]]=a.missing,o)}else a.missing=a.path;return a.__proto__=t.prototype,a}return(0,n.ZT)(t,e),t}(Error),l=r(7491),h=r(3625),d=(r(7658),r(4478)),f=r(2067),p=r(8257),y=r(958),g=r(544),m=r(1495),w=r(6867);function v(e){var t=new Set([e]);return t.forEach((function(e){(0,w.s)(e)&&b(e)===e&&Object.getOwnPropertyNames(e).forEach((function(r){(0,w.s)(e[r])&&t.add(e[r])}))})),e}function b(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(t){if(t instanceof TypeError)return null;throw t}return e}function E(e){return __DEV__&&v(e),e}var _=r(4492),A=r(8840),S=Object.create(null),k=function(){return S},I=Object.create(null),T=function(){function e(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(e,t){return E((0,l.Yk)(e)?r.get(e.__ref,t):e&&e[t])},this.canRead=function(e){return(0,l.Yk)(e)?r.has(e.__ref):"object"===typeof e},this.toReference=function(e,t){if("string"===typeof e)return(0,l.kQ)(e);if((0,l.Yk)(e))return e;var n=r.policies.identify(e)[0];if(n){var i=(0,l.kQ)(n);return t&&r.merge(n,e),i}}}return e.prototype.toObject=function(){return(0,n.pi)({},this.data)},e.prototype.has=function(e){return void 0!==this.lookup(e,!0)},e.prototype.get=function(e,t){if(this.group.depend(e,t),A.RI.call(this.data,e)){var r=this.data[e];if(r&&A.RI.call(r,t))return r[t]}return"__typename"===t&&A.RI.call(this.policies.rootTypenamesById,e)?this.policies.rootTypenamesById[e]:this instanceof x?this.parent.get(e,t):void 0},e.prototype.lookup=function(e,t){return t&&this.group.depend(e,"__exists"),A.RI.call(this.data,e)?this.data[e]:this instanceof x?this.parent.lookup(e,t):this.policies.rootTypenamesById[e]?Object.create(null):void 0},e.prototype.merge=function(e,t){var r,n=this;(0,l.Yk)(e)&&(e=e.__ref),(0,l.Yk)(t)&&(t=t.__ref);var s="string"===typeof e?this.lookup(r=e):e,o="string"===typeof t?this.lookup(r=t):t;if(o){__DEV__?(0,i.kG)("string"===typeof r,"store.merge expects a string ID"):(0,i.kG)("string"===typeof r,1);var a=new g.w0(N).merge(s,o);if(this.data[r]=a,a!==s&&(delete this.refs[r],this.group.caching)){var c=Object.create(null);s||(c.__exists=1),Object.keys(o).forEach((function(e){if(!s||s[e]!==a[e]){c[e]=1;var t=(0,A.E_)(e);t===e||n.policies.hasKeyArgs(a.__typename,t)||(c[t]=1),void 0!==a[e]||n instanceof x||delete a[e]}})),!c.__typename||s&&s.__typename||this.policies.rootTypenamesById[r]!==a.__typename||delete c.__typename,Object.keys(c).forEach((function(e){return n.group.dirty(r,e)}))}}},e.prototype.modify=function(e,t){var r=this,i=this.lookup(e);if(i){var s=Object.create(null),o=!1,a=!0,c={DELETE:S,INVALIDATE:I,isReference:l.Yk,toReference:this.toReference,canRead:this.canRead,readField:function(t,n){return r.policies.readField("string"===typeof t?{fieldName:t,from:n||(0,l.kQ)(e)}:t,{store:r})}};if(Object.keys(i).forEach((function(u){var l=(0,A.E_)(u),h=i[u];if(void 0!==h){var d="function"===typeof t?t:t[u]||t[l];if(d){var f=d===k?S:d(E(h),(0,n.pi)((0,n.pi)({},c),{fieldName:l,storeFieldName:u,storage:r.getStorage(e,u)}));f===I?r.group.dirty(e,u):(f===S&&(f=void 0),f!==h&&(s[u]=f,o=!0,h=f))}void 0!==h&&(a=!1)}})),o)return this.merge(e,s),a&&(this instanceof x?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},e.prototype.delete=function(e,t,r){var n,i=this.lookup(e);if(i){var s=this.getFieldValue(i,"__typename"),o=t&&r?this.policies.getStoreFieldName({typename:s,fieldName:t,args:r}):t;return this.modify(e,o?(n={},n[o]=k,n):k)}return!1},e.prototype.evict=function(e,t){var r=!1;return e.id&&(A.RI.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof x&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},e.prototype.clear=function(){this.replace(null)},e.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach((function(t){A.RI.call(e.policies.rootTypenamesById,t)||r.push(t)})),r.length&&(t.__META={extraRootIds:r.sort()}),t},e.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach((function(r){e&&A.RI.call(e,r)||t.delete(r)})),e){var r=e.__META,i=(0,n._T)(e,["__META"]);Object.keys(i).forEach((function(e){t.merge(e,i[e])})),r&&r.extraRootIds.forEach(this.retain,this)}},e.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},e.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},e.prototype.getRootIdSet=function(e){return void 0===e&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof x?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},e.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach((function(n){A.RI.call(r,n)&&(Object.keys(e.findChildRefIds(n)).forEach(t.add,t),delete r[n])}));var n=Object.keys(r);if(n.length){var i=this;while(i instanceof x)i=i.parent;n.forEach((function(e){return i.delete(e)}))}return n},e.prototype.findChildRefIds=function(e){if(!A.RI.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var n=new Set([r]);n.forEach((function(e){(0,l.Yk)(e)&&(t[e.__ref]=!0),(0,w.s)(e)&&Object.keys(e).forEach((function(t){var r=e[t];(0,w.s)(r)&&n.add(r)}))}))}return this.refs[e]},e.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},e}(),C=function(){function e(e,t){void 0===t&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return e.prototype.resetCaching=function(){this.d=this.caching?(0,s.dP)():null,this.keyMaker=new _.B(f.mr)},e.prototype.depend=function(e,t){if(this.d){this.d(R(e,t));var r=(0,A.E_)(t);r!==t&&this.d(R(e,r)),this.parent&&this.parent.depend(e,t)}},e.prototype.dirty=function(e,t){this.d&&this.d.dirty(R(e,t),"__exists"===t?"forget":"setDirty")},e}();function R(e,t){return t+"#"+e}function P(e,t){D(e)&&e.group.depend(t,"__exists")}(function(e){var t=function(e){function t(t){var r=t.policies,n=t.resultCaching,i=void 0===n||n,s=t.seed,o=e.call(this,r,new C(i))||this;return o.stump=new O(o),o.storageTrie=new _.B(f.mr),s&&o.replace(s),o}return(0,n.ZT)(t,e),t.prototype.addLayer=function(e,t){return this.stump.addLayer(e,t)},t.prototype.removeLayer=function(){return this},t.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},t}(e);e.Root=t})(T||(T={}));var x=function(e){function t(t,r,n,i){var s=e.call(this,r.policies,i)||this;return s.id=t,s.parent=r,s.replay=n,s.group=i,n(s),s}return(0,n.ZT)(t,e),t.prototype.addLayer=function(e,r){return new t(e,this,r,this.group)},t.prototype.removeLayer=function(e){var t=this,r=this.parent.removeLayer(e);return e===this.id?(this.group.caching&&Object.keys(this.data).forEach((function(e){var n=t.data[e],i=r["lookup"](e);i?n?n!==i&&Object.keys(n).forEach((function(r){(0,o.D)(n[r],i[r])||t.group.dirty(e,r)})):(t.group.dirty(e,"__exists"),Object.keys(i).forEach((function(r){t.group.dirty(e,r)}))):t.delete(e)})),r):r===this.parent?this:r.addLayer(this.id,this.replay)},t.prototype.toObject=function(){return(0,n.pi)((0,n.pi)({},this.parent.toObject()),this.data)},t.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return A.RI.call(this.data,t)?(0,n.pi)((0,n.pi)({},r),e.prototype.findChildRefIds.call(this,t)):r},t.prototype.getStorage=function(){var e=this.parent;while(e.parent)e=e.parent;return e.getStorage.apply(e,arguments)},t}(T),O=function(e){function t(t){return e.call(this,"EntityStore.Stump",t,(function(){}),new C(t.group.caching,t.group))||this}return(0,n.ZT)(t,e),t.prototype.removeLayer=function(){return this},t.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},t}(x);function N(e,t,r){var n=e[r],i=t[r];return(0,o.D)(n,i)?n:i}function D(e){return!!(e instanceof T&&e.group.caching)}var B=r(6631);function L(e){return[e.selectionSet,e.objectOrReference,e.context,e.context.canonizeResults]}var M=function(){function e(e){var t=this;this.knownResults=new(f.mr?WeakMap:Map),this.config=(0,p.o)(e,{addTypename:!1!==e.addTypename,canonizeResults:(0,A.lg)(e)}),this.canon=e.canon||new B.h,this.executeSelectionSet=(0,s.re)((function(e){var r,i=e.context.canonizeResults,s=L(e);s[3]=!i;var o=(r=t.executeSelectionSet).peek.apply(r,s);return o?i?(0,n.pi)((0,n.pi)({},o),{result:t.canon.admit(o.result)}):o:(P(e.context.store,e.enclosingRef.__ref),t.execSelectionSetImpl(e))}),{max:this.config.resultCacheMaxSize,keyArgs:L,makeCacheKey:function(e,t,r,n){if(D(r.store))return r.store.makeCacheKey(e,(0,l.Yk)(t)?t.__ref:t,r.varString,n)}}),this.executeSubSelectedArray=(0,s.re)((function(e){return P(e.context.store,e.enclosingRef.__ref),t.execSubSelectedArrayImpl(e)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var t=e.field,r=e.array,n=e.context;if(D(n.store))return n.store.makeCacheKey(t,r,n.varString)}})}return e.prototype.resetCanon=function(){this.canon=new B.h},e.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,i=e.rootId,s=void 0===i?"ROOT_QUERY":i,o=e.variables,a=e.returnPartialData,c=void 0===a||a,h=e.canonizeResults,d=void 0===h?this.config.canonizeResults:h,f=this.config.cache.policies;o=(0,n.pi)((0,n.pi)({},(0,y.O4)((0,y.iW)(r))),o);var p,g=(0,l.kQ)(s),m=this.executeSelectionSet({selectionSet:(0,y.p$)(r).selectionSet,objectOrReference:g,enclosingRef:g,context:(0,n.pi)({store:t,query:r,policies:f,variables:o,varString:(0,B.B)(o),canonizeResults:d},(0,A.Is)(r,this.config.fragments))});if(m.missing&&(p=[new u(U(m.missing),m.missing,r,o)],!c))throw p[0];return{result:m.result,complete:!p,missing:p}},e.prototype.isFresh=function(e,t,r,n){if(D(n.store)&&this.knownResults.get(e)===r){var i=this.executeSelectionSet.peek(r,t,n,this.canon.isKnown(e));if(i&&e===i.result)return!0}return!1},e.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,n=e.objectOrReference,s=e.enclosingRef,o=e.context;if((0,l.Yk)(n)&&!o.policies.rootTypenamesById[n.__ref]&&!o.store.has(n.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(n.__ref," object")};var c,u=o.variables,f=o.policies,p=o.store,y=p.getFieldValue(n,"__typename"),w=[],v=new g.w0;function b(e,t){var r;return e.missing&&(c=v.merge(c,(r={},r[t]=e.missing,r))),e.result}this.config.addTypename&&"string"===typeof y&&!f.rootIdsByTypename[y]&&w.push({__typename:y});var _=new Set(r.selections);_.forEach((function(e){var r,p;if((0,m.LZ)(e,u))if((0,l.My)(e)){var g=f.readField({fieldName:e.name.value,field:e,variables:o.variables,from:n},o),E=(0,l.u2)(e);void 0===g?h.Gw.added(e)||(c=v.merge(c,(r={},r[E]="Can't find field '".concat(e.name.value,"' on ").concat((0,l.Yk)(n)?n.__ref+" object":"object "+JSON.stringify(n,null,2)),r))):(0,A.kJ)(g)?g=b(t.executeSubSelectedArray({field:e,array:g,enclosingRef:s,context:o}),E):e.selectionSet?null!=g&&(g=b(t.executeSelectionSet({selectionSet:e.selectionSet,objectOrReference:g,enclosingRef:(0,l.Yk)(g)?g:s,context:o}),E)):o.canonizeResults&&(g=t.canon.pass(g)),void 0!==g&&w.push((p={},p[E]=g,p))}else{var S=(0,a.hi)(e,o.lookupFragment);if(!S&&e.kind===d.h.FRAGMENT_SPREAD)throw __DEV__?new i.ej("No fragment named ".concat(e.name.value)):new i.ej(5);S&&f.fragmentMatches(S,y)&&S.selectionSet.selections.forEach(_.add,_)}}));var S=(0,g.bw)(w),k={result:S,missing:c},I=o.canonizeResults?this.canon.admit(k):E(k);return I.result&&this.knownResults.set(I.result,r),I},e.prototype.execSubSelectedArrayImpl=function(e){var t,r=this,n=e.field,i=e.array,s=e.enclosingRef,o=e.context,a=new g.w0;function c(e,r){var n;return e.missing&&(t=a.merge(t,(n={},n[r]=e.missing,n))),e.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map((function(e,t){return null===e?null:(0,A.kJ)(e)?c(r.executeSubSelectedArray({field:n,array:e,enclosingRef:s,context:o}),t):n.selectionSet?c(r.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:e,enclosingRef:(0,l.Yk)(e)?e:s,context:o}),t):(__DEV__&&F(o.store,n,e),e)})),{result:o.canonizeResults?this.canon.admit(i):i,missing:t}},e}();function U(e){try{JSON.stringify(e,(function(e,t){if("string"===typeof t)throw t;return t}))}catch(t){return t}}function F(e,t,r){if(!t.selectionSet){var n=new Set([r]);n.forEach((function(r){(0,w.s)(r)&&(__DEV__?(0,i.kG)(!(0,l.Yk)(r),"Missing selection set for object of type ".concat((0,A.jp)(e,r)," returned for query field ").concat(t.name.value)):(0,i.kG)(!(0,l.Yk)(r),6),Object.values(r).forEach(n.add,n))}))}}var j=r(9735),V=r(1328),z=r(1073);function $(e){var t=(0,z.X)("stringifyForDisplay");return JSON.stringify(e,(function(e,r){return void 0===r?t:r})).split(JSON.stringify(t)).join("<undefined>")}var q=r(9184),K=Object.create(null);function H(e){var t=JSON.stringify(e);return K[t]||(K[t]=Object.create(null))}function G(e){var t=H(e);return t.keyFieldsFn||(t.keyFieldsFn=function(t,r){var n=function(e,t){return r.readField(t,e)},s=r.keyObject=Q(e,(function(e){var s=X(r.storeObject,e,n);return void 0===s&&t!==r.storeObject&&A.RI.call(t,e[0])&&(s=X(t,e,J)),__DEV__?(0,i.kG)(void 0!==s,"Missing field '".concat(e.join("."),"' while extracting keyFields from ").concat(JSON.stringify(t))):(0,i.kG)(void 0!==s,2),s}));return"".concat(r.typename,":").concat(JSON.stringify(s))})}function W(e){var t=H(e);return t.keyArgsFn||(t.keyArgsFn=function(t,r){var n=r.field,i=r.variables,s=r.fieldName,o=Q(e,(function(e){var r=e[0],s=r.charAt(0);if("@"!==s)if("$"!==s){if(t)return X(t,e)}else{var o=r.slice(1);if(i&&A.RI.call(i,o)){var a=e.slice(0);return a[0]=o,X(i,a)}}else if(n&&(0,V.O)(n.directives)){var c=r.slice(1),u=n.directives.find((function(e){return e.name.value===c})),h=u&&(0,l.NC)(u,i);return h&&X(h,e.slice(1))}})),a=JSON.stringify(o);return(t||"{}"!==a)&&(s+=":"+a),s})}function Q(e,t){var r=new g.w0;return Y(e).reduce((function(e,n){var i,s=t(n);if(void 0!==s){for(var o=n.length-1;o>=0;--o)i={},i[n[o]]=s,s=i;e=r.merge(e,s)}return e}),Object.create(null))}function Y(e){var t=H(e);if(!t.paths){var r=t.paths=[],n=[];e.forEach((function(t,i){(0,A.kJ)(t)?(Y(t).forEach((function(e){return r.push(n.concat(e))})),n.length=0):(n.push(t),(0,A.kJ)(e[i+1])||(r.push(n.slice(0)),n.length=0))}))}return t.paths}function J(e,t){return e[t]}function X(e,t,r){return r=r||J,Z(t.reduce((function e(t,n){return(0,A.kJ)(t)?t.map((function(t){return e(t,n)})):t&&r(t,n)}),e))}function Z(e){return(0,w.s)(e)?(0,A.kJ)(e)?e.map(Z):Q(Object.keys(e).sort(),(function(t){return X(e,t)})):e}function ee(e){return void 0!==e.args?e.args:e.field?(0,l.NC)(e.field,e.variables):null}l.PT.setStringify(B.B);var te=function(){},re=function(e,t){return t.fieldName},ne=function(e,t,r){var n=r.mergeObjects;return n(e,t)},ie=function(e,t){return t},se=function(){function e(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=(0,n.pi)({dataIdFromObject:A.uG},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return e.prototype.identify=function(e,t){var r,i=this,s=t&&(t.typename||(null===(r=t.storeObject)||void 0===r?void 0:r.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o,a=t&&t.storeObject||e,c=(0,n.pi)((0,n.pi)({},t),{typename:s,storeObject:a,readField:t&&t.readField||function(){var e=ae(arguments,a);return i.readField(e,{store:i.cache["data"],variables:e.variables})}}),u=s&&this.getTypePolicy(s),l=u&&u.keyFn||this.config.dataIdFromObject;while(l){var h=l(e,c);if(!(0,A.kJ)(h)){o=h;break}l=G(h)}return o=o?String(o):void 0,c.keyObject?[o,c.keyObject]:[o]},e.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach((function(r){var i=e[r],s=i.queryType,o=i.mutationType,a=i.subscriptionType,c=(0,n._T)(i,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),a&&t.setRootTypename("Subscription",r),A.RI.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]}))},e.prototype.updateTypePolicy=function(e,t){var r=this,n=this.getTypePolicy(e),i=t.keyFields,s=t.fields;function o(e,t){e.merge="function"===typeof t?t:!0===t?ne:!1===t?ie:e.merge}o(n,t.merge),n.keyFn=!1===i?te:(0,A.kJ)(i)?G(i):"function"===typeof i?i:n.keyFn,s&&Object.keys(s).forEach((function(t){var n=r.getFieldPolicy(e,t,!0),i=s[t];if("function"===typeof i)n.read=i;else{var a=i.keyArgs,c=i.read,u=i.merge;n.keyFn=!1===a?re:(0,A.kJ)(a)?W(a):"function"===typeof a?a:n.keyFn,"function"===typeof c&&(n.read=c),o(n,u)}n.read&&n.merge&&(n.keyFn=n.keyFn||re)}))},e.prototype.setRootTypename=function(e,t){void 0===t&&(t=e);var r="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[r];t!==n&&(__DEV__?(0,i.kG)(!n||n===e,"Cannot change root ".concat(e," __typename more than once")):(0,i.kG)(!n||n===e,3),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},e.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach((function(r){t.getSupertypeSet(r,!0),e[r].forEach((function(e){t.getSupertypeSet(e,!0).add(r);var n=e.match(A.$O);n&&n[0]===e||t.fuzzySubtypes.set(e,new RegExp(e))}))}))},e.prototype.getTypePolicy=function(e){var t=this;if(!A.RI.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var i=this.supertypeMap.get(e);i&&i.size&&i.forEach((function(e){var i=t.getTypePolicy(e),s=i.fields,o=(0,n._T)(i,["fields"]);Object.assign(r,o),Object.assign(r.fields,s)}))}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach((function(r){t.updateTypePolicy(e,r)})),this.typePolicies[e]},e.prototype.getFieldPolicy=function(e,t,r){if(e){var n=this.getTypePolicy(e).fields;return n[t]||r&&(n[t]=Object.create(null))}},e.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},e.prototype.fragmentMatches=function(e,t,r,n){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),c=[a],u=function(e){var t=s.getSupertypeSet(e,!1);t&&t.size&&c.indexOf(t)<0&&c.push(t)},l=!(!r||!this.fuzzySubtypes.size),h=!1,d=0;d<c.length;++d){var f=c[d];if(f.has(o))return a.has(o)||(h&&__DEV__&&i.kG.warn("Inferring subtype ".concat(t," of supertype ").concat(o)),a.add(o)),!0;f.forEach(u),l&&d===c.length-1&&(0,A.RC)(e.selectionSet,r,n)&&(l=!1,h=!0,this.fuzzySubtypes.forEach((function(e,r){var n=t.match(e);n&&n[0]===t&&u(r)})))}return!1},e.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!(!r||!r.keyFn)},e.prototype.getStoreFieldName=function(e){var t,r=e.typename,n=e.fieldName,i=this.getFieldPolicy(r,n,!1),s=i&&i.keyFn;if(s&&r){var o={typename:r,fieldName:n,field:e.field||null,variables:e.variables},a=ee(e);while(s){var c=s(a,o);if(!(0,A.kJ)(c)){t=c||n;break}s=W(c)}}return void 0===t&&(t=e.field?(0,l.vf)(e.field,e.variables):(0,l.PT)(n,ee(e))),!1===t?n:n===(0,A.E_)(t)?t:n+":"+t},e.prototype.readField=function(e,t){var r=e.from;if(r){var n=e.field||e.fieldName;if(n){if(void 0===e.typename){var i=t.store.getFieldValue(r,"__typename");i&&(e.typename=i)}var s=this.getStoreFieldName(e),o=(0,A.E_)(s),a=t.store.getFieldValue(r,s),c=this.getFieldPolicy(e.typename,o,!1),u=c&&c.read;if(u){var h=oe(this,r,e,t,t.store.getStorage((0,l.Yk)(r)?r.__ref:r,s));return q.ab.withValue(this.cache,u,[a,h])}return a}}},e.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},e.prototype.getMergeFunction=function(e,t,r){var n=this.getFieldPolicy(e,t,!1),i=n&&n.merge;return!i&&r&&(n=this.getTypePolicy(r),i=n&&n.merge),i},e.prototype.runMergeFunction=function(e,t,r,n,i){var s=r.field,o=r.typename,a=r.merge;return a===ne?ce(n.store)(e,t):a===ie?t:(n.overwrite&&(e=void 0),a(e,t,oe(this,void 0,{typename:o,fieldName:s.name.value,field:s,variables:n.variables},n,i||Object.create(null))))},e}();function oe(e,t,r,n,i){var s=e.getStoreFieldName(r),o=(0,A.E_)(s),a=r.variables||n.variables,c=n.store,u=c.toReference,h=c.canRead;return{args:ee(r),field:r.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:l.Yk,toReference:u,storage:i,cache:e.cache,canRead:h,readField:function(){return e.readField(ae(arguments,t,a),n)},mergeObjects:ce(n.store)}}function ae(e,t,r){var s,o=e[0],a=e[1],c=e.length;return"string"===typeof o?s={fieldName:o,from:c>1?a:t}:(s=(0,n.pi)({},o),A.RI.call(s,"from")||(s.from=t)),__DEV__&&void 0===s.from&&__DEV__&&i.kG.warn("Undefined 'from' passed to readField with arguments ".concat($(Array.from(e)))),void 0===s.variables&&(s.variables=r),s}function ce(e){return function(t,r){if((0,A.kJ)(t)||(0,A.kJ)(r))throw __DEV__?new i.ej("Cannot automatically merge arrays"):new i.ej(4);if((0,w.s)(t)&&(0,w.s)(r)){var s=e.getFieldValue(t,"__typename"),o=e.getFieldValue(r,"__typename"),a=s&&o&&s!==o;if(a)return r;if((0,l.Yk)(t)&&(0,A.j)(r))return e.merge(t.__ref,r),t;if((0,A.j)(t)&&(0,l.Yk)(r))return e.merge(t,r.__ref),r;if((0,A.j)(t)&&(0,A.j)(r))return(0,n.pi)((0,n.pi)({},t),r)}return r}}function ue(e,t,r){var i="".concat(t).concat(r),s=e.flavors.get(i);return s||e.flavors.set(i,s=e.clientOnly===t&&e.deferred===r?e:(0,n.pi)((0,n.pi)({},e),{clientOnly:t,deferred:r})),s}var le=function(){function e(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return e.prototype.writeToStore=function(e,t){var r=this,s=t.query,o=t.result,a=t.dataId,c=t.variables,u=t.overwrite,h=(0,y.$H)(s),d=(0,A.ig)();c=(0,n.pi)((0,n.pi)({},(0,y.O4)(h)),c);var f=(0,n.pi)((0,n.pi)({store:e,written:Object.create(null),merge:function(e,t){return d.merge(e,t)},variables:c,varString:(0,B.B)(c)},(0,A.Is)(s,this.fragments)),{overwrite:!!u,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),p=this.processSelectionSet({result:o||Object.create(null),dataId:a,selectionSet:h.selectionSet,mergeTree:{map:new Map},context:f});if(!(0,l.Yk)(p))throw __DEV__?new i.ej("Could not identify object ".concat(JSON.stringify(o))):new i.ej(7);return f.incomingById.forEach((function(t,n){var i=t.storeObject,s=t.mergeTree,o=t.fieldNodeSet,a=(0,l.kQ)(n);if(s&&s.map.size){var c=r.applyMerges(s,a,i,f);if((0,l.Yk)(c))return;i=c}if(__DEV__&&!f.overwrite){var u=Object.create(null);o.forEach((function(e){e.selectionSet&&(u[e.name.value]=!0)}));var h=function(e){return!0===u[(0,A.E_)(e)]},d=function(e){var t=s&&s.map.get(e);return Boolean(t&&t.info&&t.info.merge)};Object.keys(i).forEach((function(e){h(e)&&!d(e)&&me(a,i,e,f.store)}))}e.merge(n,i)})),e.retain(p.__ref),p},e.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,s=e.result,o=e.selectionSet,a=e.context,c=e.mergeTree,u=this.cache.policies,d=Object.create(null),f=r&&u.rootTypenamesById[r]||(0,l.qw)(s,o,a.fragmentMap)||r&&a.store.get(r,"__typename");"string"===typeof f&&(d.__typename=f);var p=function(){var e=ae(arguments,d,a.variables);if((0,l.Yk)(e.from)){var t=a.incomingById.get(e.from.__ref);if(t){var r=u.readField((0,n.pi)((0,n.pi)({},e),{from:t.storeObject}),a);if(void 0!==r)return r}}return u.readField(e,a)},y=new Set;this.flattenFields(o,s,a,f).forEach((function(e,r){var n,o=(0,l.u2)(r),a=s[o];if(y.add(r),void 0!==a){var g=u.getStoreFieldName({typename:f,fieldName:r.name.value,field:r,variables:e.variables}),m=de(c,g),w=t.processFieldValue(a,r,r.selectionSet?ue(e,!1,!1):e,m),v=void 0;r.selectionSet&&((0,l.Yk)(w)||(0,A.j)(w))&&(v=p("__typename",w));var b=u.getMergeFunction(f,r.name.value,v);b?m.info={field:r,typename:f,merge:b}:ye(c,g),d=e.merge(d,(n={},n[g]=w,n))}else!__DEV__||e.clientOnly||e.deferred||h.Gw.added(r)||u.getReadFunction(f,r.name.value)||__DEV__&&i.kG.error("Missing field '".concat((0,l.u2)(r),"' while writing result ").concat(JSON.stringify(s,null,2)).substring(0,1e3))}));try{var g=u.identify(s,{typename:f,selectionSet:o,fragmentMap:a.fragmentMap,storeObject:d,readField:p}),m=g[0],w=g[1];r=r||m,w&&(d=a.merge(d,w))}catch(_){if(!r)throw _}if("string"===typeof r){var v=(0,l.kQ)(r),b=a.written[r]||(a.written[r]=[]);if(b.indexOf(o)>=0)return v;if(b.push(o),this.reader&&this.reader.isFresh(s,v,o,a))return v;var E=a.incomingById.get(r);return E?(E.storeObject=a.merge(E.storeObject,d),E.mergeTree=fe(E.mergeTree,c),y.forEach((function(e){return E.fieldNodeSet.add(e)}))):a.incomingById.set(r,{storeObject:d,mergeTree:pe(c)?void 0:c,fieldNodeSet:y}),v}return d},e.prototype.processFieldValue=function(e,t,r,n){var i=this;return t.selectionSet&&null!==e?(0,A.kJ)(e)?e.map((function(e,s){var o=i.processFieldValue(e,t,r,de(n,s));return ye(n,s),o})):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:n}):__DEV__?(0,j.X)(e):e},e.prototype.flattenFields=function(e,t,r,n){void 0===n&&(n=(0,l.qw)(t,e,r.fragmentMap));var s=new Map,o=this.cache.policies,c=new _.B(!1);return function e(u,h){var f=c.lookup(u,h.clientOnly,h.deferred);f.visited||(f.visited=!0,u.selections.forEach((function(c){if((0,m.LZ)(c,r.variables)){var u=h.clientOnly,f=h.deferred;if(u&&f||!(0,V.O)(c.directives)||c.directives.forEach((function(e){var t=e.name.value;if("client"===t&&(u=!0),"defer"===t){var n=(0,l.NC)(e,r.variables);n&&!1===n.if||(f=!0)}})),(0,l.My)(c)){var p=s.get(c);p&&(u=u&&p.clientOnly,f=f&&p.deferred),s.set(c,ue(r,u,f))}else{var y=(0,a.hi)(c,r.lookupFragment);if(!y&&c.kind===d.h.FRAGMENT_SPREAD)throw __DEV__?new i.ej("No fragment named ".concat(c.name.value)):new i.ej(8);y&&o.fragmentMatches(y,n,t,r.variables)&&e(y.selectionSet,ue(r,u,f))}}})))}(e,r),s},e.prototype.applyMerges=function(e,t,r,s,o){var a,c=this;if(e.map.size&&!(0,l.Yk)(r)){var u,h=(0,A.kJ)(r)||!(0,l.Yk)(t)&&!(0,A.j)(t)?void 0:t,d=r;h&&!o&&(o=[(0,l.Yk)(h)?h.__ref:h]);var f=function(e,t){return(0,A.kJ)(e)?"number"===typeof t?e[t]:void 0:s.store.getFieldValue(e,String(t))};e.map.forEach((function(e,t){var r=f(h,t),n=f(d,t);if(void 0!==n){o&&o.push(t);var a=c.applyMerges(e,r,n,s,o);a!==n&&(u=u||new Map,u.set(t,a)),o&&(0,i.kG)(o.pop()===t)}})),u&&(r=(0,A.kJ)(d)?d.slice(0):(0,n.pi)({},d),u.forEach((function(e,t){r[t]=e})))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,s,o&&(a=s.store).getStorage.apply(a,o)):r},e}(),he=[];function de(e,t){var r=e.map;return r.has(t)||r.set(t,he.pop()||{map:new Map}),r.get(t)}function fe(e,t){if(e===t||!t||pe(t))return e;if(!e||pe(e))return t;var r=e.info&&t.info?(0,n.pi)((0,n.pi)({},e.info),t.info):e.info||t.info,i=e.map.size&&t.map.size,s=i?new Map:e.map.size?e.map:t.map,o={info:r,map:s};if(i){var a=new Set(t.map.keys());e.map.forEach((function(e,r){o.map.set(r,fe(e,t.map.get(r))),a.delete(r)})),a.forEach((function(r){o.map.set(r,fe(t.map.get(r),e.map.get(r)))}))}return o}function pe(e){return!e||!(e.info||e.map.size)}function ye(e,t){var r=e.map,n=r.get(t);n&&pe(n)&&(he.push(n),r.delete(t))}var ge=new Set;function me(e,t,r,n){var s=function(e){var t=n.getFieldValue(e,r);return"object"===typeof t&&t},a=s(e);if(a){var c=s(t);if(c&&!(0,l.Yk)(a)&&!(0,o.D)(a,c)&&!Object.keys(a).every((function(e){return void 0!==n.getFieldValue(c,e)}))){var u=n.getFieldValue(e,"__typename")||n.getFieldValue(t,"__typename"),h=(0,A.E_)(r),d="".concat(u,".").concat(h);if(!ge.has(d)){ge.add(d);var f=[];(0,A.kJ)(a)||(0,A.kJ)(c)||[a,c].forEach((function(e){var t=n.getFieldValue(e,"__typename");"string"!==typeof t||f.includes(t)||f.push(t)})),__DEV__&&i.kG.warn("Cache data may be lost when replacing the ".concat(h," field of a ").concat(u," object.\n\nTo address this problem (which is not a bug in Apollo Client), ").concat(f.length?"either ensure all objects of type "+f.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(d," field, so InMemoryCache can safely merge these objects:\n\n  existing: ").concat(JSON.stringify(a).slice(0,1e3),"\n  incoming: ").concat(JSON.stringify(c).slice(0,1e3),"\n\nFor more information about these options, please refer to the documentation:\n\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\n"))}}}}var we=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.watches=new Set,r.typenameDocumentCache=new Map,r.makeVar=q.QS,r.txCount=0,r.config=(0,A.jS)(t),r.addTypename=!!r.config.addTypename,r.policies=new se({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return(0,n.ZT)(t,e),t.prototype.init=function(){var e=this.data=new T.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=e.stump,this.resetResultCache()},t.prototype.resetResultCache=function(e){var t=this,r=this.storeReader,n=this.config.fragments;this.storeWriter=new le(this,this.storeReader=new M({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:(0,A.lg)(this.config),canon:e?void 0:r&&r.canon,fragments:n}),n),this.maybeBroadcastWatch=(0,s.re)((function(e,r){return t.broadcastWatch(e,r)}),{max:this.config.resultCacheMaxSize,makeCacheKey:function(e){var r=e.optimistic?t.optimisticData:t.data;if(D(r)){var n=e.optimistic,i=e.id,s=e.variables;return r.makeCacheKey(e.query,e.callback,(0,B.B)({optimistic:n,id:i,variables:s}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach((function(e){return e.resetCaching()}))},t.prototype.restore=function(e){return this.init(),e&&this.data.replace(e),this},t.prototype.extract=function(e){return void 0===e&&(e=!1),(e?this.optimisticData:this.data).extract()},t.prototype.read=function(e){var t=e.returnPartialData,r=void 0!==t&&t;try{return this.storeReader.diffQueryAgainstStore((0,n.pi)((0,n.pi)({},e),{store:e.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:r})).result||null}catch(i){if(i instanceof u)return null;throw i}},t.prototype.write=function(e){try{return++this.txCount,this.storeWriter.writeToStore(this.data,e)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.modify=function(e){if(A.RI.call(e,"id")&&!e.id)return!1;var t=e.optimistic?this.optimisticData:this.data;try{return++this.txCount,t.modify(e.id||"ROOT_QUERY",e.fields)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.diff=function(e){return this.storeReader.diffQueryAgainstStore((0,n.pi)((0,n.pi)({},e),{store:e.optimistic?this.optimisticData:this.data,rootId:e.id||"ROOT_QUERY",config:this.config}))},t.prototype.watch=function(e){var t=this;return this.watches.size||(0,q._v)(this),this.watches.add(e),e.immediate&&this.maybeBroadcastWatch(e),function(){t.watches.delete(e)&&!t.watches.size&&(0,q.li)(t),t.maybeBroadcastWatch.forget(e)}},t.prototype.gc=function(e){B.B.reset();var t=this.optimisticData.gc();return e&&!this.txCount&&(e.resetResultCache?this.resetResultCache(e.resetResultIdentities):e.resetResultIdentities&&this.storeReader.resetCanon()),t},t.prototype.retain=function(e,t){return(t?this.optimisticData:this.data).retain(e)},t.prototype.release=function(e,t){return(t?this.optimisticData:this.data).release(e)},t.prototype.identify=function(e){if((0,l.Yk)(e))return e.__ref;try{return this.policies.identify(e)[0]}catch(t){__DEV__&&i.kG.warn(t)}},t.prototype.evict=function(e){if(!e.id){if(A.RI.call(e,"id"))return!1;e=(0,n.pi)((0,n.pi)({},e),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(e,this.data)}finally{--this.txCount||!1===e.broadcast||this.broadcastWatches()}},t.prototype.reset=function(e){var t=this;return this.init(),B.B.reset(),e&&e.discardWatches?(this.watches.forEach((function(e){return t.maybeBroadcastWatch.forget(e)})),this.watches.clear(),(0,q.li)(this)):this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this.optimisticData.removeLayer(e);t!==this.optimisticData&&(this.optimisticData=t,this.broadcastWatches())},t.prototype.batch=function(e){var t,r=this,i=e.update,s=e.optimistic,o=void 0===s||s,a=e.removeOptimistic,c=e.onWatchUpdated,u=function(e){var n=r,s=n.data,o=n.optimisticData;++r.txCount,e&&(r.data=r.optimisticData=e);try{return t=i(r)}finally{--r.txCount,r.data=s,r.optimisticData=o}},l=new Set;return c&&!this.txCount&&this.broadcastWatches((0,n.pi)((0,n.pi)({},e),{onWatchUpdated:function(e){return l.add(e),!1}})),"string"===typeof o?this.optimisticData=this.optimisticData.addLayer(o,u):!1===o?u(this.data):u(),"string"===typeof a&&(this.optimisticData=this.optimisticData.removeLayer(a)),c&&l.size?(this.broadcastWatches((0,n.pi)((0,n.pi)({},e),{onWatchUpdated:function(e,t){var r=c.call(this,e,t);return!1!==r&&l.delete(e),r}})),l.size&&l.forEach((function(e){return r.maybeBroadcastWatch.dirty(e)}))):this.broadcastWatches(e),t},t.prototype.performTransaction=function(e,t){return this.batch({update:e,optimistic:t||null!==t})},t.prototype.transformDocument=function(e){if(this.addTypename){var t=this.typenameDocumentCache.get(e);return t||(t=(0,h.Gw)(e),this.typenameDocumentCache.set(e,t),this.typenameDocumentCache.set(t,t)),t}return e},t.prototype.transformForLink=function(e){var t=this.config.fragments;return t?t.transform(e):e},t.prototype.broadcastWatches=function(e){var t=this;this.txCount||this.watches.forEach((function(r){return t.maybeBroadcastWatch(r,e)}))},t.prototype.broadcastWatch=function(e,t){var r=e.lastDiff,n=this.diff(e);t&&(e.optimistic&&"string"===typeof t.optimistic&&(n.fromOptimisticTransaction=!0),t.onWatchUpdated&&!1===t.onWatchUpdated.call(this,e,n,r))||r&&(0,o.D)(r.result,n.result)||e.callback(e.lastDiff=n,r)},t}(c)},6631:function(e,t,r){"use strict";r.d(t,{B:function(){return d},h:function(){return h}});r(7658);var n=r(2900),i=(r(9926),r(4492)),s=r(6867),o=r(2067),a=r(8840);function c(e){return(0,s.s)(e)?(0,a.kJ)(e)?e.slice(0):(0,n.pi)({__proto__:Object.getPrototypeOf(e)},e):e}var u,l,h=function(){function e(){this.known=new(o.sy?WeakSet:Set),this.pool=new i.B(o.mr),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return e.prototype.isKnown=function(e){return(0,s.s)(e)&&this.known.has(e)},e.prototype.pass=function(e){if((0,s.s)(e)){var t=c(e);return this.passes.set(t,e),t}return e},e.prototype.admit=function(e){var t=this;if((0,s.s)(e)){var r=this.passes.get(e);if(r)return r;var n=Object.getPrototypeOf(e);switch(n){case Array.prototype:if(this.known.has(e))return e;var i=e.map(this.admit,this),o=this.pool.lookupArray(i);return o.array||(this.known.add(o.array=i),__DEV__&&Object.freeze(i)),o.array;case null:case Object.prototype:if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),c=[a],u=this.sortedKeys(e);c.push(u.json);var l=c.length;u.sorted.forEach((function(r){c.push(t.admit(e[r]))}));o=this.pool.lookupArray(c);if(!o.object){var h=o.object=Object.create(a);this.known.add(h),u.sorted.forEach((function(e,t){h[e]=c[l+t]})),__DEV__&&Object.freeze(h)}return o.object}}return e},e.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var n=JSON.stringify(t);(r.keys=this.keysByJSON.get(n))||this.keysByJSON.set(n,r.keys={sorted:t,json:n})}return r.keys},e}(),d=Object.assign((function(e){if((0,s.s)(e)){void 0===u&&f();var t=u.admit(e),r=l.get(t);return void 0===r&&l.set(t,r=JSON.stringify(t)),r}return JSON.stringify(e)}),{reset:f});function f(){u=new h,l=new(o.mr?WeakMap:Map)}},9184:function(e,t,r){"use strict";r.d(t,{ab:function(){return f},li:function(){return g},QS:function(){return w},_v:function(){return m}});var n=r(468),i=(r(7658),null),s={},o=1,a=function(){return function(){function e(){this.id=["slot",o++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return e.prototype.hasValue=function(){for(var e=i;e;e=e.parent)if(this.id in e.slots){var t=e.slots[this.id];if(t===s)break;return e!==i&&(i.slots[this.id]=t),!0}return i&&(i.slots[this.id]=s),!1},e.prototype.getValue=function(){if(this.hasValue())return i.slots[this.id]},e.prototype.withValue=function(e,t,r,n){var s,o=(s={__proto__:null},s[this.id]=e,s),a=i;i={parent:a,slots:o};try{return t.apply(n,r)}finally{i=a}},e.bind=function(e){var t=i;return function(){var r=i;try{return i=t,e.apply(this,arguments)}finally{i=r}}},e.noContext=function(e,t,r){if(!i)return e.apply(r,t);var n=i;try{return i=null,e.apply(r,t)}finally{i=n}},e}()};function c(e){try{return e()}catch(t){}}var u="@wry/context:Slot",l=c((function(){return globalThis}))||c((function(){return r.g}))||Object.create(null),h=l,d=h[u]||Array[u]||function(e){try{Object.defineProperty(h,u,{value:e,enumerable:!1,writable:!1,configurable:!0})}finally{return e}}(a());d.bind,d.noContext;var f=new d,p=new WeakMap;function y(e){var t=p.get(e);return t||p.set(e,t={vars:new Set,dep:(0,n.dP)()}),t}function g(e){y(e).vars.forEach((function(t){return t.forgetCache(e)}))}function m(e){y(e).vars.forEach((function(t){return t.attachCache(e)}))}function w(e){var t=new Set,r=new Set,n=function(s){if(arguments.length>0){if(e!==s){e=s,t.forEach((function(e){y(e).dep.dirty(n),v(e)}));var o=Array.from(r);r.clear(),o.forEach((function(t){return t(e)}))}}else{var a=f.getValue();a&&(i(a),y(a).dep(n))}return e};n.onNextChange=function(e){return r.add(e),function(){r.delete(e)}};var i=n.attachCache=function(e){return t.add(e),y(e).vars.add(n),n};return n.forgetCache=function(e){return t.delete(e)},n}function v(e){e.broadcastWatches&&e.broadcastWatches()}},5359:function(e,t,r){"use strict";r.d(t,{f:function(){return At}});r(7658);var n=r(2900),i=r(9926);function s(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=o(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=function(){return"function"===typeof Symbol},h=function(e){return l()&&Boolean(Symbol[e])},d=function(e){return h(e)?Symbol[e]:"@@"+e};l()&&!h("observable")&&(Symbol.observable=Symbol("observable"));var f=d("iterator"),p=d("observable"),y=d("species");function g(e,t){var r=e[t];if(null!=r){if("function"!==typeof r)throw new TypeError(r+" is not a function");return r}}function m(e){var t=e.constructor;return void 0!==t&&(t=t[y],null===t&&(t=void 0)),void 0!==t?t:C}function w(e){return e instanceof C}function v(e){v.log?v.log(e):setTimeout((function(){throw e}))}function b(e){Promise.resolve().then((function(){try{e()}catch(t){v(t)}}))}function E(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"===typeof t)t();else{var r=g(t,"unsubscribe");r&&r.call(t)}}catch(n){v(n)}}function _(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function A(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length;++r)if(S(e,t[r].type,t[r].value),"closed"===e._state)break}}function S(e,t,r){e._state="running";var n=e._observer;try{var i=g(n,t);switch(t){case"next":i&&i.call(n,r);break;case"error":if(_(e),!i)throw r;i.call(n,r);break;case"complete":_(e),i&&i.call(n);break}}catch(s){v(s)}"closed"===e._state?E(e):"running"===e._state&&(e._state="ready")}function k(e,t,r){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void b((function(){return A(e)}))):void S(e,t,r);e._queue.push({type:t,value:r})}}var I=function(){function e(e,t){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var r=new T(this);try{this._cleanup=t.call(void 0,r)}catch(n){r.error(n)}"initializing"===this._state&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){"closed"!==this._state&&(_(this),E(this))},u(e,[{key:"closed",get:function(){return"closed"===this._state}}]),e}(),T=function(){function e(e){this._subscription=e}var t=e.prototype;return t.next=function(e){k(this._subscription,"next",e)},t.error=function(e){k(this._subscription,"error",e)},t.complete=function(){k(this._subscription,"complete")},u(e,[{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),C=function(){function e(t){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!==typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}var t=e.prototype;return t.subscribe=function(e){return"object"===typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new I(e,this._subscriber)},t.forEach=function(e){var t=this;return new Promise((function(r,n){if("function"===typeof e)var i=t.subscribe({next:function(t){try{e(t,s)}catch(r){n(r),i.unsubscribe()}},error:n,complete:r});else n(new TypeError(e+" is not a function"));function s(){i.unsubscribe(),r()}}))},t.map=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var r=m(this);return new r((function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(n){return r.error(n)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})}))},t.filter=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var r=m(this);return new r((function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(n){return r.error(n)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})}))},t.reduce=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var r=m(this),n=arguments.length>1,i=!1,s=arguments[1],o=s;return new r((function(r){return t.subscribe({next:function(t){var s=!i;if(i=!0,!s||n)try{o=e(o,t)}catch(a){return r.error(a)}else o=t},error:function(e){r.error(e)},complete:function(){if(!i&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(o),r.complete()}})}))},t.concat=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=m(this);return new i((function(t){var n,s=0;function o(e){n=e.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){s===r.length?(n=void 0,t.complete()):o(i.from(r[s++]))}})}return o(e),function(){n&&(n.unsubscribe(),n=void 0)}}))},t.flatMap=function(e){var t=this;if("function"!==typeof e)throw new TypeError(e+" is not a function");var r=m(this);return new r((function(n){var i=[],s=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(a){return n.error(a)}var s=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=i.indexOf(s);e>=0&&i.splice(e,1),o()}});i.push(s)},error:function(e){n.error(e)},complete:function(){o()}});function o(){s.closed&&0===i.length&&n.complete()}return function(){i.forEach((function(e){return e.unsubscribe()})),s.unsubscribe()}}))},t[p]=function(){return this},e.from=function(t){var r="function"===typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=g(t,p);if(n){var i=n.call(t);if(Object(i)!==i)throw new TypeError(i+" is not an object");return w(i)&&i.constructor===r?i:new r((function(e){return i.subscribe(e)}))}if(h("iterator")&&(n=g(t,f),n))return new r((function(e){b((function(){if(!e.closed){for(var r,i=s(n.call(t));!(r=i()).done;){var o=r.value;if(e.next(o),e.closed)return}e.complete()}}))}));if(Array.isArray(t))return new r((function(e){b((function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")},e.of=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i="function"===typeof this?this:e;return new i((function(e){b((function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}}))}))},u(e,null,[{key:y,get:function(){return this}}]),e}();function R(e,t){var r=(0,n.pi)({},e),i=function(e){r="function"===typeof e?(0,n.pi)((0,n.pi)({},r),e(r)):(0,n.pi)((0,n.pi)({},r),e)},s=function(){return(0,n.pi)({},r)};return Object.defineProperty(t,"setContext",{enumerable:!1,value:i}),Object.defineProperty(t,"getContext",{enumerable:!1,value:s}),t}l()&&Object.defineProperty(C,Symbol("extensions"),{value:{symbol:p,hostReportError:v},configurable:!0});var P=r(958);function x(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!==typeof t.query?(0,P.rY)(t.query)||void 0:""),t}function O(e){for(var t=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(e);r<n.length;r++){var s=n[r];if(t.indexOf(s)<0)throw __DEV__?new i.ej("illegal argument: ".concat(s)):new i.ej(26)}return e}function N(e,t){return t?t(e):C.of()}function D(e){return"function"===typeof e?new M(e):e}function B(e){return e.request.length<=1}var L=function(e){function t(t,r){var n=e.call(this,t)||this;return n.link=r,n}return(0,n.ZT)(t,e),t}(Error),M=function(){function e(e){e&&(this.request=e)}return e.empty=function(){return new e((function(){return C.of()}))},e.from=function(t){return 0===t.length?e.empty():t.map(D).reduce((function(e,t){return e.concat(t)}))},e.split=function(t,r,n){var i=D(r),s=D(n||new e(N));return B(i)&&B(s)?new e((function(e){return t(e)?i.request(e)||C.of():s.request(e)||C.of()})):new e((function(e,r){return t(e)?i.request(e,r)||C.of():s.request(e,r)||C.of()}))},e.execute=function(e,t){return e.request(R(t.context,x(O(t))))||C.of()},e.concat=function(t,r){var n=D(t);if(B(n))return __DEV__&&i.kG.warn(new L("You are calling concat on a terminating link, which will have no effect",n)),n;var s=D(r);return B(s)?new e((function(e){return n.request(e,(function(e){return s.request(e)||C.of()}))||C.of()})):new e((function(e,t){return n.request(e,(function(e){return s.request(e,t)||C.of()}))||C.of()}))},e.prototype.split=function(t,r,n){return this.concat(e.split(t,r,n||new e(N)))},e.prototype.concat=function(t){return e.concat(this,t)},e.prototype.request=function(e,t){throw __DEV__?new i.ej("request is not implemented"):new i.ej(21)},e.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},e.prototype.setOnError=function(e){return this.onError=e,this},e}(),U=M.execute,F="3.7.0",j=r(9526),V=r(1495),z=function(e,t){var r;try{r=JSON.stringify(e)}catch(s){var n=__DEV__?new i.ej("Network request failed. ".concat(t," is not serializable: ").concat(s.message)):new i.ej(23);throw n.parseError=s,n}return r},$=function(e,t){var r=e.getContext(),n=r.uri;return n||("function"===typeof t?t(e):t||"/graphql")},q=r(2067);function K(e){return!!e.body}function H(e){return!!e.getReader}function G(e){return!(!q.DN||!e[Symbol.asyncIterator])}function W(e){return!!e.stream}function Q(e){return!!e.arrayBuffer}function Y(e){return!!e.pipe}function J(e){var t,r=e[Symbol.asyncIterator]();return t={next:function(){return r.next()}},t[Symbol.asyncIterator]=function(){return this},t}function X(e){var t=null,r=null,n=!1,i=[],s=[];function o(e){if(!r){if(s.length){var t=s.shift();if(Array.isArray(t)&&t[0])return t[0]({value:e,done:!1})}i.push(e)}}function a(e){r=e;var n=s.slice();n.forEach((function(t){t[1](e)})),!t||t()}function c(){n=!0;var e=s.slice();e.forEach((function(e){e[0]({value:void 0,done:!0})})),!t||t()}function u(){return new Promise((function(e,t){return r?t(r):i.length?e({value:i.shift(),done:!1}):n?e({value:void 0,done:!0}):void s.push([e,t])}))}t=function(){t=null,e.removeListener("data",o),e.removeListener("error",a),e.removeListener("end",c),e.removeListener("finish",c),e.removeListener("close",c)},e.on("data",o),e.on("error",a),e.on("end",c),e.on("finish",c),e.on("close",c);var l={next:function(){return u()}};return q.DN&&(l[Symbol.asyncIterator]=function(){return this}),l}function Z(e){var t=!1,r={next:function(){return t?Promise.resolve({value:void 0,done:!0}):(t=!0,new Promise((function(t,r){e.then((function(e){t({value:e,done:!1})})).catch(r)})))}};return q.DN&&(r[Symbol.asyncIterator]=function(){return this}),r}function ee(e){var t={next:function(){return e.read()}};return q.DN&&(t[Symbol.asyncIterator]=function(){return this}),t}function te(e){var t=e;if(K(e)&&(t=e.body),G(t))return J(t);if(H(t))return ee(t.getReader());if(W(t))return ee(t.stream().getReader());if(Q(t))return Z(t.arrayBuffer());if(Y(t))return X(t);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var re=function(e,t,r){var n=new Error(r);throw n.name="ServerError",n.response=e,n.statusCode=e.status,n.result=t,n},ne=Object.prototype.hasOwnProperty;function ie(e,t){var r,i,s;return(0,n.mG)(this,void 0,void 0,(function(){var o,a,c,u,l,h,d,f,p,y,g,m,w,v,b,E,_,A,S,k;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:if(void 0===TextDecoder)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");o=new TextDecoder("utf-8"),a=null===(r=e.headers)||void 0===r?void 0:r.get("content-type"),c="boundary=",u=(null===a||void 0===a?void 0:a.includes(c))?null===a||void 0===a?void 0:a.substring((null===a||void 0===a?void 0:a.indexOf(c))+c.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",l="--".concat(u),h="",d=te(e),f=!0,n.label=1;case 1:return f?[4,d.next()]:[3,3];case 2:p=n.sent(),y=p.value,g=p.done,m="string"===typeof y?y:o.decode(y),f=!g,h+=m,w=h.indexOf(l);while(w>-1){if(v=void 0,k=[h.slice(0,w),h.slice(w+l.length)],v=k[0],h=k[1],v.trim()){if(b=v.indexOf("\r\n\r\n"),E=se(v.slice(0,b)),_=E["content-type"],_&&-1===_.toLowerCase().indexOf("application/json"))throw new Error("Unsupported patch content type: application/json is required.");A=v.slice(b);try{S=oe(e,A.replace("\r\n","")),(Object.keys(S).length>1||"data"in S||"incremental"in S||"errors"in S)&&(null===(i=t.next)||void 0===i||i.call(t,S))}catch(I){ae(I,t)}}w=h.indexOf(l)}return[3,1];case 3:return null===(s=t.complete)||void 0===s||s.call(t),[2]}}))}))}function se(e){var t={};return e.split("\n").forEach((function(e){var r=e.indexOf(":");if(r>-1){var n=e.slice(0,r).trim().toLowerCase(),i=e.slice(r+1).trim();t[n]=i}})),t}function oe(e,t){if(e.status>=300){var r=function(){try{return JSON.parse(t)}catch(e){return t}};re(e,r(),"Response not successful: Received status code ".concat(e.status))}try{return JSON.parse(t)}catch(i){var n=i;throw n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=t,n}}function ae(e,t){var r,n;"AbortError"!==e.name&&(e.result&&e.result.errors&&e.result.data&&(null===(r=t.next)||void 0===r||r.call(t,e.result)),null===(n=t.error)||void 0===n||n.call(t,e))}function ce(e,t,r){ue(t)(e).then((function(e){var t,n;null===(t=r.next)||void 0===t||t.call(r,e),null===(n=r.complete)||void 0===n||n.call(r)})).catch((function(e){return ae(e,r)}))}function ue(e){return function(t){return t.text().then((function(e){return oe(t,e)})).then((function(r){return t.status>=300&&re(t,r,"Response not successful: Received status code ".concat(t.status)),Array.isArray(r)||ne.call(r,"data")||ne.call(r,"errors")||re(t,r,"Server response was missing for query '".concat(Array.isArray(e)?e.map((function(e){return e.operationName})):e.operationName,"'.")),r}))}}var le=function(e){if(!e&&"undefined"===typeof fetch)throw __DEV__?new i.ej("\n\"fetch\" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:\n\nimport fetch from 'cross-fetch';\nimport { ApolloClient, HttpLink } from '@apollo/client';\nconst client = new ApolloClient({\n  link: new HttpLink({ uri: '/graphql', fetch })\n});\n    "):new i.ej(22)},he=(r(541),r(7872));function de(e){return`"${e.replace(fe,pe)}"`}const fe=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function pe(e){return ye[e.charCodeAt(0)]}const ye=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];function ge(e){return(0,j.Vn)(e,we)}const me=80,we={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>ve(e.definitions,"\n\n")},OperationDefinition:{leave(e){const t=Ee("(",ve(e.variableDefinitions,", "),")"),r=ve([e.operation,ve([e.name,t]),ve(e.directives," ")]," ");return("query"===r?"":r+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:r,directives:n})=>e+": "+t+Ee(" = ",r)+Ee(" ",ve(n," "))},SelectionSet:{leave:({selections:e})=>be(e)},Field:{leave({alias:e,name:t,arguments:r,directives:n,selectionSet:i}){const s=Ee("",e,": ")+t;let o=s+Ee("(",ve(r,", "),")");return o.length>me&&(o=s+Ee("(\n",_e(ve(r,"\n")),"\n)")),ve([o,ve(n," "),i]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+Ee(" ",ve(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:r})=>ve(["...",Ee("on ",e),ve(t," "),r]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:r,directives:n,selectionSet:i})=>`fragment ${e}${Ee("(",ve(r,", "),")")} on ${t} ${Ee("",ve(n," ")," ")}`+i},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?(0,he.LZ)(e):de(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+ve(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+ve(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+Ee("(",ve(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:r})=>Ee("",e,"\n")+ve(["schema",ve(t," "),be(r)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:r})=>Ee("",e,"\n")+ve(["scalar",t,ve(r," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>Ee("",e,"\n")+ve(["type",t,Ee("implements ",ve(r," & ")),ve(n," "),be(i)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:r,type:n,directives:i})=>Ee("",e,"\n")+t+(Ae(r)?Ee("(\n",_e(ve(r,"\n")),"\n)"):Ee("(",ve(r,", "),")"))+": "+n+Ee(" ",ve(i," "))},InputValueDefinition:{leave:({description:e,name:t,type:r,defaultValue:n,directives:i})=>Ee("",e,"\n")+ve([t+": "+r,Ee("= ",n),ve(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:r,directives:n,fields:i})=>Ee("",e,"\n")+ve(["interface",t,Ee("implements ",ve(r," & ")),ve(n," "),be(i)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:r,types:n})=>Ee("",e,"\n")+ve(["union",t,ve(r," "),Ee("= ",ve(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:r,values:n})=>Ee("",e,"\n")+ve(["enum",t,ve(r," "),be(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:r})=>Ee("",e,"\n")+ve([t,ve(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:r,fields:n})=>Ee("",e,"\n")+ve(["input",t,ve(r," "),be(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:r,repeatable:n,locations:i})=>Ee("",e,"\n")+"directive @"+t+(Ae(r)?Ee("(\n",_e(ve(r,"\n")),"\n)"):Ee("(",ve(r,", "),")"))+(n?" repeatable":"")+" on "+ve(i," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>ve(["extend schema",ve(e," "),be(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>ve(["extend scalar",e,ve(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>ve(["extend type",e,Ee("implements ",ve(t," & ")),ve(r," "),be(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:r,fields:n})=>ve(["extend interface",e,Ee("implements ",ve(t," & ")),ve(r," "),be(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:r})=>ve(["extend union",e,ve(t," "),Ee("= ",ve(r," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:r})=>ve(["extend enum",e,ve(t," "),be(r)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:r})=>ve(["extend input",e,ve(t," "),be(r)]," ")}};function ve(e,t=""){var r;return null!==(r=null===e||void 0===e?void 0:e.filter((e=>e)).join(t))&&void 0!==r?r:""}function be(e){return Ee("{\n",_e(ve(e,"\n")),"\n}")}function Ee(e,t,r=""){return null!=t&&""!==t?e+t+r:""}function _e(e){return Ee("  ",e.replace(/\n/g,"\n  "))}function Ae(e){var t;return null!==(t=null===e||void 0===e?void 0:e.some((e=>e.includes("\n"))))&&void 0!==t&&t}var Se={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},ke={accept:"*/*","content-type":"application/json"},Ie={method:"POST"},Te={http:Se,headers:ke,options:Ie},Ce=function(e,t){return t(e)};function Re(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var s={},o={};r.forEach((function(e){s=(0,n.pi)((0,n.pi)((0,n.pi)({},s),e.options),{headers:(0,n.pi)((0,n.pi)({},s.headers),e.headers)}),e.credentials&&(s.credentials=e.credentials),o=(0,n.pi)((0,n.pi)({},o),e.http)})),s.headers=Pe(s.headers,o.preserveHeaderCase);var a=e.operationName,c=e.extensions,u=e.variables,l=e.query,h={operationName:a,variables:u};return o.includeExtensions&&(h.extensions=c),o.includeQuery&&(h.query=t(l,ge)),{options:s,body:h}}function Pe(e,t){if(!t){var r=Object.create(null);return Object.keys(Object(e)).forEach((function(t){r[t.toLowerCase()]=e[t]})),r}var n=Object.create(null);Object.keys(Object(e)).forEach((function(t){n[t.toLowerCase()]={originalName:t,value:e[t]}}));var i=Object.create(null);return Object.keys(n).forEach((function(e){i[n[e].originalName]=n[e].value})),i}var xe=function(){if("undefined"===typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController,t=e.signal;return{controller:e,signal:t}};function Oe(e,t){var r=[],n=function(e,t){r.push("".concat(e,"=").concat(encodeURIComponent(t)))};if("query"in t&&n("query",t.query),t.operationName&&n("operationName",t.operationName),t.variables){var i=void 0;try{i=z(t.variables,"Variables map")}catch(h){return{parseError:h}}n("variables",i)}if(t.extensions){var s=void 0;try{s=z(t.extensions,"Extensions map")}catch(h){return{parseError:h}}n("extensions",s)}var o="",a=e,c=e.indexOf("#");-1!==c&&(o=e.substr(c),a=e.substr(0,c));var u=-1===a.indexOf("?")?"?":"&",l=a+u+r.join("&")+o;return{newURI:l}}function Ne(e){return new C((function(t){t.error(e)}))}var De=(0,i.wY)((function(){return fetch})),Be=function(e){void 0===e&&(e={});var t=e.uri,r=void 0===t?"/graphql":t,s=e.fetch,o=e.print,a=void 0===o?Ce:o,c=e.includeExtensions,u=e.preserveHeaderCase,l=e.useGETForQueries,h=e.includeUnusedVariables,d=void 0!==h&&h,f=(0,n._T)(e,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&le(s||De);var p={http:{includeExtensions:c,preserveHeaderCase:u},options:f.fetchOptions,credentials:f.credentials,headers:f.headers};return new M((function(e){var t=$(e,r),o=e.getContext(),c={};if(o.clientAwareness){var u=o.clientAwareness,h=u.name,f=u.version;h&&(c["apollographql-client-name"]=h),f&&(c["apollographql-client-version"]=f)}var y,g=(0,n.pi)((0,n.pi)({},c),o.headers),m={http:o.http,options:o.fetchOptions,credentials:o.credentials,headers:g},w=Re(e,a,Te,p,m),v=w.options,b=w.body;if(b.variables&&!d){var E=new Set(Object.keys(b.variables));(0,j.Vn)(e.query,{Variable:function(e,t,r){r&&"VariableDefinition"!==r.kind&&E.delete(e.name.value)}}),E.size&&(b.variables=(0,n.pi)({},b.variables),E.forEach((function(e){delete b.variables[e]})))}if(!v.signal){var _=xe(),A=_.controller,S=_.signal;y=A,y&&(v.signal=S)}var k=function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation};if(l&&!e.query.definitions.some(k)&&(v.method="GET"),(0,V.FS)(["defer"],e.query)&&(v.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),"GET"===v.method){var I=Oe(t,b),T=I.newURI,R=I.parseError;if(R)return Ne(R);t=T}else try{v.body=z(b,"Payload")}catch(R){return Ne(R)}return new C((function(r){var n=s||(0,i.wY)((function(){return fetch}))||De;return n(t,v).then((function(t){var n;e.setContext({response:t});var i=null===(n=t.headers)||void 0===n?void 0:n.get("content-type");return null!==i&&/^multipart\/mixed/i.test(i)?ie(t,r):ce(t,e,r)})).catch((function(e){return ae(e,r)})),function(){y&&y.abort()}}))}))},Le=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,Be(t).request)||this;return r.options=t,r}return(0,n.ZT)(t,e),t}(M),Me=r(2713);function Ue(e){return!!e.incremental}var Fe=r(6631);function je(e,t,r){return new C((function(n){var i=n.next,s=n.error,o=n.complete,a=0,c=!1,u={then:function(e){return new Promise((function(t){return t(e())}))}};function l(e,t){return e?function(t){++a;var r=function(){return e(t)};u=u.then(r,r).then((function(e){--a,i&&i.call(n,e),c&&h.complete()}),(function(e){throw--a,e})).catch((function(e){s&&s.call(n,e)}))}:function(e){return t&&t.call(n,e)}}var h={next:l(t,i),error:l(r,s),complete:function(){c=!0,a||o&&o.call(n)}},d=e.subscribe(h);return function(){return d.unsubscribe()}}))}function Ve(e){return e.errors&&e.errors.length>0||!1}var ze=r(3625),$e=r(7491),qe=r(6867),Ke=r(1073);function He(e,t,r){var n=[];e.forEach((function(e){return e[t]&&n.push(e)})),n.forEach((function(e){return e[t](r)}))}function Ge(e){function t(t){Object.defineProperty(e,t,{value:C})}return q.aS&&Symbol.species&&t(Symbol.species),t("@@species"),e}function We(e){return e&&"function"===typeof e.then}var Qe=function(e){function t(t){var r=e.call(this,(function(e){return r.addObserver(e),function(){return r.removeObserver(e)}}))||this;return r.observers=new Set,r.promise=new Promise((function(e,t){r.resolve=e,r.reject=t})),r.handlers={next:function(e){null!==r.sub&&(r.latest=["next",e],r.notify("next",e),He(r.observers,"next",e))},error:function(e){var t=r.sub;null!==t&&(t&&setTimeout((function(){return t.unsubscribe()})),r.sub=null,r.latest=["error",e],r.reject(e),r.notify("error",e),He(r.observers,"error",e))},complete:function(){var e=r.sub;if(null!==e){var t=r.sources.shift();t?We(t)?t.then((function(e){return r.sub=e.subscribe(r.handlers)})):r.sub=t.subscribe(r.handlers):(e&&setTimeout((function(){return e.unsubscribe()})),r.sub=null,r.latest&&"next"===r.latest[0]?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),He(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(e){r.reject(e),r.sources=[],r.handlers.complete()},r.promise.catch((function(e){})),"function"===typeof t&&(t=[new C(t)]),We(t)?t.then((function(e){return r.start(e)}),r.handlers.error):r.start(t),r}return(0,n.ZT)(t,e),t.prototype.start=function(e){void 0===this.sub&&(this.sources=Array.from(e),this.handlers.complete())},t.prototype.deliverLastMessage=function(e){if(this.latest){var t=this.latest[0],r=e[t];r&&r.call(e,this.latest[1]),null===this.sub&&"next"===t&&e.complete&&e.complete()}},t.prototype.addObserver=function(e){this.observers.has(e)||(this.deliverLastMessage(e),this.observers.add(e))},t.prototype.removeObserver=function(e){this.observers.delete(e)&&this.observers.size<1&&this.handlers.complete()},t.prototype.notify=function(e,t){var r=this.nextResultListeners;r.size&&(this.nextResultListeners=new Set,r.forEach((function(r){return r(e,t)})))},t.prototype.beforeNext=function(e){var t=!1;this.nextResultListeners.add((function(r,n){t||(t=!0,e(r,n))}))},t}(C);Ge(Qe);var Ye=r(9735),Je=r(1328);function Xe(e){return e.hasOwnProperty("graphQLErrors")}var Ze,et=function(e){var t="";if((0,Je.O)(e.graphQLErrors)||(0,Je.O)(e.clientErrors)){var r=(e.graphQLErrors||[]).concat(e.clientErrors||[]);r.forEach((function(e){var r=e?e.message:"Error message not found.";t+="".concat(r,"\n")}))}return e.networkError&&(t+="".concat(e.networkError.message,"\n")),t=t.replace(/\n$/,""),t},tt=function(e){function t(r){var n=r.graphQLErrors,i=r.clientErrors,s=r.networkError,o=r.errorMessage,a=r.extraInfo,c=e.call(this,o)||this;return c.graphQLErrors=n||[],c.clientErrors=i||[],c.networkError=s||null,c.message=o||et(c),c.extraInfo=a,c.__proto__=t.prototype,c}return(0,n.ZT)(t,e),t}(Error);function rt(e){return!!e&&e<7}(function(e){e[e["loading"]=1]="loading",e[e["setVariables"]=2]="setVariables",e[e["fetchMore"]=3]="fetchMore",e[e["refetch"]=4]="refetch",e[e["poll"]=6]="poll",e[e["ready"]=7]="ready",e[e["error"]=8]="error"})(Ze||(Ze={}));var nt=r(8257),it=Object.assign,st=Object.hasOwnProperty,ot=function(e){function t(t){var r=t.queryManager,i=t.queryInfo,s=t.options,o=e.call(this,(function(e){try{var r=e._subscription._observer;r&&!r.error&&(r.error=ct)}catch(t){}var n=!o.observers.size;o.observers.add(e);var i=o.last;return i&&i.error?e.error&&e.error(i.error):i&&i.result&&e.next&&e.next(i.result),n&&o.reobserve().catch((function(){})),function(){o.observers.delete(e)&&!o.observers.size&&o.tearDownQuery()}}))||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=i,o.queryManager=r,o.isTornDown=!1;var a=r.defaultOptions.watchQuery,c=void 0===a?{}:a,u=c.fetchPolicy,l=void 0===u?"cache-first":u,h=s.fetchPolicy,d=void 0===h?l:h,f=s.initialFetchPolicy,p=void 0===f?"standby"===d?l:d:f;o.options=(0,n.pi)((0,n.pi)({},s),{initialFetchPolicy:p,fetchPolicy:d}),o.queryId=i.queryId||r.generateQueryId();var y=(0,P.$H)(o.query);return o.queryName=y&&y.name&&y.name.value,o}return(0,n.ZT)(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),t.prototype.result=function(){var e=this;return new Promise((function(t,r){var n={next:function(r){t(r),e.observers.delete(n),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout((function(){i.unsubscribe()}),0)},error:r},i=e.subscribe(n)}))},t.prototype.getCurrentResult=function(e){void 0===e&&(e=!0);var t=this.getLastResult(!0),r=this.queryInfo.networkStatus||t&&t.networkStatus||Ze.ready,i=(0,n.pi)((0,n.pi)({},t),{loading:rt(r),networkStatus:r}),s=this.options.fetchPolicy,o=void 0===s?"cache-first":s;if("network-only"===o||"no-cache"===o||"standby"===o||this.queryManager.transform(this.options.query).hasForcedResolvers);else{var a=this.queryInfo.getDiff();(a.complete||this.options.returnPartialData)&&(i.data=a.result),(0,Me.D)(i.data,{})&&(i.data=void 0),a.complete?(delete i.partial,!a.complete||i.networkStatus!==Ze.loading||"cache-first"!==o&&"cache-only"!==o||(i.networkStatus=Ze.ready,i.loading=!1)):i.partial=!0,!__DEV__||a.complete||this.options.partialRefetch||i.loading||i.data||i.error||ut(a.missing)}return e&&this.updateLastResult(i),i},t.prototype.isDifferentFromLastResult=function(e){return!this.last||!(0,Me.D)(this.last.result,e)},t.prototype.getLast=function(e,t){var r=this.last;if(r&&r[e]&&(!t||(0,Me.D)(r.variables,this.variables)))return r[e]},t.prototype.getLastResult=function(e){return this.getLast("result",e)},t.prototype.getLastError=function(e){return this.getLast("error",e)},t.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},t.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},t.prototype.refetch=function(e){var t,r={pollInterval:0},s=this.options.fetchPolicy;if(r.fetchPolicy="cache-and-network"===s?s:"no-cache"===s?"no-cache":"network-only",__DEV__&&e&&st.call(e,"variables")){var o=(0,P.iW)(this.query),a=o.variableDefinitions;a&&a.some((function(e){return"variables"===e.variable.name.value}))||__DEV__&&i.kG.warn("Called refetch(".concat(JSON.stringify(e),") for query ").concat((null===(t=o.name)||void 0===t?void 0:t.value)||JSON.stringify(o),", which does not declare a $variables variable.\nDid you mean to call refetch(variables) instead of refetch({ variables })?"))}return e&&!(0,Me.D)(this.options.variables,e)&&(r.variables=this.options.variables=(0,n.pi)((0,n.pi)({},this.options.variables),e)),this.queryInfo.resetLastWrite(),this.reobserve(r,Ze.refetch)},t.prototype.fetchMore=function(e){var t=this,r=(0,n.pi)((0,n.pi)({},e.query?e:(0,n.pi)((0,n.pi)((0,n.pi)((0,n.pi)({},this.options),{query:this.query}),e),{variables:(0,n.pi)((0,n.pi)({},this.options.variables),e.variables)})),{fetchPolicy:"no-cache"}),i=this.queryManager.generateQueryId(),s=this.queryInfo,o=s.networkStatus;s.networkStatus=Ze.fetchMore,r.notifyOnNetworkStatusChange&&this.observe();var a=new Set;return this.queryManager.fetchQuery(i,r,Ze.fetchMore).then((function(n){return t.queryManager.removeQuery(i),s.networkStatus===Ze.fetchMore&&(s.networkStatus=o),t.queryManager.cache.batch({update:function(i){var s=e.updateQuery;s?i.updateQuery({query:t.query,variables:t.variables,returnPartialData:!0,optimistic:!1},(function(e){return s(e,{fetchMoreResult:n.data,variables:r.variables})})):i.writeQuery({query:r.query,variables:r.variables,data:n.data})},onWatchUpdated:function(e){a.add(e.query)}}),n})).finally((function(){a.has(t.query)||at(t)}))},t.prototype.subscribeToMore=function(e){var t=this,r=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(r){var n=e.updateQuery;n&&t.updateQuery((function(e,t){var i=t.variables;return n(e,{subscriptionData:r,variables:i})}))},error:function(t){e.onError?e.onError(t):__DEV__&&i.kG.error("Unhandled GraphQL subscription error",t)}});return this.subscriptions.add(r),function(){t.subscriptions.delete(r)&&r.unsubscribe()}},t.prototype.setOptions=function(e){return this.reobserve(e)},t.prototype.setVariables=function(e){return(0,Me.D)(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:e},Ze.setVariables):Promise.resolve())},t.prototype.updateQuery=function(e){var t=this.queryManager,r=t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,n=e(r,{variables:this.variables});n&&(t.cache.writeQuery({query:this.options.query,data:n,variables:this.variables}),t.broadcastQueries())},t.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},t.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},t.prototype.applyNextFetchPolicy=function(e,t){if(t.nextFetchPolicy){var r=t.fetchPolicy,n=void 0===r?"cache-first":r,i=t.initialFetchPolicy,s=void 0===i?n:i;"standby"===n||("function"===typeof t.nextFetchPolicy?t.fetchPolicy=t.nextFetchPolicy(n,{reason:e,options:t,observable:this,initialFetchPolicy:s}):t.fetchPolicy="variables-changed"===e?s:t.nextFetchPolicy)}return t.fetchPolicy},t.prototype.fetch=function(e,t){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,e,t)},t.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var t=this,r=t.pollingInfo,n=t.options.pollInterval;if(n){if(!r||r.interval!==n){__DEV__?(0,i.kG)(n,"Attempted to start a polling query without a polling interval."):(0,i.kG)(n,12);var s=r||(this.pollingInfo={});s.interval=n;var o=function(){e.pollingInfo&&(rt(e.queryInfo.networkStatus)?a():e.reobserve({fetchPolicy:"no-cache"===e.options.initialFetchPolicy?"no-cache":"network-only"},Ze.poll).then(a,a))},a=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(o,t.interval))};a()}}else r&&(clearTimeout(r.timeout),delete this.pollingInfo)}},t.prototype.updateLastResult=function(e,t){return void 0===t&&(t=this.variables),this.last=(0,n.pi)((0,n.pi)({},this.last),{result:this.queryManager.assumeImmutableResults?e:(0,Ye.X)(e),variables:t}),(0,Je.O)(e.errors)||delete this.last.error,this.last},t.prototype.reobserve=function(e,t){var r=this;this.isTornDown=!1;var i=t===Ze.refetch||t===Ze.fetchMore||t===Ze.poll,s=this.options.variables,o=this.options.fetchPolicy,a=(0,nt.o)(this.options,e||{}),c=i?a:it(this.options,a);i||(this.updatePolling(),e&&e.variables&&!(0,Me.D)(e.variables,s)&&"standby"!==c.fetchPolicy&&c.fetchPolicy===o&&(this.applyNextFetchPolicy("variables-changed",c),void 0===t&&(t=Ze.setVariables)));var u=c.variables&&(0,n.pi)({},c.variables),l=this.fetch(c,t),h={next:function(e){r.reportResult(e,u)},error:function(e){r.reportError(e,u)}};return i||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=l,this.observer=h),l.addObserver(h),l.promise},t.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},t.prototype.reportResult=function(e,t){var r=this.getLastError();(r||this.isDifferentFromLastResult(e))&&((r||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,t),He(this.observers,"next",e))},t.prototype.reportError=function(e,t){var r=(0,n.pi)((0,n.pi)({},this.getLastResult()),{error:e,errors:e.graphQLErrors,networkStatus:Ze.error,loading:!1});this.updateLastResult(r,t),He(this.observers,"error",this.last.error=e)},t.prototype.hasObservers=function(){return this.observers.size>0},t.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},t}(C);function at(e){var t=e.options,r=t.fetchPolicy,n=t.nextFetchPolicy;return"cache-and-network"===r||"network-only"===r?e.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=n,"function"===typeof n?n.apply(this,arguments):r}}):e.reobserve()}function ct(e){__DEV__&&i.kG.error("Unhandled error",e.message,e.stack)}function ut(e){__DEV__&&e&&__DEV__&&i.kG.debug("Missing cache result fields: ".concat(JSON.stringify(e)),e)}Ge(ot);var lt=r(544),ht=r(2157),dt=r(9184),ft=function(){function e(e){var t=e.cache,r=e.client,n=e.resolvers,i=e.fragmentMatcher;this.cache=t,r&&(this.client=r),n&&this.addResolvers(n),i&&this.setFragmentMatcher(i)}return e.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach((function(e){t.resolvers=(0,lt.Ee)(t.resolvers,e)})):this.resolvers=(0,lt.Ee)(this.resolvers,e)},e.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},e.prototype.getResolvers=function(){return this.resolvers||{}},e.prototype.runResolvers=function(e){var t=e.document,r=e.remoteResult,i=e.context,s=e.variables,o=e.onlyRunForcedResolvers,a=void 0!==o&&o;return(0,n.mG)(this,void 0,void 0,(function(){return(0,n.Jh)(this,(function(e){return t?[2,this.resolveDocument(t,r.data,i,s,this.fragmentMatcher,a).then((function(e){return(0,n.pi)((0,n.pi)({},r),{data:e.result})}))]:[2,r]}))}))},e.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},e.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},e.prototype.clientQuery=function(e){return(0,V.FS)(["client"],e)&&this.resolvers?e:null},e.prototype.serverQuery=function(e){return(0,ze.ob)(e)},e.prototype.prepareContext=function(e){var t=this.cache;return(0,n.pi)((0,n.pi)({},e),{cache:t,getCacheKey:function(e){return t.identify(e)}})},e.prototype.addExportedVariables=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),(0,n.mG)(this,void 0,void 0,(function(){return(0,n.Jh)(this,(function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,t)||{},this.prepareContext(r),t).then((function(e){return(0,n.pi)((0,n.pi)({},t),e.exportedVariables)}))]:[2,(0,n.pi)({},t)]}))}))},e.prototype.shouldForceResolvers=function(e){var t=!1;return(0,j.Vn)(e,{Directive:{enter:function(e){if("client"===e.name.value&&e.arguments&&(t=e.arguments.some((function(e){return"always"===e.name.value&&"BooleanValue"===e.value.kind&&!0===e.value.value})),t))return j.$_}}}),t},e.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:(0,ze.aL)(e),variables:t,returnPartialData:!0,optimistic:!1}).result},e.prototype.resolveDocument=function(e,t,r,i,s,o){return void 0===r&&(r={}),void 0===i&&(i={}),void 0===s&&(s=function(){return!0}),void 0===o&&(o=!1),(0,n.mG)(this,void 0,void 0,(function(){var a,c,u,l,h,d,f,p,y;return(0,n.Jh)(this,(function(g){return a=(0,P.p$)(e),c=(0,P.kU)(e),u=(0,ht.F)(c),l=a.operation,h=l?l.charAt(0).toUpperCase()+l.slice(1):"Query",d=this,f=d.cache,p=d.client,y={fragmentMap:u,context:(0,n.pi)((0,n.pi)({},r),{cache:f,client:p}),variables:i,fragmentMatcher:s,defaultOperationType:h,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(a.selectionSet,t,y).then((function(e){return{result:e,exportedVariables:y.exportedVariables}}))]}))}))},e.prototype.resolveSelectionSet=function(e,t,r){return(0,n.mG)(this,void 0,void 0,(function(){var s,o,a,c,u,l=this;return(0,n.Jh)(this,(function(h){return s=r.fragmentMap,o=r.context,a=r.variables,c=[t],u=function(e){return(0,n.mG)(l,void 0,void 0,(function(){var u,l;return(0,n.Jh)(this,(function(n){return(0,V.LZ)(e,a)?(0,$e.My)(e)?[2,this.resolveField(e,t,r).then((function(t){var r;"undefined"!==typeof t&&c.push((r={},r[(0,$e.u2)(e)]=t,r))}))]:((0,$e.Ao)(e)?u=e:(u=s[e.name.value],__DEV__?(0,i.kG)(u,"No fragment named ".concat(e.name.value)):(0,i.kG)(u,11)),u&&u.typeCondition&&(l=u.typeCondition.name.value,r.fragmentMatcher(t,l,o))?[2,this.resolveSelectionSet(u.selectionSet,t,r).then((function(e){c.push(e)}))]:[2]):[2]}))}))},[2,Promise.all(e.selections.map(u)).then((function(){return(0,lt.bw)(c)}))]}))}))},e.prototype.resolveField=function(e,t,r){return(0,n.mG)(this,void 0,void 0,(function(){var i,s,o,a,c,u,l,h,d,f=this;return(0,n.Jh)(this,(function(n){return i=r.variables,s=e.name.value,o=(0,$e.u2)(e),a=s!==o,c=t[o]||t[s],u=Promise.resolve(c),r.onlyRunForcedResolvers&&!this.shouldForceResolvers(e)||(l=t.__typename||r.defaultOperationType,h=this.resolvers&&this.resolvers[l],h&&(d=h[a?s:o],d&&(u=Promise.resolve(dt.ab.withValue(this.cache,d,[t,(0,$e.NC)(e,i),r.context,{field:e,fragmentMap:r.fragmentMap}]))))),[2,u.then((function(t){return void 0===t&&(t=c),e.directives&&e.directives.forEach((function(e){"export"===e.name.value&&e.arguments&&e.arguments.forEach((function(e){"as"===e.name.value&&"StringValue"===e.value.kind&&(r.exportedVariables[e.value.value]=t)}))})),e.selectionSet?null==t?t:Array.isArray(t)?f.resolveSubSelectedArray(e,t,r):e.selectionSet?f.resolveSelectionSet(e.selectionSet,t,r):void 0:t}))]}))}))},e.prototype.resolveSubSelectedArray=function(e,t,r){var n=this;return Promise.all(t.map((function(t){return null===t?null:Array.isArray(t)?n.resolveSubSelectedArray(e,t,r):e.selectionSet?n.resolveSelectionSet(e.selectionSet,t,r):void 0})))},e}(),pt=new(q.mr?WeakMap:Map);function yt(e,t){var r=e[t];"function"===typeof r&&(e[t]=function(){return pt.set(e,(pt.get(e)+1)%1e15),r.apply(this,arguments)})}function gt(e){e["notifyTimeout"]&&(clearTimeout(e["notifyTimeout"]),e["notifyTimeout"]=void 0)}var mt=function(){function e(e,t){void 0===t&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=e.cache;pt.has(r)||(pt.set(r,0),yt(r,"evict"),yt(r,"modify"),yt(r,"reset"))}return e.prototype.init=function(e){var t=e.networkStatus||Ze.loading;return this.variables&&this.networkStatus!==Ze.loading&&!(0,Me.D)(this.variables,e.variables)&&(t=Ze.setVariables),(0,Me.D)(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},e.prototype.reset=function(){gt(this),this.dirty=!1},e.prototype.getDiff=function(e){void 0===e&&(e=this.variables);var t=this.getDiffOptions(e);if(this.lastDiff&&(0,Me.D)(t,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var r=this.observableQuery;if(r&&"no-cache"===r.options.fetchPolicy)return{complete:!1};var n=this.cache.diff(t);return this.updateLastDiff(n,t),n},e.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},e.prototype.getDiffOptions=function(e){var t;return void 0===e&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:null===(t=this.observableQuery)||void 0===t?void 0:t.options.canonizeResults}},e.prototype.setDiff=function(e){var t=this,r=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),this.dirty||(0,Me.D)(r&&r.result,e&&e.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout((function(){return t.notify()}),0)))},e.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e["queryInfo"]=this,this.listeners.add(this.oqListener=function(){var r=t.getDiff();r.fromOptimisticTransaction?e["observe"]():at(e)})):delete this.oqListener)},e.prototype.notify=function(){var e=this;gt(this),this.shouldNotify()&&this.listeners.forEach((function(t){return t(e)})),this.dirty=!1},e.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(rt(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if("cache-only"!==e&&"cache-and-network"!==e)return!1}return!0},e.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=e.prototype.cancel,this.subscriptions.forEach((function(e){return e.unsubscribe()}));var t=this.observableQuery;t&&t.stopPolling()}},e.prototype.cancel=function(){},e.prototype.updateWatch=function(e){var t=this;void 0===e&&(e=this.variables);var r=this.observableQuery;if(!r||"no-cache"!==r.options.fetchPolicy){var i=(0,n.pi)((0,n.pi)({},this.getDiffOptions(e)),{watcher:this,callback:function(e){return t.setDiff(e)}});this.lastWatch&&(0,Me.D)(i,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},e.prototype.resetLastWrite=function(){this.lastWrite=void 0},e.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===pt.get(this.cache)&&(0,Me.D)(t,r.variables)&&(0,Me.D)(e.data,r.result.data))},e.prototype.markResult=function(e,t,r,n){var i=this,s=(0,Je.O)(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&(0,Je.O)(e.incremental)){var o=this.getDiff().result,a=new lt.w0;e.incremental.forEach((function(e){for(var t=e.data,r=e.path,n=e.errors,i=r.length-1;i>=0;--i){var c=r[i],u=!isNaN(+c),l=u?[]:{};l[c]=t,t=l}n&&s.push.apply(s,n),o=a.merge(o,t)})),e.data=o}this.graphQLErrors=s,"no-cache"===r.fetchPolicy?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):0!==n&&(wt(e,r.errorPolicy)?this.cache.performTransaction((function(s){if(i.shouldWrite(e,r.variables))s.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:1===n}),i.lastWrite={result:e,variables:r.variables,dmCount:pt.get(i.cache)};else if(i.lastDiff&&i.lastDiff.diff.complete)return void(e.data=i.lastDiff.diff.result);var o=i.getDiffOptions(r.variables),a=s.diff(o);i.stopped||i.updateWatch(r.variables),i.updateLastDiff(a,o),a.complete&&(e.data=a.result)})):this.lastWrite=void 0)},e.prototype.markReady=function(){return this.networkError=null,this.networkStatus=Ze.ready},e.prototype.markError=function(e){return this.networkStatus=Ze.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},e}();function wt(e,t){void 0===t&&(t="none");var r="ignore"===t||"all"===t,n=!Ve(e);return!n&&r&&e.data&&(n=!0),n}var vt=Object.prototype.hasOwnProperty,bt=function(){function e(e){var t=e.cache,r=e.link,n=e.defaultOptions,i=e.queryDeduplication,s=void 0!==i&&i,o=e.onBroadcast,a=e.ssrMode,c=void 0!==a&&a,u=e.clientAwareness,l=void 0===u?{}:u,h=e.localState,d=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(q.mr?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=t,this.link=r,this.defaultOptions=n||Object.create(null),this.queryDeduplication=s,this.clientAwareness=l,this.localState=h||new ft({cache:t}),this.ssrMode=c,this.assumeImmutableResults=!!d,(this.onBroadcast=o)&&(this.mutationStore=Object.create(null))}return e.prototype.stop=function(){var e=this;this.queries.forEach((function(t,r){e.stopQueryNoBroadcast(r)})),this.cancelPendingFetches(__DEV__?new i.ej("QueryManager stopped while query was in flight"):new i.ej(13))},e.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach((function(t){return t(e)})),this.fetchCancelFns.clear()},e.prototype.mutate=function(e){var t,r,s=e.mutation,o=e.variables,a=e.optimisticResponse,c=e.updateQueries,u=e.refetchQueries,l=void 0===u?[]:u,h=e.awaitRefetchQueries,d=void 0!==h&&h,f=e.update,p=e.onQueryUpdated,y=e.fetchPolicy,g=void 0===y?(null===(t=this.defaultOptions.mutate)||void 0===t?void 0:t.fetchPolicy)||"network-only":y,m=e.errorPolicy,w=void 0===m?(null===(r=this.defaultOptions.mutate)||void 0===r?void 0:r.errorPolicy)||"none":m,v=e.keepRootFields,b=e.context;return(0,n.mG)(this,void 0,void 0,(function(){var e,t,r,u,h,y;return(0,n.Jh)(this,(function(m){switch(m.label){case 0:return __DEV__?(0,i.kG)(s,"mutation option is required. You must specify your GraphQL document in the mutation option."):(0,i.kG)(s,14),__DEV__?(0,i.kG)("network-only"===g||"no-cache"===g,"Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):(0,i.kG)("network-only"===g||"no-cache"===g,15),e=this.generateMutationId(),t=this.transform(s),r=t.document,u=t.hasClientExports,s=this.cache.transformForLink(r),o=this.getVariables(s,o),u?[4,this.localState.addExportedVariables(s,o,b)]:[3,2];case 1:o=m.sent(),m.label=2;case 2:return h=this.mutationStore&&(this.mutationStore[e]={mutation:s,variables:o,loading:!0,error:null}),a&&this.markMutationOptimistic(a,{mutationId:e,document:s,variables:o,fetchPolicy:g,errorPolicy:w,context:b,updateQueries:c,update:f,keepRootFields:v}),this.broadcastQueries(),y=this,[2,new Promise((function(t,r){return je(y.getObservableFromLink(s,(0,n.pi)((0,n.pi)({},b),{optimisticResponse:a}),o,!1),(function(t){if(Ve(t)&&"none"===w)throw new tt({graphQLErrors:t.errors});h&&(h.loading=!1,h.error=null);var r=(0,n.pi)({},t);return"function"===typeof l&&(l=l(r)),"ignore"===w&&Ve(r)&&delete r.errors,y.markMutationResult({mutationId:e,result:r,document:s,variables:o,fetchPolicy:g,errorPolicy:w,context:b,update:f,updateQueries:c,awaitRefetchQueries:d,refetchQueries:l,removeOptimistic:a?e:void 0,onQueryUpdated:p,keepRootFields:v})})).subscribe({next:function(e){y.broadcastQueries(),t(e)},error:function(t){h&&(h.loading=!1,h.error=t),a&&y.cache.removeOptimistic(e),y.broadcastQueries(),r(t instanceof tt?t:new tt({networkError:t}))}})}))]}}))}))},e.prototype.markMutationResult=function(e,t){var r=this;void 0===t&&(t=this.cache);var i=e.result,s=[],o="no-cache"===e.fetchPolicy;if(!o&&wt(i,e.errorPolicy)){s.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables});var a=e.updateQueries;a&&this.queries.forEach((function(e,n){var o=e.observableQuery,c=o&&o.queryName;if(c&&vt.call(a,c)){var u=a[c],l=r.queries.get(n),h=l.document,d=l.variables,f=t.diff({query:h,variables:d,returnPartialData:!0,optimistic:!1}),p=f.result,y=f.complete;if(y&&p){var g=u(p,{mutationResult:i,queryName:h&&(0,P.rY)(h)||void 0,queryVariables:d});g&&s.push({result:g,dataId:"ROOT_QUERY",query:h,variables:d})}}}))}if(s.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var c=[];if(this.refetchQueries({updateCache:function(t){o||s.forEach((function(e){return t.write(e)}));var a=e.update;if(a){if(!o){var c=t.diff({id:"ROOT_MUTATION",query:r.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});c.complete&&!Ue(i)&&(i=(0,n.pi)((0,n.pi)({},i),{data:c.result}))}a(t,i,{context:e.context,variables:e.variables})}o||e.keepRootFields||t.modify({id:"ROOT_MUTATION",fields:function(e,t){var r=t.fieldName,n=t.DELETE;return"__typename"===r?e:n}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach((function(e){return c.push(e)})),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(c).then((function(){return i}))}return Promise.resolve(i)},e.prototype.markMutationOptimistic=function(e,t){var r=this,s="function"===typeof e?e(t.variables):e;return this.cache.recordOptimisticTransaction((function(e){try{r.markMutationResult((0,n.pi)((0,n.pi)({},t),{result:{data:s}}),e)}catch(o){__DEV__&&i.kG.error(o)}}),t.mutationId)},e.prototype.fetchQuery=function(e,t,r){return this.fetchQueryObservable(e,t,r).promise},e.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach((function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}})),e},e.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},e.prototype.transform=function(e){var t=this.transformCache;if(!t.has(e)){var r=this.cache.transformDocument(e),i=(0,ze.Fo)(r),s=this.localState.clientQuery(r),o=i&&this.localState.serverQuery(i),a={document:r,hasClientExports:(0,V.mj)(r),hasForcedResolvers:this.localState.shouldForceResolvers(r),clientQuery:s,serverQuery:o,defaultVars:(0,P.O4)((0,P.$H)(r)),asQuery:(0,n.pi)((0,n.pi)({},r),{definitions:r.definitions.map((function(e){return"OperationDefinition"===e.kind&&"query"!==e.operation?(0,n.pi)((0,n.pi)({},e),{operation:"query"}):e}))})},c=function(e){e&&!t.has(e)&&t.set(e,a)};c(e),c(r),c(s),c(o)}return t.get(e)},e.prototype.getVariables=function(e,t){return(0,n.pi)((0,n.pi)({},this.transform(e).defaultVars),t)},e.prototype.watchQuery=function(e){e=(0,n.pi)((0,n.pi)({},e),{variables:this.getVariables(e.query,e.variables)}),"undefined"===typeof e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var t=new mt(this),r=new ot({queryManager:this,queryInfo:t,options:e});return this.queries.set(r.queryId,t),t.init({document:r.query,observableQuery:r,variables:r.variables}),r},e.prototype.query=function(e,t){var r=this;return void 0===t&&(t=this.generateQueryId()),__DEV__?(0,i.kG)(e.query,"query option is required. You must specify your GraphQL document in the query option."):(0,i.kG)(e.query,16),__DEV__?(0,i.kG)("Document"===e.query.kind,'You must wrap the query string in a "gql" tag.'):(0,i.kG)("Document"===e.query.kind,17),__DEV__?(0,i.kG)(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):(0,i.kG)(!e.returnPartialData,18),__DEV__?(0,i.kG)(!e.pollInterval,"pollInterval option only supported on watchQuery."):(0,i.kG)(!e.pollInterval,19),this.fetchQuery(t,e).finally((function(){return r.stopQuery(t)}))},e.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},e.prototype.generateRequestId=function(){return this.requestIdCounter++},e.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},e.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},e.prototype.clearStore=function(e){return void 0===e&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new i.ej("Store reset while query was in flight (not completed in link chain)"):new i.ej(20)),this.queries.forEach((function(e){e.observableQuery?e.networkStatus=Ze.loading:e.stop()})),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},e.prototype.getObservableQueries=function(e){var t=this;void 0===e&&(e="active");var r=new Map,s=new Map,o=new Set;return Array.isArray(e)&&e.forEach((function(e){"string"===typeof e?s.set(e,!1):(0,$e.JW)(e)?s.set(t.transform(e).document,!1):(0,qe.s)(e)&&e.query&&o.add(e)})),this.queries.forEach((function(t,n){var i=t.observableQuery,o=t.document;if(i){if("all"===e)return void r.set(n,i);var a=i.queryName,c=i.options.fetchPolicy;if("standby"===c||"active"===e&&!i.hasObservers())return;("active"===e||a&&s.has(a)||o&&s.has(o))&&(r.set(n,i),a&&s.set(a,!0),o&&s.set(o,!0))}})),o.size&&o.forEach((function(e){var s=(0,Ke.X)("legacyOneTimeQuery"),o=t.getQuery(s).init({document:e.query,variables:e.variables}),a=new ot({queryManager:t,queryInfo:o,options:(0,n.pi)((0,n.pi)({},e),{fetchPolicy:"network-only"})});(0,i.kG)(a.queryId===s),o.setObservableQuery(a),r.set(s,a)})),__DEV__&&s.size&&s.forEach((function(e,t){e||__DEV__&&i.kG.warn("Unknown query ".concat("string"===typeof t?"named ":"").concat(JSON.stringify(t,null,2)," requested in refetchQueries options.include array"))})),r},e.prototype.reFetchObservableQueries=function(e){var t=this;void 0===e&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach((function(n,i){var s=n.options.fetchPolicy;n.resetLastResults(),(e||"standby"!==s&&"cache-only"!==s)&&r.push(n.refetch()),t.getQuery(i).setDiff(null)})),this.broadcastQueries(),Promise.all(r)},e.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},e.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,n=e.fetchPolicy,i=e.errorPolicy,s=e.variables,o=e.context,a=void 0===o?{}:o;r=this.transform(r).document,s=this.getVariables(r,s);var c=function(e){return t.getObservableFromLink(r,a,e).map((function(s){if("no-cache"!==n&&(wt(s,i)&&t.cache.write({query:r,result:s.data,dataId:"ROOT_SUBSCRIPTION",variables:e}),t.broadcastQueries()),Ve(s))throw new tt({graphQLErrors:s.errors});return s}))};if(this.transform(r).hasClientExports){var u=this.localState.addExportedVariables(r,s,a).then(c);return new C((function(e){var t=null;return u.then((function(r){return t=r.subscribe(e)}),e.error),function(){return t&&t.unsubscribe()}}))}return c(s)},e.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},e.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},e.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},e.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach((function(e){return e.notify()}))},e.prototype.getLocalState=function(){return this.localState},e.prototype.getObservableFromLink=function(e,t,r,i){var s,o,a=this;void 0===i&&(i=null!==(s=null===t||void 0===t?void 0:t.queryDeduplication)&&void 0!==s?s:this.queryDeduplication);var c=this.transform(e).serverQuery;if(c){var u=this,l=u.inFlightLinkObservables,h=u.link,d={query:c,variables:r,operationName:(0,P.rY)(c)||void 0,context:this.prepareContext((0,n.pi)((0,n.pi)({},t),{forceFetch:!i}))};if(t=d.context,i){var f=l.get(c)||new Map;l.set(c,f);var p=(0,Fe.B)(r);if(o=f.get(p),!o){var y=new Qe([U(h,d)]);f.set(p,o=y),y.beforeNext((function(){f.delete(p)&&f.size<1&&l.delete(c)}))}}else o=new Qe([U(h,d)])}else o=new Qe([C.of({data:{}})]),t=this.prepareContext(t);var g=this.transform(e).clientQuery;return g&&(o=je(o,(function(e){return a.localState.runResolvers({document:g,remoteResult:e,context:t,variables:r})}))),o},e.prototype.getResultsFromLink=function(e,t,r){var n=e.lastRequestId=this.generateRequestId();r=(0,Ye.X)(r);var i=this.cache.transformForLink(this.transform(e.document).document);return je(this.getObservableFromLink(i,r.context,r.variables),(function(s){var o=(0,Je.O)(s.errors)?s.errors.slice(0):[];"incremental"in s&&(0,Je.O)(s.incremental)&&s.incremental.forEach((function(e){e.errors&&o.push.apply(o,e.errors)}));var a=(0,Je.O)(o);if(n>=e.lastRequestId){if(a&&"none"===r.errorPolicy)throw e.markError(new tt({graphQLErrors:o}));e.markResult(s,i,r,t),e.markReady()}var c={data:s.data,loading:!1,networkStatus:Ze.ready};return a&&"ignore"!==r.errorPolicy&&(c.errors=o,c.networkStatus=Ze.error),c}),(function(t){var r=Xe(t)?t:new tt({networkError:t});throw n>=e.lastRequestId&&e.markError(r),r}))},e.prototype.fetchQueryObservable=function(e,t,r){var n=this;void 0===r&&(r=Ze.loading);var i=this.transform(t.query).document,s=this.getVariables(i,t.variables),o=this.getQuery(e),a=this.defaultOptions.watchQuery,c=t.fetchPolicy,u=void 0===c?a&&a.fetchPolicy||"cache-first":c,l=t.errorPolicy,h=void 0===l?a&&a.errorPolicy||"none":l,d=t.returnPartialData,f=void 0!==d&&d,p=t.notifyOnNetworkStatusChange,y=void 0!==p&&p,g=t.context,m=void 0===g?{}:g,w=Object.assign({},t,{query:i,variables:s,fetchPolicy:u,errorPolicy:h,returnPartialData:f,notifyOnNetworkStatusChange:y,context:m}),v=function(e){w.variables=e;var i=n.fetchQueryByPolicy(o,w,r);return"standby"!==w.fetchPolicy&&i.length>0&&o.observableQuery&&o.observableQuery["applyNextFetchPolicy"]("after-fetch",t),i},b=function(){return n.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,(function(e){b(),setTimeout((function(){return E.cancel(e)}))}));var E=new Qe(this.transform(w.query).hasClientExports?this.localState.addExportedVariables(w.query,w.variables,w.context).then(v):v(w.variables));return E.promise.then(b,b),E},e.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,n=e.include,i=e.optimistic,s=void 0!==i&&i,o=e.removeOptimistic,a=void 0===o?s?(0,Ke.X)("refetchQueries"):void 0:o,c=e.onQueryUpdated,u=new Map;n&&this.getObservableQueries(n).forEach((function(e,r){u.set(r,{oq:e,lastDiff:t.getQuery(r).getDiff()})}));var l=new Map;return r&&this.cache.batch({update:r,optimistic:s&&a||!1,removeOptimistic:a,onWatchUpdated:function(e,t,r){var n=e.watcher instanceof mt&&e.watcher.observableQuery;if(n){if(c){u.delete(n.queryId);var i=c(n,t,r);return!0===i&&(i=n.refetch()),!1!==i&&l.set(n,i),i}null!==c&&u.set(n.queryId,{oq:n,lastDiff:r,diff:t})}}}),u.size&&u.forEach((function(e,r){var n,i=e.oq,s=e.lastDiff,o=e.diff;if(c){if(!o){var a=i["queryInfo"];a.reset(),o=a.getDiff()}n=c(i,o,s)}c&&!0!==n||(n=i.refetch()),!1!==n&&l.set(i,n),r.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(r)})),a&&this.cache.removeOptimistic(a),l},e.prototype.fetchQueryByPolicy=function(e,t,r){var i=this,s=t.query,o=t.variables,a=t.fetchPolicy,c=t.refetchWritePolicy,u=t.errorPolicy,l=t.returnPartialData,h=t.context,d=t.notifyOnNetworkStatusChange,f=e.networkStatus;e.init({document:this.transform(s).document,variables:o,networkStatus:r});var p=function(){return e.getDiff(o)},y=function(t,r){void 0===r&&(r=e.networkStatus||Ze.loading);var a=t.result;!__DEV__||l||(0,Me.D)(a,{})||ut(t.missing);var c=function(e){return C.of((0,n.pi)({data:e,loading:rt(r),networkStatus:r},t.complete?null:{partial:!0}))};return a&&i.transform(s).hasForcedResolvers?i.localState.runResolvers({document:s,remoteResult:{data:a},context:h,variables:o,onlyRunForcedResolvers:!0}).then((function(e){return c(e.data||void 0)})):c(a)},g="no-cache"===a?0:r===Ze.refetch&&"merge"!==c?1:2,m=function(){return i.getResultsFromLink(e,g,{variables:o,context:h,fetchPolicy:a,errorPolicy:u})},w=d&&"number"===typeof f&&f!==r&&rt(r);switch(a){default:case"cache-first":var v=p();return v.complete?[y(v,e.markReady())]:l||w?[y(v),m()]:[m()];case"cache-and-network":v=p();return v.complete||l||w?[y(v),m()]:[m()];case"cache-only":return[y(p(),e.markReady())];case"network-only":return w?[y(p()),m()]:[m()];case"no-cache":return w?[y(e.getDiff()),m()]:[m()];case"standby":return[]}},e.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new mt(this,e)),this.queries.get(e)},e.prototype.prepareContext=function(e){void 0===e&&(e={});var t=this.localState.prepareContext(e);return(0,n.pi)((0,n.pi)({},t),{clientAwareness:this.clientAwareness})},e}();function Et(e,t){return(0,nt.o)(e,t,t.variables&&{variables:(0,n.pi)((0,n.pi)({},e&&e.variables),t.variables)})}var _t=!1,At=function(){function e(e){var t=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var r=e.uri,n=e.credentials,s=e.headers,o=e.cache,a=e.ssrMode,c=void 0!==a&&a,u=e.ssrForceFetchDelay,l=void 0===u?0:u,h=e.connectToDevTools,d=void 0===h?"object"===typeof window&&!window.__APOLLO_CLIENT__&&__DEV__:h,f=e.queryDeduplication,p=void 0===f||f,y=e.defaultOptions,g=e.assumeImmutableResults,m=void 0!==g&&g,w=e.resolvers,v=e.typeDefs,b=e.fragmentMatcher,E=e.name,_=e.version,A=e.link;if(A||(A=r?new Le({uri:r,credentials:n,headers:s}):M.empty()),!o)throw __DEV__?new i.ej("To initialize Apollo Client, you must specify a 'cache' property in the options object. \nFor more information, please visit: https://go.apollo.dev/c/docs"):new i.ej(9);if(this.link=A,this.cache=o,this.disableNetworkFetches=c||l>0,this.queryDeduplication=p,this.defaultOptions=y||Object.create(null),this.typeDefs=v,l&&setTimeout((function(){return t.disableNetworkFetches=!1}),l),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),d&&"object"===typeof window&&(window.__APOLLO_CLIENT__=this),!_t&&__DEV__&&(_t=!0,"undefined"!==typeof window&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var S=window.navigator,k=S&&S.userAgent,I=void 0;"string"===typeof k&&(k.indexOf("Chrome/")>-1?I="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":k.indexOf("Firefox/")>-1&&(I="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),I&&__DEV__&&i.kG.log("Download the Apollo DevTools for a better development experience: "+I)}this.version=F,this.localState=new ft({cache:o,client:this,resolvers:w,fragmentMatcher:b}),this.queryManager=new bt({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:p,ssrMode:c,clientAwareness:{name:E,version:_},localState:this.localState,assumeImmutableResults:m,onBroadcast:d?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0})}return e.prototype.stop=function(){this.queryManager.stop()},e.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Et(this.defaultOptions.watchQuery,e)),!this.disableNetworkFetches||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e=(0,n.pi)((0,n.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){return this.defaultOptions.query&&(e=Et(this.defaultOptions.query,e)),__DEV__?(0,i.kG)("cache-and-network"!==e.fetchPolicy,"The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):(0,i.kG)("cache-and-network"!==e.fetchPolicy,10),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=(0,n.pi)((0,n.pi)({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Et(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.cache.readQuery(e,t)},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.cache.readFragment(e,t)},e.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},e.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return U(this.link,e)},e.prototype.resetStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!1})})).then((function(){return Promise.all(e.resetStoreCallbacks.map((function(e){return e()})))})).then((function(){return e.reFetchObservableQueries()}))},e.prototype.clearStore=function(){var e=this;return Promise.resolve().then((function(){return e.queryManager.clearStore({discardWatches:!0})})).then((function(){return Promise.all(e.clearStoreCallbacks.map((function(e){return e()})))}))},e.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter((function(t){return t!==e}))}},e.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},e.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],n=[];t.forEach((function(e,t){r.push(t),n.push(e)}));var s=Promise.all(n);return s.queries=r,s.results=n,s.catch((function(e){__DEV__&&i.kG.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(e))})),s},e.prototype.getObservableQueries=function(e){return void 0===e&&(e="active"),this.queryManager.getObservableQueries(e)},e.prototype.extract=function(e){return this.cache.extract(e)},e.prototype.restore=function(e){return this.cache.restore(e)},e.prototype.addResolvers=function(e){this.localState.addResolvers(e)},e.prototype.setResolvers=function(e){this.localState.setResolvers(e)},e.prototype.getResolvers=function(){return this.localState.getResolvers()},e.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},e.prototype.setLink=function(e){this.link=this.queryManager.link=e},e}()},1328:function(e,t,r){"use strict";function n(e){return Array.isArray(e)&&e.length>0}r.d(t,{O:function(){return n}})},2067:function(e,t,r){"use strict";r.d(t,{DN:function(){return a},aS:function(){return o},mr:function(){return i},sy:function(){return s}});var n=r(9926),i="function"===typeof WeakMap&&"ReactNative"!==(0,n.wY)((function(){return navigator.product})),s="function"===typeof WeakSet,o="function"===typeof Symbol&&"function"===typeof Symbol.for,a=o&&Symbol.asyncIterator;(0,n.wY)((function(){return window.document.createElement})),(0,n.wY)((function(){return navigator.userAgent.indexOf("jsdom")>=0}))},9735:function(e,t,r){"use strict";r.d(t,{X:function(){return i}});var n=Object.prototype.toString;function i(e){return s(e)}function s(e,t){switch(n.call(e)){case"[object Array]":if(t=t||new Map,t.has(e))return t.get(e);var r=e.slice(0);return t.set(e,r),r.forEach((function(e,n){r[n]=s(e,t)})),r;case"[object Object]":if(t=t||new Map,t.has(e))return t.get(e);var i=Object.create(Object.getPrototypeOf(e));return t.set(e,i),Object.keys(e).forEach((function(r){i[r]=s(e[r],t)})),i;default:return e}}},8257:function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];void 0!==n&&(r[t]=n)}))})),r}r.d(t,{o:function(){return n}})},1073:function(e,t,r){"use strict";r.d(t,{X:function(){return i}});var n=new Map;function i(e){var t=n.get(e)||1;return n.set(e,t+1),"".concat(e,":").concat(t,":").concat(Math.random().toString(36).slice(2))}},544:function(e,t,r){"use strict";r.d(t,{Ee:function(){return o},bw:function(){return a},w0:function(){return u}});var n=r(2900),i=r(6867),s=Object.prototype.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}function a(e){var t=e[0]||{},r=e.length;if(r>1)for(var n=new u,i=1;i<r;++i)t=n.merge(t,e[i]);return t}var c=function(e,t,r){return this.merge(e[r],t[r])},u=function(){function e(e){void 0===e&&(e=c),this.reconciler=e,this.isObject=i.s,this.pastCopies=new Set}return e.prototype.merge=function(e,t){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];return(0,i.s)(t)&&(0,i.s)(e)?(Object.keys(t).forEach((function(i){if(s.call(e,i)){var a=e[i];if(t[i]!==a){var c=r.reconciler.apply(r,(0,n.ev)([e,t,i],o,!1));c!==a&&(e=r.shallowCopyForMerge(e),e[i]=c)}}else e=r.shallowCopyForMerge(e),e[i]=t[i]})),e):t},e.prototype.shallowCopyForMerge=function(e){return(0,i.s)(e)&&(this.pastCopies.has(e)||(e=Array.isArray(e)?e.slice(0):(0,n.pi)({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},e}()},6867:function(e,t,r){"use strict";function n(e){return null!==e&&"object"===typeof e}r.d(t,{s:function(){return n}})},9926:function(e,t,r){"use strict";r.d(t,{ej:function(){return a},kG:function(){return c},wY:function(){return d}});var n=r(2900),i="Invariant Violation",s=Object.setPrototypeOf,o=void 0===s?function(e,t){return e.__proto__=t,e}:s,a=function(e){function t(r){void 0===r&&(r=i);var n=e.call(this,"number"===typeof r?i+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=i,o(n,t.prototype),n}return(0,n.ZT)(t,e),t}(Error);function c(e,t){if(!e)throw new a(t)}var u=["debug","log","warn","error","silent"],l=u.indexOf("log");function h(e){return function(){if(u.indexOf(e)>=l){var t=console[e]||console.log;return t.apply(console,arguments)}}}(function(e){e.debug=h("debug"),e.log=h("log"),e.warn=h("warn"),e.error=h("error")})(c||(c={}));function d(e){try{return e()}catch(s){}}var f=d((function(){return globalThis}))||d((function(){return window}))||d((function(){return self}))||d((function(){return global}))||d((function(){return d.constructor("return this")()})),p="__",y=[p,p].join("DEV");function g(){try{return Boolean(__DEV__)}catch(s){return Object.defineProperty(f,y,{value:"production"!==d((function(){return"production"})),enumerable:!1,configurable:!0,writable:!0}),f[y]}}var m=g();function w(e){try{return e()}catch(t){}}var v=w((function(){return globalThis}))||w((function(){return window}))||w((function(){return self}))||w((function(){return global}))||w((function(){return w.constructor("return this")()})),b=!1;function E(){!v||w((function(){return"production"}))||w((function(){return process}))||(Object.defineProperty(v,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),b=!0)}function _(){b&&(delete v.process,b=!1)}E();var A=r(9024);function S(){return A.H,_()}function k(){__DEV__?c("boolean"===typeof m,m):c("boolean"===typeof m,38)}S(),k()},1495:function(e,t,r){"use strict";r.d(t,{FS:function(){return o},LZ:function(){return s},mj:function(){return a}});r(7658);var n=r(9926),i=r(9526);function s(e,t){var r=e.directives;return!r||!r.length||u(r).every((function(e){var r=e.directive,i=e.ifArgument,s=!1;return"Variable"===i.value.kind?(s=t&&t[i.value.name.value],__DEV__?(0,n.kG)(void 0!==s,"Invalid variable referenced in @".concat(r.name.value," directive.")):(0,n.kG)(void 0!==s,39)):s=i.value.value,"skip"===r.name.value?!s:s}))}function o(e,t,r){var n=new Set(e),s=n.size;return(0,i.Vn)(t,{Directive:function(e){if(n.delete(e.name.value)&&(!r||!n.size))return i.$_}}),r?!n.size:n.size<s}function a(e){return e&&o(["client","export"],e,!0)}function c(e){var t=e.name.value;return"skip"===t||"include"===t}function u(e){var t=[];return e&&e.length&&e.forEach((function(e){if(c(e)){var r=e.arguments,i=e.name.value;__DEV__?(0,n.kG)(r&&1===r.length,"Incorrect number of arguments for the @".concat(i," directive.")):(0,n.kG)(r&&1===r.length,40);var s=r[0];__DEV__?(0,n.kG)(s.name&&"if"===s.name.value,"Invalid argument for the @".concat(i," directive.")):(0,n.kG)(s.name&&"if"===s.name.value,41);var o=s.value;__DEV__?(0,n.kG)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),"Argument for the @".concat(i," directive must be a variable or a boolean value.")):(0,n.kG)(o&&("Variable"===o.kind||"BooleanValue"===o.kind),42),t.push({directive:e,ifArgument:s})}})),t}},2157:function(e,t,r){"use strict";r.d(t,{F:function(){return o},Yk:function(){return s},hi:function(){return a}});r(7658);var n=r(2900),i=r(9926);function s(e,t){var r=t,s=[];e.definitions.forEach((function(e){if("OperationDefinition"===e.kind)throw __DEV__?new i.ej("Found a ".concat(e.operation," operation").concat(e.name?" named '".concat(e.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new i.ej(43);"FragmentDefinition"===e.kind&&s.push(e)})),"undefined"===typeof r&&(__DEV__?(0,i.kG)(1===s.length,"Found ".concat(s.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):(0,i.kG)(1===s.length,44),r=s[0].name.value);var o=(0,n.pi)((0,n.pi)({},e),{definitions:(0,n.ev)([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],e.definitions,!0)});return o}function o(e){void 0===e&&(e=[]);var t={};return e.forEach((function(e){t[e.name.value]=e})),t}function a(e,t){switch(e.kind){case"InlineFragment":return e;case"FragmentSpread":var r=e.name.value;if("function"===typeof t)return t(r);var n=t&&t[r];return __DEV__?(0,i.kG)(n,"No fragment named ".concat(r)):(0,i.kG)(n,45),n||null;default:return null}}},958:function(e,t,r){"use strict";r.d(t,{$H:function(){return o},A$:function(){return s},O4:function(){return d},iW:function(){return u},kU:function(){return c},p$:function(){return h},pD:function(){return l},rY:function(){return a}});var n=r(9926),i=r(7491);function s(e){__DEV__?(0,n.kG)(e&&"Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):(0,n.kG)(e&&"Document"===e.kind,46);var t=e.definitions.filter((function(e){return"FragmentDefinition"!==e.kind})).map((function(e){if("OperationDefinition"!==e.kind)throw __DEV__?new n.ej('Schema type definitions not allowed in queries. Found: "'.concat(e.kind,'"')):new n.ej(47);return e}));return __DEV__?(0,n.kG)(t.length<=1,"Ambiguous GraphQL document: contains ".concat(t.length," operations")):(0,n.kG)(t.length<=1,48),e}function o(e){return s(e),e.definitions.filter((function(e){return"OperationDefinition"===e.kind}))[0]}function a(e){return e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&e.name})).map((function(e){return e.name.value}))[0]||null}function c(e){return e.definitions.filter((function(e){return"FragmentDefinition"===e.kind}))}function u(e){var t=o(e);return __DEV__?(0,n.kG)(t&&"query"===t.operation,"Must contain a query definition."):(0,n.kG)(t&&"query"===t.operation,49),t}function l(e){__DEV__?(0,n.kG)("Document"===e.kind,'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):(0,n.kG)("Document"===e.kind,50),__DEV__?(0,n.kG)(e.definitions.length<=1,"Fragment must have exactly one definition."):(0,n.kG)(e.definitions.length<=1,51);var t=e.definitions[0];return __DEV__?(0,n.kG)("FragmentDefinition"===t.kind,"Must be a fragment definition."):(0,n.kG)("FragmentDefinition"===t.kind,52),t}function h(e){var t;s(e);for(var r=0,i=e.definitions;r<i.length;r++){var o=i[r];if("OperationDefinition"===o.kind){var a=o.operation;if("query"===a||"mutation"===a||"subscription"===a)return o}"FragmentDefinition"!==o.kind||t||(t=o)}if(t)return t;throw __DEV__?new n.ej("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new n.ej(53)}function d(e){var t=Object.create(null),r=e&&e.variableDefinitions;return r&&r.length&&r.forEach((function(e){e.defaultValue&&(0,i.vb)(t,e.variable.name,e.defaultValue)})),t}},7491:function(e,t,r){"use strict";r.d(t,{Ao:function(){return C},JW:function(){return c},My:function(){return T},NC:function(){return S},PT:function(){return E},Yk:function(){return a},kQ:function(){return o},qw:function(){return I},u2:function(){return k},vb:function(){return w},vf:function(){return v}});var n=r(9926),i=r(6867),s=r(2157);function o(e){return{__ref:String(e)}}function a(e){return Boolean(e&&"object"===typeof e&&"string"===typeof e.__ref)}function c(e){return(0,i.s)(e)&&"Document"===e.kind&&Array.isArray(e.definitions)}function u(e){return"StringValue"===e.kind}function l(e){return"BooleanValue"===e.kind}function h(e){return"IntValue"===e.kind}function d(e){return"FloatValue"===e.kind}function f(e){return"Variable"===e.kind}function p(e){return"ObjectValue"===e.kind}function y(e){return"ListValue"===e.kind}function g(e){return"EnumValue"===e.kind}function m(e){return"NullValue"===e.kind}function w(e,t,r,i){if(h(r)||d(r))e[t.value]=Number(r.value);else if(l(r)||u(r))e[t.value]=r.value;else if(p(r)){var s={};r.fields.map((function(e){return w(s,e.name,e.value,i)})),e[t.value]=s}else if(f(r)){var o=(i||{})[r.name.value];e[t.value]=o}else if(y(r))e[t.value]=r.values.map((function(e){var r={};return w(r,t,e,i),r[t.value]}));else if(g(r))e[t.value]=r.value;else{if(!m(r))throw __DEV__?new n.ej('The inline argument "'.concat(t.value,'" of kind "').concat(r.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new n.ej(54);e[t.value]=null}}function v(e,t){var r=null;e.directives&&(r={},e.directives.forEach((function(e){r[e.name.value]={},e.arguments&&e.arguments.forEach((function(n){var i=n.name,s=n.value;return w(r[e.name.value],i,s,t)}))})));var n=null;return e.arguments&&e.arguments.length&&(n={},e.arguments.forEach((function(e){var r=e.name,i=e.value;return w(n,r,i,t)}))),E(e.name.value,n,r)}var b=["connection","include","skip","client","rest","export"],E=Object.assign((function(e,t,r){if(t&&r&&r["connection"]&&r["connection"]["key"]){if(r["connection"]["filter"]&&r["connection"]["filter"].length>0){var n=r["connection"]["filter"]?r["connection"]["filter"]:[];n.sort();var i={};return n.forEach((function(e){i[e]=t[e]})),"".concat(r["connection"]["key"],"(").concat(_(i),")")}return r["connection"]["key"]}var s=e;if(t){var o=_(t);s+="(".concat(o,")")}return r&&Object.keys(r).forEach((function(e){-1===b.indexOf(e)&&(r[e]&&Object.keys(r[e]).length?s+="@".concat(e,"(").concat(_(r[e]),")"):s+="@".concat(e))})),s}),{setStringify:function(e){var t=_;return _=e,t}}),_=function(e){return JSON.stringify(e,A)};function A(e,t){return(0,i.s)(t)&&!Array.isArray(t)&&(t=Object.keys(t).sort().reduce((function(e,r){return e[r]=t[r],e}),{})),t}function S(e,t){if(e.arguments&&e.arguments.length){var r={};return e.arguments.forEach((function(e){var n=e.name,i=e.value;return w(r,n,i,t)})),r}return null}function k(e){return e.alias?e.alias.value:e.name.value}function I(e,t,r){if("string"===typeof e.__typename)return e.__typename;for(var n=0,i=t.selections;n<i.length;n++){var o=i[n];if(T(o)){if("__typename"===o.name.value)return e[k(o)]}else{var a=I(e,(0,s.hi)(o,r).selectionSet,r);if("string"===typeof a)return a}}}function T(e){return"Field"===e.kind}function C(e){return"InlineFragment"===e.kind}},3625:function(e,t,r){"use strict";r.d(t,{Gw:function(){return y},aL:function(){return _},ob:function(){return A},Fo:function(){return m}});r(7658);var n=r(2900),i=r(9926),s=r(9526),o=r(958);function a(e,t,r){var n=0;return e.forEach((function(r,i){t.call(this,r,i,e)&&(e[n++]=r)}),r),e.length=n,e}var c=r(7491),u=r(2157),l={kind:"Field",name:{kind:"Name",value:"__typename"}};function h(e,t){return!e||e.selectionSet.selections.every((function(e){return"FragmentSpread"===e.kind&&h(t[e.name.value],t)}))}function d(e){return h((0,o.$H)(e)||(0,o.pD)(e),(0,u.F)((0,o.kU)(e)))?null:e}function f(e){return function(t){return e.some((function(e){return e.name&&e.name===t.name.value||e.test&&e.test(t)}))}}function p(e,t){var r=Object.create(null),n=[],i=Object.create(null),o=[],c=d((0,s.Vn)(t,{Variable:{enter:function(e,t,n){"VariableDefinition"!==n.kind&&(r[e.name.value]=!0)}},Field:{enter:function(t){if(e&&t.directives){var r=e.some((function(e){return e.remove}));if(r&&t.directives&&t.directives.some(f(e)))return t.arguments&&t.arguments.forEach((function(e){"Variable"===e.value.kind&&n.push({name:e.value.name.value})})),t.selectionSet&&E(t.selectionSet).forEach((function(e){o.push({name:e.name.value})})),null}}},FragmentSpread:{enter:function(e){i[e.name.value]=!0}},Directive:{enter:function(t){if(f(e)(t))return null}}}));return c&&a(n,(function(e){return!!e.name&&!r[e.name]})).length&&(c=v(n,c)),c&&a(o,(function(e){return!!e.name&&!i[e.name]})).length&&(c=b(o,c)),c}var y=Object.assign((function(e){return(0,s.Vn)(e,{SelectionSet:{enter:function(e,t,r){if(!r||"OperationDefinition"!==r.kind){var i=e.selections;if(i){var s=i.some((function(e){return(0,c.My)(e)&&("__typename"===e.name.value||0===e.name.value.lastIndexOf("__",0))}));if(!s){var o=r;if(!((0,c.My)(o)&&o.directives&&o.directives.some((function(e){return"export"===e.name.value}))))return(0,n.pi)((0,n.pi)({},e),{selections:(0,n.ev)((0,n.ev)([],i,!0),[l],!1)})}}}}}})}),{added:function(e){return e===l}}),g={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some((function(e){return"key"===e.name.value}))||__DEV__&&i.kG.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}};function m(e){return p([g],(0,o.A$)(e))}function w(e){return function(t){return e.some((function(e){return t.value&&"Variable"===t.value.kind&&t.value.name&&(e.name===t.value.name.value||e.test&&e.test(t))}))}}function v(e,t){var r=w(e);return d((0,s.Vn)(t,{OperationDefinition:{enter:function(t){return(0,n.pi)((0,n.pi)({},t),{variableDefinitions:t.variableDefinitions?t.variableDefinitions.filter((function(t){return!e.some((function(e){return e.name===t.variable.name.value}))})):[]})}},Field:{enter:function(t){var n=e.some((function(e){return e.remove}));if(n){var i=0;if(t.arguments&&t.arguments.forEach((function(e){r(e)&&(i+=1)})),1===i)return null}}},Argument:{enter:function(e){if(r(e))return null}}}))}function b(e,t){function r(t){if(e.some((function(e){return e.name===t.name.value})))return null}return d((0,s.Vn)(t,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function E(e){var t=[];return e.selections.forEach((function(e){((0,c.My)(e)||(0,c.Ao)(e))&&e.selectionSet?E(e.selectionSet).forEach((function(e){return t.push(e)})):"FragmentSpread"===e.kind&&t.push(e)})),t}function _(e){var t=(0,o.p$)(e),r=t.operation;if("query"===r)return e;var i=(0,s.Vn)(e,{OperationDefinition:{enter:function(e){return(0,n.pi)((0,n.pi)({},e),{operation:"query"})}}});return i}function A(e){(0,o.A$)(e);var t=p([{test:function(e){return"client"===e.name.value},remove:!0}],e);return t&&(t=(0,s.Vn)(t,{FragmentDefinition:{enter:function(e){if(e.selectionSet){var t=e.selectionSet.selections.every((function(e){return(0,c.My)(e)&&"__typename"===e.name.value}));if(t)return null}}}})),t}},3731:function(e,t,r){"use strict";function n(e,t){const r=Boolean(e);if(!r)throw new Error(t)}r.d(t,{a:function(){return n}})},560:function(e,t,r){"use strict";r.d(t,{X:function(){return s}});r(7658);const n=10,i=2;function s(e){return o(e,[])}function o(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return a(e,t);default:return String(e)}}function a(e,t){if(null===e)return"null";if(t.includes(e))return"[Circular]";const r=[...t,e];if(c(e)){const t=e.toJSON();if(t!==e)return"string"===typeof t?t:o(t,r)}else if(Array.isArray(e))return l(e,r);return u(e,r)}function c(e){return"function"===typeof e.toJSON}function u(e,t){const r=Object.entries(e);if(0===r.length)return"{}";if(t.length>i)return"["+h(e)+"]";const n=r.map((([e,r])=>e+": "+o(r,t)));return"{ "+n.join(", ")+" }"}function l(e,t){if(0===e.length)return"[]";if(t.length>i)return"[Array]";const r=Math.min(n,e.length),s=e.length-r,a=[];for(let n=0;n<r;++n)a.push(o(e[n],t));return 1===s?a.push("... 1 more item"):s>1&&a.push(`... ${s} more items`),"["+a.join(", ")+"]"}function h(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"===typeof e.constructor){const t=e.constructor.name;if("string"===typeof t&&""!==t)return t}return t}},8027:function(e,t,r){"use strict";r.d(t,{UG:function(){return a},WU:function(){return i},Ye:function(){return n},h8:function(){return s},ku:function(){return c}});class n{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class i{constructor(e,t,r,n,i,s){this.kind=e,this.start=t,this.end=r,this.line=n,this.column=i,this.value=s,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const s={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},o=new Set(Object.keys(s));function a(e){const t=null===e||void 0===e?void 0:e.kind;return"string"===typeof t&&o.has(t)}var c;(function(e){e["QUERY"]="query",e["MUTATION"]="mutation",e["SUBSCRIPTION"]="subscription"})(c||(c={}))},7872:function(e,t,r){"use strict";r.d(t,{LZ:function(){return o},wv:function(){return i}});var n=r(193);function i(e){var t;let r=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let a=0;a<e.length;++a){var o;const t=e[a],c=s(t);c!==t.length&&(n=null!==(o=n)&&void 0!==o?o:a,i=a,0!==a&&c<r&&(r=c))}return e.map(((e,t)=>0===t?e:e.slice(r))).slice(null!==(t=n)&&void 0!==t?t:0,i+1)}function s(e){let t=0;while(t<e.length&&(0,n.FD)(e.charCodeAt(t)))++t;return t}function o(e,t){const r=e.replace(/"""/g,'\\"""'),i=r.split(/\r\n|[\n\r]/g),s=1===i.length,o=i.length>1&&i.slice(1).every((e=>0===e.length||(0,n.FD)(e.charCodeAt(0)))),a=r.endsWith('\\"""'),c=e.endsWith('"')&&!a,u=e.endsWith("\\"),l=c||u,h=!(null!==t&&void 0!==t&&t.minimize)&&(!s||e.length>70||l||o||a);let d="";const f=s&&(0,n.FD)(e.charCodeAt(0));return(h&&!f||o)&&(d+="\n"),d+=r,(h||l)&&(d+="\n"),'"""'+d+'"""'}},193:function(e,t,r){"use strict";function n(e){return 9===e||32===e}function i(e){return e>=48&&e<=57}function s(e){return e>=97&&e<=122||e>=65&&e<=90}function o(e){return s(e)||95===e}function a(e){return s(e)||i(e)||95===e}r.d(t,{FD:function(){return n},HQ:function(){return a},LQ:function(){return o},X1:function(){return i}})},4478:function(e,t,r){"use strict";var n;r.d(t,{h:function(){return n}}),function(e){e["NAME"]="Name",e["DOCUMENT"]="Document",e["OPERATION_DEFINITION"]="OperationDefinition",e["VARIABLE_DEFINITION"]="VariableDefinition",e["SELECTION_SET"]="SelectionSet",e["FIELD"]="Field",e["ARGUMENT"]="Argument",e["FRAGMENT_SPREAD"]="FragmentSpread",e["INLINE_FRAGMENT"]="InlineFragment",e["FRAGMENT_DEFINITION"]="FragmentDefinition",e["VARIABLE"]="Variable",e["INT"]="IntValue",e["FLOAT"]="FloatValue",e["STRING"]="StringValue",e["BOOLEAN"]="BooleanValue",e["NULL"]="NullValue",e["ENUM"]="EnumValue",e["LIST"]="ListValue",e["OBJECT"]="ObjectValue",e["OBJECT_FIELD"]="ObjectField",e["DIRECTIVE"]="Directive",e["NAMED_TYPE"]="NamedType",e["LIST_TYPE"]="ListType",e["NON_NULL_TYPE"]="NonNullType",e["SCHEMA_DEFINITION"]="SchemaDefinition",e["OPERATION_TYPE_DEFINITION"]="OperationTypeDefinition",e["SCALAR_TYPE_DEFINITION"]="ScalarTypeDefinition",e["OBJECT_TYPE_DEFINITION"]="ObjectTypeDefinition",e["FIELD_DEFINITION"]="FieldDefinition",e["INPUT_VALUE_DEFINITION"]="InputValueDefinition",e["INTERFACE_TYPE_DEFINITION"]="InterfaceTypeDefinition",e["UNION_TYPE_DEFINITION"]="UnionTypeDefinition",e["ENUM_TYPE_DEFINITION"]="EnumTypeDefinition",e["ENUM_VALUE_DEFINITION"]="EnumValueDefinition",e["INPUT_OBJECT_TYPE_DEFINITION"]="InputObjectTypeDefinition",e["DIRECTIVE_DEFINITION"]="DirectiveDefinition",e["SCHEMA_EXTENSION"]="SchemaExtension",e["SCALAR_TYPE_EXTENSION"]="ScalarTypeExtension",e["OBJECT_TYPE_EXTENSION"]="ObjectTypeExtension",e["INTERFACE_TYPE_EXTENSION"]="InterfaceTypeExtension",e["UNION_TYPE_EXTENSION"]="UnionTypeExtension",e["ENUM_TYPE_EXTENSION"]="EnumTypeExtension",e["INPUT_OBJECT_TYPE_EXTENSION"]="InputObjectTypeExtension"}(n||(n={}))},9024:function(e,t,r){"use strict";r.d(t,{H:function(){return o},T:function(){return a}});var n=r(3731),i=r(560);const s=function(e,t){return e instanceof t};class o{constructor(e,t="GraphQL request",r={line:1,column:1}){"string"===typeof e||(0,n.a)(!1,`Body must be a string. Received: ${(0,i.X)(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||(0,n.a)(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||(0,n.a)(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function a(e){return s(e,o)}},9526:function(e,t,r){"use strict";r.d(t,{$_:function(){return a},Vn:function(){return c}});r(7658);var n=r(3731),i=r(560),s=r(8027),o=r(4478);const a=Object.freeze({});function c(e,t,r=s.h8){const c=new Map;for(const n of Object.values(o.h))c.set(n,u(t,n));let l,h,d,f=Array.isArray(e),p=[e],y=-1,g=[],m=e;const w=[],v=[];do{y++;const e=y===p.length,o=e&&0!==g.length;if(e){if(h=0===v.length?void 0:w[w.length-1],m=d,d=v.pop(),o)if(f){m=m.slice();let e=0;for(const[t,r]of g){const n=t-e;null===r?(m.splice(n,1),e++):m[n]=r}}else{m=Object.defineProperties({},Object.getOwnPropertyDescriptors(m));for(const[e,t]of g)m[e]=t}y=l.index,p=l.keys,g=l.edits,f=l.inArray,l=l.prev}else if(d){if(h=f?y:p[y],m=d[h],null===m||void 0===m)continue;w.push(h)}let u;if(!Array.isArray(m)){var b,E;(0,s.UG)(m)||(0,n.a)(!1,`Invalid AST Node: ${(0,i.X)(m)}.`);const r=e?null===(b=c.get(m.kind))||void 0===b?void 0:b.leave:null===(E=c.get(m.kind))||void 0===E?void 0:E.enter;if(u=null===r||void 0===r?void 0:r.call(t,m,h,d,w,v),u===a)break;if(!1===u){if(!e){w.pop();continue}}else if(void 0!==u&&(g.push([h,u]),!e)){if(!(0,s.UG)(u)){w.pop();continue}m=u}}var _;if(void 0===u&&o&&g.push([h,m]),e)w.pop();else l={inArray:f,index:y,keys:p,edits:g,prev:l},f=Array.isArray(m),p=f?m:null!==(_=r[m.kind])&&void 0!==_?_:[],y=-1,g=[],d&&v.push(d),d=m}while(void 0!==l);return 0!==g.length?g[g.length-1][1]:e}function u(e,t){const r=e[t];return"object"===typeof r?r:"function"===typeof r?{enter:r,leave:void 0}:{enter:e.enter,leave:e.leave}}},5376:function(e,t,r){"use strict";r.d(t,{Ue:function(){return Xie}});var n={};r.r(n),r.d(n,{code:function(){return Cr},createLink:function(){return Ir},createNode:function(){return kr},decode:function(){return Pr},encode:function(){return Rr},name:function(){return Tr},prepare:function(){return Ar},validate:function(){return Sr}});var i={};r.r(i),r.d(i,{code:function(){return us},decode:function(){return hs},encode:function(){return ls},name:function(){return cs}});var s={};r.r(s),r.d(s,{base64:function(){return ms},base64pad:function(){return ws},base64url:function(){return vs},base64urlpad:function(){return bs}});var o={};r.r(o),r.d(o,{code:function(){return Bs},decode:function(){return Ms},encode:function(){return Ls},name:function(){return Ds}});var a={};r.r(a),r.d(a,{code:function(){return Js},decode:function(){return io},encode:function(){return no},name:function(){return Ys},toGeneral:function(){return ro}});var c={};r.r(c),r.d(c,{identity:function(){return uo}});var u={};r.r(u),r.d(u,{identity:function(){return lo}});var l={};r.r(l),r.d(l,{base2:function(){return ho}});var h={};r.r(h),r.d(h,{base8:function(){return fo}});var d={};r.r(d),r.d(d,{base10:function(){return po}});var f={};r.r(f),r.d(f,{base16:function(){return yo},base16upper:function(){return go}});var p={};r.r(p),r.d(p,{base36:function(){return wo},base36upper:function(){return vo}});var y={};r.r(y),r.d(y,{base256emoji:function(){return Io}});var g={};r.r(g),r.d(g,{sha256:function(){return Co},sha512:function(){return Ro}});var m={};r.r(m),r.d(m,{code:function(){return xo},decode:function(){return No},encode:function(){return Oo},name:function(){return Po}});var w={};r.r(w),r.d(w,{code:function(){return Mo},decode:function(){return Fo},encode:function(){return Uo},name:function(){return Lo}});var v={};r.r(v),r.d(v,{identity:function(){return Ga}});var b={};r.r(b),r.d(b,{base2:function(){return Wa}});var E={};r.r(E),r.d(E,{base8:function(){return Qa}});var _={};r.r(_),r.d(_,{base10:function(){return Ya}});var A={};r.r(A),r.d(A,{base16:function(){return Ja},base16upper:function(){return Xa}});var S={};r.r(S),r.d(S,{base32:function(){return Za},base32hex:function(){return nc},base32hexpad:function(){return sc},base32hexpadupper:function(){return oc},base32hexupper:function(){return ic},base32pad:function(){return tc},base32padupper:function(){return rc},base32upper:function(){return ec},base32z:function(){return ac}});var k={};r.r(k),r.d(k,{base36:function(){return cc},base36upper:function(){return uc}});var I={};r.r(I),r.d(I,{base58btc:function(){return lc},base58flickr:function(){return hc}});var T={};r.r(T),r.d(T,{base64:function(){return dc},base64pad:function(){return fc},base64url:function(){return pc},base64urlpad:function(){return yc}});var C={};r.r(C),r.d(C,{base256emoji:function(){return Ec}});var R={};r.r(R),r.d(R,{sha256:function(){return tu},sha512:function(){return ru}});var P={};r.r(P),r.d(P,{identity:function(){return au}});var x={};r.r(x),r.d(x,{code:function(){return uu},decode:function(){return hu},encode:function(){return lu},name:function(){return cu}});var O={};r.r(O),r.d(O,{code:function(){return yu},decode:function(){return mu},encode:function(){return gu},name:function(){return pu}});var N={};r.r(N),r.d(N,{identity:function(){return Jh}});var D={};r.r(D),r.d(D,{base2:function(){return Xh}});var B={};r.r(B),r.d(B,{base8:function(){return Zh}});var L={};r.r(L),r.d(L,{base10:function(){return ed}});var M={};r.r(M),r.d(M,{base16:function(){return td},base16upper:function(){return rd}});var U={};r.r(U),r.d(U,{base32:function(){return nd},base32hex:function(){return ad},base32hexpad:function(){return ud},base32hexpadupper:function(){return ld},base32hexupper:function(){return cd},base32pad:function(){return sd},base32padupper:function(){return od},base32upper:function(){return id},base32z:function(){return hd}});var F={};r.r(F),r.d(F,{base36:function(){return dd},base36upper:function(){return fd}});var j={};r.r(j),r.d(j,{base58btc:function(){return pd},base58flickr:function(){return yd}});var V={};r.r(V),r.d(V,{base64:function(){return gd},base64pad:function(){return md},base64url:function(){return wd},base64urlpad:function(){return vd}});var z={};r.r(z),r.d(z,{base256emoji:function(){return kd}});var $={};r.r($),r.d($,{sha256:function(){return rf},sha512:function(){return nf}});var q={};r.r(q),r.d(q,{identity:function(){return uf}});var K={};r.r(K),r.d(K,{code:function(){return hf},decode:function(){return ff},encode:function(){return df},name:function(){return lf}});var H={};r.r(H),r.d(H,{code:function(){return mf},decode:function(){return vf},encode:function(){return wf},name:function(){return gf}});var G={};r.r(G),r.d(G,{base58btc:function(){return Zy},base58flickr:function(){return eg}});var W={};r.r(W),r.d(W,{base32:function(){return tg},base32hex:function(){return sg},base32hexpad:function(){return ag},base32hexpadupper:function(){return cg},base32hexupper:function(){return og},base32pad:function(){return ng},base32padupper:function(){return ig},base32upper:function(){return rg},base32z:function(){return ug}});var Q={};r.r(Q),r.d(Q,{identity:function(){return Eg}});var Y={};r.r(Y),r.d(Y,{base2:function(){return _g}});var J={};r.r(J),r.d(J,{base8:function(){return Ag}});var X={};r.r(X),r.d(X,{base10:function(){return Sg}});var Z={};r.r(Z),r.d(Z,{base16:function(){return kg},base16upper:function(){return Ig}});var ee={};r.r(ee),r.d(ee,{base36:function(){return Tg},base36upper:function(){return Cg}});var te={};r.r(te),r.d(te,{base64:function(){return Rg},base64pad:function(){return Pg},base64url:function(){return xg},base64urlpad:function(){return Og}});var re={};r.r(re),r.d(re,{base256emoji:function(){return Ug}});var ne={};r.r(ne),r.d(ne,{sha256:function(){return zg},sha512:function(){return $g}});var ie={};r.r(ie),r.d(ie,{identity:function(){return Wg}});var se={};r.r(se),r.d(se,{code:function(){return Yg},decode:function(){return Xg},encode:function(){return Jg},name:function(){return Qg}});var oe={};r.r(oe),r.d(oe,{code:function(){return rm},decode:function(){return im},encode:function(){return nm},name:function(){return tm}});var ae={};r.r(ae),r.d(ae,{RsaPrivateKey:function(){return Uv},RsaPublicKey:function(){return Mv},fromJwk:function(){return Vv},generateKeyPair:function(){return zv},unmarshalRsaPrivateKey:function(){return Fv},unmarshalRsaPublicKey:function(){return jv}});var ce={};r.r(ce),r.d(ce,{Ed25519PrivateKey:function(){return Xb},Ed25519PublicKey:function(){return Jb},generateKeyPair:function(){return tE},generateKeyPairFromSeed:function(){return rE},unmarshalEd25519PrivateKey:function(){return Zb},unmarshalEd25519PublicKey:function(){return eE}});var ue={};r.r(ue),r.d(ue,{Secp256k1PrivateKey:function(){return dE},Secp256k1PublicKey:function(){return hE},generateKeyPair:function(){return yE},unmarshalSecp256k1PrivateKey:function(){return fE},unmarshalSecp256k1PublicKey:function(){return pE}});var le={};r.r(le),r.d(le,{InvalidValueError:function(){return QF},MissingRepoOptionsError:function(){return YF},NonReversibleMigrationError:function(){return HF},NotInitializedRepoError:function(){return GF},RequiredParameterError:function(){return WF}});var he={};r.r(he),r.d(he,{identity:function(){return VV}});var de={};r.r(de),r.d(de,{base2:function(){return zV}});var fe={};r.r(fe),r.d(fe,{base8:function(){return $V}});var pe={};r.r(pe),r.d(pe,{base10:function(){return qV}});var ye={};r.r(ye),r.d(ye,{base16:function(){return KV},base16upper:function(){return HV}});var ge={};r.r(ge),r.d(ge,{base32:function(){return GV},base32hex:function(){return JV},base32hexpad:function(){return ZV},base32hexpadupper:function(){return ez},base32hexupper:function(){return XV},base32pad:function(){return QV},base32padupper:function(){return YV},base32upper:function(){return WV},base32z:function(){return tz}});var me={};r.r(me),r.d(me,{base36:function(){return rz},base36upper:function(){return nz}});var we={};r.r(we),r.d(we,{base58btc:function(){return iz},base58flickr:function(){return sz}});var ve={};r.r(ve),r.d(ve,{base64:function(){return oz},base64pad:function(){return az},base64url:function(){return cz},base64urlpad:function(){return uz}});var be={};r.r(be),r.d(be,{base256emoji:function(){return yz}});var Ee={};r.r(Ee),r.d(Ee,{sha256:function(){return Hz},sha512:function(){return Gz}});var _e={};r.r(_e),r.d(_e,{identity:function(){return Xz}});var Ae={};r.r(Ae),r.d(Ae,{code:function(){return e$},decode:function(){return r$},encode:function(){return t$},name:function(){return Zz}});var Se={};r.r(Se),r.d(Se,{code:function(){return o$},decode:function(){return c$},encode:function(){return a$},name:function(){return s$}});var ke={};r.r(ke),r.d(ke,{Decoder:function(){return zJ},Encoder:function(){return VJ},PacketType:function(){return jJ},protocol:function(){return FJ}});var Ie={};r.r(Ie),r.d(Ie,{identity:function(){return _1}});var Te={};r.r(Te),r.d(Te,{base2:function(){return A1}});var Ce={};r.r(Ce),r.d(Ce,{base8:function(){return S1}});var Re={};r.r(Re),r.d(Re,{base10:function(){return k1}});var Pe={};r.r(Pe),r.d(Pe,{base16:function(){return I1},base16upper:function(){return T1}});var xe={};r.r(xe),r.d(xe,{base32:function(){return C1},base32hex:function(){return O1},base32hexpad:function(){return D1},base32hexpadupper:function(){return B1},base32hexupper:function(){return N1},base32pad:function(){return P1},base32padupper:function(){return x1},base32upper:function(){return R1},base32z:function(){return L1}});var Oe={};r.r(Oe),r.d(Oe,{base36:function(){return M1},base36upper:function(){return U1}});var Ne={};r.r(Ne),r.d(Ne,{base58btc:function(){return F1},base58flickr:function(){return j1}});var De={};r.r(De),r.d(De,{base64:function(){return V1},base64pad:function(){return z1},base64url:function(){return $1},base64urlpad:function(){return q1}});var Be={};r.r(Be),r.d(Be,{base256emoji:function(){return Y1}});var Le={};r.r(Le),r.d(Le,{sha256:function(){return T2},sha512:function(){return C2}});var Me={};r.r(Me),r.d(Me,{identity:function(){return N2}});var Ue={};r.r(Ue),r.d(Ue,{code:function(){return B2},decode:function(){return M2},encode:function(){return L2},name:function(){return D2}});var Fe={};r.r(Fe),r.d(Fe,{code:function(){return V2},decode:function(){return $2},encode:function(){return z2},name:function(){return j2}});var je={};r.r(je),r.d(je,{identity:function(){return w5}});var Ve={};r.r(Ve),r.d(Ve,{base2:function(){return v5}});var ze={};r.r(ze),r.d(ze,{base8:function(){return b5}});var $e={};r.r($e),r.d($e,{base10:function(){return E5}});var qe={};r.r(qe),r.d(qe,{base16:function(){return _5},base16upper:function(){return A5}});var Ke={};r.r(Ke),r.d(Ke,{base32:function(){return S5},base32hex:function(){return C5},base32hexpad:function(){return P5},base32hexpadupper:function(){return x5},base32hexupper:function(){return R5},base32pad:function(){return I5},base32padupper:function(){return T5},base32upper:function(){return k5},base32z:function(){return O5}});var He={};r.r(He),r.d(He,{base36:function(){return N5},base36upper:function(){return D5}});var Ge={};r.r(Ge),r.d(Ge,{base58btc:function(){return B5},base58flickr:function(){return L5}});var We={};r.r(We),r.d(We,{base64:function(){return M5},base64pad:function(){return U5},base64url:function(){return F5},base64urlpad:function(){return j5}});var Qe={};r.r(Qe),r.d(Qe,{base256emoji:function(){return H5}});var Ye={};r.r(Ye),r.d(Ye,{sha256:function(){return A4},sha512:function(){return S4}});var Je={};r.r(Je),r.d(Je,{identity:function(){return R4}});var Xe={};r.r(Xe),r.d(Xe,{code:function(){return x4},decode:function(){return N4},encode:function(){return O4},name:function(){return P4}});var Ze={};r.r(Ze),r.d(Ze,{code:function(){return M4},decode:function(){return F4},encode:function(){return U4},name:function(){return L4}});var et={};r.r(et),r.d(et,{identity:function(){return K7}});var tt={};r.r(tt),r.d(tt,{base2:function(){return H7}});var rt={};r.r(rt),r.d(rt,{base8:function(){return G7}});var nt={};r.r(nt),r.d(nt,{base10:function(){return W7}});var it={};r.r(it),r.d(it,{base16:function(){return Q7},base16upper:function(){return Y7}});var st={};r.r(st),r.d(st,{base32:function(){return J7},base32hex:function(){return t9},base32hexpad:function(){return n9},base32hexpadupper:function(){return i9},base32hexupper:function(){return r9},base32pad:function(){return Z7},base32padupper:function(){return e9},base32upper:function(){return X7},base32z:function(){return s9}});var ot={};r.r(ot),r.d(ot,{base36:function(){return o9},base36upper:function(){return a9}});var at={};r.r(at),r.d(at,{base58btc:function(){return c9},base58flickr:function(){return u9}});var ct={};r.r(ct),r.d(ct,{base64:function(){return l9},base64pad:function(){return h9},base64url:function(){return d9},base64urlpad:function(){return f9}});var ut={};r.r(ut),r.d(ut,{base256emoji:function(){return v9}});var lt={};r.r(lt),r.d(lt,{sha256:function(){return Y9},sha512:function(){return J9}});var ht={};r.r(ht),r.d(ht,{identity:function(){return ree}});var dt={};r.r(dt),r.d(dt,{code:function(){return iee},decode:function(){return oee},encode:function(){return see},name:function(){return nee}});var ft={};r.r(ft),r.d(ft,{code:function(){return lee},decode:function(){return dee},encode:function(){return hee},name:function(){return uee}});var pt={};r.r(pt),r.d(pt,{abortedError:function(){return Iie},notFoundError:function(){return kie}});r(7658);var yt=r(535),gt=yt,mt=r(798),wt=r(5652);r(3408),r(4590);function vt(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var bt=vt,Et=bt,_t=Et;new Uint8Array(0);const At=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class St{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class kt{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Tt(this,e)}}class It{constructor(e){this.decoders=e}or(e){return Tt(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Tt=(e,t)=>new It({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Ct{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new St(e,t,r),this.decoder=new kt(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Rt=({name:e,prefix:t,encode:r,decode:n})=>new Ct(e,t,r,n),Pt=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=_t(r,t);return Rt({prefix:e,name:t,encode:n,decode:e=>At(i(e))})},xt=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ot=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},Nt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Rt({prefix:t,name:e,encode(e){return Ot(e,n,r)},decode(t){return xt(t,n,r,e)}}),Dt=Pt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bt=(Pt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5})),Lt=(Nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}));Nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Mt(e){return Object.assign(wt(e),{error:wt(`${e}:error`),trace:wt(`${e}:trace`)})}wt.formatters.b=e=>null==e?"undefined":Dt.baseEncode(e),wt.formatters.t=e=>null==e?"undefined":Bt.baseEncode(e),wt.formatters.m=e=>null==e?"undefined":Lt.baseEncode(e),wt.formatters.p=e=>null==e?"undefined":e.toString(),wt.formatters.c=e=>null==e?"undefined":e.toString(),wt.formatters.k=e=>null==e?"undefined":e.toString();var Ut=r(9998),Ft=r(6425);const jt=Ft.Reader,Vt=Ft.Writer,zt=Ft.util,$t=Ft.roots["ipfs-unixfs"]||(Ft.roots["ipfs-unixfs"]={}),qt=$t.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=zt.newBuffer([]),e.prototype.filesize=zt.Long?zt.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=zt.emptyArray,e.prototype.hashType=zt.Long?zt.Long.fromBits(0,0,!0):0,e.prototype.fanout=zt.Long?zt.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=Vt.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&$t.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof jt||(e=jt.create(e));var r=void 0===t?e.len:e.pos+t,n=new $t.Data;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&i)){var s=e.uint32()+e.pos;while(e.pos<s)n.blocksizes.push(e.uint64())}else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=$t.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&i);break}}if(!n.hasOwnProperty("Type"))throw zt.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof $t.Data)return e;var t=new $t.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5;break}if(null!=e.Data&&("string"===typeof e.Data?zt.base64.decode(e.Data,t.Data=zt.newBuffer(zt.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(zt.Long?(t.filesize=zt.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new zt.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)zt.Long?(t.blocksizes[r]=zt.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"===typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"===typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"===typeof e.blocksizes[r]&&(t.blocksizes[r]=new zt.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(zt.Long?(t.hashType=zt.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new zt.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(zt.Long?(t.fanout=zt.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new zt.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=$t.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=zt.newBuffer(r.Data))),zt.Long){var n=new zt.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(zt.Long){n=new zt.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(zt.Long){n=new zt.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?$t.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?zt.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?zt.Long.prototype.toString.call(e.filesize):t.longs===Number?new zt.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var i=0;i<e.blocksizes.length;++i)"number"===typeof e.blocksizes[i]?r.blocksizes[i]=t.longs===String?String(e.blocksizes[i]):e.blocksizes[i]:r.blocksizes[i]=t.longs===String?zt.Long.prototype.toString.call(e.blocksizes[i]):t.longs===Number?new zt.LongBits(e.blocksizes[i].low>>>0,e.blocksizes[i].high>>>0).toNumber(!0):e.blocksizes[i]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?zt.Long.prototype.toString.call(e.hashType):t.longs===Number?new zt.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?zt.Long.prototype.toString.call(e.fanout):t.longs===Number?new zt.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=$t.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),Kt=($t.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=zt.Long?zt.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=Vt.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof jt||(e=jt.create(e));var r=void 0===t?e.len:e.pos+t,n=new $t.UnixTime;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&i);break}}if(!n.hasOwnProperty("Seconds"))throw zt.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof $t.UnixTime)return e;var t=new $t.UnixTime;return null!=e.Seconds&&(zt.Long?(t.Seconds=zt.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new zt.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(zt.Long){var n=new zt.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?zt.Long.prototype.toString.call(e.Seconds):t.longs===Number?new zt.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),$t.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=Vt.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof jt||(e=jt.create(e));var r=void 0===t?e.len:e.pos+t,n=new $t.Metadata;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.MimeType=e.string();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof $t.Metadata)return e;var t=new $t.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),qt),Ht=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Gt=["directory","hamt-sharded-directory"],Wt=parseInt("0644",8),Qt=parseInt("0755",8);function Yt(e){if(null!=e)return"number"===typeof e?4095&e:(e=e.toString(),"0"===e.substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10))}function Jt(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw Ut(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}class Xt{static unmarshal(e){const t=Kt.decode(e),r=Kt.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=new Xt({type:Ht[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:void 0});return n._originalMode=r.mode||0,n}constructor(e={type:"file"}){const{type:t,data:r,blockSizes:n,hashType:i,fanout:s,mtime:o,mode:a}=e;if(t&&!Ht.includes(t))throw Ut(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=r,this.hashType=i,this.fanout=s,this.blockSizes=n||[],this._originalMode=0,this.mode=Yt(a),o&&(this.mtime=Jt(o),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Qt:Wt;const t=Yt(e);void 0!==t&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Gt.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach((t=>{e+=t})),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=Kt.DataType.Raw;break;case"directory":e=Kt.DataType.Directory;break;case"file":e=Kt.DataType.File;break;case"metadata":e=Kt.DataType.Metadata;break;case"symlink":e=Kt.DataType.Symlink;break;case"hamt-sharded-directory":e=Kt.DataType.HAMTShard;break;default:throw Ut(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t,r,n=this.data;if(this.data&&this.data.length||(n=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(Yt(this.mode)||0),t!==Wt||this.isDirectory()||(t=void 0),t===Qt&&this.isDirectory()&&(t=void 0)),null!=this.mtime){const e=Jt(this.mtime);e&&(r={Seconds:e.secs,FractionalNanoseconds:e.nsecs},0===r.FractionalNanoseconds&&delete r.FractionalNanoseconds)}const i={Type:e,Data:n,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:r};return Kt.encode(i).finish()}}var Zt=r(9329);const er=new TextDecoder;function tr(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const i=e[t++];if(r+=n<28?(127&i)<<n:(127&i)*2**n,i<128)break}return[r,t]}function rr(e,t){let r;[r,t]=tr(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function nr(e,t){let r;return[r,t]=tr(e,t),[7&r,r>>3,t]}function ir(e){const t={},r=e.length;let n=0;while(n<r){let r,i;if([r,i,n]=nr(e,n),1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=rr(e,n)}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=rr(e,n),t.Name=er.decode(i)}else{if(3!==i)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[t.Tsize,n]=tr(e,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function sr(e){const t=e.length;let r,n,i=0,s=!1;while(i<t){let t,o;if([t,o,i]=nr(e,i),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===o){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,i]=rr(e,i),r&&(s=!0)}else{if(2!==o)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${o}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;r||(r=[]),[t,i]=rr(e,i),r.push(ir(t))}}}if(i>t)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return n&&(o.Data=n),o.Links=r||[],o}const or=new TextEncoder,ar=2**32,cr=2**31;function ur(e,t){let r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=fr(t,r,e.Tsize)-1,t[r]=24}if("string"===typeof e.Name){const n=or.encode(e.Name);r-=n.length,t.set(n,r),r=fr(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=fr(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function lr(e){const t=dr(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=fr(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){const t=ur(e.Links[i],r.subarray(0,n));n-=t,n=fr(r,n,t)-1,r[n]=18}return r}function hr(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+pr(r)}if("string"===typeof e.Name){const r=or.encode(e.Name).length;t+=1+r+pr(r)}return"number"===typeof e.Tsize&&(t+=1+pr(e.Tsize)),t}function dr(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+pr(r)}if(e.Links)for(const r of e.Links){const e=hr(r);t+=1+e+pr(e)}return t}function fr(e,t,r){t-=pr(r);const n=t;while(r>=cr)e[t++]=127&r|128,r/=128;while(r>=128)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function pr(e){return e%2===0&&e++,Math.floor((yr(e)+6)/7)}function yr(e){let t=0;return e>=ar&&(e=Math.floor(e/ar),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+gr[e]}const gr=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],mr=["Data","Links"],wr=["Hash","Name","Tsize"],vr=new TextEncoder;function br(e,t){if(e===t)return 0;const r=e.Name?vr.encode(e.Name):[],n=t.Name?vr.encode(t.Name):[];let i=r.length,s=n.length;for(let o=0,a=Math.min(i,s);o<a;++o)if(r[o]!==n[o]){i=r[o],s=n[o];break}return i<s?-1:s<i?1:0}function Er(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function _r(e){if("object"===typeof e.asCID){const t=Zt.k.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=Zt.k.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=Zt.k.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=Zt.k.decode(e.Hash)))}catch(r){throw new TypeError(`Invalid DAG-PB form: ${r.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(t.Name=e.Name),"number"===typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Ar(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=vr.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(_r),t.Links.sort(br)}else t.Links=[];return t}function Sr(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Er(e,mr))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Er(r,wr))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!==typeof r.Tsize||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===br(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function kr(e,t=[]){return Ar({Data:e,Links:t})}function Ir(e,t,r){return _r({Hash:r,Name:e,Tsize:t})}const Tr="dag-pb",Cr=112;function Rr(e){Sr(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),lr(t)}function Pr(e){const t=sr(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((e=>{const t={};try{t.Hash=Zt.k.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}const xr=["string","number","bigint","symbol"],Or=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Nr(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(xr.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(Dr(e))return"Buffer";const r=Br(e);return r||"Object"}function Dr(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Br(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Or.includes(t))return t}class Lr{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Lr.uint=new Lr(0,"uint",!0),Lr.negint=new Lr(1,"negint",!0),Lr.bytes=new Lr(2,"bytes",!0),Lr.string=new Lr(3,"string",!0),Lr.array=new Lr(4,"array",!1),Lr.map=new Lr(5,"map",!1),Lr.tag=new Lr(6,"tag",!1),Lr.float=new Lr(7,"float",!0),Lr.false=new Lr(7,"false",!0),Lr.true=new Lr(7,"true",!0),Lr.null=new Lr(7,"null",!0),Lr.undefined=new Lr(7,"undefined",!0),Lr.break=new Lr(7,"break",!0);class Mr{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ur=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,Fr=new TextDecoder,jr=new TextEncoder;function Vr(e){return Ur&&globalThis.Buffer.isBuffer(e)}function zr(e){return e instanceof Uint8Array?Vr(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const $r=Ur?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Jr(e,t,r):(e,t,r)=>r-t>64?Fr.decode(e.subarray(t,r)):Jr(e,t,r),qr=Ur?e=>e.length>64?globalThis.Buffer.from(e):Yr(e):e=>e.length>64?jr.encode(e):Yr(e),Kr=e=>Uint8Array.from(e),Hr=Ur?(e,t,r)=>Vr(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Gr=Ur?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),zr(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Wr=Ur?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Qr(e,t){if(Vr(e)&&Vr(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Yr(e,t=1/0){let r;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function Jr(e,t,r){const n=[];while(t<r){const i=e[t];let s=null,o=i>239?4:i>223?3:i>191?2:1;if(t+o<=r){let r,n,a,c;switch(o){case 1:i<128&&(s=i);break;case 2:r=e[t+1],128===(192&r)&&(c=(31&i)<<6|63&r,c>127&&(s=c));break;case 3:r=e[t+1],n=e[t+2],128===(192&r)&&128===(192&n)&&(c=(15&i)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[t+1],n=e[t+2],a=e[t+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),t+=o}return Zr(n)}const Xr=4096;function Zr(e){const t=e.length;if(t<=Xr)return String.fromCharCode.apply(String,e);let r="",n=0;while(n<t)r+=String.fromCharCode.apply(String,e.slice(n,n+=Xr));return r}const en=256;class tn{constructor(e=en){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];const r=this.cursor+e.length;if(r<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Wr(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Hr(r,0,this.cursor)}else t=Gr(this.chunks,this.cursor);return e&&this.reset(),t}}const rn="CBOR decode error:",nn="CBOR encode error:",sn=[];function on(e,t,r){if(e.length-t<r)throw new Error(`${rn} not enough data for type`)}sn[23]=1,sn[24]=2,sn[25]=3,sn[26]=5,sn[27]=9;const an=[24,256,65536,4294967296,BigInt("18446744073709551616")];function cn(e,t,r){on(e,t,1);const n=e[t];if(!0===r.strict&&n<an[0])throw new Error(`${rn} integer encoded in more bytes than necessary (strict decode)`);return n}function un(e,t,r){on(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<an[1])throw new Error(`${rn} integer encoded in more bytes than necessary (strict decode)`);return n}function ln(e,t,r){on(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<an[2])throw new Error(`${rn} integer encoded in more bytes than necessary (strict decode)`);return n}function hn(e,t,r){on(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&s<an[3])throw new Error(`${rn} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===r.allowBigInt)return s;throw new Error(`${rn} integers outside of the safe integer range are not supported`)}function dn(e,t,r,n){return new Mr(Lr.uint,cn(e,t+1,n),2)}function fn(e,t,r,n){return new Mr(Lr.uint,un(e,t+1,n),3)}function pn(e,t,r,n){return new Mr(Lr.uint,ln(e,t+1,n),5)}function yn(e,t,r,n){return new Mr(Lr.uint,hn(e,t+1,n),9)}function gn(e,t){return mn(e,0,t.value)}function mn(e,t,r){if(r<an[0]){const n=Number(r);e.push([t|n])}else if(r<an[1]){const n=Number(r);e.push([24|t,n])}else if(r<an[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<an[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<an[4]))throw new Error(`${rn} encountered BigInt larger than allowable range`);{const r=[27|t,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&s,s>>=8,r[3]=255&s,s>>=8,r[2]=255&s,s>>=8,r[1]=255&s,e.push(r)}}}function wn(e,t,r,n){return new Mr(Lr.negint,-1-cn(e,t+1,n),2)}function vn(e,t,r,n){return new Mr(Lr.negint,-1-un(e,t+1,n),3)}function bn(e,t,r,n){return new Mr(Lr.negint,-1-ln(e,t+1,n),5)}gn.encodedSize=function(e){return mn.encodedSize(e.value)},mn.encodedSize=function(e){return e<an[0]?1:e<an[1]?2:e<an[2]?3:e<an[3]?5:9},gn.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const En=BigInt(-1),_n=BigInt(1);function An(e,t,r,n){const i=hn(e,t+1,n);if("bigint"!==typeof i){const e=-1-i;if(e>=Number.MIN_SAFE_INTEGER)return new Mr(Lr.negint,e,9)}if(!0!==n.allowBigInt)throw new Error(`${rn} integers outside of the safe integer range are not supported`);return new Mr(Lr.negint,En-BigInt(i),9)}function Sn(e,t){const r=t.value,n="bigint"===typeof r?r*En-_n:-1*r-1;mn(e,t.type.majorEncoded,n)}function kn(e,t,r,n){on(e,t,r+n);const i=Hr(e,t+r,t+r+n);return new Mr(Lr.bytes,i,r+n)}function In(e,t,r,n){return kn(e,t,1,r)}function Tn(e,t,r,n){return kn(e,t,2,cn(e,t+1,n))}function Cn(e,t,r,n){return kn(e,t,3,un(e,t+1,n))}function Rn(e,t,r,n){return kn(e,t,5,ln(e,t+1,n))}function Pn(e,t,r,n){const i=hn(e,t+1,n);if("bigint"===typeof i)throw new Error(`${rn} 64-bit integer bytes lengths not supported`);return kn(e,t,9,i)}function xn(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Lr.string?qr(e.value):e.value),e.encodedBytes}function On(e,t){const r=xn(t);mn(e,t.type.majorEncoded,r.length),e.push(r)}function Nn(e,t){return e.length<t.length?-1:e.length>t.length?1:Qr(e,t)}function Dn(e,t,r,n,i){const s=r+n;on(e,t,s);const o=new Mr(Lr.string,$r(e,t+r,t+s),s);return!0===i.retainStringBytes&&(o.byteValue=Hr(e,t+r,t+s)),o}function Bn(e,t,r,n){return Dn(e,t,1,r,n)}function Ln(e,t,r,n){return Dn(e,t,2,cn(e,t+1,n),n)}function Mn(e,t,r,n){return Dn(e,t,3,un(e,t+1,n),n)}function Un(e,t,r,n){return Dn(e,t,5,ln(e,t+1,n),n)}function Fn(e,t,r,n){const i=hn(e,t+1,n);if("bigint"===typeof i)throw new Error(`${rn} 64-bit integer string lengths not supported`);return Dn(e,t,9,i,n)}Sn.encodedSize=function(e){const t=e.value,r="bigint"===typeof t?t*En-_n:-1*t-1;return r<an[0]?1:r<an[1]?2:r<an[2]?3:r<an[3]?5:9},Sn.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},On.encodedSize=function(e){const t=xn(e);return mn.encodedSize(t.length)+t.length},On.compareTokens=function(e,t){return Nn(xn(e),xn(t))};const jn=On;function Vn(e,t,r,n){return new Mr(Lr.array,n,r)}function zn(e,t,r,n){return Vn(e,t,1,r)}function $n(e,t,r,n){return Vn(e,t,2,cn(e,t+1,n))}function qn(e,t,r,n){return Vn(e,t,3,un(e,t+1,n))}function Kn(e,t,r,n){return Vn(e,t,5,ln(e,t+1,n))}function Hn(e,t,r,n){const i=hn(e,t+1,n);if("bigint"===typeof i)throw new Error(`${rn} 64-bit integer array lengths not supported`);return Vn(e,t,9,i)}function Gn(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${rn} indefinite length items not allowed`);return Vn(e,t,1,1/0)}function Wn(e,t){mn(e,Lr.array.majorEncoded,t.value)}function Qn(e,t,r,n){return new Mr(Lr.map,n,r)}function Yn(e,t,r,n){return Qn(e,t,1,r)}function Jn(e,t,r,n){return Qn(e,t,2,cn(e,t+1,n))}function Xn(e,t,r,n){return Qn(e,t,3,un(e,t+1,n))}function Zn(e,t,r,n){return Qn(e,t,5,ln(e,t+1,n))}function ei(e,t,r,n){const i=hn(e,t+1,n);if("bigint"===typeof i)throw new Error(`${rn} 64-bit integer map lengths not supported`);return Qn(e,t,9,i)}function ti(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${rn} indefinite length items not allowed`);return Qn(e,t,1,1/0)}function ri(e,t){mn(e,Lr.map.majorEncoded,t.value)}function ni(e,t,r,n){return new Mr(Lr.tag,r,1)}function ii(e,t,r,n){return new Mr(Lr.tag,cn(e,t+1,n),2)}function si(e,t,r,n){return new Mr(Lr.tag,un(e,t+1,n),3)}function oi(e,t,r,n){return new Mr(Lr.tag,ln(e,t+1,n),5)}function ai(e,t,r,n){return new Mr(Lr.tag,hn(e,t+1,n),9)}function ci(e,t){mn(e,Lr.tag.majorEncoded,t.value)}Wn.compareTokens=gn.compareTokens,Wn.encodedSize=function(e){return mn.encodedSize(e.value)},ri.compareTokens=gn.compareTokens,ri.encodedSize=function(e){return mn.encodedSize(e.value)},ci.compareTokens=gn.compareTokens,ci.encodedSize=function(e){return mn.encodedSize(e.value)};const ui=20,li=21,hi=22,di=23;function fi(e,t,r,n){if(!1===n.allowUndefined)throw new Error(`${rn} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new Mr(Lr["null"],null,1):new Mr(Lr.undefined,void 0,1)}function pi(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${rn} indefinite length items not allowed`);return new Mr(Lr["break"],void 0,1)}function yi(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error(`${rn} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${rn} Infinity values are not supported`)}return new Mr(Lr.float,e,t)}function gi(e,t,r,n){return yi(Si(e,t+1),3,n)}function mi(e,t,r,n){return yi(Ii(e,t+1),5,n)}function wi(e,t,r,n){return yi(Ci(e,t+1),9,n)}function vi(e,t,r){const n=t.value;if(!1===n)e.push([Lr.float.majorEncoded|ui]);else if(!0===n)e.push([Lr.float.majorEncoded|li]);else if(null===n)e.push([Lr.float.majorEncoded|hi]);else if(void 0===n)e.push([Lr.float.majorEncoded|di]);else{let t,i=!1;r&&!0===r.float64||(Ai(n),t=Si(_i,1),n===t||Number.isNaN(n)?(_i[0]=249,e.push(_i.slice(0,3)),i=!0):(ki(n),t=Ii(_i,1),n===t&&(_i[0]=250,e.push(_i.slice(0,5)),i=!0))),i||(Ti(n),t=Ci(_i,1),_i[0]=251,e.push(_i.slice(0,9)))}}vi.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!t||!0!==t.float64){Ai(r);let e=Si(_i,1);if(r===e||Number.isNaN(r))return 3;if(ki(r),e=Ii(_i,1),r===e)return 5}return 9};const bi=new ArrayBuffer(9),Ei=new DataView(bi,1),_i=new Uint8Array(bi,0);function Ai(e){if(e===1/0)Ei.setUint16(0,31744,!1);else if(e===-1/0)Ei.setUint16(0,64512,!1);else if(Number.isNaN(e))Ei.setUint16(0,32256,!1);else{Ei.setFloat32(0,e);const t=Ei.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)Ei.setUint16(0,31744,!1);else if(0===r)Ei.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?Ei.setUint16(0,0):e<-14?Ei.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Ei.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function Si(e,t){if(e.length-t<2)throw new Error(`${rn} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,i=1023&r;let s;return s=0===n?i*2**-24:31!==n?(i+1024)*2**(n-25):0===i?1/0:NaN,32768&r?-s:s}function ki(e){Ei.setFloat32(0,e,!1)}function Ii(e,t){if(e.length-t<4)throw new Error(`${rn} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Ti(e){Ei.setFloat64(0,e,!1)}function Ci(e,t){if(e.length-t<8)throw new Error(`${rn} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function Ri(e,t,r){throw new Error(`${rn} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Pi(e){return()=>{throw new Error(`${rn} ${e}`)}}vi.compareTokens=gn.compareTokens;const xi=[];for(let ese=0;ese<=23;ese++)xi[ese]=Ri;xi[24]=dn,xi[25]=fn,xi[26]=pn,xi[27]=yn,xi[28]=Ri,xi[29]=Ri,xi[30]=Ri,xi[31]=Ri;for(let ese=32;ese<=55;ese++)xi[ese]=Ri;xi[56]=wn,xi[57]=vn,xi[58]=bn,xi[59]=An,xi[60]=Ri,xi[61]=Ri,xi[62]=Ri,xi[63]=Ri;for(let ese=64;ese<=87;ese++)xi[ese]=In;xi[88]=Tn,xi[89]=Cn,xi[90]=Rn,xi[91]=Pn,xi[92]=Ri,xi[93]=Ri,xi[94]=Ri,xi[95]=Pi("indefinite length bytes/strings are not supported");for(let ese=96;ese<=119;ese++)xi[ese]=Bn;xi[120]=Ln,xi[121]=Mn,xi[122]=Un,xi[123]=Fn,xi[124]=Ri,xi[125]=Ri,xi[126]=Ri,xi[127]=Pi("indefinite length bytes/strings are not supported");for(let ese=128;ese<=151;ese++)xi[ese]=zn;xi[152]=$n,xi[153]=qn,xi[154]=Kn,xi[155]=Hn,xi[156]=Ri,xi[157]=Ri,xi[158]=Ri,xi[159]=Gn;for(let ese=160;ese<=183;ese++)xi[ese]=Yn;xi[184]=Jn,xi[185]=Xn,xi[186]=Zn,xi[187]=ei,xi[188]=Ri,xi[189]=Ri,xi[190]=Ri,xi[191]=ti;for(let ese=192;ese<=215;ese++)xi[ese]=ni;xi[216]=ii,xi[217]=si,xi[218]=oi,xi[219]=ai,xi[220]=Ri,xi[221]=Ri,xi[222]=Ri,xi[223]=Ri;for(let ese=224;ese<=243;ese++)xi[ese]=Pi("simple values are not supported");xi[244]=Ri,xi[245]=Ri,xi[246]=Ri,xi[247]=fi,xi[248]=Pi("simple values are not supported"),xi[249]=gi,xi[250]=mi,xi[251]=wi,xi[252]=Ri,xi[253]=Ri,xi[254]=Ri,xi[255]=pi;const Oi=[];for(let ese=0;ese<24;ese++)Oi[ese]=new Mr(Lr.uint,ese,1);for(let ese=-1;ese>=-24;ese--)Oi[31-ese]=new Mr(Lr.negint,ese,1);function Ni(e){switch(e.type){case Lr["false"]:return Kr([244]);case Lr["true"]:return Kr([245]);case Lr["null"]:return Kr([246]);case Lr.bytes:return e.value.length?void 0:Kr([64]);case Lr.string:return""===e.value?Kr([96]):void 0;case Lr.array:return 0===e.value?Kr([128]):void 0;case Lr.map:return 0===e.value?Kr([160]):void 0;case Lr.uint:return e.value<24?Kr([Number(e.value)]):void 0;case Lr.negint:if(e.value>=-24)return Kr([31-Number(e.value)])}}Oi[64]=new Mr(Lr.bytes,new Uint8Array(0),1),Oi[96]=new Mr(Lr.string,"",1),Oi[128]=new Mr(Lr.array,0,1),Oi[160]=new Mr(Lr.map,0,1),Oi[244]=new Mr(Lr["false"],!1,1),Oi[245]=new Mr(Lr["true"],!0,1),Oi[246]=new Mr(Lr["null"],null,1);const Di={float64:!1,mapSorter:$i,quickEncodeToken:Ni};function Bi(){const e=[];return e[Lr.uint.major]=gn,e[Lr.negint.major]=Sn,e[Lr.bytes.major]=On,e[Lr.string.major]=jn,e[Lr.array.major]=Wn,e[Lr.map.major]=ri,e[Lr.tag.major]=ci,e[Lr.float.major]=vi,e}const Li=Bi(),Mi=new tn;class Ui{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${nn} object contains circular references`);return new Ui(t,e)}}const Fi={null:new Mr(Lr["null"],null),undefined:new Mr(Lr.undefined,void 0),true:new Mr(Lr["true"],!0),false:new Mr(Lr["false"],!1),emptyArray:new Mr(Lr.array,0),emptyMap:new Mr(Lr.map,0)},ji={number(e,t,r,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?new Mr(e>=0?Lr.uint:Lr.negint,e):new Mr(Lr.float,e)},bigint(e,t,r,n){return e>=BigInt(0)?new Mr(Lr.uint,e):new Mr(Lr.negint,e)},Uint8Array(e,t,r,n){return new Mr(Lr.bytes,e)},string(e,t,r,n){return new Mr(Lr.string,e)},boolean(e,t,r,n){return e?Fi.true:Fi.false},null(e,t,r,n){return Fi.null},undefined(e,t,r,n){return Fi.undefined},ArrayBuffer(e,t,r,n){return new Mr(Lr.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new Mr(Lr.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[Fi.emptyArray,new Mr(Lr["break"])]:Fi.emptyArray;n=Ui.createCheck(n,e);const i=[];let s=0;for(const o of e)i[s++]=Vi(o,r,n);return r.addBreakTokens?[new Mr(Lr.array,e.length),i,new Mr(Lr["break"])]:[new Mr(Lr.array,e.length),i]},Object(e,t,r,n){const i="Object"!==t,s=i?e.keys():Object.keys(e),o=i?e.size:s.length;if(!o)return!0===r.addBreakTokens?[Fi.emptyMap,new Mr(Lr["break"])]:Fi.emptyMap;n=Ui.createCheck(n,e);const a=[];let c=0;for(const u of s)a[c++]=[Vi(u,r,n),Vi(i?e.get(u):e[u],r,n)];return zi(a,r),r.addBreakTokens?[new Mr(Lr.map,o),a,new Mr(Lr["break"])]:[new Mr(Lr.map,o),a]}};ji.Map=ji.Object,ji.Buffer=ji.Uint8Array;for(const ese of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ji[`${ese}Array`]=ji.DataView;function Vi(e,t={},r){const n=Nr(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||ji[n];if("function"===typeof i){const s=i(e,n,t,r);if(null!=s)return s}const s=ji[n];if(!s)throw new Error(`${nn} unsupported type: ${n}`);return s(e,n,t,r)}function zi(e,t){t.mapSorter&&e.sort(t.mapSorter)}function $i(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=Li[i].compareTokens(r,n);return 0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function qi(e,t,r,n){if(Array.isArray(t))for(const i of t)qi(e,i,r,n);else r[t.type.major](e,t,n)}function Ki(e,t,r){const n=Vi(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const i=t[n.type.major];if(i.encodedSize){const e=i.encodedSize(n,r),t=new tn(e);if(i(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return zr(t.chunks[0])}}return Mi.reset(),qi(Mi,n,t,r),Mi.toBytes(!0)}function Hi(e,t){return t=Object.assign({},Di,t),Ki(e,Li,t)}const Gi={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Wi{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Oi[e];if(void 0===t){const r=xi[e];if(!r)throw new Error(`${rn} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}const Qi=Symbol.for("DONE"),Yi=Symbol.for("BREAK");function Ji(e,t,r){const n=[];for(let i=0;i<e.value;i++){const s=Zi(t,r);if(s===Yi){if(e.value===1/0)break;throw new Error(`${rn} got unexpected break to lengthed array`)}if(s===Qi)throw new Error(`${rn} found array but not enough entries (got ${i}, expected ${e.value})`);n[i]=s}return n}function Xi(e,t,r){const n=!0===r.useMaps,i=n?void 0:{},s=n?new Map:void 0;for(let o=0;o<e.value;o++){const a=Zi(t,r);if(a===Yi){if(e.value===1/0)break;throw new Error(`${rn} got unexpected break to lengthed map`)}if(a===Qi)throw new Error(`${rn} found map but not enough entries (got ${o} [no key], expected ${e.value})`);if(!0!==n&&"string"!==typeof a)throw new Error(`${rn} non-string keys not supported (got ${typeof a})`);const c=Zi(t,r);if(c===Qi)throw new Error(`${rn} found map but not enough entries (got ${o} [no value], expected ${e.value})`);n?s.set(a,c):i[a]=c}return n?s:i}function Zi(e,t){if(e.done())return Qi;const r=e.next();if(r.type===Lr["break"])return Yi;if(r.type.terminal)return r.value;if(r.type===Lr.array)return Ji(r,e,t);if(r.type===Lr.map)return Xi(r,e,t);if(r.type===Lr.tag){if(t.tags&&"function"===typeof t.tags[r.value]){const n=Zi(e,t);return t.tags[r.value](n)}throw new Error(`${rn} tag not supported (${r.value})`)}throw new Error("unsupported")}function es(e,t){if(!(e instanceof Uint8Array))throw new Error(`${rn} data to decode must be a Uint8Array`);t=Object.assign({},Gi,t);const r=t.tokenizer||new Wi(e,t),n=Zi(r,t);if(n===Qi)throw new Error(`${rn} did not find any content to decode`);if(n===Yi)throw new Error(`${rn} got unexpected break`);if(!r.done())throw new Error(`${rn} too many terminals, data makes no sense`);return n}const ts=42;function rs(e){if(e.asCID!==e)return null;const t=Zt.k.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new Mr(Lr.tag,ts),new Mr(Lr.bytes,r)]}function ns(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function is(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const ss={float64:!0,typeEncoders:{Object:rs,undefined:ns,number:is}};function os(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Zt.k.decode(e.subarray(1))}const as={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};as.tags[ts]=os;const cs="dag-cbor",us=113,ls=e=>Hi(e,ss),hs=e=>es(e,as);r(550);var ds=r(3914),fs=r(5226);const ps=({name:e,code:t,encode:r})=>new ys(e,t,r);class ys{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?fs.Ue(this.code,t):t.then((e=>fs.Ue(this.code,e)))}throw Error("Unknown type, must be binary type")}}var gs=r(4711);const ms=(0,gs.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ws=(0,gs.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vs=(0,gs.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bs=(0,gs.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});class Es extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Lr.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Lr.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Lr.uint.major](e,t){this.prefix(e);const r=String(t.value),n=[];for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);e.push(n)}[Lr.negint.major](e,t){this[Lr.uint.major](e,t)}[Lr.bytes.major](e,t){throw new Error(`${nn} unsupported type: Uint8Array`)}[Lr.string.major](e,t){this.prefix(e);const r=qr(JSON.stringify(t.value));e.push(r.length>32?zr(r):r)}[Lr.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Lr.array,elements:0}),e.push([91])}[Lr.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Lr.map,elements:0}),e.push([123])}[Lr.tag.major](e,t){}[Lr.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Lr.array)e.push([93]);else{if(t.type!==Lr.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${nn} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const r=String(t.value),n=[];let i=!1;for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s),i||46!==n[s]&&101!==n[s]&&69!==n[s]||(i=!0);i||(n.push(46),n.push(48)),e.push(n)}}function _s(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${nn} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==Lr.string||n.type!==Lr.string)throw new Error(`${nn} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${nn} unexpected duplicate map keys, this is not supported`)}const As={addBreakTokens:!0,mapSorter:_s};function Ss(e,t){return t=Object.assign({},As,t),Ki(e,new Es,t)}class ks{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();while(32===e||9===e||13===e||10===e)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${rn} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${rn} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,r=!1;const n=e=>{while(!this.done()){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Mr(Lr.uint,0,this.pos-e);this.pos++,r=!0}if(n([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${rn} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(r)throw new Error(`${rn} unexpected token at position ${this.pos}`);r=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,n([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(i);return r?new Mr(Lr.float,s,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new Mr(s>=0?Lr.uint:Lr.negint,s,this.pos-e):new Mr(s>=0?Lr.uint:Lr.negint,BigInt(i),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`${rn} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let i=this.pos,s=0;i<this.data.length&&s<65536;i++,s++){const e=this.data[i];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this.pos,i));return this.pos=i+1,new Mr(Lr.string,e,s)}}const e=this.pos,t=[],r=()=>{if(this.pos+4>=this.data.length)throw new Error(`${rn} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${rn} unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},n=()=>{const e=this.ch();let r,n,i,s,o=null,a=e>239?4:e>223?3:e>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${rn} unexpected unicode sequence at position ${this.pos}`);switch(a){case 1:e<128&&(o=e);break;case 2:r=this.data[this.pos+1],128===(192&r)&&(s=(31&e)<<6|63&r,s>127&&(o=s));break;case 3:r=this.data[this.pos+1],n=this.data[this.pos+2],128===(192&r)&&128===(192&n)&&(s=(15&e)<<12|(63&r)<<6|63&n,s>2047&&(s<55296||s>57343)&&(o=s));break;case 4:r=this.data[this.pos+1],n=this.data[this.pos+2],i=this.data[this.pos+3],128===(192&r)&&128===(192&n)&&128===(192&i)&&(s=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&i,s>65535&&s<1114112&&(o=s))}null===o?(o=65533,a=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|1023&o),t.push(o),this.pos+=a};while(!this.done()){const i=this.ch();let s;switch(i){case 92:if(this.pos++,this.done())throw new Error(`${rn} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${rn} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Mr(Lr.string,Zr(t),this.pos-e);default:if(i<32)throw new Error(`${rn} invalid control character at position ${this.pos}`);i<128?(t.push(i),this.pos++):n()}}throw new Error(`${rn} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Mr(Lr.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Mr(Lr.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Mr(Lr["null"],null,4);case 102:return this.expect([102,97,108,115,101]),new Mr(Lr["false"],!1,5);case 116:return this.expect([116,114,117,101]),new Mr(Lr["true"],!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${rn} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Mr(Lr["break"],void 0,1);if(44!==this.ch())throw new Error(`${rn} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Mr(Lr["break"],void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Mr(Lr["break"],void 0,1);if(44!==this.ch())throw new Error(`${rn} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Mr(Lr["break"],void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${rn} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${rn} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function Is(e,t){return t=Object.assign({tokenizer:new ks(e,t)},t),es(e,t)}function Ts(e){if(e.asCID!==e)return null;const t=Zt.k.asCID(e);if(!t)return null;const r=t.toString();return[new Mr(Lr.map,1/0,1),new Mr(Lr.string,"/",1),new Mr(Lr.string,r,r.length),new Mr(Lr["break"],void 0,1)]}function Cs(e){const t=ms.encode(e).slice(1);return[new Mr(Lr.map,1/0,1),new Mr(Lr.string,"/",1),new Mr(Lr.map,1/0,1),new Mr(Lr.string,"bytes",5),new Mr(Lr.string,t,t.length),new Mr(Lr["break"],void 0,1),new Mr(Lr["break"],void 0,1)]}function Rs(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Ps(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const xs={typeEncoders:{Object:Ts,Uint8Array:Cs,Buffer:Cs,undefined:Rs,number:Ps}};class Os extends ks{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Lr.map){const e=this._next();if(e.type===Lr.string&&"/"===e.value){const e=this._next();if(e.type===Lr.string){const t=this._next();if(t.type!==Lr["break"])throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new Mr(Lr.tag,42,0)}if(e.type===Lr.map){const e=this._next();if(e.type===Lr.string&&"bytes"===e.value){const e=this._next();if(e.type===Lr.string){for(let e=0;e<2;e++){const e=this._next();if(e.type!==Lr["break"])throw new Error("Invalid encoded Bytes form")}const t=ms.decode(`m${e.value}`);return new Mr(Lr.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const Ns={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ns.tags[42]=Zt.k.parse;const Ds="dag-json",Bs=297,Ls=e=>Ss(e,xs),Ms=e=>{const t=Object.assign(Ns,{tokenizer:new Os(e,Ns)});return Is(e,t)};function Us(e){return vs.encode(e).slice(1)}function Fs(e){return vs.decode(`u${e}`)}function js(e){const[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:Zt.k.decode(Fs(r))}}function Vs(e){const t={signature:Fs(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Fs(e.protected)),t}function zs(e){const t=Fs(e.payload);try{Zt.k.decode(t)}catch(r){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(Vs)}}function $s(e){const t={signature:Us(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Us(e.protected)),t}function qs(e){const t={payload:Us(e.payload),signatures:e.signatures.map($s)};return t.link=Zt.k.decode(new Uint8Array(e.payload)),t}function Ks(e){const[t,r,n,i,s]=e,o={ciphertext:i,iv:n,protected:t,tag:s};return r&&(o.recipients=[{encrypted_key:r}]),o}function Hs(e){const t={};return e.encrypted_key&&(t.encrypted_key=Fs(e.encrypted_key)),e.header&&(t.header=e.header),t}function Gs(e){const t={ciphertext:Fs(e.ciphertext),protected:Fs(e.protected),iv:Fs(e.iv),tag:Fs(e.tag)};return e.aad&&(t.aad=Fs(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Hs)),e.unprotected&&(t.unprotected=e.unprotected),t}function Ws(e){const t={};return e.encrypted_key&&(t.encrypted_key=Us(e.encrypted_key)),e.header&&(t.header=e.header),t}function Qs(e){const t={ciphertext:Us(e.ciphertext),protected:Us(e.protected),iv:Us(e.iv),tag:Us(e.tag)};return e.aad&&(t.aad=Us(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Ws)),e.unprotected&&(t.unprotected=e.unprotected),t}const Ys="dag-jose",Js=133;function Xs(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function Zs(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function eo(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function to(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function ro(e){if("string"===typeof e){const t=e.split(".");if(3===t.length)return js(t);if(5===t.length)return Ks(t);throw new Error("Not a valid JOSE string")}if(Xs(e)||to(e))return e;throw new Error("Not a valid unencoded JOSE object")}function no(e){let t;if("string"===typeof e&&(e=ro(e)),Xs(e))t=zs(e);else{if(!to(e))throw new Error("Not a valid JOSE object");t=Gs(e)}return new Uint8Array(ls(t))}function io(e){let t;try{t=hs(e)}catch(r){throw new Error("Not a valid DAG-JOSE object")}if(Zs(t))return qs(t);if(eo(t))return Qs(t);throw new Error("Not a valid DAG-JOSE object")}const so=0,oo="identity",ao=ds.coerce,co=e=>fs.Ue(so,ao(e)),uo={code:so,name:oo,encode:ao,digest:co},lo=(0,gs.Dp)({prefix:"\0",name:"identity",encode:e=>(0,ds.toString)(e),decode:e=>(0,ds.fromString)(e)}),ho=(0,gs.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),fo=(0,gs.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),po=(0,gs.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),yo=(0,gs.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),go=(0,gs.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var mo=r(2056);const wo=(0,gs.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),vo=(0,gs.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var bo=r(8334);const Eo=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_o=Eo.reduce(((e,t,r)=>(e[r]=t,e)),[]),Ao=Eo.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function So(e){return e.reduce(((e,t)=>(e+=_o[t],e)),"")}function ko(e){const t=[];for(const r of e){const e=Ao[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Io=(0,gs.Dp)({prefix:"🚀",name:"base256emoji",encode:So,decode:ko}),To=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Co=ps({name:"sha2-256",code:18,encode:To("SHA-256")}),Ro=ps({name:"sha2-512",code:19,encode:To("SHA-512")}),Po="raw",xo=85,Oo=e=>(0,ds.coerce)(e),No=e=>(0,ds.coerce)(e),Do=new TextEncoder,Bo=new TextDecoder,Lo="json",Mo=512,Uo=e=>Do.encode(JSON.stringify(e)),Fo=e=>JSON.parse(Bo.decode(e)),jo={...u,...l,...h,...d,...f,...mo,...p,...bo,...s,...y},Vo={...g,...c},zo={raw:m,json:w};function $o(){}class qo extends Error{constructor(e="not initialized"){super(e),this.name="NotInitializedError",this.code=qo.code}}qo.code="ERR_NOT_INITIALIZED";class Ko extends Error{constructor(e="cannot initialize an initializing node"){super(e),this.name="AlreadyInitializingError",this.code=Ho.code}}Ko.code="ERR_ALREADY_INITIALIZING";class Ho extends Error{constructor(e="cannot re-initialize an initialized node"){super(e),this.name="AlreadyInitializedError",this.code=Ho.code}}Ho.code="ERR_ALREADY_INITIALIZED";class Go extends Error{constructor(e="not started"){super(e),this.name="NotStartedError",this.code=Go.code}}Go.code="ERR_NOT_STARTED";class Wo extends Error{constructor(e="cannot start, already startin"){super(e),this.name="AlreadyStartingError",this.code=Wo.code}}Wo.code="ERR_ALREADY_STARTING";class Qo extends Error{constructor(e="cannot start, already started"){super(e),this.name="AlreadyStartedError",this.code=Qo.code}}Qo.code="ERR_ALREADY_STARTED";class Yo extends Error{constructor(e="not enabled"){super(e),this.name="NotEnabledError",this.code=Yo.code}}Yo.code="ERR_NOT_ENABLED";var Jo=r(708);function Xo(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Zo=Xo("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),ea=Xo("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=(0,Jo.E)(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ta={utf8:Zo,"utf-8":Zo,hex:jo.base16,latin1:ea,ascii:ea,binary:ea,...jo};var ra=ta,na=r(6402);function ia(e,t="utf8"){const r=ra[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):(0,na.P)(globalThis.Buffer.from(e,"utf-8"))}var sa=r(2856);r(541);const oa="[a-fA-F\\d:]",aa=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${oa})|(?<=${oa})(?=\\s|$))`:"",ca="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ua="[a-fA-F\\d]{1,4}",la=`\n(?:\n(?:${ua}:){7}(?:${ua}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${ua}:){6}(?:${ca}|:${ua}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${ua}:){5}(?::${ca}|(?::${ua}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${ua}:){4}(?:(?::${ua}){0,1}:${ca}|(?::${ua}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${ua}:){3}(?:(?::${ua}){0,2}:${ca}|(?::${ua}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${ua}:){2}(?:(?::${ua}){0,3}:${ca}|(?::${ua}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${ua}:){1}(?:(?::${ua}){0,4}:${ca}|(?::${ua}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${ua}){0,5}:${ca}|(?::${ua}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),ha=new RegExp(`(?:^${ca}$)|(?:^${la}$)`),da=new RegExp(`^${ca}$`),fa=new RegExp(`^${la}$`),pa=e=>e&&e.exact?ha:new RegExp(`(?:${aa(e)}${ca}${aa(e)})|(?:${aa(e)}${la}${aa(e)})`,"g");pa.v4=e=>e&&e.exact?da:new RegExp(`${aa(e)}${ca}${aa(e)}`,"g"),pa.v6=e=>e&&e.exact?fa:new RegExp(`${aa(e)}${la}${aa(e)}`,"g");var ya=pa;function ga(e){const t=(...t)=>e(...t);return Object.defineProperty(t,"name",{value:`functionTimeout(${e.name||"<anonymous>"})`,configurable:!0}),t}function ma(){return!1}const{toString:wa}=Object.prototype;function va(e){return"[object RegExp]"===wa.call(e)}const ba={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function Ea(e,t={}){if(!va(e))throw new TypeError("Expected a RegExp instance");const r=Object.keys(ba).map((r=>("boolean"===typeof t[r]?t[r]:e[r])?ba[r]:"")).join(""),n=new RegExp(t.source||e.source,r);return n.lastIndex="number"===typeof t.lastIndex?t.lastIndex:e.lastIndex,n}function _a(e,t,{timeout:r}={}){try{return ga((()=>Ea(e).test(t)),{timeout:r})()}catch(n){if(ma(n))return!1;throw n}}const Aa=15,Sa=45,ka={timeout:400};function Ia(e){return _a(ya({exact:!0}),e.slice(0,Sa),ka)}function Ta(e){return _a(ya.v6({exact:!0}),e.slice(0,Sa),ka)}function Ca(e){return _a(ya.v4({exact:!0}),e.slice(0,Aa),ka)}function Ra(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Pa=Ra,xa=Pa,Oa=xa;new Uint8Array(0);const Na=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Da=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ba=e=>(new TextEncoder).encode(e),La=e=>(new TextDecoder).decode(e);class Ma{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ua{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ja(this,e)}}class Fa{constructor(e){this.decoders=e}or(e){return ja(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ja=(e,t)=>new Fa({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Va{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Ma(e,t,r),this.decoder=new Ua(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const za=({name:e,prefix:t,encode:r,decode:n})=>new Va(e,t,r,n),$a=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Oa(r,t);return za({prefix:e,name:t,encode:n,decode:e=>Da(i(e))})},qa=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ka=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},Ha=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>za({prefix:t,name:e,encode(e){return Ka(e,n,r)},decode(t){return qa(t,n,r,e)}}),Ga=za({prefix:"\0",name:"identity",encode:e=>La(e),decode:e=>Ba(e)}),Wa=Ha({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qa=Ha({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Ya=$a({prefix:"9",name:"base10",alphabet:"0123456789"}),Ja=Ha({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Xa=Ha({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Za=Ha({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ec=Ha({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tc=Ha({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rc=Ha({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nc=Ha({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ic=Ha({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sc=Ha({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),oc=Ha({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ac=Ha({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),cc=$a({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),uc=$a({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),lc=$a({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),hc=$a({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),dc=Ha({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fc=Ha({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),pc=Ha({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yc=Ha({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),gc=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),mc=gc.reduce(((e,t,r)=>(e[r]=t,e)),[]),wc=gc.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function vc(e){return e.reduce(((e,t)=>(e+=mc[t],e)),"")}function bc(e){const t=[];for(const r of e){const e=wc[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Ec=za({prefix:"🚀",name:"base256emoji",encode:vc,decode:bc});var _c=Tc,Ac=128,Sc=127,kc=~Sc,Ic=Math.pow(2,31);function Tc(e,t,r){t=t||[],r=r||0;var n=r;while(e>=Ic)t[r++]=255&e|Ac,e/=128;while(e&kc)t[r++]=255&e|Ac,e>>>=7;return t[r]=0|e,Tc.bytes=r-n+1,t}var Cc=xc,Rc=128,Pc=127;function xc(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw xc.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&Pc)<<i:(r&Pc)*Math.pow(2,i),i+=7}while(r>=Rc);return xc.bytes=s-t,n}var Oc=Math.pow(2,7),Nc=Math.pow(2,14),Dc=Math.pow(2,21),Bc=Math.pow(2,28),Lc=Math.pow(2,35),Mc=Math.pow(2,42),Uc=Math.pow(2,49),Fc=Math.pow(2,56),jc=Math.pow(2,63),Vc=function(e){return e<Oc?1:e<Nc?2:e<Dc?3:e<Bc?4:e<Lc?5:e<Mc?6:e<Uc?7:e<Fc?8:e<jc?9:10},zc={encode:_c,decode:Cc,encodingLength:Vc},$c=zc,qc=$c;const Kc=(e,t=0)=>{const r=qc.decode(e,t);return[r,qc.decode.bytes]},Hc=(e,t,r=0)=>(qc.encode(e,t,r),t),Gc=e=>qc.encodingLength(e),Wc=(e,t)=>{const r=t.byteLength,n=Gc(e),i=n+Gc(r),s=new Uint8Array(i+r);return Hc(e,s,0),Hc(r,s,n),s.set(t,i),new Jc(e,r,t,s)},Qc=e=>{const t=Da(e),[r,n]=Kc(t),[i,s]=Kc(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Jc(r,i,o,t)},Yc=(e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Na(e.bytes,r.bytes)}};class Jc{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Xc=({name:e,code:t,encode:r})=>new Zc(e,t,r);class Zc{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Wc(this.code,t):t.then((e=>Wc(this.code,e)))}throw Error("Unknown type, must be binary type")}}const eu=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),tu=Xc({name:"sha2-256",code:18,encode:eu("SHA-256")}),ru=Xc({name:"sha2-512",code:19,encode:eu("SHA-512")}),nu=0,iu="identity",su=Da,ou=e=>Wc(nu,su(e)),au={code:nu,name:iu,encode:su,digest:ou},cu="raw",uu=85,lu=e=>Da(e),hu=e=>Da(e),du=new TextEncoder,fu=new TextDecoder,pu="json",yu=512,gu=e=>du.encode(JSON.stringify(e)),mu=e=>JSON.parse(fu.decode(e)),wu=(e,t)=>{const{bytes:r,version:n}=e;switch(n){case 0:return Au(r,bu(e),t||lc.encoder);default:return Su(r,bu(e),t||Za.encoder)}},vu=new WeakMap,bu=e=>{const t=vu.get(e);if(null==t){const t=new Map;return vu.set(e,t),t}return t};class Eu{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==ku)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Iu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Eu.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Wc(e,t);return Eu.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Eu.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Yc(e.multihash,r.multihash)}toString(e){return wu(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof Eu)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new Eu(e,r,n,i||Tu(e,r,n.bytes))}if(null!=t&&!0===t[Cu]){const{version:e,multihash:r,code:n}=t,i=Qc(r);return Eu.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==ku)throw new Error(`Version 0 CID must use dag-pb (code: ${ku}) block encoding`);return new Eu(e,t,r,r.bytes);case 1:{const n=Tu(e,t,r.bytes);return new Eu(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return Eu.create(0,ku,e)}static createV1(e,t){return Eu.create(1,e,t)}static decode(e){const[t,r]=Eu.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Eu.inspectBytes(e),r=t.size-t.multihashSize,n=Da(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Jc(t.multihashCode,t.digestSize,i,n),o=0===t.version?Eu.createV0(s):Eu.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=Kc(e.subarray(t));return t+=n,r};let n=r(),i=ku;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=_u(e,t),i=Eu.decode(n);return bu(i).set(r,e),i}}const _u=(e,t)=>{switch(e[0]){case"Q":{const r=t||lc;return[lc.prefix,r.decode(`${lc.prefix}${e}`)]}case lc.prefix:{const r=t||lc;return[lc.prefix,r.decode(e)]}case Za.prefix:{const r=t||Za;return[Za.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Au=(e,t,r)=>{const{prefix:n}=r;if(n!==lc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},Su=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},ku=112,Iu=18,Tu=(e,t,r)=>{const n=Gc(e),i=n+Gc(t),s=new Uint8Array(i+r.byteLength);return Hc(e,s,0),Hc(t,s,n),s.set(r,i),s},Cu=Symbol.for("@ipld/js-cid/CID"),Ru={...v,...b,...E,..._,...A,...S,...k,...I,...T,...C};function Pu(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function xu(e=0){return null!=globalThis.Buffer?.allocUnsafe?Pu(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Ou(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Nu=Ou("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),Du=Ou("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=xu(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Bu={utf8:Nu,"utf-8":Nu,hex:Ru.base16,latin1:Du,ascii:Du,binary:Du,...Ru};var Lu=Bu;function Mu(e,t="utf8"){const r=Lu[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const Uu=Ca,Fu=Ta,ju=function(e){let t=0;if(e=e.toString().trim(),Uu(e)){const r=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{r[t++]=255&parseInt(e,10)})),r}if(Fu(e)){const r=e.split(":",8);let n;for(n=0;n<r.length;n++){const e=Uu(r[n]);let t;e&&(t=ju(r[n]),r[n]=Mu(t.slice(0,2),"base16")),null!=t&&++n<8&&r.splice(n,0,Mu(t.slice(2,4),"base16"))}if(""===r[0])while(r.length<8)r.unshift("0");else if(""===r[r.length-1])while(r.length<8)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const e=[n,1];for(n=9-r.length;n>0;n--)e.push("0");r.splice.apply(r,e)}const i=new Uint8Array(t+16);for(n=0;n<r.length;n++){const e=parseInt(r[n],16);i[t++]=e>>8&255,i[t++]=255&e}return i}throw new Error("invalid ip address")},Vu=function(e,t=0,r){t=~~t,r=r??e.length-t;const n=new DataView(e.buffer);if(4===r){const n=[];for(let i=0;i<r;i++)n.push(e[t+i]);return n.join(".")}if(16===r){const e=[];for(let i=0;i<r;i+=2)e.push(n.getUint16(t+i).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},zu=-1,$u={},qu={},Ku=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,zu,"ip6zone"],[53,zu,"dns",!0],[54,zu,"dns4",!0],[55,zu,"dns6",!0],[56,zu,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,zu,"unix",!1,!0],[421,zu,"ipfs"],[421,zu,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,zu,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,zu,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,zu,"memory"]];function Hu(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function Gu(e){if("number"===typeof e){if(null!=qu[e])return qu[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=$u[e])return $u[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}Ku.forEach((e=>{const t=Hu(...e);qu[t.code]=t,$u[t.name]=t}));var Wu=r(2611);function Qu(e,t="utf8"){const r=Lu[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):Pu(globalThis.Buffer.from(e,"utf-8"))}function Yu(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=xu(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Pu(r)}function Ju(e,t){const r=Gu(e);switch(r.code){case 4:case 41:return rl(t);case 6:case 273:case 33:case 132:return il(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return ol(t);case 421:return ll(t);case 444:return fl(t);case 445:return fl(t);case 466:return ul(t);default:return Mu(t,"base16")}}function Xu(e,t){const r=Gu(e);switch(r.code){case 4:return tl(t);case 41:return tl(t);case 6:case 273:case 33:case 132:return nl(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return sl(t);case 421:return al(t);case 444:return hl(t);case 445:return dl(t);case 466:return cl(t);default:return Qu(t,"base16")}}const Zu=Object.values(Ru).map((e=>e.decoder)),el=function(){let e=Zu[0].or(Zu[1]);return Zu.slice(2).forEach((t=>e=e.or(t))),e}();function tl(e){if(!Ia(e))throw new Error("invalid ip address");return ju(e)}function rl(e){const t=Vu(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!Ia(t))throw new Error("invalid ip address");return t}function nl(e){const t=new ArrayBuffer(2),r=new DataView(t);return r.setUint16(0,e),new Uint8Array(t)}function il(e){const t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function sl(e){const t=Qu(e),r=Uint8Array.from(Wu.encode(t.length));return Yu([r,t],r.length+t.length)}function ol(e){const t=Wu.decode(e);if(e=e.slice(Wu.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Mu(e)}function al(e){let t;t="Q"===e[0]||"1"===e[0]?Qc(lc.decode(`z${e}`)).bytes:Eu.parse(e).multihash.bytes;const r=Uint8Array.from(Wu.encode(t.length));return Yu([r,t],r.length+t.length)}function cl(e){const t=el.decode(e),r=Uint8Array.from(Wu.encode(t.length));return Yu([r,t],r.length+t.length)}function ul(e){const t=Wu.decode(e),r=e.slice(Wu.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+Mu(r,"base64url")}function ll(e){const t=Wu.decode(e),r=e.slice(Wu.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return Mu(r,"base58btc")}function hl(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const r=Za.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=nl(n);return Yu([r,i],r.length+i.length)}function dl(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const r=Za.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=nl(n);return Yu([r,i],r.length+i.length)}function fl(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=Mu(t,"base32"),i=il(r);return`${n}:${i}`}function pl(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=Gu(i);if(0!==s.size){if(n++,n>=r.length)throw Tl("invalid address: "+e);if(!0===s.path){t.push([i,Il(r.slice(n).join("/"))]);break}t.push([i,r[n]])}else t.push([i])}return t}function yl(e){const t=[];return e.map((e=>{const r=Cl(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),Il(t.join("/"))}function gl(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=Cl(e);return e.length>1?[t.code,Xu(t.code,e[1])]:[t.code]}))}function ml(e){return e.map((e=>{const t=Cl(e);return null!=e[1]?[t.code,Ju(t.code,e[1])]:[t.code]}))}function wl(e){return Sl(Yu(e.map((e=>{const t=Cl(e);let r=Uint8Array.from(Wu.encode(t.code));return e.length>1&&null!=e[1]&&(r=Yu([r,e[1]])),r}))))}function vl(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=Wu.decode(t);return e+Wu.decode.bytes}}function bl(e){const t=[];let r=0;while(r<e.length){const n=Wu.decode(e,r),i=Wu.decode.bytes,s=Gu(n),o=vl(s,e.slice(r+i));if(0===o){t.push([n]),r+=i;continue}const a=e.slice(r+i,r+i+o);if(r+=o+i,r>e.length)throw Tl("Invalid address Uint8Array: "+Mu(e,"base16"));t.push([n,a])}return t}function El(e){const t=bl(e),r=ml(t);return yl(r)}function _l(e){e=Il(e);const t=pl(e),r=gl(t);return wl(r)}function Al(e){return _l(e)}function Sl(e){const t=kl(e);if(null!=t)throw t;return Uint8Array.from(e)}function kl(e){try{bl(e)}catch(nP){return nP}}function Il(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function Tl(e){return new Error("Error parsing address: "+e)}function Cl(e){const t=Gu(e[0]);return t}function Rl(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Pl,xl,Ol,Nl,Dl=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},Bl=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};const Ll=Symbol.for("nodejs.util.inspect.custom"),Ml=[Gu("dns").code,Gu("dns4").code,Gu("dns6").code,Gu("dnsaddr").code],Ul=[Gu("p2p").code,Gu("ipfs").code],Fl=new Map,jl=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Vl(e,t){if(null==e)throw new Error("requires node address object");if(null==t)throw new Error("requires transport protocol");let r;switch(e.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new ql("/"+[r,e.address,t,e.port].join("/"))}function zl(e){return!!$l(e)&&e.protos().some((e=>e.resolvable))}function $l(e){return Boolean(e?.[jl])}class ql{constructor(e){if(Pl.set(this,void 0),xl.set(this,void 0),Ol.set(this,void 0),this[Nl]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=Sl(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Al(e)}else{if(!$l(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=Sl(e.bytes)}}toString(){return null==Dl(this,Pl,"f")&&Bl(this,Pl,El(this.bytes),"f"),Dl(this,Pl,"f")}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),t=this.toString().split("/").slice(1);let r,n;if(t.length>2)Ml.includes(e[0])&&Ul.includes(e[1])?(r=Gu("tcp").name,n=443):(r=Gu(t[2]).name,n=parseInt(t[3]));else{if(!Ml.includes(e[0]))throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');r=Gu("tcp").name,n=443}const i={family:41===e[0]||55===e[0]?6:4,host:t[1],transport:r,port:n};return i}protos(){return this.protoCodes().map((e=>Object.assign({},Gu(e))))}protoCodes(){const e=[],t=this.bytes;let r=0;while(r<t.length){const n=Wu.decode(t,r),i=Wu.decode.bytes,s=Gu(n),o=vl(s,t.slice(r+i));r+=o+i,e.push(n)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return null==Dl(this,xl,"f")&&Bl(this,xl,bl(this.bytes),"f"),Dl(this,xl,"f")}stringTuples(){return null==Dl(this,Ol,"f")&&Bl(this,Ol,ml(this.tuples()),"f"),Dl(this,Ol,"f")}encapsulate(e){return e=new ql(e),new ql(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new ql(r.slice(0,n))}decapsulateCode(e){const t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new ql(wl(t.slice(0,r)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===$u.ipfs.code)),t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?Mu(lc.decode(`z${e}`),"base58btc"):Mu(Eu.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>{const t=Gu(e[0]);return!0===t.path}))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return Rl(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const r=Fl.get(t.name);if(null==r)throw Ut(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");const n=await r(this,e);return n.map((e=>new ql(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[(Pl=new WeakMap,xl=new WeakMap,Ol=new WeakMap,Nl=jl,Ll)](){return this.inspect()}inspect(){return"<Multiaddr "+Mu(this.bytes,"base16")+" - "+El(this.bytes)+">"}}function Kl(e){return new ql(e)}const Hl=mh("dns4"),Gl=mh("dns6"),Wl=mh("dnsaddr"),Ql=gh(mh("dns"),Wl,Hl,Gl),Yl=gh(mh("ip4"),mh("ip6")),Jl=gh(yh(Yl,mh("tcp")),yh(Ql,mh("tcp"))),Xl=yh(Yl,mh("udp")),Zl=yh(Xl,mh("utp")),eh=yh(Xl,mh("quic")),th=gh(yh(Jl,mh("ws")),yh(Ql,mh("ws"))),rh=gh(yh(Jl,mh("wss")),yh(Ql,mh("wss"))),nh=gh(yh(Jl,mh("http")),yh(Yl,mh("http")),yh(Ql,mh("http"))),ih=gh(yh(Jl,mh("https")),yh(Yl,mh("https")),yh(Ql,mh("https"))),sh=gh(yh(th,mh("p2p-webrtc-star"),mh("p2p")),yh(rh,mh("p2p-webrtc-star"),mh("p2p")),yh(th,mh("p2p-webrtc-star")),yh(rh,mh("p2p-webrtc-star"))),oh=(gh(yh(th,mh("p2p-websocket-star"),mh("p2p")),yh(rh,mh("p2p-websocket-star"),mh("p2p")),yh(th,mh("p2p-websocket-star")),yh(rh,mh("p2p-websocket-star"))),gh(yh(nh,mh("p2p-webrtc-direct"),mh("p2p")),yh(ih,mh("p2p-webrtc-direct"),mh("p2p")),yh(nh,mh("p2p-webrtc-direct")),yh(ih,mh("p2p-webrtc-direct")))),ah=gh(th,rh,nh,ih,sh,oh,Jl,Zl,eh,Ql),ch=(gh(yh(ah,mh("p2p-stardust"),mh("p2p")),yh(ah,mh("p2p-stardust"))),gh(yh(ah,mh("p2p")),sh,oh,mh("p2p"))),uh=gh(yh(ch,mh("p2p-circuit"),ch),yh(ch,mh("p2p-circuit")),yh(mh("p2p-circuit"),ch),yh(ah,mh("p2p-circuit")),yh(mh("p2p-circuit"),ah),mh("p2p-circuit")),lh=()=>gh(yh(uh,lh),uh),hh=lh(),dh=gh(yh(hh,ch,hh),yh(ch,hh),yh(hh,ch),hh,ch),fh=dh;function ph(e){function t(t){let r;try{r=Kl(t)}catch(nP){return!1}const n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}return t}function yh(...e){function t(t){if(t.length<e.length)return null;let r=t;return e.some((e=>(r="function"===typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(r)&&(t=r),null===r))),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ph(t),partialMatch:t}}function gh(...e){function t(t){let r=null;return e.some((e=>{const n="function"===typeof e?e().partialMatch(t):e.partialMatch(t);return null!=n&&(r=n,!0)})),r}const r={toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:ph(t),partialMatch:t};return r}function mh(e){const t=e;function r(e){let r;try{r=Kl(e)}catch(nP){return!1}const n=r.protoNames();return 1===n.length&&n[0]===t}function n(e){return 0===e.length?null:e[0]===t?e.slice(1):null}return{toString:function(){return t},matches:r,partialMatch:n}}var wh=r(9339);function vh(e,t="utf8"){const r=ra[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const bh=/^\/(ip[fn]s)\/([^/?#]+)/,Eh=1,_h=2,Ah=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,Sh=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function kh(e){try{return Ch(e)?Boolean(Zt.k.parse(e)):e instanceof Uint8Array?Boolean(Zt.k.decode(e)):Boolean(Zt.k.asCID(e))}catch{return!1}}function Ih(e,t,r=Eh,n=_h){const i=Rh(e);if(!1===i)return!1;const s=i.match(t);if(null==s)return!1;if("ipfs"!==s[r])return!1;let o=s[n];return null!=o&&t===Ah&&(o=o.toLowerCase()),kh(o)}function Th(e,t,r=Eh,n=_h){const i=Rh(e);if(!1===i)return!1;const s=i.match(t);if(null==s)return!1;if("ipns"!==s[r])return!1;let o=s[n];if(null!=o&&t===Ah){if(o=o.toLowerCase(),kh(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:e}=new wh.URL(`http://${o}`);return Sh.test(e)}catch(a){return!1}}return!0}function Ch(e){return"string"===typeof e}function Rh(e){return e instanceof Uint8Array?vh(e,"base58btc"):!!Ch(e)&&e}const Ph=e=>Ih(e,bh)||Th(e,bh),xh=e=>Ih(e,bh),Oh=e=>Th(e,bh);let Nh=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e)),"");function Dh(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var Bh=Dh,Lh=Bh,Mh=Lh;new Uint8Array(0);const Uh=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Fh=e=>(new TextEncoder).encode(e),jh=e=>(new TextDecoder).decode(e);class Vh{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zh{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return qh(this,e)}}class $h{constructor(e){this.decoders=e}or(e){return qh(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const qh=(e,t)=>new $h({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Kh{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Vh(e,t,r),this.decoder=new zh(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Hh=({name:e,prefix:t,encode:r,decode:n})=>new Kh(e,t,r,n),Gh=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Mh(r,t);return Hh({prefix:e,name:t,encode:n,decode:e=>Uh(i(e))})},Wh=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Qh=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},Yh=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Hh({prefix:t,name:e,encode(e){return Qh(e,n,r)},decode(t){return Wh(t,n,r,e)}}),Jh=Hh({prefix:"\0",name:"identity",encode:e=>jh(e),decode:e=>Fh(e)}),Xh=Yh({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Zh=Yh({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ed=Gh({prefix:"9",name:"base10",alphabet:"0123456789"}),td=Yh({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rd=Yh({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nd=Yh({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),id=Yh({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sd=Yh({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),od=Yh({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ad=Yh({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cd=Yh({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ud=Yh({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ld=Yh({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hd=Yh({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dd=Gh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fd=Gh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pd=Gh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yd=Gh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),gd=Yh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),md=Yh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),wd=Yh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vd=Yh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),bd=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ed=bd.reduce(((e,t,r)=>(e[r]=t,e)),[]),_d=bd.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function Ad(e){return e.reduce(((e,t)=>(e+=Ed[t],e)),"")}function Sd(e){const t=[];for(const r of e){const e=_d[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const kd=Hh({prefix:"🚀",name:"base256emoji",encode:Ad,decode:Sd});var Id=xd,Td=128,Cd=127,Rd=~Cd,Pd=Math.pow(2,31);function xd(e,t,r){t=t||[],r=r||0;var n=r;while(e>=Pd)t[r++]=255&e|Td,e/=128;while(e&Rd)t[r++]=255&e|Td,e>>>=7;return t[r]=0|e,xd.bytes=r-n+1,t}var Od=Bd,Nd=128,Dd=127;function Bd(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw Bd.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&Dd)<<i:(r&Dd)*Math.pow(2,i),i+=7}while(r>=Nd);return Bd.bytes=s-t,n}var Ld=Math.pow(2,7),Md=Math.pow(2,14),Ud=Math.pow(2,21),Fd=Math.pow(2,28),jd=Math.pow(2,35),Vd=Math.pow(2,42),zd=Math.pow(2,49),$d=Math.pow(2,56),qd=Math.pow(2,63),Kd=function(e){return e<Ld?1:e<Md?2:e<Ud?3:e<Fd?4:e<jd?5:e<Vd?6:e<zd?7:e<$d?8:e<qd?9:10},Hd={encode:Id,decode:Od,encodingLength:Kd},Gd=Hd,Wd=Gd;const Qd=(e,t,r=0)=>(Wd.encode(e,t,r),t),Yd=e=>Wd.encodingLength(e),Jd=(e,t)=>{const r=t.byteLength,n=Yd(e),i=n+Yd(r),s=new Uint8Array(i+r);return Qd(e,s,0),Qd(r,s,n),s.set(t,i),new Xd(e,r,t,s)};class Xd{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Zd=({name:e,code:t,encode:r})=>new ef(e,t,r);class ef{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Jd(this.code,t):t.then((e=>Jd(this.code,e)))}throw Error("Unknown type, must be binary type")}}const tf=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),rf=Zd({name:"sha2-256",code:18,encode:tf("SHA-256")}),nf=Zd({name:"sha2-512",code:19,encode:tf("SHA-512")}),sf=0,of="identity",af=Uh,cf=e=>Jd(sf,af(e)),uf={code:sf,name:of,encode:af,digest:cf},lf="raw",hf=85,df=e=>Uh(e),ff=e=>Uh(e),pf=new TextEncoder,yf=new TextDecoder,gf="json",mf=512,wf=e=>pf.encode(JSON.stringify(e)),vf=e=>JSON.parse(yf.decode(e));new WeakMap;class bf{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return bf.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return bf.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return bf.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Digest.equals(e.multihash,r.multihash)}toString(e){return cid_format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof bf)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new bf(e,r,n,i||cid_encodeCID(e,r,n.bytes))}if(null!=t&&!0===t[cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=Digest.decode(r);return bf.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${cid_DAG_PB_CODE}) block encoding`);return new bf(e,t,r,r.bytes);case 1:{const n=cid_encodeCID(e,t,r.bytes);return new bf(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return bf.create(0,cid_DAG_PB_CODE,e)}static createV1(e,t){return bf.create(1,e,t)}static decode(e){const[t,r]=bf.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=bf.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?bf.createV0(s):bf.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint.decode(e.subarray(t));return n,r};let n=r(),i=cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=cid_parseCIDtoBytes(e,t),i=bf.decode(n);return cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const Ef={...N,...D,...B,...L,...M,...U,...F,...j,...V,...z};function _f(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Af(e=0){return null!=globalThis.Buffer?.allocUnsafe?_f(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Sf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const kf=Sf("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),If=Sf("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=Af(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Tf={utf8:kf,"utf-8":kf,hex:Ef.base16,latin1:If,ascii:If,binary:If,...Ef};var Cf=Tf;function Rf(e,t="utf8"){const r=Cf[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Pf(e,t="utf8"){const r=Cf[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):_f(globalThis.Buffer.from(e,"utf-8"))}const xf="/",Of=(new TextEncoder).encode(xf),Nf=Of[0];class Df{constructor(e,t){if("string"===typeof e)this._buf=Pf(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==Nf)throw new Error("Invalid key")}toString(e="utf8"){return Rf(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Df(e.join(xf))}static random(){return new Df(Nh().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||"string"===typeof e?new Df(e):"function"===typeof e.uint8Array?new Df(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=Of),this._buf[0]!==Nf){const e=new Uint8Array(this._buf.byteLength+1);e.fill(Nf,0,1),e.set(this._buf,1),this._buf=e}while(this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Nf)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;const e=t[n],i=r[n];if(e<i)return!0;if(e>i)return!1}return t.length<r.length}reverse(){return Df.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(xf).slice(1)}type(){return Bf(this.baseNamespace())}name(){return Lf(this.baseNamespace())}instance(e){return new Df(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(xf)||(e+=xf),e+=this.type(),new Df(e)}parent(){const e=this.list();return 1===e.length?new Df(xf):new Df(e.slice(0,-1).join(xf))}child(e){return this.toString()===xf?e:e.toString()===xf?this:new Df(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return Df.withNamespaces([...this.namespaces(),...Mf(e.map((e=>e.namespaces())))])}}function Bf(e){const t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Lf(e){const t=e.split(":");return t[t.length-1]}function Mf(e){return[].concat(...e)}var Uf=r(4908);let Ff=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/giu;function jf(e="",t="ms"){var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Ff,(function(e,t,n){n=Vf(n),n&&(r=(r||0)+parseFloat(t,10)*n)})),r&&r/(Vf(t)||1)}function Vf(e){return jf[e]||jf[e.toLowerCase().replace(/s$/,"")]}jf.nanosecond=jf.ns=1e-6,jf["µs"]=jf["μs"]=jf.us=jf.microsecond=.001,jf.millisecond=jf.ms=jf[""]=1,jf.second=jf.sec=jf.s=1e3*jf.ms,jf.minute=jf.min=jf.m=60*jf.s,jf.hour=jf.hr=jf.h=60*jf.m,jf.day=jf.d=24*jf.h,jf.week=jf.wk=jf.w=7*jf.d,jf.month=jf.b=30.4375*jf.d,jf.year=jf.yr=jf.y=365.25*jf.d;var zf=jf;class $f extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=$f.code}}function qf(e,t){return(...r)=>{const n=r[null==t?r.length-1:t];if(!n||!n.timeout)return e(...r);const i="string"===typeof n.timeout?zf(n.timeout):n.timeout,s=new sa.TimeoutController(i);n.signal=(0,Uf.anySignal)([n.signal,s.signal]);const o=e(...r),a=new Promise(((e,t)=>{s.signal.addEventListener("abort",(()=>{t(new $f)}))})),c=Date.now(),u=()=>{if(s.signal.aborted)throw new $f;const e=Date.now()-c;if(e>i)throw s.abort(),new $f};return o[Symbol.asyncIterator]?async function*(){const e=o[Symbol.asyncIterator]();try{while(1){const{value:t,done:r}=await Promise.race([e.next(),a]);if(r)break;u(),yield t}}catch(nP){throw u(),nP}finally{s.clear(),e.return&&e.return()}}():(async()=>{try{const e=await Promise.race([o,a]);return u(),e}catch(nP){throw u(),nP}finally{s.clear()}})()}}$f.code="ERR_TIMEOUT";const Kf="/ipfs/";function Hf(e){if(e instanceof Uint8Array)try{e=Zt.k.decode(e)}catch(nP){throw Ut(nP,"ERR_INVALID_CID")}let t=Zt.k.asCID(e);if(t)return{cid:t,path:void 0};e=e.toString(),e.startsWith(Kf)&&(e=e.substring(Kf.length));const r=e.split("/");let n;try{t=Zt.k.parse(r.shift()||"")}catch(nP){throw Ut(nP,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:t,path:n}}const Gf="ERR_BAD_PATH",Wf="This command must be run in online mode. Try running 'ipfs daemon' first.",Qf=new Df("/local/filesroot"),Yf=262144,Jf=e=>{const t=Zt.k.asCID(e);if(t)return`/ipfs/${e}`;const r=e.toString();try{return`/ipfs/${Zt.k.parse(r)}`}catch{}if(Ph(r))return r;throw Ut(new Error(`invalid path: ${e}`),Gf)},Xf=e=>e instanceof Uint8Array?Zt.k.decode(e).toString():(e=e.toString(),0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),Zf=async function(e,t,r,n={}){const{cid:i,path:s}=Hf(r);s&&(n.path=s);let o=i,a=n.path||"";if(a.startsWith("/")&&(a=a.substring(1)),n.path)try{for await(const{value:r,remainderPath:s}of rp(i,n.path,t,e,{signal:n.signal})){if(!Zt.k.asCID(r))break;a=s,o=r}}catch(nP){throw nP.message.startsWith("Object has no property")&&(nP.message=`no link named "${a.split("/")[0]}" under ${o}`,nP.code="ERR_NO_LINK"),nP}return{cid:o,remainderPath:a||""}},ep=e=>{if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error(`Unknown node type '${e.type}'`);const t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},tp=qf((async(e,t)=>await e)),rp=async function*(e,t,r,n,i){const s=async e=>{const t=await r.getCodec(e.code),s=await n.blocks.get(e,i);return t.decode(s)},o=t.split("/").filter(Boolean);let a=await s(e),c=e;while(o.length){const r=o.shift();if(!r)throw Ut(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===Cr&&Array.isArray(a.Links)){const e=a.Links.find((e=>e.Name===r));if(e){yield{value:e.Hash,remainderPath:o.join("/")},a=await s(e.Hash),c=e.Hash;continue}}if(!Object.prototype.hasOwnProperty.call(a,r))throw Ut(new Error(`no link named "${r}" under ${c}`),"ERR_NO_LINK");a=a[r],yield{value:a,remainderPath:o.join("/")},Zt.k.asCID(a)&&(c=a,a=await s(a))}yield{value:a,remainderPath:""}};class np{static create({start:e,stop:t}){return new np(e,t)}static async start(e,t){const{state:r,activate:n}=e;switch(r.status){case"stopped":try{const r=n(t);e.state={status:"starting",ready:r};const i=await r;return e.state={status:"started",value:i},i}catch(i){throw e.state={status:"stopped"},i}case"starting":throw new Wo;case"started":throw new Qo;case"stopping":return await r.ready,await np.start(e,t);default:return np.panic(e)}}static async stop(e){const{state:t,deactivate:r}=e;switch(t.status){case"stopped":break;case"starting":try{await t.ready}catch(n){}return await np.stop(e);case"stopping":return await t.ready;case"started":r&&await r(t.value),e.state={status:"stopped"};break;default:np.panic(t)}}static try({state:e}){switch(e.status){case"started":return e.value;default:return null}}static async use({state:e},t){switch(e.status){case"started":return e.value;case"starting":return await tp(e.ready,t);default:throw new Go}}static panic({state:e}){const t=JSON.stringify({status:e.status});throw RangeError(`Service in invalid state ${t}, should never happen if you see this please report a bug`)}constructor(e,t){this.activate=e,this.deactivate=t,this.state={status:"stopped"}}async use(e){return await np.use(this,e)}try(){return np.try(this)}}function ip({network:e,preload:t,peerId:r,keychain:n,repo:i,ipns:s,mfsPreload:o,print:a,hashers:c,options:u}){const l=async()=>{const{libp2p:l}=await np.start(e,{peerId:r,repo:i,print:a,hashers:c,options:u});await Promise.all([s.startOnline({keychain:n,libp2p:l,peerId:r,repo:i}),t.start(),o.start()])};return l}function sp({network:e,preload:t,ipns:r,repo:n,mfsPreload:i}){const s=async()=>{await Promise.all([t.stop(),r.stop(),i.stop()]),await np.stop(e),await n.close()};return s}var op=r(8694);class ap{constructor(e){this.lru=op(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}has(e){const t=this.get(e);return!!t}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}var cp=r(6856);r(2801);class up extends Error{constructor(e){super(e),this.name="TimeoutError"}}class lp extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const hp=e=>void 0===globalThis.DOMException?new lp(e):new DOMException(e),dp=e=>{const t=void 0===e.reason?hp("This operation was aborted."):e.reason;return t instanceof Error?t:hp(t)};function fp(e,t,r,n){let i;const s=new Promise(((s,o)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if(n={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...n},n.signal){const{signal:e}=n;e.aborted&&o(dp(e)),e.addEventListener("abort",(()=>{o(dp(e))}))}i=n.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{s(r())}catch(a){o(a)}return}const n="string"===typeof r?r:`Promise timed out after ${t} milliseconds`,i=r instanceof Error?r:new up(n);"function"===typeof e.cancel&&e.cancel(),o(i)}),t),(async()=>{try{s(await e)}catch(t){o(t)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()}else s(e)}));return s.clear=()=>{clearTimeout(i),i=void 0},s}function pp(e,t,r){let n=0,i=e.length;while(i>0){const s=Math.trunc(i/2);let o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var yp,gp=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class mp{constructor(){yp.set(this,[])}enqueue(e,t){t={priority:0,...t};const r={priority:t.priority,run:e};if(this.size&&gp(this,yp,"f")[this.size-1].priority>=t.priority)return void gp(this,yp,"f").push(r);const n=pp(gp(this,yp,"f"),r,((e,t)=>t.priority-e.priority));gp(this,yp,"f").splice(n,0,r)}dequeue(){const e=gp(this,yp,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return gp(this,yp,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return gp(this,yp,"f").length}}yp=new WeakMap;var wp,vp,bp,Ep,_p,Ap,Sp,kp,Ip,Tp,Cp,Rp,Pp,xp,Op,Np,Dp,Bp,Lp,Mp,Up,Fp,jp,Vp,zp,$p,qp=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Kp=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const Hp=new up;class Gp extends Error{}class Wp extends cp{constructor(e){var t,r,n,i;if(super(),wp.add(this),vp.set(this,void 0),bp.set(this,void 0),Ep.set(this,0),_p.set(this,void 0),Ap.set(this,void 0),Sp.set(this,0),kp.set(this,void 0),Ip.set(this,void 0),Tp.set(this,void 0),Cp.set(this,void 0),Rp.set(this,0),Pp.set(this,void 0),xp.set(this,void 0),Op.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:mp,...e},!("number"===typeof e.intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);qp(this,vp,e.carryoverConcurrencyCount,"f"),qp(this,bp,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),qp(this,_p,e.intervalCap,"f"),qp(this,Ap,e.interval,"f"),qp(this,Tp,new e.queueClass,"f"),qp(this,Cp,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,qp(this,Op,!0===e.throwOnTimeout,"f"),qp(this,xp,!1===e.autoStart,"f")}get concurrency(){return Kp(this,Pp,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);qp(this,Pp,e,"f"),Kp(this,wp,"m",zp).call(this)}async add(e,t={}){return new Promise(((r,n)=>{const i=async()=>{var i,s,o;qp(this,Rp,(s=Kp(this,Rp,"f"),s++,s),"f"),qp(this,Ep,(o=Kp(this,Ep,"f"),o++,o),"f");try{if(null===(i=t.signal)||void 0===i?void 0:i.aborted)return void n(new Gp("The task was aborted."));const s=void 0===this.timeout&&void 0===t.timeout?e({signal:t.signal}):fp(Promise.resolve(e({signal:t.signal})),void 0===t.timeout?this.timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?Kp(this,Op,"f"):t.throwOnTimeout)&&n(Hp)})),o=await s;r(o),this.emit("completed",o)}catch(a){n(a),this.emit("error",a)}Kp(this,wp,"m",Bp).call(this)};Kp(this,Tp,"f").enqueue(i,t),Kp(this,wp,"m",Fp).call(this),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Kp(this,xp,"f")?(qp(this,xp,!1,"f"),Kp(this,wp,"m",zp).call(this),this):this}pause(){qp(this,xp,!0,"f")}clear(){qp(this,Tp,new(Kp(this,Cp,"f")),"f")}async onEmpty(){0!==Kp(this,Tp,"f").size&&await Kp(this,wp,"m",$p).call(this,"empty")}async onSizeLessThan(e){Kp(this,Tp,"f").size<e||await Kp(this,wp,"m",$p).call(this,"next",(()=>Kp(this,Tp,"f").size<e))}async onIdle(){0===Kp(this,Rp,"f")&&0===Kp(this,Tp,"f").size||await Kp(this,wp,"m",$p).call(this,"idle")}get size(){return Kp(this,Tp,"f").size}sizeBy(e){return Kp(this,Tp,"f").filter(e).length}get pending(){return Kp(this,Rp,"f")}get isPaused(){return Kp(this,xp,"f")}}vp=new WeakMap,bp=new WeakMap,Ep=new WeakMap,_p=new WeakMap,Ap=new WeakMap,Sp=new WeakMap,kp=new WeakMap,Ip=new WeakMap,Tp=new WeakMap,Cp=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,xp=new WeakMap,Op=new WeakMap,wp=new WeakSet,Np=function(){return Kp(this,bp,"f")||Kp(this,Ep,"f")<Kp(this,_p,"f")},Dp=function(){return Kp(this,Rp,"f")<Kp(this,Pp,"f")},Bp=function(){var e;qp(this,Rp,(e=Kp(this,Rp,"f"),e--,e),"f"),Kp(this,wp,"m",Fp).call(this),this.emit("next")},Lp=function(){this.emit("empty"),0===Kp(this,Rp,"f")&&this.emit("idle")},Mp=function(){Kp(this,wp,"m",Vp).call(this),Kp(this,wp,"m",jp).call(this),qp(this,Ip,void 0,"f")},Up=function(){const e=Date.now();if(void 0===Kp(this,kp,"f")){const t=Kp(this,Sp,"f")-e;if(!(t<0))return void 0===Kp(this,Ip,"f")&&qp(this,Ip,setTimeout((()=>{Kp(this,wp,"m",Mp).call(this)}),t),"f"),!0;qp(this,Ep,Kp(this,vp,"f")?Kp(this,Rp,"f"):0,"f")}return!1},Fp=function(){if(0===Kp(this,Tp,"f").size)return Kp(this,kp,"f")&&clearInterval(Kp(this,kp,"f")),qp(this,kp,void 0,"f"),Kp(this,wp,"m",Lp).call(this),!1;if(!Kp(this,xp,"f")){const e=!Kp(this,wp,"a",Up);if(Kp(this,wp,"a",Np)&&Kp(this,wp,"a",Dp)){const t=Kp(this,Tp,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Kp(this,wp,"m",jp).call(this),!0)}}return!1},jp=function(){Kp(this,bp,"f")||void 0!==Kp(this,kp,"f")||(qp(this,kp,setInterval((()=>{Kp(this,wp,"m",Vp).call(this)}),Kp(this,Ap,"f")),"f"),qp(this,Sp,Date.now()+Kp(this,Ap,"f"),"f"))},Vp=function(){0===Kp(this,Ep,"f")&&0===Kp(this,Rp,"f")&&Kp(this,kp,"f")&&(clearInterval(Kp(this,kp,"f")),qp(this,kp,void 0,"f")),qp(this,Ep,Kp(this,vp,"f")?Kp(this,Rp,"f"):0,"f"),Kp(this,wp,"m",zp).call(this)},zp=function(){while(Kp(this,wp,"m",Fp).call(this));},$p=async function(e,t){return new Promise((r=>{const n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)}))};var Qp=r(3436);const Yp=new ap(1e3),Jp=6e4,Xp=Wp["default"]?Wp["default"]:Wp,Zp=new Xp({concurrency:4}),ey=e=>{if(e.Path)return e.Path;throw new Error(e.Message)};async function ty(e,t){const r=async(e,t={})=>{const r=new URLSearchParams(t);r.set("arg",e);const n=r.toString();if(!t.nocache&&Yp.has(n)){const e=Yp.get(n);return ey(e)}const i=await Zp.add((async()=>{const e=await Qp.get("https://ipfs.io/api/v0/dns",{searchParams:r}),t=new URL(e.url).search.slice(1),n=await e.json();return Yp.set(t,n,Jp),n}));return ey(i)};return r(e,t)}function ry(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}function ny(){const e=async(e,t={recursive:!0})=>{if("string"!==typeof e)throw new Error("Invalid arguments, domain must be a string");return e=ry(e),ty(e,t)};return qf(e)}function iy({network:e}){return()=>{const t=e.try();return null!=t&&Boolean(t.libp2p.isStarted())}}var sy=ly,oy=128,ay=127,cy=~ay,uy=Math.pow(2,31);function ly(e,t,r){t=t||[],r=r||0;var n=r;while(e>=uy)t[r++]=255&e|oy,e/=128;while(e&cy)t[r++]=255&e|oy,e>>>=7;return t[r]=0|e,ly.bytes=r-n+1,t}var hy=py,dy=128,fy=127;function py(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw py.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&fy)<<i:(r&fy)*Math.pow(2,i),i+=7}while(r>=dy);return py.bytes=s-t,n}var yy=Math.pow(2,7),gy=Math.pow(2,14),my=Math.pow(2,21),wy=Math.pow(2,28),vy=Math.pow(2,35),by=Math.pow(2,42),Ey=Math.pow(2,49),_y=Math.pow(2,56),Ay=Math.pow(2,63),Sy=function(e){return e<yy?1:e<gy?2:e<my?3:e<wy?4:e<vy?5:e<by?6:e<Ey?7:e<_y?8:e<Ay?9:10},ky={encode:sy,decode:hy,encodingLength:Sy},Iy=ky,Ty=Iy;const Cy=(e,t=0)=>{const r=Ty.decode(e,t);return[r,Ty.decode.bytes]},Ry=(e,t,r=0)=>(Ty.encode(e,t,r),t),Py=e=>Ty.encodingLength(e),xy=(new Uint8Array(0),(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}),Oy=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ny=e=>(new TextEncoder).encode(e),Dy=e=>(new TextDecoder).decode(e),By=(e,t)=>{const r=t.byteLength,n=Py(e),i=n+Py(r),s=new Uint8Array(i+r);return Ry(e,s,0),Ry(r,s,n),s.set(t,i),new Uy(e,r,t,s)},Ly=e=>{const t=Oy(e),[r,n]=Cy(t),[i,s]=Cy(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Uy(r,i,o,t)},My=(e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&xy(e.bytes,r.bytes)}};class Uy{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}function Fy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var jy=Fy,Vy=jy,zy=Vy;class $y{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qy{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Hy(this,e)}}class Ky{constructor(e){this.decoders=e}or(e){return Hy(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Hy=(e,t)=>new Ky({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Gy{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new $y(e,t,r),this.decoder=new qy(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wy=({name:e,prefix:t,encode:r,decode:n})=>new Gy(e,t,r,n),Qy=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=zy(r,t);return Wy({prefix:e,name:t,encode:n,decode:e=>Oy(i(e))})},Yy=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Jy=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},Xy=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Wy({prefix:t,name:e,encode(e){return Jy(e,n,r)},decode(t){return Yy(t,n,r,e)}}),Zy=Qy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eg=Qy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tg=Xy({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rg=Xy({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ng=Xy({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ig=Xy({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sg=Xy({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),og=Xy({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ag=Xy({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cg=Xy({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ug=Xy({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),lg=(e,t)=>{const{bytes:r,version:n}=e;switch(n){case 0:return yg(r,dg(e),t||Zy.encoder);default:return gg(r,dg(e),t||tg.encoder)}},hg=new WeakMap,dg=e=>{const t=hg.get(e);if(null==t){const t=new Map;return hg.set(e,t),t}return t};class fg{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==mg)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==wg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fg.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=By(e,t);return fg.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return fg.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&My(e.multihash,r.multihash)}toString(e){return lg(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof fg)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new fg(e,r,n,i||vg(e,r,n.bytes))}if(null!=t&&!0===t[bg]){const{version:e,multihash:r,code:n}=t,i=Ly(r);return fg.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==mg)throw new Error(`Version 0 CID must use dag-pb (code: ${mg}) block encoding`);return new fg(e,t,r,r.bytes);case 1:{const n=vg(e,t,r.bytes);return new fg(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return fg.create(0,mg,e)}static createV1(e,t){return fg.create(1,e,t)}static decode(e){const[t,r]=fg.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=fg.inspectBytes(e),r=t.size-t.multihashSize,n=Oy(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Uy(t.multihashCode,t.digestSize,i,n),o=0===t.version?fg.createV0(s):fg.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=Cy(e.subarray(t));return t+=n,r};let n=r(),i=mg;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=pg(e,t),i=fg.decode(n);return dg(i).set(r,e),i}}const pg=(e,t)=>{switch(e[0]){case"Q":{const r=t||Zy;return[Zy.prefix,r.decode(`${Zy.prefix}${e}`)]}case Zy.prefix:{const r=t||Zy;return[Zy.prefix,r.decode(e)]}case tg.prefix:{const r=t||tg;return[tg.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},yg=(e,t,r)=>{const{prefix:n}=r;if(n!==Zy.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},gg=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},mg=112,wg=18,vg=(e,t,r)=>{const n=Py(e),i=n+Py(t),s=new Uint8Array(i+r.byteLength);return Ry(e,s,0),Ry(t,s,n),s.set(r,i),s},bg=Symbol.for("@ipld/js-cid/CID"),Eg=Wy({prefix:"\0",name:"identity",encode:e=>Dy(e),decode:e=>Ny(e)}),_g=Xy({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Ag=Xy({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Sg=Qy({prefix:"9",name:"base10",alphabet:"0123456789"}),kg=Xy({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ig=Xy({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Tg=Qy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cg=Qy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Rg=Xy({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pg=Xy({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xg=Xy({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Og=Xy({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ng=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Dg=Ng.reduce(((e,t,r)=>(e[r]=t,e)),[]),Bg=Ng.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function Lg(e){return e.reduce(((e,t)=>(e+=Dg[t],e)),"")}function Mg(e){const t=[];for(const r of e){const e=Bg[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Ug=Wy({prefix:"🚀",name:"base256emoji",encode:Lg,decode:Mg}),Fg=({name:e,code:t,encode:r})=>new jg(e,t,r);class jg{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?By(this.code,t):t.then((e=>By(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Vg=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),zg=Fg({name:"sha2-256",code:18,encode:Vg("SHA-256")}),$g=Fg({name:"sha2-512",code:19,encode:Vg("SHA-512")}),qg=0,Kg="identity",Hg=Oy,Gg=e=>By(qg,Hg(e)),Wg={code:qg,name:Kg,encode:Hg,digest:Gg},Qg="raw",Yg=85,Jg=e=>Oy(e),Xg=e=>Oy(e),Zg=new TextEncoder,em=new TextDecoder,tm="json",rm=512,nm=e=>Zg.encode(JSON.stringify(e)),im=e=>JSON.parse(em.decode(e)),sm={...Q,...Y,...J,...X,...Z,...W,...ee,...G,...te,...re};function om(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const am=Symbol.for("@libp2p/peer-id");function cm(e){return null!=e&&Boolean(e[am])}const um=Object.values(sm).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),sm.identity.decoder),lm=114,hm=36,dm=37;class fm{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[am](){return!0}toString(){return null==this.string&&(this.string=Zy.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return fg.createV1(lm,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return om(this.multihash.bytes,e);if("string"===typeof e)return wm(e).equals(this);if(null!=e?.multihash?.bytes)return om(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}}class pm extends fm{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}}class ym extends fm{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}}class gm extends fm{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}}function mm(e){if("RSA"===e.type)return new pm(e);if("Ed25519"===e.type)return new ym(e);if("secp256k1"===e.type)return new gm(e);throw Ut(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS")}function wm(e,t){if(t=t??um,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=Ly(Zy.decode(`z${e}`));return e.startsWith("12D")?new ym({multihash:t}):e.startsWith("16U")?new gm({multihash:t}):new pm({multihash:t})}return vm(um.decode(e))}function vm(e){try{const t=Ly(e);if(t.code===Wg.code){if(t.digest.length===hm)return new ym({multihash:t});if(t.digest.length===dm)return new gm({multihash:t})}if(t.code===zg.code)return new pm({multihash:t})}catch{return bm(fg.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function bm(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==lm)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===zg.code)return new pm({multihash:e.multihash});if(t.code===Wg.code){if(t.digest.length===hm)return new ym({multihash:e.multihash});if(t.digest.length===dm)return new gm({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Em(e,t){return e.length===hm?new ym({multihash:By(Wg.code,e),privateKey:t}):e.length===dm?new gm({multihash:By(Wg.code,e),privateKey:t}):new pm({multihash:await zg.digest(e),publicKey:e,privateKey:t})}function _m({repo:e,codecs:t,bases:r,name:n}){async function i(i,s={}){if(!Ph(i))throw new Error("invalid argument "+i);if(Oh(i))for await(const e of n.resolve(i,s))i=e;const[,o,a,...c]=i.split("/"),u=s.cidBase?await r.getBase(s.cidBase):void 0,l=Am(a);if(0===c.length){const e=u?u.encoder.encode(l):a;return`/${o}/${e}`}const h=Zt.k.decode(l);i=c.join("/");const d=rp(h,i,t,e,s);let f=h,p=i;for await(const e of d)Zt.k.asCID(e.value)&&(f=e.value,p=e.remainderPath);return`/ipfs/${f.toString(u&&u.encoder)}${p?"/"+p:""}`}return qf(i)}function Am(e){try{return wm(e).toBytes()}catch{return Zt.k.parse(e).bytes}}var Sm=r(7290);function km({addAll:e}){return(t,r={})=>{let n;const i=Zt.k.asCID(t);return n=e(i?[{cid:i,...r}]:[{path:t.toString(),...r}],r),Sm(n)}}async function*Im(e){if(null===e||void 0===e)throw Ut(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const t=Zt.k.asCID(e);if(t)yield Tm({cid:t});else{if(!(e instanceof String||"string"===typeof e)){if(null!=e.cid||null!=e.path)return yield Tm(e);if(Symbol.iterator in e){const t=e[Symbol.iterator](),r=t.next();if(r.done)return t;if(Zt.k.asCID(r.value)||r.value instanceof String||"string"===typeof r.value){yield Tm({cid:r.value});for(const e of t)yield Tm({cid:e});return}if(null!=r.value.cid||null!=r.value.path){yield Tm(r.value);for(const e of t)yield Tm(e);return}throw Ut(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){const t=e[Symbol.asyncIterator](),r=await t.next();if(r.done)return t;if(Zt.k.asCID(r.value)||r.value instanceof String||"string"===typeof r.value){yield Tm({cid:r.value});for await(const e of t)yield Tm({cid:e});return}if(null!=r.value.cid||null!=r.value.path){yield Tm(r.value);for await(const e of t)yield Tm(e);return}throw Ut(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw Ut(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}yield Tm({path:e})}}function Tm(e){const t=e.cid||`${e.path}`;if(!t)throw Ut(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}const Cm={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function Rm({repo:e,codecs:t}){async function*r(r,n={}){const i=async function*(){for await(const{path:n,recursive:i,metadata:s}of Im(r)){const{cid:r}=await Zf(e,t,n),{reason:o}=await e.pins.isPinnedWithType(r,[Cm.recursive,Cm.direct]);if("recursive"===o&&!i)throw new Error(`${r} already pinned recursively`);i?await e.pins.pinRecursively(r,{metadata:s}):await e.pins.pinDirectly(r,{metadata:s}),yield r}},s=Boolean(n.lock);if(!s)return void(yield*i());const o=await e.gcLock.readLock();try{yield*i()}finally{o()}}return qf(r)}function Pm(e,t,r){const n={type:e,cid:t};return r&&(n.metadata=r),n}function xm({repo:e,codecs:t}){async function*r(r={}){let n=Cm.all;if(r.type&&(n=r.type,!Object.keys(Cm).includes(n)))throw Ut(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(r.paths){let i=!1;for await(const{path:s}of Im(r.paths)){const{cid:r}=await Zf(e,t,s),{reason:o,pinned:a,parent:c,metadata:u}=await e.pins.isPinnedWithType(r,n);if(!a)throw Ut(new Error(`path '${s}' is not pinned`),"ERR_NOT_PINNED");switch(o){case Cm.direct:case Cm.recursive:i=!0,yield Pm(o,r,u);break;default:i=!0,yield Pm(`${Cm.indirect} through ${c}`,r,u)}}if(!i)throw new Error("No match found")}else{if(n===Cm.recursive||n===Cm.all)for await(const{cid:t,metadata:r}of e.pins.recursiveKeys())yield Pm(Cm.recursive,t,r);if(n===Cm.indirect||n===Cm.all)for await(const t of e.pins.indirectKeys(r))yield Pm(Cm.indirect,t);if(n===Cm.direct||n===Cm.all)for await(const{cid:t,metadata:r}of e.pins.directKeys())yield Pm(Cm.direct,t,r)}}return qf(r)}function Om({rmAll:e}){async function t(t,r={}){const n=await Sm(e([{path:t,...r}],r));if(!n)throw new Error("CID expected");return n}return t}function Nm({repo:e,codecs:t}){async function*r(r,n={}){const i=await e.gcLock.readLock();try{for await(const{path:n,recursive:i}of Im(r)){const{cid:r}=await Zf(e,t,n),{pinned:s,reason:o}=await e.pins.isPinnedWithType(r,Cm.all);if(!s)throw new Error(`${r} is not pinned`);switch(o){case Cm.recursive:if(!i)throw new Error(`${r} is pinned recursively`);await e.pins.unpin(r),yield r;break;case Cm.direct:await e.pins.unpin(r),yield r;break;default:throw new Error(`${r} is pinned indirectly under ${o}`)}}}finally{i()}}return qf(r)}class Dm{constructor({codecs:e,repo:t}){const r=Rm({codecs:e,repo:t});this.addAll=r,this.add=km({addAll:r});const n=Nm({codecs:e,repo:t});this.rmAll=n,this.rm=Om({rmAll:n}),this.ls=xm({codecs:e,repo:t}),this.remote={add:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:async function*(e,t={}){return Promise.reject(new Error("Not implemented"))},rm:(e,t={})=>Promise.reject(new Error("Not implemented")),rmAll:(e,t={})=>Promise.reject(new Error("Not implemented")),service:{add:(e,t)=>Promise.reject(new Error("Not implemented")),rm:(e,t={})=>Promise.reject(new Error("Not implemented")),ls:(e={})=>Promise.reject(new Error("Not implemented"))}}}}function Bm(e){return e=e||new Error("Cannot open database"),Ut(e,"ERR_DB_OPEN_FAILED")}function Lm(e){return e=e||new Error("Delete failed"),Ut(e,"ERR_DB_DELETE_FAILED")}function Mm(e){return e=e||new Error("Write failed"),Ut(e,"ERR_DB_WRITE_FAILED")}function Um(e){return e=e||new Error("Not Found"),Ut(e,"ERR_NOT_FOUND")}function Fm(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var jm=r(7471),Vm=r(8366);const zm=Vm.Reader,$m=["uint64","int64","sint64","fixed64","sfixed64"];function qm(e,t){const r=zm.create(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}$m.forEach((e=>{const t=zm.prototype[e];zm.prototype[e]=function(){return BigInt(t.call(this).toString())}}));const Km=Vm.Writer,Hm=["uint64","int64","sint64","fixed64","sfixed64"];function Gm(e,t){const r=Km.create();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Wm,Qm,Ym,Jm,Xm;function Zm(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function ew(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}const r=function(e,r){const n=t(e);r.int32(n)},n=function(e){const r=e.uint32();return t(r)};return Zm("enum",Wm.VARINT,r,n)}function tw(e,t){return Zm("message",Wm.LENGTH_DELIMITED,e,t)}Hm.forEach((e=>{const t=Km.prototype[e];Km.prototype[e]=function(e){return t.call(this,e.toString())}})),function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"}(Wm||(Wm={})),function(e){e["RSA"]="RSA",e["Ed25519"]="Ed25519",e["Secp256k1"]="Secp256k1"}(Qm||(Qm={})),function(e){e[e["RSA"]=0]="RSA",e[e["Ed25519"]=1]="Ed25519",e[e["Secp256k1"]=2]="Secp256k1"}(Ym||(Ym={})),function(e){e.codec=()=>ew(Ym)}(Qm||(Qm={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),Qm.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={Type:Qm.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.Type=Qm.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t);break}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(Jm||(Jm={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),Qm.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={Type:Qm.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.Type=Qm.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t);break}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(Xm||(Xm={}));r(1041),r(1352);var rw=r(5736),nw=r(5489),iw={get(e=globalThis){const t=e.crypto;if(null==t||null==t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var sw=r(4292);r(5970);function ow(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,nw.concat)([new Uint8Array(t-r.length),r])}return vh(r,"base64url")}function aw(e){const t=cw(e);return new rw.jsbn.BigInteger(vh(t,"base16"),16)}function cw(e,t){let r=ia(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,nw.concat)([new Uint8Array(t-r.length),r])}return r}const uw={"P-256":256,"P-384":384,"P-521":521},lw=Object.keys(uw);lw.join(" / ");function hw(e){const t=e?.algorithm??"AES-GCM";let r=e?.keyLength??16;const n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=iw.get();async function c(e,c){const u=a.getRandomValues(new Uint8Array(s)),l=a.getRandomValues(new Uint8Array(n)),h={name:t,iv:l};"string"===typeof c&&(c=ia(c));const d={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},f=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),p=await a.subtle.deriveKey(d,f,{name:t,length:r},!0,["encrypt"]),y=await a.subtle.encrypt(h,p,e);return(0,nw.concat)([u,h.iv,new Uint8Array(y)])}async function u(e,c){const u=e.slice(0,s),l=e.slice(s,s+n),h=e.slice(s+n),d={name:t,iv:l};"string"===typeof c&&(c=ia(c));const f={name:"PBKDF2",salt:u,iterations:o,hash:{name:i}},p=await a.subtle.importKey("raw",c,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await a.subtle.deriveKey(f,p,{name:t,length:r},!0,["decrypt"]),g=await a.subtle.decrypt(d,y,h);return new Uint8Array(g)}r*=8;const l={encrypt:c,decrypt:u};return l}async function dw(e,t){const r=ms.decode(e),n=hw();return await n.decrypt(r,t)}r(2328);var fw=r(5856),pw=r.t(fw,2);
/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const yw=BigInt(0),gw=BigInt(1),mw=BigInt(2),ww=BigInt(3),vw=BigInt(8),bw=Object.freeze({a:yw,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:gw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});function Ew(e){const{a:t,b:r}=bw,n=$w(e*e),i=$w(n*e);return $w(i+t*e+r)}const _w=bw.a===yw;class Aw extends Error{constructor(e){super(e)}}class Sw{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof Iw))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new Sw(e.x,e.y,gw)}static toAffineBatch(e){const t=Gw(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return Sw.toAffineBatch(e).map(Sw.fromAffine)}equals(e){if(!(e instanceof Sw))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=$w(n*n),c=$w(o*o),u=$w(t*c),l=$w(i*a),h=$w($w(r*o)*c),d=$w($w(s*n)*a);return u===l&&h===d}negate(){return new Sw(this.x,$w(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=$w(e*e),i=$w(t*t),s=$w(i*i),o=e+i,a=$w(mw*($w(o*o)-n-s)),c=$w(ww*n),u=$w(c*c),l=$w(u-mw*a),h=$w(c*(a-l)-vw*s),d=$w(mw*t*r);return new Sw(l,h,d)}add(e){if(!(e instanceof Sw))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e;if(i===yw||s===yw)return this;if(t===yw||r===yw)return e;const a=$w(n*n),c=$w(o*o),u=$w(t*c),l=$w(i*a),h=$w($w(r*o)*c),d=$w($w(s*n)*a),f=$w(l-u),p=$w(d-h);if(f===yw)return p===yw?this.double():Sw.ZERO;const y=$w(f*f),g=$w(f*y),m=$w(u*y),w=$w(p*p-g-mw*m),v=$w(p*(m-w)-h*g),b=$w(n*o*f);return new Sw(w,v,b)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=Sw.ZERO;if("bigint"===typeof e&&e===yw)return t;let r=zw(e);if(r===gw)return this;if(!_w){let e=t,n=this;while(r>yw)r&gw&&(e=e.add(n)),n=n.double(),r>>=gw;return e}let{k1neg:n,k1:i,k2neg:s,k2:o}=Yw(r),a=t,c=t,u=this;while(i>yw||o>yw)i&gw&&(a=a.add(u)),o&gw&&(c=c.add(u)),u=u.double(),i>>=gw,o>>=gw;return n&&(a=a.negate()),s&&(c=c.negate()),c=new Sw($w(c.x*bw.beta),c.y,c.z),a.add(c)}precomputeWindow(e){const t=_w?128/e+1:256/e+1,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(Sw.BASE)&&(t=Iw.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&kw.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=Sw.normalizeZ(n),kw.set(t,n)));let i=Sw.ZERO,s=Sw.ZERO;const o=1+(_w?128/r:256/r),a=2**(r-1),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const t=h*a;let r=Number(e&c);if(e>>=l,r>a&&(r-=u,e+=gw),0===r){let e=n[t];h%2&&(e=e.negate()),s=s.add(e)}else{let e=n[t+Math.abs(r)-1];r<0&&(e=e.negate()),i=i.add(e)}}return{p:i,f:s}}multiply(e,t){let r,n,i=zw(e);if(_w){const{k1neg:e,k1:s,k2neg:o,k2:a}=Yw(i);let{p:c,f:u}=this.wNAF(s,t),{p:l,f:h}=this.wNAF(a,t);e&&(c=c.negate()),o&&(l=l.negate()),l=new Sw($w(l.x*bw.beta),l.y,l.z),r=c.add(l),n=u.add(h)}else{const{p:e,f:s}=this.wNAF(i,t);r=e,n=s}return Sw.normalizeZ([r,n])[0]}toAffine(e=Hw(this.z)){const{x:t,y:r,z:n}=this,i=e,s=$w(i*i),o=$w(s*i),a=$w(t*s),c=$w(r*o),u=$w(n*i);if(u!==gw)throw new Error("invZ was invalid");return new Iw(a,c)}}Sw.BASE=new Sw(bw.Gx,bw.Gy,gw),Sw.ZERO=new Sw(yw,gw,yw);const kw=new WeakMap;class Iw{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,kw.delete(this)}hasEvenY(){return this.y%mw===yw}static fromCompressedHex(e){const t=32===e.length,r=jw(t?e:e.subarray(1));if(!rv(r))throw new Error("Point is not on curve");const n=Ew(r);let i=Kw(n);const s=(i&gw)===gw;if(t)s&&(i=$w(-i));else{const t=1===(1&e[0]);t!==s&&(i=$w(-i))}const o=new Iw(r,i);return o.assertValidity(),o}static fromUncompressedHex(e){const t=jw(e.subarray(1,33)),r=jw(e.subarray(33,65)),n=new Iw(t,r);return n.assertValidity(),n}static fromHex(e){const t=Vw(e),r=t.length,n=t[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return Iw.BASE.multiply(iv(e))}static fromSignature(e,t,r){e=Vw(e);const n=Jw(e),{r:i,s:s}=ov(t);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const o=1&r?"03":"02",a=Iw.fromHex(o+Bw(i)),{n:c}=bw,u=Hw(i,c),l=$w(-n*u,c),h=$w(s*u,c),d=Iw.BASE.multiplyAndAddUnsafe(a,l,h);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return Fw(this.toHex(e))}toHex(e=!1){const t=Bw(this.x);if(e){const e=this.hasEvenY()?"02":"03";return`${e}${t}`}return`04${t}${Bw(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!rv(t)||!rv(r))throw new Error(e);const n=$w(r*r),i=Ew(t);if($w(n-i)!==yw)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Iw(this.x,$w(-this.y))}double(){return Sw.fromAffine(this).double().toAffine()}add(e){return Sw.fromAffine(this).add(Sw.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return Sw.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=Sw.fromAffine(this),i=t===yw||t===gw||this!==Iw.BASE?n.multiplyUnsafe(t):n.multiply(t),s=Sw.fromAffine(e).multiplyUnsafe(r),o=i.add(s);return o.equals(Sw.ZERO)?void 0:o.toAffine()}}function Tw(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Cw(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${Nw(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:jw(r),left:e.subarray(t+2)}}function Rw(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${Nw(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=Cw(e.subarray(2)),{data:n,left:i}=Cw(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${Nw(i)}`);return{r:t,s:n}}Iw.BASE=new Iw(bw.Gx,bw.Gy),Iw.ZERO=new Iw(yw,yw);class Pw{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!==typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?Nw(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new Pw(Uw(n.slice(0,64)),Uw(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!==typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=Rw(t?e:Fw(e));return new Pw(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!tv(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!tv(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=bw.n>>gw;return this.s>e}normalizeS(){return this.hasHighS()?new Pw(this.r,bw.n-this.s):this}toDERRawBytes(e=!1){return Fw(this.toDERHex(e))}toDERHex(e=!1){const t=Tw(Mw(this.s));if(e)return t;const r=Tw(Mw(this.r)),n=Mw(r.length/2),i=Mw(t.length/2),s=Mw(r.length/2+t.length/2+4);return`30${s}02${n}${r}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Fw(this.toCompactHex())}toCompactHex(){return Bw(this.r)+Bw(this.s)}}function xw(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}const Ow=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Nw(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=Ow[e[r]];return t}const Dw=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Bw(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(yw<=e&&e<Dw))throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function Lw(e){const t=Fw(Bw(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function Mw(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Uw(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Fw(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function jw(e){return Uw(Nw(e))}function Vw(e){return e instanceof Uint8Array?Uint8Array.from(e):Fw(e)}function zw(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&tv(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function $w(e,t=bw.P){const r=e%t;return r>=yw?r:t+r}function qw(e,t){const{P:r}=bw;let n=e;while(t-- >yw)n*=n,n%=r;return n}function Kw(e){const{P:t}=bw,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,l=qw(u,ww)*u%t,h=qw(l,ww)*u%t,d=qw(h,mw)*c%t,f=qw(d,n)*d%t,p=qw(f,i)*f%t,y=qw(p,o)*p%t,g=qw(y,a)*y%t,m=qw(g,o)*p%t,w=qw(m,ww)*u%t,v=qw(w,s)*f%t,b=qw(v,r)*c%t;return qw(b,mw)}function Hw(e,t=bw.P){if(e===yw||t<=yw)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=$w(e,t),n=t,i=yw,s=gw,o=gw,a=yw;while(r!==yw){const e=n/r,t=n%r,c=i-o*e,u=s-a*e;n=r,r=t,i=o,s=a,o=c,a=u}const c=n;if(c!==gw)throw new Error("invert: does not exist");return $w(i,t)}function Gw(e,t=bw.P){const r=new Array(e.length),n=e.reduce(((e,n,i)=>n===yw?e:(r[i]=e,$w(e*n,t))),gw),i=Hw(n,t);return e.reduceRight(((e,n,i)=>n===yw?e:(r[i]=$w(e*r[i],t),$w(e*n,t))),i),r}const Ww=(e,t)=>(e+t/mw)/t,Qw={a1:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),b1:-gw*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a2:BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),b2:BigInt("0x3086d221a7d46bcde86c90e49284eb15"),POW_2_128:BigInt("0x100000000000000000000000000000000")};function Yw(e){const{n:t}=bw,{a1:r,b1:n,a2:i,b2:s,POW_2_128:o}=Qw,a=Ww(s*e,t),c=Ww(-n*e,t);let u=$w(e-a*r-c*i,t),l=$w(-a*n-c*s,t);const h=u>o,d=l>o;if(h&&(u=t-u),d&&(l=t-l),u>o||l>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:u,k2neg:d,k2:l}}function Jw(e){const{n:t}=bw,r=e.length,n=8*r-256;let i=jw(e);return n>0&&(i>>=BigInt(n)),i>=t&&(i-=t),i}let Xw,Zw;class ev{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return wv.hmacSha256(this.k,...e)}hmacSync(...e){return Zw(this.k,...e)}checkSync(){if("function"!==typeof Zw)throw new Aw("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.checkSync(),this.incr(),this.v=this.hmacSync(this.v),this.v}}function tv(e){return yw<e&&e<bw.n}function rv(e){return yw<e&&e<bw.P}function nv(e,t,r){const n=jw(e);if(!tv(n))return;const{n:i}=bw,s=Iw.BASE.multiply(n),o=$w(s.x,i);if(o===yw)return;const a=$w(Hw(n,i)*$w(t+r*o,i),i);if(a===yw)return;const c=new Pw(o,a),u=(s.x===c.r?0:2)|Number(s.y&gw);return{sig:c,recovery:u}}function iv(e){let t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=Uw(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=jw(e)}if(!tv(t))throw new Error("Expected private key: 0 < key < n");return t}function sv(e){return e instanceof Iw?(e.assertValidity(),e):Iw.fromHex(e)}function ov(e){if(e instanceof Pw)return e.assertValidity(),e;try{return Pw.fromDER(e)}catch(t){return Pw.fromCompact(e)}}function av(e,t=!1){return Iw.fromPrivateKey(e).toRawBytes(t)}function cv(e){const t=e.length>32?e.slice(0,32):e;return jw(t)}function uv(e){const t=cv(e),r=$w(t,bw.n);return lv(r<yw?t:r)}function lv(e){return Lw(e)}function hv(e,t,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const n=Vw(e),i=iv(t),s=[lv(i),uv(n)];if(null!=r){!0===r&&(r=wv.randomBytes(32));const e=Vw(r);if(32!==e.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(e)}const o=xw(...s),a=cv(n);return{seed:o,m:a,d:i}}function dv(e,t){let{sig:r,recovery:n}=e;const{canonical:i,der:s,recovered:o}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=s?r.toDERRawBytes():r.toCompactRawBytes();return o?[a,n]:a}async function fv(e,t,r={}){const{seed:n,m:i,d:s}=hv(e,t,r.extraEntropy);let o;const a=new ev;await a.reseed(n);while(!(o=nv(await a.generate(),i,s)))await a.reseed();return dv(o,r)}const pv={strict:!0};function yv(e,t,r,n=pv){let i;try{i=ov(e),t=Vw(t)}catch(y){return!1}const{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;const a=Jw(t);let c;try{c=sv(r)}catch(y){return!1}const{n:u}=bw,l=Hw(o,u),h=$w(a*l,u),d=$w(s*l,u),f=Iw.BASE.multiplyAndAddUnsafe(c,h,d);if(!f)return!1;const p=$w(f.x,u);return p===s}Iw.BASE._setWindowSize(8);const gv={node:pw,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},mv={},wv={bytesToHex:Nw,hexToBytes:Fw,concatBytes:xw,mod:$w,invert:Hw,isValidPrivateKey(e){try{return iv(e),!0}catch(t){return!1}},_bigintTo32Bytes:Lw,_normalizePrivateKey:iv,hashToPrivateKey:e=>{if(e=Vw(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=$w(jw(e),bw.n-gw)+gw;return Lw(t)},randomBytes:(e=32)=>{if(gv.web)return gv.web.getRandomValues(new Uint8Array(e));if(gv.node){const{randomBytes:t}=gv.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>wv.hashToPrivateKey(wv.randomBytes(40)),sha256:async(...e)=>{if(gv.web){const t=await gv.web.subtle.digest("SHA-256",xw(...e));return new Uint8Array(t)}if(gv.node){const{createHash:t}=gv.node,r=t("sha256");return e.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(gv.web){const r=await gv.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=xw(...t),i=await gv.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}if(gv.node){const{createHmac:r}=gv.node,n=r("sha256",e);return t.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=mv[e];if(void 0===r){const t=await wv.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=xw(t,t),mv[e]=r}return wv.sha256(r,...t)},taggedHashSync:(e,...t)=>{if("function"!==typeof Xw)throw new Aw("sha256Sync is undefined, you need to set it");let r=mv[e];if(void 0===r){const t=Xw(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=xw(t,t),mv[e]=r}return Xw(r,...t)},precompute(e=8,t=Iw.BASE){const r=t===Iw.BASE?t:new Iw(t.x,t.y);return r._setWindowSize(e),r.multiply(ww),r}};function vv(e){if(isNaN(e)||e<=0)throw Ut(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return wv.randomBytes(e)}Object.defineProperties(wv,{sha256Sync:{configurable:!1,get(){return Xw},set(e){Xw||(Xw=e)}},hmacSha256Sync:{configurable:!1,get(){return Zw},set(e){Zw||(Zw=e)}}});r(5070);function bv(e){const t=rw.asn1.fromDer(vh(e,"ascii")),r=rw.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:ow(r.n),e:ow(r.e),d:ow(r.d),p:ow(r.p),q:ow(r.q),dp:ow(r.dP),dq:ow(r.dQ),qi:ow(r.qInv),alg:"RS256"}}function Ev(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw Ut(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=rw.pki.privateKeyToAsn1({n:aw(e.n),e:aw(e.e),d:aw(e.d),p:aw(e.p),q:aw(e.q),dP:aw(e.dp),dQ:aw(e.dq),qInv:aw(e.qi)});return ia(rw.asn1.toDer(t).getBytes(),"ascii")}function _v(e){const t=rw.asn1.fromDer(vh(e,"ascii")),r=rw.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:ow(r.n),e:ow(r.e)}}function Av(e){if(null==e.n||null==e.e)throw Ut(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=rw.pki.publicKeyToAsn1({n:aw(e.n),e:aw(e.e)});return ia(rw.asn1.toDer(t).getBytes(),"ascii")}function Sv(e,t){return t.map((t=>aw(e[t])))}function kv(e){return rw.pki.setRsaPrivateKey(...Sv(e,["n","e","d","p","q","dp","dq","qi"]))}function Iv(e){return rw.pki.setRsaPublicKey(...Sv(e,["n","e"]))}async function Tv(e){const t=await iw.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await xv(t);return{privateKey:r[0],publicKey:r[1]}}async function Cv(e){const t=await iw.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),r=[t,await Ov(e)],n=await xv({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Rv(e,t){const r=await iw.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await iw.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}async function Pv(e,t,r){const n=await iw.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await iw.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}async function xv(e){if(null==e.privateKey||null==e.publicKey)throw Ut(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([iw.get().subtle.exportKey("jwk",e.privateKey),iw.get().subtle.exportKey("jwk",e.publicKey)])}async function Ov(e){return await iw.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Nv(e,t,r,n){const i=t?Iv(e):kv(e),s=vh(Uint8Array.from(r),"ascii"),o=n(s,i);return ia(o,"ascii")}function Dv(e,t){return Nv(e,!0,t,((e,t)=>t.encrypt(e)))}function Bv(e,t){return Nv(e,!1,t,((e,t)=>t.decrypt(e)))}async function Lv(e,t){const r=hw(),n=await r.encrypt(e,t);return ms.encode(n)}class Mv{constructor(e){this._key=e}async verify(e,t){return await Pv(this._key,t,e)}marshal(){return Av(this._key)}get bytes(){return Jm.encode({Type:Qm.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Dv(this._key,e)}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}}class Uv{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return vv(16)}async sign(e){return await Rv(this._key,e)}get public(){if(null==this._publicKey)throw Ut(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Mv(this._publicKey)}decrypt(e){return Bv(this._key,e)}marshal(){return Ev(this._key)}get bytes(){return Xm.encode({Type:Qm.RSA,Data:this.marshal()}).subarray()}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}async id(){const e=await this.public.hash();return vh(e,"base58btc")}async export(e,t="pkcs-8"){if("pkcs-8"===t){const t=new rw.util.ByteBuffer(this.marshal()),r=rw.asn1.fromDer(t),n=rw.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return rw.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return await Lv(this.bytes,e);throw Ut(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function Fv(e){const t=bv(e),r=await Cv(t);return new Uv(r.privateKey,r.publicKey)}function jv(e){const t=_v(e);return new Mv(t)}async function Vv(e){const t=await Cv(e);return new Uv(t.privateKey,t.publicKey)}async function zv(e){const t=await Tv(e);return new Uv(t.privateKey,t.publicKey)}var $v=r(7420),qv=r.t($v,2);
/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */
const Kv=BigInt(0),Hv=BigInt(1),Gv=BigInt(2),Wv=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),Qv=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Wv,n:Wv,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),Yv=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Jv=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Xv=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),Zv=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),eb=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),tb=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class rb{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof cb))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(cb.ZERO)?rb.ZERO:new rb(e.x,e.y,Hv,bb(e.x*e.y))}static toAffineBatch(e){const t=_b(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){nb(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=bb(t*o),c=bb(i*n),u=bb(r*o),l=bb(s*n);return a===c&&u===l}negate(){return new rb(bb(-this.x),this.y,this.z,bb(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=Qv,i=bb(e*e),s=bb(t*t),o=bb(Gv*bb(r*r)),a=bb(n*i),c=e+t,u=bb(bb(c*c)-i-s),l=a+s,h=l-o,d=a-s,f=bb(u*h),p=bb(l*d),y=bb(u*d),g=bb(h*l);return new rb(f,p,g,y)}add(e){nb(e);const{x:t,y:r,z:n,t:i}=this,{x:s,y:o,z:a,t:c}=e,u=bb((r-t)*(o+s)),l=bb((r+t)*(o-s)),h=bb(l-u);if(h===Kv)return this.double();const d=bb(n*Gv*c),f=bb(i*Gv*a),p=f+d,y=l+u,g=f-d,m=bb(p*h),w=bb(y*g),v=bb(p*g),b=bb(h*y);return new rb(m,w,b,v)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(rb.BASE)&&(t=cb.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&ab.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=rb.normalizeZ(n),ab.set(t,n)));let i=rb.ZERO,s=rb.ZERO;const o=1+256/r,a=2**(r-1),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let h=0;h<o;h++){const t=h*a;let r=Number(e&c);if(e>>=l,r>a&&(r-=u,e+=Hv),0===r){let e=n[t];h%2&&(e=e.negate()),s=s.add(e)}else{let e=n[t+Math.abs(r)-1];r<0&&(e=e.negate()),i=i.add(e)}}return rb.normalizeZ([i,s])[0]}multiply(e,t){return this.wNAF(Pb(e,Qv.l),t)}multiplyUnsafe(e){let t=Pb(e,Qv.l,!1);const r=rb.BASE,n=rb.ZERO;if(t===Kv)return n;if(this.equals(n)||t===Hv)return this;if(this.equals(r))return this.wNAF(t);let i=n,s=this;while(t>Kv)t&Hv&&(i=i.add(s)),s=s.double(),t>>=Hv;return i}isSmallOrder(){return this.multiplyUnsafe(Qv.h).equals(rb.ZERO)}isTorsionFree(){return this.multiplyUnsafe(Qv.l).equals(rb.ZERO)}toAffine(e=Eb(this.z)){const{x:t,y:r,z:n}=this,i=bb(t*e),s=bb(r*e),o=bb(n*e);if(o!==Hv)throw new Error("invZ was invalid");return new cb(i,s)}fromRistrettoBytes(){sb()}toRistrettoBytes(){sb()}fromRistrettoHash(){sb()}}function nb(e){if(!(e instanceof rb))throw new TypeError("ExtendedPoint expected")}function ib(e){if(!(e instanceof ob))throw new TypeError("RistrettoPoint expected")}function sb(){throw new Error("Legacy method: switch to RistrettoPoint")}rb.BASE=new rb(Qv.Gx,Qv.Gy,Hv,bb(Qv.Gx*Qv.Gy)),rb.ZERO=new rb(Kv,Hv,Hv,Kv);class ob{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=Qv,r=bb(Jv*e*e),n=bb((r+Hv)*eb);let i=BigInt(-1);const s=bb((i-t*r)*bb(r+t));let{isValid:o,value:a}=kb(n,s),c=bb(a*e);gb(c)||(c=bb(-c)),o||(a=c),o||(i=r);const u=bb(i*(r-Hv)*tb-s),l=a*a,h=bb((a+a)*s),d=bb(u*Xv),f=bb(Hv-l),p=bb(Hv+l);return new rb(bb(h*p),bb(f*d),bb(d*p),bb(h*f))}static hashToCurve(e){e=Rb(e,64);const t=vb(e.slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=vb(e.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new ob(r.add(i))}static fromHex(e){e=Rb(e,32);const{a:t,d:r}=Qv,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=vb(e);if(!Cb(yb(i),e)||gb(i))throw new Error(n);const s=bb(i*i),o=bb(Hv+t*s),a=bb(Hv-t*s),c=bb(o*o),u=bb(a*a),l=bb(t*r*c-u),{isValid:h,value:d}=Ib(bb(l*u)),f=bb(d*a),p=bb(d*f*l);let y=bb((i+i)*f);gb(y)&&(y=bb(-y));const g=bb(o*p),m=bb(y*g);if(!h||gb(m)||g===Kv)throw new Error(n);return new ob(new rb(y,g,Hv,m))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const i=bb(bb(r+t)*bb(r-t)),s=bb(e*t),o=bb(s*s),{value:a}=Ib(bb(i*o)),c=bb(a*i),u=bb(a*s),l=bb(c*u*n);let h;if(gb(n*l)){let r=bb(t*Jv),n=bb(e*Jv);e=r,t=n,h=bb(c*Zv)}else h=u;gb(e*l)&&(t=bb(-t));let d=bb((r-t)*h);return gb(d)&&(d=bb(-d)),yb(d)}toHex(){return db(this.toRawBytes())}toString(){return this.toHex()}equals(e){ib(e);const t=this.ep,r=e.ep,n=bb(t.x*r.y)===bb(t.y*r.x),i=bb(t.y*r.y)===bb(t.x*r.x);return n||i}add(e){return ib(e),new ob(this.ep.add(e.ep))}subtract(e){return ib(e),new ob(this.ep.subtract(e.ep))}multiply(e){return new ob(this.ep.multiply(e))}multiplyUnsafe(e){return new ob(this.ep.multiplyUnsafe(e))}}ob.BASE=new ob(rb.BASE),ob.ZERO=new ob(rb.ZERO);const ab=new WeakMap;class cb{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,ab.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=Qv;e=Rb(e,32);const i=e.slice();i[31]=-129&e[31];const s=mb(i);if(t&&s>=n)throw new Error("Expected 0 < hex < P");if(!t&&s>=Yv)throw new Error("Expected 0 < hex < 2**256");const o=bb(s*s),a=bb(o-Hv),c=bb(r*o+Hv);let{isValid:u,value:l}=kb(a,c);if(!u)throw new Error("Point.fromHex: invalid y coordinate");const h=(l&Hv)===Hv,d=0!==(128&e[31]);return d!==h&&(l=bb(-l)),new cb(l,s)}static async fromPrivateKey(e){return(await Bb(e)).point}toRawBytes(){const e=yb(this.y);return e[31]|=this.x&Hv?128:0,e}toHex(){return db(this.toRawBytes())}toX25519(){const{y:e}=this,t=bb((Hv+e)*Eb(Hv-e));return yb(t)}isTorsionFree(){return rb.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new cb(bb(-this.x),this.y)}add(e){return rb.fromAffine(this).add(rb.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return rb.fromAffine(this).multiply(e,this).toAffine()}}cb.BASE=new cb(Qv.Gx,Qv.Gy),cb.ZERO=new cb(Kv,Hv);class ub{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=Rb(e,64),r=cb.fromHex(t.slice(0,32),!1),n=mb(t.slice(32,64));return new ub(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof cb))throw new Error("Expected Point instance");return Pb(t,Qv.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(yb(this.s),32),e}toHex(){return db(this.toRawBytes())}}function lb(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}const hb=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function db(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=hb[e[r]];return t}function fb(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function pb(e){const t=32,r=e.toString(16).padStart(2*t,"0");return fb(r)}function yb(e){return pb(e).reverse()}function gb(e){return(bb(e)&Hv)===Hv}function mb(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+db(Uint8Array.from(e).reverse()))}const wb=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vb(e){return bb(mb(e)&wb)}function bb(e,t=Qv.P){const r=e%t;return r>=Kv?r:t+r}function Eb(e,t=Qv.P){if(e===Kv||t<=Kv)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=bb(e,t),n=t,i=Kv,s=Hv,o=Hv,a=Kv;while(r!==Kv){const e=n/r,t=n%r,c=i-o*e,u=s-a*e;n=r,r=t,i=o,s=a,o=c,a=u}const c=n;if(c!==Hv)throw new Error("invert: does not exist");return bb(i,t)}function _b(e,t=Qv.P){const r=new Array(e.length),n=e.reduce(((e,n,i)=>n===Kv?e:(r[i]=e,bb(e*n,t))),Hv),i=Eb(n,t);return e.reduceRight(((e,n,i)=>n===Kv?e:(r[i]=bb(e*r[i],t),bb(e*n,t))),i),r}function Ab(e,t){const{P:r}=Qv;let n=e;while(t-- >Kv)n*=n,n%=r;return n}function Sb(e){const{P:t}=Qv,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),a=e*e%t,c=a*e%t,u=Ab(c,Gv)*c%t,l=Ab(u,Hv)*e%t,h=Ab(l,r)*l%t,d=Ab(h,n)*h%t,f=Ab(d,i)*d%t,p=Ab(f,s)*f%t,y=Ab(p,o)*p%t,g=Ab(y,o)*p%t,m=Ab(g,n)*h%t,w=Ab(m,Gv)*e%t;return{pow_p_5_8:w,b2:c}}function kb(e,t){const r=bb(t*t*t),n=bb(r*r*t),i=Sb(e*n).pow_p_5_8;let s=bb(e*r*i);const o=bb(t*s*s),a=s,c=bb(s*Jv),u=o===e,l=o===bb(-e),h=o===bb(-e*Jv);return u&&(s=a),(l||h)&&(s=c),gb(s)&&(s=bb(-s)),{isValid:u||l,value:s}}function Ib(e){return kb(Hv,e)}function Tb(e){return bb(mb(e),Qv.l)}function Cb(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Rb(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):fb(e);if("number"===typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Pb(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(r){if(Kv<e)return e}else if(Kv<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function xb(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Ob(e){if(e="bigint"===typeof e||"number"===typeof e?pb(Pb(e,Yv)):Rb(e),32!==e.length)throw new Error("Expected 32 bytes");return e}function Nb(e){const t=xb(e.slice(0,32)),r=e.slice(32,64),n=Tb(t),i=cb.BASE.multiply(n),s=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:s}}let Db;async function Bb(e){return Nb(await zb.sha512(Ob(e)))}async function Lb(e){return(await Bb(e)).pointBytes}async function Mb(e,t){e=Rb(e);const{prefix:r,scalar:n,pointBytes:i}=await Bb(t),s=Tb(await zb.sha512(r,e)),o=cb.BASE.multiply(s),a=Tb(await zb.sha512(o.toRawBytes(),i,e)),c=bb(s+a*n,Qv.l);return new ub(o,c).toRawBytes()}function Ub(e,t,r){t=Rb(t),r instanceof cb||(r=cb.fromHex(r,!1));const{r:n,s:i}=e instanceof ub?e.assertValidity():ub.fromHex(e),s=rb.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:s,pub:r,msg:t}}function Fb(e,t,r,n){const i=Tb(n),s=rb.fromAffine(e).multiplyUnsafe(i),o=rb.fromAffine(t).add(s);return o.subtract(r).multiplyUnsafe(Qv.h).equals(rb.ZERO)}async function jb(e,t,r){const{r:n,SB:i,msg:s,pub:o}=Ub(e,t,r),a=await zb.sha512(n.toRawBytes(),o.toRawBytes(),s);return Fb(o,n,i,a)}cb.BASE._setWindowSize(8);const Vb={node:qv,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},zb={bytesToHex:db,hexToBytes:fb,concatBytes:lb,getExtendedPublicKey:Bb,mod:bb,invert:Eb,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Rb(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return bb(mb(e),Qv.l-Hv)+Hv},randomBytes:(e=32)=>{if(Vb.web)return Vb.web.getRandomValues(new Uint8Array(e));if(Vb.node){const{randomBytes:t}=Vb.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>zb.randomBytes(32),sha512:async(...e)=>{const t=lb(...e);if(Vb.web){const e=await Vb.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(Vb.node)return Uint8Array.from(Vb.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=cb.BASE){const r=t.equals(cb.BASE)?t:new cb(t.x,t.y);return r._setWindowSize(e),r.multiply(Gv),r},sha512Sync:void 0};Object.defineProperties(zb,{sha512Sync:{configurable:!1,get(){return Db},set(e){Db||(Db=e)}}});const $b=32,qb=64,Kb=32;async function Hb(){const e=zb.randomPrivateKey(),t=await Lb(e),r=Yb(e,t);return{privateKey:r,publicKey:t}}async function Gb(e){if(e.length!==Kb)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=await Lb(t),n=Yb(t,r);return{privateKey:n,publicKey:r}}async function Wb(e,t){const r=e.slice(0,Kb);return await Mb(t,r)}async function Qb(e,t,r){return await jb(t,r,e)}function Yb(e,t){const r=new Uint8Array(qb);for(let n=0;n<Kb;n++)r[n]=e[n],r[Kb+n]=t[n];return r}class Jb{constructor(e){this._key=nE(e,$b)}async verify(e,t){return await Qb(this._key,t,e)}marshal(){return this._key}get bytes(){return Jm.encode({Type:Qm.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}}class Xb{constructor(e,t){this._key=nE(e,qb),this._publicKey=nE(t,$b)}async sign(e){return await Wb(this._key,e)}get public(){return new Jb(this._publicKey)}marshal(){return this._key}get bytes(){return Xm.encode({Type:Qm.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}async id(){const e=await uo.digest(this.public.bytes);return bo.base58btc.encode(e.bytes).substring(1)}async export(e,t="libp2p-key"){if("libp2p-key"===t)return await Lv(this.bytes,e);throw Ut(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function Zb(e){if(e.length>qb){e=nE(e,qb+$b);const t=e.slice(0,qb),r=e.slice(qb,e.length);return new Xb(t,r)}e=nE(e,qb);const t=e.slice(0,qb),r=e.slice($b);return new Xb(t,r)}function eE(e){return e=nE(e,$b),new Jb(e)}async function tE(){const{privateKey:e,publicKey:t}=await Hb();return new Xb(e,t)}async function rE(e){const{privateKey:t,publicKey:r}=await Gb(e);return new Xb(t,r)}function nE(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw Ut(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}function iE(){return wv.randomPrivateKey()}async function sE(e,t){const{digest:r}=await Co.digest(t);try{return await fv(r,e)}catch(nP){throw Ut(nP,"ERR_INVALID_INPUT")}}async function oE(e,t,r){try{const{digest:n}=await Co.digest(r);return yv(t,n,e)}catch(nP){throw Ut(nP,"ERR_INVALID_INPUT")}}function aE(e){const t=Iw.fromHex(e).toRawBytes(!0);return t}function cE(e){try{av(e,!0)}catch(nP){throw Ut(nP,"ERR_INVALID_PRIVATE_KEY")}}function uE(e){try{Iw.fromHex(e)}catch(nP){throw Ut(nP,"ERR_INVALID_PUBLIC_KEY")}}function lE(e){try{return av(e,!0)}catch(nP){throw Ut(nP,"ERR_INVALID_PRIVATE_KEY")}}class hE{constructor(e){uE(e),this._key=e}async verify(e,t){return await oE(this._key,t,e)}marshal(){return aE(this._key)}get bytes(){return Jm.encode({Type:Qm.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}}class dE{constructor(e,t){this._key=e,this._publicKey=t??lE(e),cE(this._key),uE(this._publicKey)}async sign(e){return await sE(this._key,e)}get public(){return new hE(this._publicKey)}marshal(){return this._key}get bytes(){return Xm.encode({Type:Qm.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Fm(this.bytes,e.bytes)}async hash(){const{bytes:e}=await Co.digest(this.bytes);return e}async id(){const e=await this.public.hash();return vh(e,"base58btc")}async export(e,t="libp2p-key"){if("libp2p-key"===t)return await Lv(this.bytes,e);throw Ut(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function fE(e){return new dE(e)}function pE(e){return new hE(e)}async function yE(){const e=await iE();return new dE(e)}const gE={rsa:ae,ed25519:ce,secp256k1:ue};function mE(e){const t=Object.keys(gE).join(" / ");return Ut(new Error(`invalid or unsupported key type ${e}. Must be ${t}`),"ERR_UNSUPPORTED_KEY_TYPE")}function wE(e){if(e=e.toLowerCase(),"rsa"===e||"ed25519"===e||"secp256k1"===e)return gE[e];throw mE(e)}async function vE(e,t){return await wE(e).generateKeyPair(t??2048)}function bE(e){const t=Jm.decode(e),r=t.Data;switch(t.Type){case Qm.RSA:return gE.rsa.unmarshalRsaPublicKey(r);case Qm.Ed25519:return gE.ed25519.unmarshalEd25519PublicKey(r);case Qm.Secp256k1:return gE.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw mE(t.Type)}}function EE(e,t){return t=(t??"rsa").toLowerCase(),wE(t),e.bytes}async function _E(e){const t=Xm.decode(e),r=t.Data;switch(t.Type){case Qm.RSA:return await gE.rsa.unmarshalRsaPrivateKey(r);case Qm.Ed25519:return gE.ed25519.unmarshalEd25519PrivateKey(r);case Qm.Secp256k1:return gE.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw mE(t.Type)}}function AE(e,t){return t=(t??"rsa").toLowerCase(),wE(t),e.bytes}async function SE(e,t){try{const r=await dw(e,t);return await _E(r)}catch(i){}const r=rw.pki.decryptRsaPrivateKey(e,t);if(null===r)throw Ut(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=rw.asn1.toDer(rw.pki.privateKeyToAsn1(r));return n=ia(n.getBytes(),"ascii"),await gE.rsa.unmarshalRsaPrivateKey(n)}const kE="ERR_IPNS_EXPIRED_RECORD",IE="ERR_UNRECOGNIZED_VALIDITY",TE="ERR_SIGNATURE_CREATION",CE="ERR_SIGNATURE_VERIFICATION",RE="ERR_UNRECOGNIZED_FORMAT",PE="ERR_UNDEFINED_PARAMETER",xE="ERR_INVALID_RECORD_DATA",OE="ERR_INVALID_EMBEDDED_KEY",NE="ERR_MISSING_PRIVATE_KEY";var DE;(function(e){let t,r,n;(function(e){e["EOL"]="EOL"})(t=e.ValidityType||(e.ValidityType={})),function(e){e[e["EOL"]=0]="EOL"}(r||(r={})),function(e){e.codec=()=>ew(r)}(t=e.ValidityType||(e.ValidityType={})),e.codec=()=>(null==n&&(n=tw(((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.value&&(r.uint32(10),r.bytes(t.value)),null!=t.signature&&(r.uint32(18),r.bytes(t.signature)),null!=t.validityType&&(r.uint32(24),e.ValidityType.codec().encode(t.validityType,r)),null!=t.validity&&(r.uint32(34),r.bytes(t.validity)),null!=t.sequence&&(r.uint32(40),r.uint64(t.sequence)),null!=t.ttl&&(r.uint32(48),r.uint64(t.ttl)),null!=t.pubKey&&(r.uint32(58),r.bytes(t.pubKey)),null!=t.signatureV2&&(r.uint32(66),r.bytes(t.signatureV2)),null!=t.data&&(r.uint32(74),r.bytes(t.data)),!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.value=t.bytes();break;case 2:n.signature=t.bytes();break;case 3:n.validityType=e.ValidityType.codec().decode(t);break;case 4:n.validity=t.bytes();break;case 5:n.sequence=t.uint64();break;case 6:n.ttl=t.uint64();break;case 7:n.pubKey=t.bytes();break;case 8:n.signatureV2=t.bytes();break;case 9:n.data=t.bytes();break;default:t.skipType(7&r);break}}return n}))),n),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(DE||(DE={}));const BE=Mt("ipns:utils"),LE=ia("/ipns/");function ME(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}const UE=async(e,t)=>{if(null==t||null==e){const e=new Error("one or more of the provided parameters are not defined");throw BE.error(e),Ut(e,PE)}let r;if(null!=t.pubKey){try{r=bE(t.pubKey)}catch(nP){throw BE.error(nP),nP}const n=await Em(t.pubKey);if(!n.equals(e))throw Ut(new Error("Embedded public key did not match PeerID"),OE)}else null!=e.publicKey&&(r=bE(e.publicKey));if(null!=r)return r;throw Ut(new Error("no public key is available"),PE)},FE=(e,t,r)=>{const n=ia(t);return(0,nw.concat)([e,r,n])},jE=e=>{const t=ia("ipns-signature:");return(0,nw.concat)([t,e])},VE=e=>DE.encode(e),zE=e=>{const t=DE.decode(e);return null!=t.sequence&&(t.sequence=BigInt(t.sequence)),null!=t.ttl&&(t.ttl=BigInt(t.ttl)),{value:t.value??new Uint8Array(0),signature:t.signature??new Uint8Array(0),validityType:t.validityType??DE.ValidityType.EOL,validity:t.validity??new Uint8Array(0),sequence:t.sequence??0n,pubKey:t.pubKey,ttl:t.ttl??void 0,signatureV2:t.signatureV2,data:t.data}},$E=e=>(0,nw.concat)([LE,e.toBytes()]),qE=e=>vm(e.slice(LE.length)),KE=(e,t,r,n,i)=>{let s;if(r!==DE.ValidityType.EOL)throw Ut(new Error("Unknown validity type"),IE);s=0;const o={Value:e,Validity:t,ValidityType:s,Sequence:n,TTL:i};return Hi(o)},HE=e=>{const t=es(e);if(0!==t.ValidityType)throw Ut(new Error("Unknown validity type"),IE);return t.ValidityType=DE.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t},GE=Mt("ipns"),WE=uo.code,QE="/ipns/",YE=QE.length,JE=async(e,t,r,n)=>{const i=new jm(Date.now()+Number(n)),s=DE.ValidityType.EOL,[o,a]=n.toString().split("."),c=BigInt(o)*BigInt(1e5)+BigInt(a??"0");return await XE(e,t,r,s,i,c)},XE=async(e,t,r,n,i,s)=>{r=BigInt(r);const o=ia(i.toString());if(null==e.privateKey)throw Ut(new Error("Missing private key"),NE);const a=await _E(e.privateKey),c=await t_(a,t,n,o),u=KE(t,o,n,r,s),l=jE(u),h=await a.sign(l),d={value:t,signature:c,validityType:n,validity:o,sequence:r,ttl:s,signatureV2:h,data:u};if(null!=e.publicKey){const t=fs.Jx(e.toBytes());t.code===WE&&Fm(e.publicKey,t.digest)||(d.pubKey=e.publicKey)}return GE("ipns entry for %b created",t),d},ZE=e=>mo.base32upper.encode(e).slice(1),e_=e=>new Df(`/ipns/${ZE(e)}`),t_=async(e,t,r,n)=>{try{const i=FE(t,r,n);return await e.sign(i)}catch(i){throw GE.error("record signature creation failed",i),Ut(new Error("record signature creation failed"),TE)}},r_=Mt("ipfs:ipns:publisher"),n_=Um().code,i_=36e5;class s_{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,r,n){const i=await this._updateOrCreateRecord(e,t,r,n);return this._putRecordToRouting(i,e,n)}publish(e,t,r){return this.publishWithEOL(e,t,i_,r)}async _putRecordToRouting(e,t,r){if(!cm(t)){const e="peerId received is not valid";throw r_.error(e),Ut(new Error(e),"ERR_INVALID_PEER_ID")}if(null==t.publicKey)throw Ut(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");const n=$E(t);return await this._publishEntry(n,e,r),e}async _publishEntry(e,t,r){try{const n=await this._routing.put(e,t,r);return r_(`ipns record for ${vh(e,"base32")} was stored in the routing`),n}catch(nP){const r=`ipns record for ${vh(e,"base32")} could not be stored in the routing - ${nP.stack}`;throw r_.error(r),r_.error(nP),Ut(new Error(r),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e,t={}){if(!cm(e)){const e="peerId received is not valid";throw r_.error(e),Ut(new Error(e),"ERR_INVALID_PEER_ID")}const r=!1!==t.checkRouting;try{const t=await this._datastore.get(e_(e.toBytes()));return this._unmarshalData(t)}catch(nP){if(nP.code!==n_){const t=`unexpected error getting the ipns record ${e.toString()} from datastore`;throw r_.error(t),Ut(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!r)throw Ut(nP,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const t=$E(e),r=await this._routing.get(t);return this._unmarshalData(r)}catch(nP){throw r_.error(nP),nP}}}_unmarshalData(e){try{return zE(e)}catch(nP){throw Ut(nP,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,r,n){if(!cm(e)){const e="peerId received is not valid";throw r_.error(e),Ut(new Error(e),"ERR_INVALID_PEER_ID")}const i={checkRouting:!0};let s;try{s=await this._getPublished(e,i)}catch(nP){if(nP.code!==n_){const r=`unexpected error when determining the last published IPNS record for ${e.toString()} ${nP.stack}`;throw r_.error(r),Ut(new Error(r),"ERR_DETERMINING_PUBLISHED_RECORD")}}let o,a=0n;s&&void 0!==s.sequence&&(a=Fm(s.value,t)?s.sequence:s.sequence+BigInt(1));try{o=await JE(e,t,a,r)}catch(nP){const r=`ipns record for ${t} could not be created`;throw r_.error(nP),Ut(new Error(r),"ERR_CREATING_IPNS_RECORD")}try{const r=VE(o);return await this._datastore.put(e_(e.toBytes()),r,n),r_(`ipns record for ${vh(t,"base32")} was stored in the datastore`),r}catch(nP){const r=`ipns record for ${t} could not be stored in the datastore`;throw r_.error(r),Ut(new Error(r),"ERR_STORING_IN_DATASTORE")}}}s_.defaultRecordLifetime=i_;const o_=Mt("ipfs:ipns:republisher"),a_=6e4,c_=60*a_,u_=4*c_,l_=24*c_;class h_{constructor(e,t,r,n,i={pass:""}){this._publisher=e,this._datastore=t,this._peerId=r,this._keychain=n,this._options=i,this._republishHandle=null}async start(){if(this._republishHandle)throw Ut(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:t=>{e._timeoutId=setTimeout((async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(t)}catch(nP){o_.error(nP)}}),t())},cancel:async()=>{null!=e._timeoutId&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{pass:t}=this._options;let r=!0;e._task=async()=>{const e=new sa.TimeoutController(3e4);try{await this._republishEntries(this._peerId,t,{signal:e.signal})}finally{e.clear()}},e.runPeriodically((()=>r?(r=!1,this._options.initialBroadcastInterval||a_):this._options.broadcastInterval||u_)),this._republishHandle=e}async stop(){const e=this._republishHandle;if(!e)throw Ut(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t,r){try{await this._republishEntry(e,r)}catch(nP){const t="cannot republish entry for the node's private key";return void o_.error(t)}if(t)try{const e=await this._keychain.listKeys();for(const n of e){if("self"===n.name)continue;const e=await this._keychain.exportKey(n.name,t),i=await SE(e,t),s=await Em(i.public.bytes,i.bytes);await this._republishEntry(s,r)}}catch(nP){o_.error(nP)}}async _republishEntry(e,t){try{const r=await this._getPreviousValue(e);await this._publisher.publishWithEOL(e,r,l_,t)}catch(nP){if("ERR_NO_ENTRY_FOUND"===nP.code)return;throw nP}}async _getPreviousValue(e){if(!cm(e))throw Ut(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const t=await this._datastore.get(e_(e.toBytes()));if(!(t instanceof Uint8Array))throw Ut(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{const e=zE(t);return e.value}catch(nP){throw o_.error(nP),Ut(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(nP){if(nP&&nP.notFound)throw Ut(new Error(`no previous entry for record with id: ${e.toString()}`),"ERR_NO_ENTRY_FOUND");throw nP}}}const d_=Mt("ipns:validator"),f_=async(e,t)=>{const{value:r,validityType:n,validity:i}=t;let s,o,a;null!=t.signatureV2&&null!=t.data?(o=t.signatureV2,s=jE(t.data),p_(t)):(o=t.signature??new Uint8Array(0),s=FE(r,n,i));try{a=await e.verify(s,o)}catch(nP){a=!1}if(!a)throw d_.error("record signature verification failed"),Ut(new Error("record signature verification failed"),CE);if(null!=i&&n===DE.ValidityType.EOL){let e;try{e=ME(vh(i))}catch(c){throw d_.error("unrecognized validity format (not an rfc3339 format)"),Ut(new Error("unrecognized validity format (not an rfc3339 format)"),RE)}if(e.getTime()<Date.now())throw d_.error("record has expired"),Ut(new Error("record has expired"),kE)}else if(null!=n)throw d_.error("unrecognized validity type"),Ut(new Error("unrecognized validity type"),IE);d_("ipns entry for %b is valid",r)},p_=e=>{if(null==e.data)throw Ut(new Error("Record data is missing"),xE);const t=HE(e.data);if(!Fm(t.Value,e.value))throw Ut(new Error('Field "value" did not match between protobuf and CBOR'),CE);if(!Fm(t.Validity,e.validity))throw Ut(new Error('Field "validity" did not match between protobuf and CBOR'),CE);if(t.ValidityType!==e.validityType)throw Ut(new Error('Field "validityType" did not match between protobuf and CBOR'),CE);if(t.Sequence!==e.sequence)throw Ut(new Error('Field "sequence" did not match between protobuf and CBOR'),CE);if(t.TTL!==e.ttl)throw Ut(new Error('Field "ttl" did not match between protobuf and CBOR'),CE)},y_=async(e,t)=>{const r=qE(e),n=zE(t),i=await UE(r,n);await f_(i,n)},g_=Mt("ipfs:ipns:resolver"),m_=Um().code,w_=32;class v_{constructor(e){this._routing=e}async resolve(e,t={}){if("string"!==typeof e)throw Ut(new Error("invalid name"),"ERR_INVALID_NAME");const r=t.recursive&&"true"===t.recursive.toString(),n=e.split("/");if(3!==n.length||""!==n[0])throw Ut(new Error("invalid name"),"ERR_INVALID_NAME");const i=n[2];let s=1/0;r&&(s=w_);const o=await this.resolver(i,s,t);return g_(`${e} was locally resolved correctly`),o}async resolver(e,t,r){if(0===t){const e=`could not resolve name (recursion limit of ${w_} exceeded)`;throw g_.error(e),Ut(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT")}const n=await this._resolveName(e,r),i=n.split("/");return"ipfs"!==i[1]&&t?this.resolver(i[2],t-1,r):n}async _resolveName(e,t){const r=wm(e),n=$E(r);let i;try{i=await this._routing.get(n,t)}catch(nP){if(g_.error("could not get record from routing",nP),nP.code===m_)throw Ut(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw Ut(new Error(`unexpected error getting the ipns record ${r.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}return this._validateRecord(r,i)}async _validateRecord(e,t){await y_((0,nw.concat)([ia("/ipns/"),e.toBytes()]),t);const r=zE(t);return vh(r.value)}}class b_{constructor(e){this.lru=op(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}has(e){const t=this.get(e);return!!t}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}const E_=Mt("ipfs:ipns"),__=6e4;class A_{constructor(e,t,r,n,i){this.publisher=new s_(e,t),this.republisher=new h_(this.publisher,t,r,n,i),this.resolver=new v_(e),this.cache=new b_(1e3),this.routing=e}async publish(e,t,r=s_.defaultRecordLifetime,n){try{await this.publisher.publishWithEOL(e,t,r,n),E_(`IPNS value ${vh(t,"base32")} was published correctly`);const i=e.toString(),s=parseFloat(r),o=s<__?s:__;return this.cache.set(i,t,o),E_(`IPNS value ${vh(t,"base32")} was cached correctly`),{name:i,value:t}}catch(nP){throw E_.error(nP),nP}}async resolve(e,t={}){if("string"!==typeof e)throw Ut(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!t.nocache&&!t.recursive){const t=e.split("/")[2],r=this.cache.get(t);if(r)return r}try{const r=await this.resolver.resolve(e,t);return E_(`IPNS record from ${e} was resolved correctly`),r}catch(nP){throw E_.error(nP),nP}}async initializeKeyspace(e,t,r){return this.publish(e,t,s_.defaultRecordLifetime,r)}}var S_=r(7192);const k_=(e,t)=>async function*(){const r=await S_(e);yield*r.sort(t)}();var I_=r(9164),T_=r(3726),C_=r(6855);class R_{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await I_(this.putMany(e,r)),e=[],await I_(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=T_(r,(t=>t.key.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>T_(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>k_(e,t)),r)),null!=e.offset){let t=0;r=T_(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=C_(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=T_(r,(t=>t.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>T_(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>k_(e,t)),r)),null!=e.offset){let t=0;r=T_(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=C_(r,e.limit)),r}}class P_{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class x_{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new P_(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new P_(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}function O_(e={}){const t=e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}};return D_(t,e)}function N_(e={}){const t=e=>{let t;const r=[];while(!e.isEmpty()){if(t=e.shift(),null==t)break;if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}};return D_(t,e)}function D_(e,t){t=t??{};let r,n,i,s=t.onEnd,o=new x_;const a=async()=>o.isEmpty()?i?{done:!0}:await new Promise(((t,i)=>{n=s=>{n=null,o.push(s);try{t(e(o))}catch(nP){i(nP)}return r}})):e(o),c=e=>null!=n?n(e):(o.push(e),r),u=e=>(o=new x_,null!=n?n({error:e}):(o.push({error:e}),r)),l=e=>{if(i)return r;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},h=e=>i?r:(i=!0,null!=e?u(e):c({done:!0})),d=()=>(o=new x_,h(),{done:!0}),f=e=>(h(e),{done:!0});if(r={[Symbol.asyncIterator](){return this},next:a,return:d,throw:f,push:l,end:h,get readableLength(){return o.size}},null==s)return r;const p=r;return r={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(e){return p.throw(e),null!=s&&(s(e),s=void 0),{done:!0}},return(){return p.return(),null!=s&&(s(),s=void 0),{done:!0}},push:l,end(e){return p.end(e),null!=s&&(s(e),s=void 0),r},get readableLength(){return p.readableLength}},r}const B_=Mt("datastore:core:tiered");class L_ extends R_{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map((e=>e.open())))}catch(nP){throw Bm()}}async put(e,t,r){try{await Promise.all(this.stores.map((n=>n.put(e,t,r))))}catch(nP){throw Mm()}}async get(e,t){for(const r of this.stores)try{const n=await r.get(e,t);if(n)return n}catch(nP){B_.error(nP)}throw Um()}async has(e,t){for(const r of this.stores)if(await r.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map((r=>r.delete(e,t))))}catch(nP){throw Lm()}}async*putMany(e,t={}){let r;const n=this.stores.map((e=>{const n=O_({objectMode:!0});return I_(e.putMany(n,t)).catch((e=>{r=e})),n}));try{for await(const t of e){if(r)throw r;n.forEach((e=>e.push(t))),yield t}}finally{n.forEach((e=>e.end()))}}async*deleteMany(e,t={}){let r;const n=this.stores.map((e=>{const n=O_({objectMode:!0});return I_(e.deleteMany(n,t)).catch((e=>{r=e})),n}));try{for await(const t of e){if(r)throw r;n.forEach((e=>e.push(t))),yield t}}finally{n.forEach((e=>e.end()))}}async close(){await Promise.all(this.stores.map((e=>e.close())))}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,r)=>{e.forEach((e=>e.put(t,r)))},delete:t=>{e.forEach((e=>e.delete(t)))},commit:async t=>{for(const r of e)await r.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}var M_=r(2883);const U_=(e,t)=>{const r=t.map(((e,t)=>({entry:DE.decode(e),index:t})));return r.sort(((e,t)=>{if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;const r=e.entry.sequence??0n,n=t.entry.sequence??0n;if(r>n)return-1;if(r<n)return 1;const i=e.entry.validity??new Uint8Array(0),s=t.entry.validity??new Uint8Array(0),o=ME(vh(i)),a=ME(vh(s));return o.getTime()>a.getTime()?-1:o.getTime()<a.getTime()?1:0})),r[0].index},F_="SHARDING",j_="_README";class V_ extends R_{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){const t=await this.has(e);if(!t)throw Um();return this.data[e.toString()]}async has(e){return void 0!==this.data[e.toString()]}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map((([e,t])=>({key:new Df(e),value:t})))}async*_allKeys(){yield*Object.entries(this.data).map((([e])=>new Df(e)))}}var z_=r(9927),$_=r(940);const q_=(...e)=>{let t;while(e.length>0)t=e.shift()(t);return t},K_=e=>null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next),H_=e=>null!=e&&"function"===typeof e.sink&&K_(e.source),G_=e=>t=>{const r=e.sink(t);if(null!=r.then){const t=O_({objectMode:!0});r.then((()=>{t.end()}),(e=>{t.end(e)}));const n=async function*(){yield*e.source,t.end()};return $_(t,n())}return e.source};function W_(e,...t){if(H_(e)){const t=e;e=()=>t.source}else if(K_(e)){const t=e;e=()=>t}const r=[e,...t];if(r.length>1&&H_(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)H_(r[n])&&(r[n]=G_(r[n]));return q_(...r)}new Df(F_),new Df(j_);const Q_="/record/";function Y_(e){return vh(e,"base32")}function J_(e){("string"===typeof e||e instanceof String)&&(e=ia(e.toString()));const t=vh(e,"base64url");return`${Q_}${t}`}function X_(e){if(e.substring(0,Q_.length)!==Q_)throw Ut(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=e.substring(Q_.length);return ia(t,"base64url")}const Z_=Mt("datastore-pubsub:publisher");class eA extends R_{constructor(e,t,r,n,i,s){if(super(),!n)throw Ut(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!==typeof n)throw Ut(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof i)throw Ut(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&"function"!==typeof s)throw Ut(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=r,this._validator=n,this._selector=i,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t,r){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw Z_.error(e),Ut(new Error(e),"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){const e="received value is not a Uint8Array";throw Z_.error(e),Ut(new Error(e),"ERR_INVALID_VALUE_RECEIVED")}const n=J_(e);Z_(`publish value for topic ${n}`),await this._pubsub.publish(n,t)}async get(e,t){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw Z_.error(e),Ut(new Error(e),"ERR_INVALID_DATASTORE_KEY")}const r=J_(e),n=await this._pubsub.getTopics();if(n&&Array.isArray(n)&&n.indexOf(r)>-1)return this._getLocal(e,t);try{await this._pubsub.subscribe(r)}catch(nP){const t=`cannot subscribe topic ${r}`;throw Z_.error(t),Ut(new Error(t),"ERR_SUBSCRIBING_TOPIC")}return Z_(`subscribed values for key ${r}`),this._getLocal(e)}unsubscribe(e){const t=J_(e);return this._pubsub.unsubscribe(t)}async _getLocal(e,t){const r=new Df("/"+Y_(e),!1);let n;try{n=await this._datastore.get(r,t)}catch(nP){if("ERR_NOT_FOUND"!==nP.code){const e=`unexpected error getting the ipns record for ${r.toString()}`;throw Z_.error(e),Ut(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const t=`local record requested was not found for ${r.toString()}`;throw Z_.error(t),Ut(new Error(t),"ERR_NOT_FOUND")}if(!(n instanceof Uint8Array)){const e="found record that we couldn't convert to a value";throw Z_.error(e),Ut(new Error(e),"ERR_INVALID_RECORD_RECEIVED")}return n}async _onMessage(e){const t=e.detail;if("signed"!==t.type)return void Z_.error("unsigned message received, this module can only work with signed messages");const{data:r,from:n,topic:i}=t;let s;try{s=X_(i)}catch(nP){return void Z_.error(nP)}if(Z_(`message received for topic ${i}`),this._peerId.equals(n))Z_("message discarded as it is from the same peer");else{if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(s)}catch(nP){return void Z_.error("message discarded by the subscriptionKeyFn")}s=e}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(nP){Z_.error(nP)}}}async _storeIfSubscriptionIsBetter(e,t,r){let n=!1;try{n=await this._isBetter(e,t)}catch(nP){if("ERR_NOT_VALID_RECORD"!==nP.code)throw nP}n&&await this._storeRecord(e,t,r)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){const r=await this._selector(e,t);return 0===r}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch(nP){const t="record received through pubsub is not valid";throw Z_.error(t),Ut(new Error(t),"ERR_NOT_VALID_RECORD")}const r=new Df(e);let n;try{n=await this._getLocal(r.uint8Array())}catch(nP){return!0}return!Fm(n,t)&&this._selectRecord(e,[n,t])}async _storeRecord(e,t,r){const n=new Df("/"+Y_(e),!1);await this._datastore.put(n,t,r),Z_(`record for ${J_(e)} was stored in the datastore`)}}const tA=Mt("ipfs:ipns:pubsub");class rA{constructor(e,t,r){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new eA(e,t,r,y_,U_,this._handleSubscriptionKey)}async put(e,t,r){try{await this._pubsubDs.put(e,t,r)}catch(nP){throw tA.error(nP),nP}}async get(e,t){let r,n;try{r=await this._pubsubDs.get(e,t)}catch(s){n=s}const i=e.slice(0,YE);if(vh(i)===QE){const t=bo.base58btc.encode(e).substring(1),r=bo.base58btc.encode(e.slice(YE)).substring(1);this._subscriptions[t]=r,tA(`subscribed to pubsub topic ${t}, id ${r}`)}if(n)throw n;return r}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=vh(e,"base58btc"));const t=this._subscriptions[e];if(!t)throw Ut(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");try{const e=$E(wm(t));return e}catch(nP){throw tA.error(nP),nP}}getSubscriptions(){const e=Object.values(this._subscriptions).filter(Boolean);return e.map((e=>`${QE}${e}`))}async cancel(e){if("string"!==typeof e)throw Ut(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(QE)&&(e=e.substring(YE));const t=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!t)return{canceled:!1};const r=ia(t);return this._pubsubDs.unsubscribe(r),delete this._subscriptions[t],tA(`unsubscribed pubsub ${t}: ${e}`),{canceled:!0}}}var nA=r(9799),iA=r(8894),sA=r(7156),oA=r(8252),aA=r(7102);function cA(){aA._configure(),nA._configure(iA),sA._configure(oA)}cA();const uA=["uint64","int64","sint64","fixed64","sfixed64"];function lA(e){for(const t of uA){if(null==e[t])continue;const r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function hA(e){return lA(new nA(e))}function dA(e){for(const t of uA){if(null==e[t])continue;const r=e[t];e[t]=function(e){return r.call(this,e.toString())}}return e}function fA(){return dA(sA.create())}function pA(e,t){const r=hA(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function yA(e,t){const r=fA();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var gA,mA;function wA(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function vA(e,t){return wA("message",gA.LENGTH_DELIMITED,e,t)}function bA(e){const t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),s=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0"),a=e.getUTCMilliseconds(),c=String(1e3*a*1e3).padStart(9,"0");return`${t}-${r}-${n}T${i}:${s}:${o}.${c}Z`}function EA(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),u=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,u))}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(gA||(gA={})),function(e){let t;e.codec=()=>(null==t&&(t=vA(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.key&&e.key.byteLength>0)&&(t.uint32(10),t.bytes(e.key)),(!0===r.writeDefaults||null!=e.value&&e.value.byteLength>0)&&(t.uint32(18),t.bytes(e.value)),!0!==r.writeDefaults&&""===e.timeReceived||(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={key:new Uint8Array(0),value:new Uint8Array(0),timeReceived:""},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>yA(t,e.codec()),e.decode=t=>pA(t,e.codec())}(mA||(mA={}));class _A{constructor(e,t,r){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=r}serialize(){return mA.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:bA(this.timeReceived)}}static deserialize(e){const t=mA.decode(e);return new _A(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){const t=EA(e.timeReceived);if(null==e.key)throw new Error("key missing from deserialized object");if(null==e.value)throw new Error("value missing from deserialized object");const r=new _A(e.key,e.value,t);return r}}const AA=Mt("ipfs:ipns:offline-datastore");class SA{constructor(e){this._datastore=e,this.stores=[]}async put(e,t,r){if(!(e instanceof Uint8Array))throw Ut(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(t instanceof Uint8Array))throw Ut(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let n;try{n=this._routingKey(e)}catch(nP){throw AA.error(nP),Ut(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const i=new _A(e,t,new Date);await this._datastore.put(n,i.serialize(),r)}async get(e,t){if(!(e instanceof Uint8Array))throw Ut(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let r;try{r=this._routingKey(e)}catch(nP){throw AA.error(nP),Ut(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const n=await this._datastore.get(r,t);let i;try{i=_A.deserialize(n)}catch(nP){throw AA.error(nP),nP}return i.value}_routingKey(e){return new Df("/dht/record/"+vh(e,"base32"),!1)}}const kA=Mt("ipfs:ipns:dht-datastore");class IA{constructor(e){this._dht=e}async put(e,t,r){try{await I_(this._dht.put(e,t,r))}catch(nP){throw kA.error(nP),nP}}async get(e,t){for await(const r of this._dht.get(e,t))if("VALUE"===r.name)return r.value;throw Um()}}function TA({libp2p:e,repo:t,peerId:r,options:n}){const i=[];let s;if(M_(n,"EXPERIMENTAL.ipnsPubsub",!1)&&(s=new rA(e.pubsub,t.datastore,r),i.push(s)),!0!==M_(n,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(M_(n,"config.Routing.Type","none"))&&i.push(new IA(e.dht)),M_(n,"offline",!1)||0===i.length){const e=new SA(t.datastore);i.push(e)}return new L_(i)}const CA=Mt("ipfs:components:ipns");class RA{constructor(e={pass:""}){this.options=e,this.offline=null,this.online=null}getIPNS(){const e=this.online||this.offline;if(e)return e;throw new qo}get routing(){return this.getIPNS().routing}startOffline({repo:e,peerId:t,keychain:r}){if(null!=this.offline)throw new Ho;CA("initializing IPNS keyspace (offline)");const n=new SA(e.datastore),i=new A_(n,e.datastore,t,r,this.options);this.offline=i}async startOnline({libp2p:e,repo:t,peerId:r,keychain:n}){if(null!=this.online)throw new Ho;const i=TA({libp2p:e,repo:t,peerId:r,options:this.options}),s=new A_(i,t.datastore,r,n,this.options);await s.republisher.start(),this.online=s}async stop(){const e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,t,r,n){return this.getIPNS().publish(e,t,r,n)}resolve(e,t){return this.getIPNS().resolve(e,t)}initializeKeyspace(e,t,r){return this.getIPNS().initializeKeyspace(e,t,r)}}async function PA({ipns:e,repo:t,codecs:r},n,i){if(Oh(n))return e.resolve(n);const{cid:s,path:o}=Hf(n);await I_(rp(s,o||"",r,t,i))}const xA=Mt("ipfs:name:publish");function OA({ipns:e,repo:t,codecs:r,peerId:n,isOnline:i,keychain:s}){const o=async e=>{let t;if("self"===e&&null!=n.privateKey)t=await _E(n.privateKey);else try{const r=await s.exportKey(e,"temp");t=await SE(r,"temp")}catch(nP){throw xA.error(nP),Ut(nP,"ERR_CANNOT_GET_KEY")}return Em(t.public.bytes,t.bytes)};async function a(n,s={}){const a=!(!1===s.resolve),c=s.lifetime||"24h",u=s.key||"self";if(!i())throw Ut(new Error(Wf),"OFFLINE_ERROR");try{n=Jf(n)}catch(nP){throw xA.error(nP),nP}let l=0;try{l=zf(c)||0,l=parseFloat(l.toFixed(6))}catch(nP){throw xA.error(nP),nP}const h=await Promise.all([o(u),a?PA({ipns:e,repo:t,codecs:r},n):Promise.resolve()]),d=ia(n),f=await e.publish(h[0],d,l,s);return{name:f.name,value:vh(f.value)}}return qf(a)}var NA=r(1050);const DA=gt.bind({ignoreUndefined:!0}),BA=Mt("ipfs:name:resolve"),LA=(e,t)=>t.length>0?e+"/"+t.join("/"):e;function MA({dns:e,ipns:t,isOnline:r,options:{offline:n}}){async function*i(i,s={}){if(s=DA({nocache:!1,recursive:!0},s),n&&s&&s.nocache)throw Ut(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!r()&&!n)throw Ut(new Error(Wf),"OFFLINE_ERROR");let o=i.toString();o.startsWith("/ipns/")||(o=`/ipns/${o}`);let[a,c,...u]=o.slice(1).split("/");try{if("1"===c.substring(0,1)){const e=wm(c),t=fs.Jx(e.toBytes()),r=Zt.k.createV1(114,t);c=r.toString(wo)}else{const e=Zt.k.parse(c);1===e.version&&(c=e.toString(wo))}}catch(nP){if(NA(c))return void(yield LA(await e(c,s),u));throw BA.error(nP),Ut(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const l=await t.resolve(`/${a}/${c}`,s);yield LA(l instanceof Uint8Array?vh(l):l,u)}return qf(i)}function UA(e,t){if(!e||!t||!t.ipnsPubsub)throw Ut(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof rA)return e.routing;const r=(e.routing.stores||[]).find((e=>e instanceof rA));if(!r)throw Ut(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}function FA({ipns:e,options:t}){const r=t.EXPERIMENTAL;async function n(t,n={}){const i=UA(e,r);return i.cancel(t,n)}return qf(n)}function jA({ipns:e,options:t}){const r=t.EXPERIMENTAL;async function n(t={}){try{return{enabled:Boolean(UA(e,r))}}catch(nP){return{enabled:!1}}}return qf(n)}function VA({ipns:e,options:t}){const r=t.EXPERIMENTAL;async function n(t={}){const n=UA(e,r);return n.getSubscriptions(t)}return qf(n)}class zA{constructor({ipns:e,options:t}){this.cancel=FA({ipns:e,options:t}),this.state=jA({ipns:e,options:t}),this.subs=VA({ipns:e,options:t})}}class $A{constructor({dns:e,ipns:t,repo:r,codecs:n,peerId:i,isOnline:s,keychain:o,options:a}){this.publish=OA({ipns:t,repo:r,codecs:n,peerId:i,isOnline:s,keychain:o}),this.resolve=MA({dns:e,ipns:t,isOnline:s,options:a}),this.pubsub=new zA({ipns:t,options:a})}}const qA=Um().code,KA={default:"<dst>",edges:"<src> -> <dst>"};function HA({repo:e,codecs:t,resolve:r,preload:n}){async function*i(i,s={}){if(0===s.maxDepth)return;if(s.edges&&s.format&&s.format!==KA.default)throw new Error("Cannot set edges to true and also specify format");if(s.format=s.edges?KA.edges:s.format,"number"!==typeof s.maxDepth&&(s.maxDepth=s.recursive?1/0:1),s.timeout){const e=new sa.TimeoutController(s.timeout),t=[e.signal];s.signal&&t.push(s.signal),s.signal=(0,Uf.anySignal)(t)}const o=Array.isArray(i)?i:[i],a=o.map((e=>GA(n,e,s)));for(const n of a)try{yield*WA(r,e,t,n,s)}catch(nP){yield{ref:"",err:nP.message}}}return i}function GA(e,t,r){const{cid:n,path:i}=Hf(t);return!1!==r.preload&&e(n),`/ipfs/${n}${i||""}`}async function*WA(e,t,r,n,i){const s=await e(n,i),{cid:o}=Hf(s),a=null!=i.maxDepth?i.maxDepth:1/0,c=i.unique||!1;for await(const u of YA(t,r,o,a,c,i))u.parent&&(u.isDuplicate||(yield{ref:QA(u.parent.cid,u.node.cid,u.node.name,i.format)}))}function QA(e,t,r="",n=KA.default){let i=n.replace(/<src>/g,e.toString());return i=i.replace(/<dst>/g,t.toString()),i=i.replace(/<linkname>/g,r),i}async function*YA(e,t,r,n,i,s){const o=new Set;async function*a(r,c){const u=c+1;if(!(u>n))try{for await(const n of JA(e,t,r.cid,s))yield{parent:r,node:n,isDuplicate:i&&o.has(n.cid.toString())},i&&o.add(n.cid.toString()),yield*a(n,u)}catch(nP){throw nP.code===qA&&(nP.message=`Could not find object with CID: ${r.cid}`),nP}}yield*a({cid:r},0)}async function*JA(e,t,r,n){const i=await e.blocks.get(r,n),s=await t.getCodec(r.code),o=s.decode(i),a=r.code===Cr,c=[];for(const[u,l]of XA(o,c)){if(a){const e=u.match(/^Links\/(\d+)\/Hash$/);if(e){const t=Number(e[1]);if(t<o.Links.length){yield{name:o.Links[t].Name,cid:l};continue}}}yield{name:u,cid:l}}}const XA=function*(e,t){if(null!=e&&!(e instanceof Uint8Array)){for(const[r,n]of Object.entries(e)){const e=[...t,r];if(null!=n&&"object"===typeof n)if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t],i=Zt.k.asCID(r);i?yield[n.join("/"),i]:"object"===typeof r&&(yield*XA(r,n))}else{const t=Zt.k.asCID(n);t?yield[e.join("/"),t]:yield*XA(n,e)}}return[]}};function ZA({repo:e}){async function*t(t={}){for await(const r of e.blocks.queryKeys({},{signal:t.signal}))yield{ref:r.toString()}}return qf(t)}function eS({network:e}){async function t(t={}){const{bitswap:r}=await e.use(t),n=r.getWantlist();return Array.from(n).map((e=>e[1].cid))}return qf(t)}function tS({network:e}){async function t(t,r={}){const{bitswap:n}=await e.use(r),i=n.wantlistForPeer(t);return Array.from(i).map((e=>e[1].cid))}return qf(t)}function rS({network:e}){async function t(t,r={}){const{bitswap:n}=await e.use(r);return Array.isArray(t)||(t=[t]),n.unwant(t)}return qf(t)}function nS({network:e}){async function t(t={}){const r=(await e.use(t)).bitswap,n=r.stat().snapshot;return{provideBufLen:parseInt(n.providesBufferLength.toString()),blocksReceived:BigInt(n.blocksReceived.toString()),wantlist:Array.from(r.getWantlist()).map((e=>e[1].cid)),peers:r.peers(),dupBlksReceived:BigInt(n.dupBlksReceived.toString()),dupDataReceived:BigInt(n.dupDataReceived.toString()),dataReceived:BigInt(n.dataReceived.toString()),blocksSent:BigInt(n.blocksSent.toString()),dataSent:BigInt(n.dataSent.toString())}}return qf(t)}class iS{constructor({network:e}){this.wantlist=eS({network:e}),this.wantlistForPeer=tS({network:e}),this.unwant=rS({network:e}),this.stat=nS({network:e})}}function sS(e){try{return fh.matches(e)}catch(nP){return!1}}function oS({repo:e}){async function t(t,r={}){if(!sS(t))throw new Error(`${t} is not a valid Multiaddr`);const n=await e.config.getAll(r),i=n.Bootstrap||[];return i.push(t.toString()),n.Bootstrap=Array.from(new Set(i)).sort(((e,t)=>e.localeCompare(t))),await e.config.replace(n),{Peers:[t]}}return qf(t)}function aS({repo:e}){async function t(t={}){const r=await e.config.getAll(t),n=r.Bootstrap||[];return r.Bootstrap=[],await e.config.replace(r),{Peers:n.map((e=>Kl(e)))}}return qf(t)}function cS({repo:e}){async function t(t={}){const r=await e.config.get("Bootstrap",t);return{Peers:(r||[]).map((e=>Kl(e)))}}return qf(t)}var uS=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}});function lS({repo:e}){async function t(t={}){const r=await e.config.getAll(t);return r.Bootstrap=uS().Bootstrap,await e.config.replace(r),{Peers:uS().Bootstrap.map((e=>Kl(e)))}}return qf(t)}function hS({repo:e}){async function t(t,r={}){if(!sS(t))throw new Error(`${t} is not a valid Multiaddr`);const n=await e.config.getAll(r);return n.Bootstrap=(n.Bootstrap||[]).filter((e=>e.toString()!==t.toString())),await e.config.replace(n),{Peers:[t]}}return qf(t)}class dS{constructor({repo:e}){this.add=oS({repo:e}),this.list=cS({repo:e}),this.rm=hS({repo:e}),this.clear=aS({repo:e}),this.reset=lS({repo:e})}}function fS({preload:e,repo:t}){async function r(r,n={}){return!1!==n.preload&&e(r),t.blocks.get(r,n)}return qf(r)}function pS({codecs:e,hashers:t,repo:r,preload:n}){async function i(i,s={}){const o=s.pin?await r.gcLock.readLock():null;try{const a=null!=s.version?s.version:0,c=s.format||(0===a?"dag-pb":"raw"),u=await t.getHasher(s.mhtype||"sha2-256"),l=await u.digest(i),h=await e.getCodec(c),d=Zt.k.create(a,h.code,l);return await r.blocks.put(d,i,{signal:s.signal}),!1!==s.preload&&n(d),!0===s.pin&&await r.pins.pinRecursively(d,{signal:s.signal}),d}finally{o&&o()}}return qf(i)}var yS=r(9310);function gS(e){return e instanceof Uint8Array?Zt.k.decode(e):Zt.k.parse(e.toString())}const mS=8;function wS({repo:e}){async function*t(t,r={}){Array.isArray(t)||(t=[t]);const n=await e.gcLock.writeLock();try{yield*W_(t,(t=>z_(t,(t=>async()=>{t=gS(t);const n={cid:t};try{const r=await e.blocks.has(t);if(!r)throw Ut(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await e.blocks.delete(t)}catch(nP){r.force||(nP.message=`cannot remove ${t}: ${nP.message}`,n.error=nP)}return n}))),(e=>yS(e,{concurrency:mS})),(e=>T_(e,(()=>!r.quiet))))}finally{n()}}return qf(t)}function vS({repo:e,preload:t}){async function r(r,n={}){r=gS(r),!1!==n.preload&&t(r);const i=await e.blocks.get(r);return{cid:r,size:i.length}}return qf(r)}class bS{constructor({codecs:e,hashers:t,preload:r,repo:n}){this.get=fS({preload:r,repo:n}),this.put=pS({codecs:e,hashers:t,preload:r,repo:n}),this.rm=wS({repo:n}),this.stat=vS({preload:r,repo:n})}}var ES=r(411),_S=r(7336),AS=r(4395);function SS(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function kS(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function IS(e){return"object"===typeof e&&(e.path||e.content)}const TS=e=>e&&"function"===typeof e.getReader;async function*CS(e){yield e}async function RS(e){if(SS(e))return CS(PS(e));if("string"===typeof e||e instanceof String)return CS(PS(e.toString()));if(kS(e))return _S(e);if(TS(e)&&(e=ES(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=AS(e),{value:r,done:n}=await t.peek();if(n)return CS(new Uint8Array(0));if(t.push(r),Number.isInteger(r))return CS(Uint8Array.from(await S_(t)));if(SS(r)||"string"===typeof r||r instanceof String)return z_(t,PS)}throw Ut(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function PS(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):ia(e.toString())}async function*xS(e,t){if(null===e||void 0===e)throw Ut(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield OS(e.toString(),t);else if(SS(e)||kS(e))yield OS(e,t);else{if(TS(e)&&(e=ES(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=AS(e),{value:n,done:i}=await r.peek();if(i)return void(yield{content:[]});if(r.push(n),Number.isInteger(n)||SS(n)||"string"===typeof n||n instanceof String)return void(yield OS(r,t));throw Ut(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!IS(e))throw Ut(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield OS(e,t)}}async function OS(e,t){const{path:r,mode:n,mtime:i,content:s}=e,o={path:r||"",mode:Yt(n),mtime:Jt(i)};return s?o.content=await t(s):r||(o.content=await t(e)),o}function NS(e){return xS(e,RS)}function DS({addAll:e}){async function t(t,r={}){const n=await Sm(e(NS(t),r));if(null==n)throw Error("Failed to add a file, if you see this please report a bug");return n}return t}var BS=r(8806),LS=r(716);function MS(e){const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return new Uint8Array(t)}ps({name:"murmur3-32",code:35,encode:e=>MS(LS.x86.hash32(e))});const US=ps({name:"murmur3-128",code:34,encode:e=>ds.fromHex(LS.x64.hash128(e))});async function FS(e){return(await US.encode(e)).slice(0,8).reverse()}const jS={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:Co,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:FS,hamtHashCode:34,hamtBucketBits:8};var VS=(e={})=>{const t=gt.bind({ignoreUndefined:!0});return t(jS,e)};const zS=async(e,t,r)=>{r.codec||(r.codec=n),r.hasher||(r.hasher=Co),void 0===r.cidVersion&&(r.cidVersion=1),r.codec===n&&r.hasher!==Co&&(r.cidVersion=1);const i=await r.hasher.digest(e),s=Zt.k.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await t.put(s,e,{signal:r.signal}),s};var $S=zS;const qS=async(e,t,r)=>{const n=new Xt({type:"directory",mtime:e.mtime,mode:e.mode}),i=Rr(Ar({Data:n.marshal()})),s=await $S(i,t,r),o=e.path;return{cid:s,path:o,unixfs:n,size:i.length}};var KS=qS;async function HS(e,t){return t(await S_(e))}var GS=HS,WS=r(1131);function QS(e,t,r){return YS(e,t,r)}async function YS(e,t,r){const n=[];for await(const i of WS(e,r.maxChildrenPerNode))n.push(await t(i));return n.length>1?YS(n,t,r):n[0]}var JS=QS;async function XS(e,t,r){const n=new tk(r.layerRepeat);let i=0,s=1,o=n;for await(const a of WS(e,r.maxChildrenPerNode))o.isFull()&&(o!==n&&n.addChild(await o.reduce(t)),i&&i%r.layerRepeat===0&&s++,o=new ek(s,r.layerRepeat,i),i++),o.append(a);return o&&o!==n&&n.addChild(await o.reduce(t)),n.reduce(t)}var ZS=XS;class ek{constructor(e,t,r=0){this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))),t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}class tk extends ek{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}async function*rk(e,t,r){for await(let i of e.content)yield async()=>{let s;r.progress(i.length,e.path);const o={codec:n,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};return r.rawLeaves?(o.codec=m,o.cidVersion=1):(s=new Xt({type:r.leafType,data:i}),i=Rr({Data:s.marshal(),Links:[]})),{cid:await $S(i,t,o),unixfs:s,size:i.length}}}var nk=rk;const ik={flat:GS,balanced:JS,trickle:ZS};async function*sk(e,t,r){let n,i,s=-1;i="function"===typeof r.bufferImporter?r.bufferImporter:nk;for await(const o of BS(i(e,t,r),r.blockWriteConcurrency))s++,0!==s?(1===s&&n&&(yield n,n=null),yield o):n=o;n&&(n.single=!0,yield n)}const ok=(e,t,r)=>{async function i(i){if(1===i.length&&i[0].single&&r.reduceSingleLeafToSelf){const s=i[0];if(void 0!==e.mtime||void 0!==e.mode){let i=await t.get(s.cid);s.unixfs=new Xt({type:"file",mtime:e.mtime,mode:e.mode,data:i}),i=Rr(Ar({Data:s.unixfs.marshal()})),s.cid=await $S(i,t,{...r,codec:n,hasher:r.hasher,cidVersion:r.cidVersion}),s.size=i.length}return{cid:s.cid,path:e.path,unixfs:s.unixfs,size:s.size}}const s=new Xt({type:"file",mtime:e.mtime,mode:e.mode}),o=i.filter((e=>!(e.cid.code!==xo||!e.size)||(!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)))).map((e=>e.cid.code===xo?(s.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?s.addBlockSize(e.unixfs.data.length):s.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid}))),a={Data:s.marshal(),Links:o},c=Rr(Ar(a)),u=await $S(c,t,r);return{cid:u,path:e.path,unixfs:s,size:c.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}}return i};function ak(e,t,r){const n=ik[r.strategy];if(!n)throw Ut(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY");return n(sk(e,t,r),ok(e,t,r),r)}var ck=ak,uk=r(9051),lk=r(7393);async function*hk(e,t){let r,n,i;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)i=t.avgChunkSize,r=t.minChunkSize,n=t.maxChunkSize;else{if(!t.avgChunkSize)throw Ut(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");i=t.avgChunkSize,r=i/3,n=i+i/2}if(r<16)throw Ut(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");n<r&&(n=r),i<r&&(i=r);const s=Math.floor(Math.log2(i));for await(const o of fk(e,{min:r,max:n,bits:s,window:t.window,polynomial:t.polynomial}))yield o}var dk=hk;async function*fk(e,t){const r=await(0,lk.create)(t.bits,t.min,t.max,t.window),n=new uk;for await(const i of e){n.append(i);const e=r.fingerprint(i);for(let t=0;t<e.length;t++){const r=e[t],i=n.slice(0,r);n.consume(r),yield i}}n.length&&(yield n.slice(0))}async function*pk(e,t){let r=new uk,n=0,i=!1;const s=t.maxChunkSize;for await(const o of e){r.append(o),n+=o.length;while(n>=s)if(yield r.slice(0,s),i=!0,s===r.length)r=new uk,n=0;else{const e=new uk;e.append(r.shallowSlice(s)),r=e,n-=s}}i&&!n||(yield r.slice(0,n))}var yk=pk;async function*gk(e){for await(const t of e){if(void 0===t.length)throw Ut(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"===typeof t||t instanceof String)yield ia(t.toString());else if(Array.isArray(t))yield Uint8Array.from(t);else{if(!(t instanceof Uint8Array))throw Ut(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield t}}}var mk=gk;function wk(e){return Symbol.iterator in e}function vk(e){return Symbol.asyncIterator in e}function bk(e){try{if(e instanceof Uint8Array)return async function*(){yield e}();if(wk(e))return async function*(){yield*e}();if(vk(e))return e}catch{throw Ut(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw Ut(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*Ek(e,t,r){for await(const n of e)if(n.path&&("./"===n.path.substring(0,2)&&(r.wrapWithDirectory=!0),n.path=n.path.split("/").filter((e=>e&&"."!==e)).join("/")),n.content){let e,i;e="function"===typeof r.chunker?r.chunker:"rabin"===r.chunker?dk:yk,i="function"===typeof r.chunkValidator?r.chunkValidator:mk;const s={path:n.path,mtime:n.mtime,mode:n.mode,content:e(i(bk(n.content),r),r)};yield()=>ck(s,t,r)}else{if(!n.path)throw new Error("Import candidate must have content or path or both");{const e={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>KS(e,t,r)}}}var _k=Ek;class Ak{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}var Sk=Ak;class kk extends Sk{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children),r=[];for(let c=0;c<t.length;c++){let n=this._children[t[c]];if(n instanceof Sk)for await(const t of n.flush(e))n=t,yield n;null!=n.size&&n.cid&&r.push({Name:t[c],Tsize:n.size,Hash:n.cid})}const n=new Xt({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},s=Rr(Ar(i)),o=await $S(s,e,this.options),a=s.length+i.Links.reduce(((e,t)=>e+(null==t.Tsize?0:t.Tsize)),0);this.cid=o,this.size=a,yield{cid:o,unixfs:n,path:this.path,size:a}}}var Ik=kk,Tk=r(1946);class Ck{constructor(e,t,r=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=r,this._children=new Tk,this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(null!=t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);null!=r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>t instanceof Ck?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof Ck?yield*t.eachLeafSeries():yield t}serialize(e,t){const r=[];return t(this._children.reduce(((r,n,i)=>(null!=n&&(n instanceof Ck?r.push(n.serialize(e,t)):r.push(e(n,i))),r)),r))}async asyncTransform(e,t){return await Ok(this,e,t)}toJSON(){return this.serialize(Pk,xk)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(!(r instanceof Ck))return null!=r&&r.key===e?r:void 0}async _findPlace(e){const t=this._options.hash("string"===typeof e?ia(e):e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof Ck?await n._findPlace(t):{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(null!=t.existingChild&&t.existingChild.key!==e){const e=new Ck(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);return r.bucket._putAt(r,t.existingChild.key,t.existingChild.value),await e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(Rk);if(null!=e&&!(e instanceof Ck)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function Rk(e){return Boolean(e)}function Pk(e,t){return e.key}function xk(e){return e}async function Ok(e,t,r){const n=[];for(const i of e._children.compactArray())if(i instanceof Ck)await Ok(i,t,r);else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}return await r(n)}const Nk=[255,254,252,248,240,224,192,128],Dk=[1,3,7,15,31,63,127,255];class Bk{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;while(t>0&&this._haveBits()){const e=this._value[this._currentBytePos],n=this._currentBitPos+1,i=Math.min(n,t),s=Lk(e,n-i,i);r=(r<<i)+s,t-=i,this._currentBitPos-=i,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function Lk(e,t,r){const n=Mk(t,r);return(e&n)>>>t}function Mk(e,t){return Nk[e]&Dk[Math.min(t+e-1,7)]}function Uk(e){function t(t){return t instanceof Fk?t:new Fk(t,e)}return t}class Fk{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;while(this._availableBits<t)await this._produceMoreBits();let r=0;while(t>0){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t),i=e.take(n);r=(r<<n)+i,t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?(0,nw.concat)([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),r=new Bk(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}function jk(e){if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits??8,hash:Uk(e.hashFn)};return new Ck(t)}class Vk extends Sk{constructor(e,t){super(e,t),this._bucket=jk({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(const t of $k(this._bucket,e,this,this.options))yield{...t,path:this.path}}}var zk=Vk;async function*$k(e,t,r,n){const i=e._children,s=[];let o=0;for(let f=0;f<i.length;f++){const e=i.get(f);if(!e)continue;const r=f.toString(16).toUpperCase().padStart(2,"0");if(e instanceof Ck){let i;for await(const r of await $k(e,t,null,n))i=r;if(!i)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:r,Tsize:i.size,Hash:i.cid}),o+=i.size}else if("function"===typeof e.value.flush){const n=e.value;let i;for await(const e of n.flush(t))i=e,yield i;const a=r+e.key;s.push({Name:a,Tsize:i.size,Hash:i.cid}),o+=i.size}else{const t=e.value;if(!t.cid)continue;const n=r+e.key,i=t.size;s.push({Name:n,Tsize:i,Hash:t.cid}),o+=i}}const a=Uint8Array.from(i.bitField().reverse()),c=new Xt({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:n.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),u={Data:c.marshal(),Links:s},l=Rr(Ar(u)),h=await $S(l,t,n),d=l.length+o;yield{cid:h,unixfs:c,size:d}}async function qk(e,t,r,n){let i=t;t instanceof Ik&&t.directChildrenCount()>=r&&(i=await Kk(t,n));const s=i.parent;if(s){if(i!==t){if(e&&(e.parent=i),!i.parentKey)throw new Error("No parent key found");await s.put(i.parentKey,i)}return qk(i,s,r,n)}return i}async function Kk(e,t){const r=new zk({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1,mtime:e.mtime,mode:e.mode},t);for await(const{key:n,child:i}of e.eachChildSeries())await r.put(n,i);return r}var Hk=qk;const Gk=(e="")=>(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);var Wk=Gk;async function Qk(e,t,r){const n=Wk(e.path||""),i=n.length-1;let s=t,o="";for(let a=0;a<n.length;a++){const c=n[a];o+=`${o?"/":""}${c}`;const u=a===i;if(s.dirty=!0,s.cid=void 0,s.size=void 0,u)await s.put(c,e),t=await Hk(null,s,r.shardSplitThreshold,r);else{let e=await s.get(c);e&&e instanceof Sk||(e=new Ik({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)),await s.put(c,e),s=e}}return t}async function*Yk(e,t){e instanceof Sk?yield*e.flush(t):e&&e.unixfs&&e.unixfs.isDirectory()&&(yield e)}async function*Jk(e,t,r){let n=new Ik({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const i of e)i&&(n=await Qk(i,n,r),i.unixfs&&i.unixfs.isDirectory()||(yield i));if(r.wrapWithDirectory)yield*Yk(n,t);else for await(const i of n.eachChildSeries())i&&(yield*Yk(i.child,t))}var Xk=Jk;async function*Zk(e,t,r={}){const n=VS(r);let i,s,o;i="function"===typeof r.dagBuilder?r.dagBuilder:_k,s="function"===typeof r.treeBuilder?r.treeBuilder:Xk,o=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e];for await(const a of s(BS(i(o,t,n),n.fileImportConcurrency),t,n))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}async function*eI(e,t){if("string"===typeof e||e instanceof String||SS(e)||kS(e)||e._readableState)throw Ut(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(TS(e)&&(e=ES(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=AS(e),{value:n,done:i}=await r.peek();if(i)return void(yield*[]);if(r.push(n),Number.isInteger(n))throw Ut(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState)return void(yield*z_(r,(e=>tI({content:e},t))));if(SS(n))return void(yield tI({content:r},t));if(IS(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||TS(n)||kS(n))return void(yield*z_(r,(e=>tI(e,t))))}if(IS(e))throw Ut(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw Ut(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function tI(e,t){const{path:r,mode:n,mtime:i,content:s}=e,o={path:r||"",mode:Yt(n),mtime:Jt(i)};return s?o.content=await t(s):r||(o.content=await t(e)),o}function rI(e){return eI(e,RS)}const nI=e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}if(e.startsWith("rabin"))return{chunker:"rabin",...iI(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},iI=e=>{const t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=sI(r[1],"avg");break;case 4:t.minChunkSize=sI(r[1],"min"),t.avgChunkSize=sI(r[2],"avg"),t.maxChunkSize=sI(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},sI=(e,t)=>{const r=parseInt(e);if(isNaN(r))throw new Error(`Chunker parameter ${t} must be an integer`);return r},oI=gt.bind({ignoreUndefined:!0});function aI({repo:e,preload:t,hashers:r,options:n}){const i=n&&n.sharding;async function*s(n,s={}){const o=oI({shardSplitThreshold:i?1e3:1/0,strategy:"balanced"},s,{...nI(s.chunker)});o.hashAlg&&"sha2-256"!==o.hashAlg&&1!==o.cidVersion&&(o.cidVersion=1),o.trickle&&(o.strategy="trickle"),"trickle"===o.strategy&&(o.leafType="raw",o.reduceSingleLeafToSelf=!1),o.cidVersion>0&&void 0===o.rawLeaves&&(o.rawLeaves=!0),void 0!==o.hashAlg&&void 0===o.rawLeaves&&(o.rawLeaves=!0),delete o.trickle;const a={};if(o.progress){const e=o.progress;o.progress=(t,r)=>{a[r]||(a[r]=0),a[r]+=t,e(a[r],r)}}let c;null!=o.hashAlg&&(c=await r.getHasher(o.hashAlg));const u=W_(rI(n),(t=>Zk(t,e.blocks,{...o,hasher:c,pin:!1})),cI(o),uI(t,o),lI(e,o)),l=await e.gcLock.readLock();try{for await(const e of u){const t=e.path??e.cid.toString();delete a[t],yield{...e,path:t}}}finally{l()}}return qf(s)}function cI(e){async function*t(t){for await(const r of t){let t=r.cid;1===e.cidVersion&&(t=t.toV1());let n=r.path?r.path:t.toString();e.wrapWithDirectory&&!r.path&&(n=""),yield{path:n,cid:t,size:r.size,mode:r.unixfs&&r.unixfs.mode,mtime:r.unixfs&&r.unixfs.mtime}}}return t}function uI(e,t){async function*r(r){for await(const n of r){const r=!n.path||t.wrapWithDirectory?""===n.path:!n.path.includes("/"),i=r&&!t.onlyHash&&!1!==t.preload;i&&e(n.cid),yield n}}return r}function lI(e,t){async function*r(r){for await(const n of r){const r=!(n.path&&n.path.includes("/")),i=(null==t.pin||t.pin)&&r&&!t.onlyHash;i&&await e.pins.pinRecursively(n.cid),yield n}}return r}const hI=async function(e){return(await US.encode(e)).slice(0,8).reverse()},dI=(e,t,r)=>Promise.all(e.map((e=>{if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){const n=parseInt(e.Name,16);return t._putObjectAt(n,new Ck({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),!0)}))),fI=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),pI=e=>{let t=e.bucket;const r=[];while(t._parent)r.push(t),t=t._parent;return r.push(t),r.reverse()},yI=async(e,t,r,n,i)=>{if(!n){const e=jk({hashFn:hI});n={rootBucket:e,hamtDepth:1,lastBucket:e}}await dI(e.Links,n.lastBucket,n.rootBucket);const s=await n.rootBucket._findNewBucketAndPos(t);let o=fI(s.pos);const a=pI(s);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],o=fI(n.lastBucket._posAtParent));const c=e.Links.find((e=>{if(null==e.Name)return!1;const r=e.Name.substring(0,2),n=e.Name.substring(2);return r===o&&(!n||n===t)}));if(!c)return null;if(null!=c.Name&&c.Name.substring(2)===t)return c.Hash;n.hamtDepth++;const u=await r.get(c.Hash,i);return e=Pr(u),yI(e,t,r,n,i)};var gI=yI;function mI(e,t,r,n){const i=e.length,s=t+i;return r>=s||n<t?new Uint8Array(0):(n>=t&&n<s&&(e=e.subarray(0,n-t)),r>=t&&r<s&&(e=e.subarray(r-t)),e)}var wI=mI;const vI=(e,t,r)=>{if(t||(t=0),t<0)throw Ut(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw Ut(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw Ut(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};var bI=vI;async function EI(e,t,r,n,i,s,o,a){if(t instanceof Uint8Array)return void r.push(wI(t,n,i,s));if(null==t.Data)throw Ut(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let c;try{c=Xt.unmarshal(t.Data)}catch(nP){throw Ut(nP,"ERR_NOT_UNIXFS")}if(null!=c.data){const e=c.data,t=wI(e,n,i,s);r.push(t),n+=t.byteLength}const u=[];for(let l=0;l<t.Links.length;l++){const e=t.Links[l],r=n,o=r+c.blockSizes[l];if((i>=r&&i<o||s>=r&&s<=o||i<r&&s>o)&&u.push({link:e,blockStart:n}),n=o,n>s)break}await W_(u,(t=>z_(t,(t=>async()=>{const r=await e.get(t.link.Hash,{signal:a.signal});return{...t,block:r}}))),(e=>yS(e,{ordered:!0})),(async t=>{for await(const{link:n,block:c,blockStart:u}of t){let t;switch(n.Hash.code){case Cr:t=Pr(c);break;case xo:t=c;break;default:return void r.end(Ut(new Error(`Unsupported codec: ${n.Hash.code}`),"ERR_NOT_UNIXFS"))}o.add((async()=>{await EI(e,t,r,u,i,s,o,a)}))}}))}const _I=(e,t,r,n,i,s,o)=>{async function*a(e={}){const n=r.fileSize();if(void 0===n)throw new Error("File was a directory");const{offset:i,length:s}=bI(n,e.offset,e.length);if(0===s)return;const a=new Wp({concurrency:1}),c=O_();a.add((async()=>{await EI(o,t,c,0,i,i+s,a,e)})),a.on("error",(e=>{c.end(e)}));let u=0;for await(const t of c)null!=t&&(u+=t.byteLength,u===s&&c.end(),yield t)}return a};var AI=_I;const SI=(e,t,r,n,i,s,o)=>{async function*a(e={}){const r=e.offset||0,a=e.length||t.Links.length,c=t.Links.slice(r,a);for(const t of c){const r=await i(t.Hash,t.Name||"",`${n}/${t.Name||""}`,[],s+1,o,e);r.entry&&(yield r.entry)}}return a};var kI=SI;const II=(e,t,r,n,i,s,o)=>{function a(e={}){return TI(t,n,i,s,o,e)}return a};async function*TI(e,t,r,n,i,s){const o=e.Links;for(const a of o){const o=null!=a.Name?a.Name.substring(2):null;if(o){const e=await r(a.Hash,o,`${t}/${o}`,[],n+1,i,s);yield e.entry}else{const o=await i.get(a.Hash);e=Pr(o);for await(const a of TI(e,t,r,n,i,s))yield a}}}var CI=II;const RI=(e,t)=>{const r=e.Links.find((e=>e.Name===t));return r&&r.Hash},PI={raw:AI,file:AI,directory:kI,"hamt-sharded-directory":CI,metadata:(e,t,r,n,i,s,o)=>()=>[],symlink:(e,t,r,n,i,s,o)=>()=>[]},xI=async(e,t,r,n,i,s,o,a)=>{const c=await o.get(e,a),u=Pr(c);let l,h;if(t||(t=e.toString()),null==u.Data)throw Ut(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=Xt.unmarshal(u.Data)}catch(nP){throw Ut(nP,"ERR_NOT_UNIXFS")}if(r||(r=t),n.length){let e;if(e=l&&"hamt-sharded-directory"===l.type?await gI(u,n[0],o):RI(u,n[0]),!e)throw Ut(new Error("file does not exist"),"ERR_NOT_FOUND");const t=n.shift(),i=`${r}/${t}`;h={cid:e,toResolve:n,name:t||"",path:i}}return{entry:{type:l.isDirectory()?"directory":"file",name:t,path:r,cid:e,content:PI[l.type](e,u,l,r,i,s,o),unixfs:l,depth:s,node:u,size:l.fileSize()},next:h}};var OI=xI;const NI=e=>{async function*t(t={}){const{offset:r,length:n}=bI(e.length,t.offset,t.length);yield wI(e,0,r,r+n)}return t},DI=async(e,t,r,n,i,s,o,a)=>{if(n.length)throw Ut(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await o.get(e,a);return{entry:{type:"raw",name:t,path:r,cid:e,content:NI(c),depth:s,size:c.length,node:c}}};var BI=DI;const LI=async(e,t,r,n,i,s,o,a)=>{const c=await o.get(e),u=hs(c);let l=u,h=r;while(n.length){const i=n[0];if(!(i in l))throw Ut(new Error(`No property named ${i} found in cbor node ${e}`),"ERR_NO_PROP");{n.shift(),h=`${h}/${i}`;const o=Zt.k.asCID(l[i]);if(o)return{entry:{type:"object",name:t,path:r,cid:e,node:c,depth:s,size:c.length,content:async function*(){yield u}},next:{cid:o,name:i,path:h,toResolve:n}};l=l[i]}}return{entry:{type:"object",name:t,path:r,cid:e,node:c,depth:s,size:c.length,content:async function*(){yield u}}}};var MI=LI;const UI=e=>{async function*t(t={}){const{offset:r,length:n}=bI(e.length,t.offset,t.length);yield wI(e,0,r,r+n)}return t},FI=async(e,t,r,n,i,s,o,a)=>{if(n.length)throw Ut(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await fs.Jx(e.multihash.bytes);return{entry:{type:"identity",name:t,path:r,cid:e,content:UI(c.digest),depth:s,size:c.digest.length,node:c.digest}}};var jI=FI;const VI={[Cr]:OI,[xo]:BI,[us]:MI,[uo.code]:jI};function zI(e,t,r,n,i,s,o){const a=VI[e.code];if(!a)throw Ut(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER");return a(e,t,r,n,zI,i,s,o)}var $I=zI;const qI=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),KI=e=>{if(e instanceof Uint8Array)return{cid:Zt.k.decode(e),toResolve:[]};const t=Zt.k.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=qI(e);return{cid:Zt.k.parse(t[0]),toResolve:t.slice(1)}}throw Ut(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")};async function*HI(e,t,r={}){let{cid:n,toResolve:i}=KI(e),s=n.toString(),o=s;const a=i.length;while(1){const c=await $I(n,s,o,i,a,t,r);if(!c.entry&&!c.next)throw Ut(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;i=c.next.toResolve,n=c.next.cid,s=c.next.name,o=c.next.path}}async function GI(e,t,r={}){const n=await Sm(HI(e,t,r));if(!n)throw Ut(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return n}async function*WI(e,t,r={}){const n=await GI(e,t,r);if(n&&(yield n,"directory"===n.type))for await(const s of i(n,r))yield s;async function*i(e,t){for await(const r of e.content(t))yield r,r instanceof Uint8Array||"directory"===r.type&&(yield*i(r,t))}}function QI({repo:e,preload:t}){async function*r(r,n={}){if(r=Xf(r),!1!==n.preload){const e=r.split("/");t(Zt.k.parse(e[0]))}const i=await GI(r,e.blocks,n);if("directory"===i.type)throw new Error("this dag node is a directory");if(!i.content)throw new Error("this dag node has no content");yield*i.content(n)}return qf(r)}function YI(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function JI(e=0){return null!=globalThis.Buffer?.alloc?YI(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function XI(e=0){return null!=globalThis.Buffer?.allocUnsafe?YI(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ZI(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=XI(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return YI(r)}function eT(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const tT=Symbol.for("@achingbrain/uint8arraylist");function rT(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let r=0;for(const n of e){const e=r+n.byteLength;if(t<e)return{buf:n,index:t-r};r=e}throw new RangeError("index is out of bounds")}function nT(e){return Boolean(e?.[tT])}class iT{constructor(...e){Object.defineProperty(this,tT,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(const r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(!nT(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.push(...r.bufs)}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(const r of e.reverse())if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.unshift(r);else{if(!nT(r))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.unshift(...r.bufs)}this.length+=t}get(e){const t=rT(this.bufs,e);return t.buf[t.index]}set(e,t){const r=rT(this.bufs,e);r.buf[r.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!nT(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<e.length;r++)this.set(t+r,e.get(r))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0))while(this.bufs.length>0){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}slice(e,t){const{bufs:r,length:n}=this._subList(e,t);return ZI(r,n)}subarray(e,t){const{bufs:r,length:n}=this._subList(e,t);return 1===r.length?r[0]:ZI(r,n)}sublist(e,t){const{bufs:r,length:n}=this._subList(e,t),i=new iT;return i.length=n,i.bufs=r,i}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:[...this.bufs],length:this.length};const r=[];let n=0;for(let i=0;i<this.bufs.length;i++){const s=this.bufs[i],o=n,a=o+s.byteLength;if(n=a,e>=a)continue;const c=e>=o&&e<a,u=t>o&&t<=a;if(c&&u){if(e===o&&t===a){r.push(s);break}const n=e-o;r.push(s.subarray(n,n+(t-e)));break}if(c){if(0===e){r.push(s);continue}r.push(s.subarray(e-o))}else{if(u){if(t===a){r.push(s);break}r.push(s.subarray(0,t-o));break}r.push(s)}}return{bufs:r,length:t-e}}getInt8(e){const t=this.subarray(e,e+1),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getInt8(0)}setInt8(e,t){const r=XI(1),n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setInt8(0,t),this.write(r,e)}getInt16(e,t){const r=this.subarray(e,e+2),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getInt16(0,t)}setInt16(e,t,r){const n=JI(2),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setInt16(0,t,r),this.write(n,e)}getInt32(e,t){const r=this.subarray(e,e+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getInt32(0,t)}setInt32(e,t,r){const n=JI(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setInt32(0,t,r),this.write(n,e)}getBigInt64(e,t){const r=this.subarray(e,e+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getBigInt64(0,t)}setBigInt64(e,t,r){const n=JI(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setBigInt64(0,t,r),this.write(n,e)}getUint8(e){const t=this.subarray(e,e+1),r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getUint8(0)}setUint8(e,t){const r=XI(1),n=new DataView(r.buffer,r.byteOffset,r.byteLength);n.setUint8(0,t),this.write(r,e)}getUint16(e,t){const r=this.subarray(e,e+2),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getUint16(0,t)}setUint16(e,t,r){const n=JI(2),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setUint16(0,t,r),this.write(n,e)}getUint32(e,t){const r=this.subarray(e,e+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getUint32(0,t)}setUint32(e,t,r){const n=JI(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setUint32(0,t,r),this.write(n,e)}getBigUint64(e,t){const r=this.subarray(e,e+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getBigUint64(0,t)}setBigUint64(e,t,r){const n=JI(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setBigUint64(0,t,r),this.write(n,e)}getFloat32(e,t){const r=this.subarray(e,e+4),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getFloat32(0,t)}setFloat32(e,t,r){const n=JI(4),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setFloat32(0,t,r),this.write(n,e)}getFloat64(e,t){const r=this.subarray(e,e+8),n=new DataView(r.buffer,r.byteOffset,r.byteLength);return n.getFloat64(0,t)}setFloat64(e,t,r){const n=JI(8),i=new DataView(n.buffer,n.byteOffset,n.byteLength);i.setFloat64(0,t,r),this.write(n,e)}equals(e){if(null==e)return!1;if(!(e instanceof iT))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!eT(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const r=new iT;return r.bufs=e,null==t&&(t=e.reduce(((e,t)=>e+t.byteLength),0)),r.length=t,r}}"0".charCodeAt(0),ia("ustar\0","binary"),ia("ustar ","binary"),ia(" \0","binary");function sT(e){const t=async function*(){let t=yield,r=new iT;for await(const n of e)if(null!=t){r.append(n);while(r.length>=t){const e=r.sublist(0,t);if(r.consume(t),t=yield e,null==t){r.length>0&&(t=yield r,r=new iT);break}}}else r.append(n),t=yield r,r=new iT;if(null!=t)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:r})}();return t.next(),t}var oT=r(3837),aT=r(2034);const cT="0000000000000000000",uT="7777777777777777777",lT="0".charCodeAt(0),hT=ia("ustar\0","binary"),dT=ia("00","binary"),fT=parseInt("7777",8),pT=257,yT=263,gT=function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72;default:return 0}},mT=function(e){let t=256;for(let r=0;r<148;r++)t+=e[r];for(let r=156;r<512;r++)t+=e[r];return t},wT=function(e,t){const r=e.toString(8);return r.length>t?ia(uT.slice(0,t)+" "):ia(cT.slice(0,t-r.length)+r+" ")},vT=function(e){const t=ia(e).byteLength;let r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,`${t+r}${e}`};function bT(e){let t="";null!=e.name&&(t+=vT(" path="+e.name+"\n")),null!=e.linkname&&(t+=vT(" linkpath="+e.linkname+"\n"));const r=e.pax;if(null!=r)for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t+=vT(" "+n+"="+r[n]+"\n"));return ia(t)}function ET(e){const t=new Uint8Array(512);let r=e.name,n="";if(5===e.typeflag&&"/"!==r[r.length-1]&&(r+="/"),ia(r).byteLength!==r.length)return null;while(ia(r).byteLength>100){const e=r.indexOf("/");if(-1===e)return null;n+=""!==n?"/"+r.slice(0,e):r.slice(0,e),r=r.slice(e+1)}return ia(r).byteLength>100||ia(n).byteLength>155||null!=e.linkname&&ia(e.linkname).byteLength>100?null:(t.set(ia(r),0),t.set(wT(e.mode&fT,6),100),t.set(wT(e.uid,6),108),t.set(wT(e.gid,6),116),t.set(wT(e.size,11),124),t.set(wT(e.mtime.getTime()/1e3|0,11),136),t[156]=lT+gT(e.type),null!=e.linkname&&t.set(ia(e.linkname),157),t.set(hT,pT),t.set(dT,yT),null!=e.uname&&t.set(ia(e.uname),265),null!=e.gname&&t.set(ia(e.gname),297),t.set(wT(e.devmajor??0,6),329),t.set(wT(e.devminor??0,6),337),null!=n&&t.set(ia(n),345),t.set(wT(mT(t),6),148),t)}const{S_IFMT:_T,S_IFBLK:AT,S_IFCHR:ST,S_IFDIR:kT,S_IFIFO:IT,S_IFLNK:TT}=oT,CT=parseInt("755",8),RT=parseInt("644",8),PT=new Uint8Array(1024);function xT(e=0){switch(e&_T){case AT:return"block-device";case ST:return"character-device";case kT:return"directory";case IT:return"fifo";case TT:return"symlink";default:return"file"}}function OT(e){return e&=511,0!==e?PT.subarray(0,512-e):new Uint8Array(0)}function NT(e){if(null==e.pax){const t=ET(e);if(null!=t)return t}return DT(e)}function DT(e){const t=bT(e),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new iT(ET(r)??new Uint8Array(0),t,OT(t.length),ET({...r,size:e.size,type:e.type})??new Uint8Array(0)).subarray()}function BT(){return async function*(e){for await(let{header:t,body:r}of e){const e={...t,size:"symlink"===t.type?0:t.size??0,type:t.type??xT(t.mode),mode:t.mode??("directory"===t.type?CT:RT),uid:t.uid??0,gid:t.gid??0,mtime:t.mtime??new Date};if("string"===typeof r&&(r=ia(r)),r instanceof Uint8Array||nT(r)){e.size=r.length,yield NT(e),yield nT(r)?r.subarray():r,yield OT(e.size);continue}if("symlink"===e.type&&null==e.linkname){if(null==r)throw new Error("type was symlink but no linkname or body specified");e.linkname=vh(await aT(r)),yield NT(e);continue}if(yield NT(e),"file"!==e.type&&"contiguous-file"!==e.type)continue;let n=0;for await(const t of r??[])n+=t.length,yield nT(t)?t.subarray():t;if(n!==e.size)throw new Error(`size mismatch, wrote ${n} of ${e.size} bytes`);yield OT(e.size)}yield PT}}r(2087);
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */
const LT=4,MT=0,UT=1,FT=2;function jT(e){let t=e.length;while(--t>=0)e[t]=0}const VT=0,zT=1,$T=2,qT=3,KT=258,HT=29,GT=256,WT=GT+1+HT,QT=30,YT=19,JT=2*WT+1,XT=15,ZT=16,eC=7,tC=256,rC=16,nC=17,iC=18,sC=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),oC=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),aC=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cC=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uC=512,lC=new Array(2*(WT+2));jT(lC);const hC=new Array(2*QT);jT(hC);const dC=new Array(uC);jT(dC);const fC=new Array(KT-qT+1);jT(fC);const pC=new Array(HT);jT(pC);const yC=new Array(QT);function gC(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let mC,wC,vC;function bC(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}jT(yC);const EC=e=>e<256?dC[e]:dC[256+(e>>>7)],_C=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},AC=(e,t,r)=>{e.bi_valid>ZT-r?(e.bi_buf|=t<<e.bi_valid&65535,_C(e,e.bi_buf),e.bi_buf=t>>ZT-e.bi_valid,e.bi_valid+=r-ZT):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},SC=(e,t,r)=>{AC(e,r[2*t],r[2*t+1])},kC=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},IC=e=>{16===e.bi_valid?(_C(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},TC=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let u,l,h,d,f,p,y=0;for(d=0;d<=XT;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<JT;u++)l=e.heap[u],d=r[2*r[2*l+1]+1]+1,d>c&&(d=c,y++),r[2*l+1]=d,l>n||(e.bl_count[d]++,f=0,l>=a&&(f=o[l-a]),p=r[2*l],e.opt_len+=p*(d+f),s&&(e.static_len+=p*(i[2*l+1]+f)));if(0!==y){do{d=c-1;while(0===e.bl_count[d])d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,y-=2}while(y>0);for(d=c;0!==d;d--){l=e.bl_count[d];while(0!==l)h=e.heap[--u],h>n||(r[2*h+1]!==d&&(e.opt_len+=(d-r[2*h+1])*r[2*h],r[2*h+1]=d),l--)}}},CC=(e,t,r)=>{const n=new Array(XT+1);let i,s,o=0;for(i=1;i<=XT;i++)n[i]=o=o+r[i-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=kC(n[t]++,t))}},RC=()=>{let e,t,r,n,i;const s=new Array(XT+1);for(r=0,n=0;n<HT-1;n++)for(pC[n]=r,e=0;e<1<<sC[n];e++)fC[r++]=n;for(fC[r-1]=n,i=0,n=0;n<16;n++)for(yC[n]=i,e=0;e<1<<oC[n];e++)dC[i++]=n;for(i>>=7;n<QT;n++)for(yC[n]=i<<7,e=0;e<1<<oC[n]-7;e++)dC[256+i++]=n;for(t=0;t<=XT;t++)s[t]=0;e=0;while(e<=143)lC[2*e+1]=8,e++,s[8]++;while(e<=255)lC[2*e+1]=9,e++,s[9]++;while(e<=279)lC[2*e+1]=7,e++,s[7]++;while(e<=287)lC[2*e+1]=8,e++,s[8]++;for(CC(lC,WT+1,s),e=0;e<QT;e++)hC[2*e+1]=5,hC[2*e]=kC(e,5);mC=new gC(lC,sC,GT+1,WT,XT),wC=new gC(hC,oC,0,QT,XT),vC=new gC(new Array(0),aC,0,YT,eC)},PC=e=>{let t;for(t=0;t<WT;t++)e.dyn_ltree[2*t]=0;for(t=0;t<QT;t++)e.dyn_dtree[2*t]=0;for(t=0;t<YT;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*tC]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},xC=e=>{e.bi_valid>8?_C(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},OC=(e,t,r,n)=>{xC(e),n&&(_C(e,r),_C(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},NC=(e,t,r,n)=>{const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},DC=(e,t,r)=>{const n=e.heap[r];let i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&NC(t,e.heap[i+1],e.heap[i],e.depth)&&i++,NC(t,n,e.heap[i],e.depth))break;e.heap[r]=e.heap[i],r=i,i<<=1}e.heap[r]=n},BC=(e,t,r)=>{let n,i,s,o,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?SC(e,i,t):(s=fC[i],SC(e,s+GT+1,t),o=sC[s],0!==o&&(i-=pC[s],AC(e,i,o)),n--,s=EC(n),SC(e,s,r),o=oC[s],0!==o&&(n-=yC[s],AC(e,n,o)))}while(a<e.last_lit);SC(e,tC,t)},LC=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,u=-1;for(e.heap_len=0,e.heap_max=JT,o=0;o<s;o++)0!==r[2*o]?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):r[2*o+1]=0;while(e.heap_len<2)c=e.heap[++e.heap_len]=u<2?++u:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)DC(e,r,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],DC(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[2*c]=r[2*o]+r[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[2*o+1]=r[2*a+1]=c,e.heap[1]=c++,DC(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],TC(e,t),CC(r,u,e.bl_count)},MC=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<u?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*rC]++):a<=10?e.bl_tree[2*nC]++:e.bl_tree[2*iC]++,a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))},UC=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<u)do{SC(e,i,e.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(SC(e,i,e.bl_tree),a--),SC(e,rC,e.bl_tree),AC(e,a-3,2)):a<=10?(SC(e,nC,e.bl_tree),AC(e,a-3,3)):(SC(e,iC,e.bl_tree),AC(e,a-11,7));a=0,s=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}},FC=e=>{let t;for(MC(e,e.dyn_ltree,e.l_desc.max_code),MC(e,e.dyn_dtree,e.d_desc.max_code),LC(e,e.bl_desc),t=YT-1;t>=3;t--)if(0!==e.bl_tree[2*cC[t]+1])break;return e.opt_len+=3*(t+1)+5+5+4,t},jC=(e,t,r,n)=>{let i;for(AC(e,t-257,5),AC(e,r-1,5),AC(e,n-4,4),i=0;i<n;i++)AC(e,e.bl_tree[2*cC[i]+1],3);UC(e,e.dyn_ltree,t-1),UC(e,e.dyn_dtree,r-1)},VC=e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return MT;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return UT;for(t=32;t<GT;t++)if(0!==e.dyn_ltree[2*t])return UT;return MT};let zC=!1;const $C=e=>{zC||(RC(),zC=!0),e.l_desc=new bC(e.dyn_ltree,mC),e.d_desc=new bC(e.dyn_dtree,wC),e.bl_desc=new bC(e.bl_tree,vC),e.bi_buf=0,e.bi_valid=0,PC(e)},qC=(e,t,r,n)=>{AC(e,(VT<<1)+(n?1:0),3),OC(e,t,r,!0)},KC=e=>{AC(e,zT<<1,3),SC(e,tC,lC),IC(e)},HC=(e,t,r,n)=>{let i,s,o=0;e.level>0?(e.strm.data_type===FT&&(e.strm.data_type=VC(e)),LC(e,e.l_desc),LC(e,e.d_desc),o=FC(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?qC(e,t,r,n):e.strategy===LT||s===i?(AC(e,(zT<<1)+(n?1:0),3),BC(e,lC,hC)):(AC(e,($T<<1)+(n?1:0),3),jC(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),BC(e,e.dyn_ltree,e.dyn_dtree)),PC(e),n&&xC(e)},GC=(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(fC[r]+GT+1)]++,e.dyn_dtree[2*EC(t)]++),e.last_lit===e.lit_bufsize-1);var WC=$C,QC=qC,YC=HC,JC=GC,XC=KC,ZC={_tr_init:WC,_tr_stored_block:QC,_tr_flush_block:YC,_tr_tally:JC,_tr_align:XC};const eR=(e,t,r,n)=>{let i=65535&e|0,s=e>>>16&65535|0,o=0;while(0!==r){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};var tR=eR;const rR=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},nR=new Uint32Array(rR()),iR=(e,t,r,n)=>{const i=nR,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e};var sR=iR,oR={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},aR={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:cR,_tr_stored_block:uR,_tr_flush_block:lR,_tr_tally:hR,_tr_align:dR}=ZC,{Z_NO_FLUSH:fR,Z_PARTIAL_FLUSH:pR,Z_FULL_FLUSH:yR,Z_FINISH:gR,Z_BLOCK:mR,Z_OK:wR,Z_STREAM_END:vR,Z_STREAM_ERROR:bR,Z_DATA_ERROR:ER,Z_BUF_ERROR:_R,Z_DEFAULT_COMPRESSION:AR,Z_FILTERED:SR,Z_HUFFMAN_ONLY:kR,Z_RLE:IR,Z_FIXED:TR,Z_DEFAULT_STRATEGY:CR,Z_UNKNOWN:RR,Z_DEFLATED:PR}=aR,xR=9,OR=15,NR=8,DR=29,BR=256,LR=BR+1+DR,MR=30,UR=19,FR=2*LR+1,jR=15,VR=3,zR=258,$R=zR+VR+1,qR=32,KR=42,HR=69,GR=73,WR=91,QR=103,YR=113,JR=666,XR=1,ZR=2,eP=3,tP=4,rP=3,nP=(e,t)=>(e.msg=oR[t],t),iP=e=>(e<<1)-(e>4?9:0),sP=e=>{let t=e.length;while(--t>=0)e[t]=0};let oP=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,aP=oP;const cP=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},uP=(e,t)=>{lR(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,cP(e.strm)},lP=(e,t)=>{e.pending_buf[e.pending++]=t},hP=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},dP=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=tR(e.adler,t,i,r):2===e.state.wrap&&(e.adler=sR(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},fP=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-$R?e.strstart-(e.w_size-$R):0,u=e.window,l=e.w_mask,h=e.prev,d=e.strstart+zR;let f=u[s+o-1],p=u[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,u[r+o]===p&&u[r+o-1]===f&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(n=zR-(d-s),s=d-zR,n>o){if(e.match_start=t,o=n,n>=a)break;f=u[s+o-1],p=u[s+o]}}}while((t=h[t&l])>c&&0!==--i);return o<=e.lookahead?o:e.lookahead},pP=e=>{const t=e.w_size;let r,n,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$R)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{i=e.head[--r],e.head[r]=i>=t?i-t:0}while(--n);n=t,r=n;do{i=e.prev[--r],e.prev[r]=i>=t?i-t:0}while(--n);s+=t}if(0===e.strm.avail_in)break;if(n=dP(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=VR){o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=aP(e,e.ins_h,e.window[o+1]);while(e.insert)if(e.ins_h=aP(e,e.ins_h,e.window[o+VR-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,e.lookahead+e.insert<VR)break}}while(e.lookahead<$R&&0!==e.strm.avail_in)},yP=(e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(pP(e),0===e.lookahead&&t===fR)return XR;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,uP(e,!1),0===e.strm.avail_out))return XR;if(e.strstart-e.block_start>=e.w_size-$R&&(uP(e,!1),0===e.strm.avail_out))return XR}return e.insert=0,t===gR?(uP(e,!0),0===e.strm.avail_out?eP:tP):(e.strstart>e.block_start&&(uP(e,!1),e.strm.avail_out),XR)},gP=(e,t)=>{let r,n;for(;;){if(e.lookahead<$R){if(pP(e),e.lookahead<$R&&t===fR)return XR;if(0===e.lookahead)break}if(r=0,e.lookahead>=VR&&(e.ins_h=aP(e,e.ins_h,e.window[e.strstart+VR-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-$R&&(e.match_length=fP(e,r)),e.match_length>=VR)if(n=hR(e,e.strstart-e.match_start,e.match_length-VR),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=VR){e.match_length--;do{e.strstart++,e.ins_h=aP(e,e.ins_h,e.window[e.strstart+VR-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=aP(e,e.ins_h,e.window[e.strstart+1]);else n=hR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(uP(e,!1),0===e.strm.avail_out))return XR}return e.insert=e.strstart<VR-1?e.strstart:VR-1,t===gR?(uP(e,!0),0===e.strm.avail_out?eP:tP):e.last_lit&&(uP(e,!1),0===e.strm.avail_out)?XR:ZR},mP=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<$R){if(pP(e),e.lookahead<$R&&t===fR)return XR;if(0===e.lookahead)break}if(r=0,e.lookahead>=VR&&(e.ins_h=aP(e,e.ins_h,e.window[e.strstart+VR-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=VR-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-$R&&(e.match_length=fP(e,r),e.match_length<=5&&(e.strategy===SR||e.match_length===VR&&e.strstart-e.match_start>4096)&&(e.match_length=VR-1)),e.prev_length>=VR&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-VR,n=hR(e,e.strstart-1-e.prev_match,e.prev_length-VR),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=aP(e,e.ins_h,e.window[e.strstart+VR-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=VR-1,e.strstart++,n&&(uP(e,!1),0===e.strm.avail_out))return XR}else if(e.match_available){if(n=hR(e,0,e.window[e.strstart-1]),n&&uP(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return XR}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=hR(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<VR-1?e.strstart:VR-1,t===gR?(uP(e,!0),0===e.strm.avail_out?eP:tP):e.last_lit&&(uP(e,!1),0===e.strm.avail_out)?XR:ZR},wP=(e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=zR){if(pP(e),e.lookahead<=zR&&t===fR)return XR;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=VR&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+zR;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=zR-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=VR?(r=hR(e,1,e.match_length-VR),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=hR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(uP(e,!1),0===e.strm.avail_out))return XR}return e.insert=0,t===gR?(uP(e,!0),0===e.strm.avail_out?eP:tP):e.last_lit&&(uP(e,!1),0===e.strm.avail_out)?XR:ZR},vP=(e,t)=>{let r;for(;;){if(0===e.lookahead&&(pP(e),0===e.lookahead)){if(t===fR)return XR;break}if(e.match_length=0,r=hR(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(uP(e,!1),0===e.strm.avail_out))return XR}return e.insert=0,t===gR?(uP(e,!0),0===e.strm.avail_out?eP:tP):e.last_lit&&(uP(e,!1),0===e.strm.avail_out)?XR:ZR};function bP(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const EP=[new bP(0,0,0,0,yP),new bP(4,4,8,4,gP),new bP(4,5,16,8,gP),new bP(4,6,32,32,gP),new bP(4,4,16,16,mP),new bP(8,16,32,32,mP),new bP(8,16,128,128,mP),new bP(8,32,128,256,mP),new bP(32,128,258,1024,mP),new bP(32,258,258,4096,mP)],_P=e=>{e.window_size=2*e.w_size,sP(e.head),e.max_lazy_match=EP[e.level].max_lazy,e.good_match=EP[e.level].good_length,e.nice_match=EP[e.level].nice_length,e.max_chain_length=EP[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=VR-1,e.match_available=0,e.ins_h=0};function AP(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=PR,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*FR),this.dyn_dtree=new Uint16Array(2*(2*MR+1)),this.bl_tree=new Uint16Array(2*(2*UR+1)),sP(this.dyn_ltree),sP(this.dyn_dtree),sP(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(jR+1),this.heap=new Uint16Array(2*LR+1),sP(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*LR+1),sP(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const SP=e=>{if(!e||!e.state)return nP(e,bR);e.total_in=e.total_out=0,e.data_type=RR;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?KR:YR,e.adler=2===t.wrap?0:1,t.last_flush=fR,cR(t),wR},kP=e=>{const t=SP(e);return t===wR&&_P(e.state),t},IP=(e,t)=>e&&e.state?2!==e.state.wrap?bR:(e.state.gzhead=t,wR):bR,TP=(e,t,r,n,i,s)=>{if(!e)return bR;let o=1;if(t===AR&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>xR||r!==PR||n<8||n>15||t<0||t>9||s<0||s>TR)return nP(e,bR);8===n&&(n=9);const a=new AP;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+VR-1)/VR),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=r,kP(e)},CP=(e,t)=>TP(e,t,PR,OR,NR,CR),RP=(e,t)=>{let r,n;if(!e||!e.state||t>mR||t<0)return e?nP(e,bR):bR;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===JR&&t!==gR)return nP(e,0===e.avail_out?_R:bR);i.strm=e;const s=i.last_flush;if(i.last_flush=t,i.status===KR)if(2===i.wrap)e.adler=0,lP(i,31),lP(i,139),lP(i,8),i.gzhead?(lP(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),lP(i,255&i.gzhead.time),lP(i,i.gzhead.time>>8&255),lP(i,i.gzhead.time>>16&255),lP(i,i.gzhead.time>>24&255),lP(i,9===i.level?2:i.strategy>=kR||i.level<2?4:0),lP(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(lP(i,255&i.gzhead.extra.length),lP(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=sR(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=HR):(lP(i,0),lP(i,0),lP(i,0),lP(i,0),lP(i,0),lP(i,9===i.level?2:i.strategy>=kR||i.level<2?4:0),lP(i,rP),i.status=YR);else{let t=PR+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=kR||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=r<<6,0!==i.strstart&&(t|=qR),t+=31-t%31,i.status=YR,hP(i,t),0!==i.strstart&&(hP(i,e.adler>>>16),hP(i,65535&e.adler)),e.adler=1}if(i.status===HR)if(i.gzhead.extra){r=i.pending;while(i.gzindex<(65535&i.gzhead.extra.length)){if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),cP(e),r=i.pending,i.pending===i.pending_buf_size))break;lP(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++}i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=GR)}else i.status=GR;if(i.status===GR)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),cP(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,lP(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=WR)}else i.status=WR;if(i.status===WR)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),cP(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,lP(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=sR(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=QR)}else i.status=QR;if(i.status===QR&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&cP(e),i.pending+2<=i.pending_buf_size&&(lP(i,255&e.adler),lP(i,e.adler>>8&255),e.adler=0,i.status=YR)):i.status=YR),0!==i.pending){if(cP(e),0===e.avail_out)return i.last_flush=-1,wR}else if(0===e.avail_in&&iP(t)<=iP(s)&&t!==gR)return nP(e,_R);if(i.status===JR&&0!==e.avail_in)return nP(e,_R);if(0!==e.avail_in||0!==i.lookahead||t!==fR&&i.status!==JR){let r=i.strategy===kR?vP(i,t):i.strategy===IR?wP(i,t):EP[i.level].func(i,t);if(r!==eP&&r!==tP||(i.status=JR),r===XR||r===eP)return 0===e.avail_out&&(i.last_flush=-1),wR;if(r===ZR&&(t===pR?dR(i):t!==mR&&(uR(i,0,0,!1),t===yR&&(sP(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),cP(e),0===e.avail_out))return i.last_flush=-1,wR}return t!==gR?wR:i.wrap<=0?vR:(2===i.wrap?(lP(i,255&e.adler),lP(i,e.adler>>8&255),lP(i,e.adler>>16&255),lP(i,e.adler>>24&255),lP(i,255&e.total_in),lP(i,e.total_in>>8&255),lP(i,e.total_in>>16&255),lP(i,e.total_in>>24&255)):(hP(i,e.adler>>>16),hP(i,65535&e.adler)),cP(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?wR:vR)},PP=e=>{if(!e||!e.state)return bR;const t=e.state.status;return t!==KR&&t!==HR&&t!==GR&&t!==WR&&t!==QR&&t!==YR&&t!==JR?nP(e,bR):(e.state=null,t===YR?nP(e,ER):wR)},xP=(e,t)=>{let r=t.length;if(!e||!e.state)return bR;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==KR||n.lookahead)return bR;if(1===i&&(e.adler=tR(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(sP(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,o=e.next_in,a=e.input;e.avail_in=r,e.next_in=0,e.input=t,pP(n);while(n.lookahead>=VR){let e=n.strstart,t=n.lookahead-(VR-1);do{n.ins_h=aP(n,n.ins_h,n.window[e+VR-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=VR-1,pP(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=VR-1,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,n.wrap=i,wR};var OP=CP,NP=TP,DP=kP,BP=SP,LP=IP,MP=RP,UP=PP,FP=xP,jP="pako deflate (from Nodeca project)",VP={deflateInit:OP,deflateInit2:NP,deflateReset:DP,deflateResetKeep:BP,deflateSetHeader:LP,deflate:MP,deflateEnd:UP,deflateSetDictionary:FP,deflateInfo:jP};const zP=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var $P=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(const t in r)zP(r,t)&&(e[t]=r[t])}}return e},qP=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let t=e[n];r.set(t,i),i+=t.length}return r},KP={assign:$P,flattenChunks:qP};let HP=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(Zie){HP=!1}const GP=new Uint8Array(256);for(let ese=0;ese<256;ese++)GP[ese]=ese>=252?6:ese>=248?5:ese>=240?4:ese>=224?3:ese>=192?2:1;GP[254]=GP[254]=1;var WP=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,o=e.length,a=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t};const QP=(e,t)=>{if(t<65534&&e.subarray&&HP)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var YP=(e,t)=>{const r=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let o=GP[t];if(o>4)s[i++]=65533,n+=o-1;else{t&=2===o?31:3===o?15:7;while(o>1&&n<r)t=t<<6|63&e[n++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return QP(s,i)},JP=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;while(r>=0&&128===(192&e[r]))r--;return r<0||0===r?t:r+GP[e[r]]>t?r:t},XP={string2buf:WP,buf2string:YP,utf8border:JP};function ZP(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ex=ZP;const tx=Object.prototype.toString,{Z_NO_FLUSH:rx,Z_SYNC_FLUSH:nx,Z_FULL_FLUSH:ix,Z_FINISH:sx,Z_OK:ox,Z_STREAM_END:ax,Z_DEFAULT_COMPRESSION:cx,Z_DEFAULT_STRATEGY:ux,Z_DEFLATED:lx}=aR;function hx(e){this.options=KP.assign({level:cx,method:lx,chunkSize:16384,windowBits:15,memLevel:8,strategy:ux},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ex,this.strm.avail_out=0;let r=VP.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==ox)throw new Error(oR[r]);if(t.header&&VP.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?XP.string2buf(t.dictionary):"[object ArrayBuffer]"===tx.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=VP.deflateSetDictionary(this.strm,e),r!==ox)throw new Error(oR[r]);this._dict_set=!0}}function dx(e,t){const r=new hx(t);if(r.push(e,!0),r.err)throw r.msg||oR[r.err];return r.result}function fx(e,t){return t=t||{},t.raw=!0,dx(e,t)}function px(e,t){return t=t||{},t.gzip=!0,dx(e,t)}hx.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?sx:rx,"string"===typeof e?r.input=XP.string2buf(e):"[object ArrayBuffer]"===tx.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===nx||s===ix)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=VP.deflate(r,s),i===ax)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=VP.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ox;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},hx.prototype.onData=function(e){this.chunks.push(e)},hx.prototype.onEnd=function(e){e===ox&&(this.result=KP.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var yx=hx,gx=dx,mx=fx,wx=px,vx=aR,bx={Deflate:yx,deflate:gx,deflateRaw:mx,gzip:wx,constants:vx};const Ex=30,_x=12;var Ax=function(e,t){let r,n,i,s,o,a,c,u,l,h,d,f,p,y,g,m,w,v,b,E,_,A,S,k;const I=e.state;r=e.next_in,S=e.input,n=r+(e.avail_in-5),i=e.next_out,k=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=I.dmax,c=I.wsize,u=I.whave,l=I.wnext,h=I.window,d=I.hold,f=I.bits,p=I.lencode,y=I.distcode,g=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;e:do{f<15&&(d+=S[r++]<<f,f+=8,d+=S[r++]<<f,f+=8),w=p[d&g];t:for(;;){if(v=w>>>24,d>>>=v,f-=v,v=w>>>16&255,0===v)k[i++]=65535&w;else{if(!(16&v)){if(0===(64&v)){w=p[(65535&w)+(d&(1<<v)-1)];continue t}if(32&v){I.mode=_x;break e}e.msg="invalid literal/length code",I.mode=Ex;break e}b=65535&w,v&=15,v&&(f<v&&(d+=S[r++]<<f,f+=8),b+=d&(1<<v)-1,d>>>=v,f-=v),f<15&&(d+=S[r++]<<f,f+=8,d+=S[r++]<<f,f+=8),w=y[d&m];r:for(;;){if(v=w>>>24,d>>>=v,f-=v,v=w>>>16&255,!(16&v)){if(0===(64&v)){w=y[(65535&w)+(d&(1<<v)-1)];continue r}e.msg="invalid distance code",I.mode=Ex;break e}if(E=65535&w,v&=15,f<v&&(d+=S[r++]<<f,f+=8,f<v&&(d+=S[r++]<<f,f+=8)),E+=d&(1<<v)-1,E>a){e.msg="invalid distance too far back",I.mode=Ex;break e}if(d>>>=v,f-=v,v=i-s,E>v){if(v=E-v,v>u&&I.sane){e.msg="invalid distance too far back",I.mode=Ex;break e}if(_=0,A=h,0===l){if(_+=c-v,v<b){b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,A=k}}else if(l<v){if(_+=c+l-v,v-=l,v<b){b-=v;do{k[i++]=h[_++]}while(--v);if(_=0,l<b){v=l,b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,A=k}}}else if(_+=l-v,v<b){b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,A=k}while(b>2)k[i++]=A[_++],k[i++]=A[_++],k[i++]=A[_++],b-=3;b&&(k[i++]=A[_++],b>1&&(k[i++]=A[_++]))}else{_=i-E;do{k[i++]=k[_++],k[i++]=k[_++],k[i++]=k[_++],b-=3}while(b>2);b&&(k[i++]=k[_++],b>1&&(k[i++]=k[_++]))}break}}break}}while(r<n&&i<o);b=f>>3,r-=b,f-=b<<3,d&=(1<<f)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=d,I.bits=f};const Sx=15,kx=852,Ix=592,Tx=0,Cx=1,Rx=2,Px=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),xx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ox=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Nx=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Dx=(e,t,r,n,i,s,o,a)=>{const c=a.bits;let u,l,h,d,f,p,y=0,g=0,m=0,w=0,v=0,b=0,E=0,_=0,A=0,S=0,k=null,I=0;const T=new Uint16Array(Sx+1),C=new Uint16Array(Sx+1);let R,P,x,O=null,N=0;for(y=0;y<=Sx;y++)T[y]=0;for(g=0;g<n;g++)T[t[r+g]]++;for(v=c,w=Sx;w>=1;w--)if(0!==T[w])break;if(v>w&&(v=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<w;m++)if(0!==T[m])break;for(v<m&&(v=m),_=1,y=1;y<=Sx;y++)if(_<<=1,_-=T[y],_<0)return-1;if(_>0&&(e===Tx||1!==w))return-1;for(C[1]=0,y=1;y<Sx;y++)C[y+1]=C[y]+T[y];for(g=0;g<n;g++)0!==t[r+g]&&(o[C[t[r+g]]++]=g);if(e===Tx?(k=O=o,p=19):e===Cx?(k=Px,I-=257,O=xx,N-=257,p=256):(k=Ox,O=Nx,p=-1),S=0,g=0,y=m,f=s,b=v,E=0,h=-1,A=1<<v,d=A-1,e===Cx&&A>kx||e===Rx&&A>Ix)return 1;for(;;){R=y-E,o[g]<p?(P=0,x=o[g]):o[g]>p?(P=O[N+o[g]],x=k[I+o[g]]):(P=96,x=0),u=1<<y-E,l=1<<b,m=l;do{l-=u,i[f+(S>>E)+l]=R<<24|P<<16|x|0}while(0!==l);u=1<<y-1;while(S&u)u>>=1;if(0!==u?(S&=u-1,S+=u):S=0,g++,0===--T[y]){if(y===w)break;y=t[r+o[g]]}if(y>v&&(S&d)!==h){0===E&&(E=v),f+=m,b=y-E,_=1<<b;while(b+E<w){if(_-=T[b+E],_<=0)break;b++,_<<=1}if(A+=1<<b,e===Cx&&A>kx||e===Rx&&A>Ix)return 1;h=S&d,i[h]=v<<24|b<<16|f-s|0}}return 0!==S&&(i[f+S]=y-E<<24|64<<16|0),a.bits=v,0};var Bx=Dx;const Lx=0,Mx=1,Ux=2,{Z_FINISH:Fx,Z_BLOCK:jx,Z_TREES:Vx,Z_OK:zx,Z_STREAM_END:$x,Z_NEED_DICT:qx,Z_STREAM_ERROR:Kx,Z_DATA_ERROR:Hx,Z_MEM_ERROR:Gx,Z_BUF_ERROR:Wx,Z_DEFLATED:Qx}=aR,Yx=1,Jx=2,Xx=3,Zx=4,eO=5,tO=6,rO=7,nO=8,iO=9,sO=10,oO=11,aO=12,cO=13,uO=14,lO=15,hO=16,dO=17,fO=18,pO=19,yO=20,gO=21,mO=22,wO=23,vO=24,bO=25,EO=26,_O=27,AO=28,SO=29,kO=30,IO=31,TO=32,CO=852,RO=592,PO=15,xO=PO,OO=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function NO(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const DO=e=>{if(!e||!e.state)return Kx;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Yx,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(CO),t.distcode=t.distdyn=new Int32Array(RO),t.sane=1,t.back=-1,zx},BO=e=>{if(!e||!e.state)return Kx;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,DO(e)},LO=(e,t)=>{let r;if(!e||!e.state)return Kx;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Kx:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,BO(e))},MO=(e,t)=>{if(!e)return Kx;const r=new NO;e.state=r,r.window=null;const n=LO(e,t);return n!==zx&&(e.state=null),n},UO=e=>MO(e,xO);let FO,jO,VO=!0;const zO=e=>{if(VO){FO=new Int32Array(512),jO=new Int32Array(32);let t=0;while(t<144)e.lens[t++]=8;while(t<256)e.lens[t++]=9;while(t<280)e.lens[t++]=7;while(t<288)e.lens[t++]=8;Bx(Mx,e.lens,0,288,FO,0,e.work,{bits:9}),t=0;while(t<32)e.lens[t++]=5;Bx(Ux,e.lens,0,32,jO,0,e.work,{bits:5}),VO=!1}e.lencode=FO,e.lenbits=9,e.distcode=jO,e.distbits=5},$O=(e,t,r,n)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),n-=i,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},qO=(e,t)=>{let r,n,i,s,o,a,c,u,l,h,d,f,p,y,g,m,w,v,b,E,_,A,S=0;const k=new Uint8Array(4);let I,T;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Kx;r=e.state,r.mode===aO&&(r.mode=cO),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,h=a,d=c,A=zx;e:for(;;)switch(r.mode){case Yx:if(0===r.wrap){r.mode=cO;break}while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(2&r.wrap&&35615===u){r.check=0,k[0]=255&u,k[1]=u>>>8&255,r.check=sR(r.check,k,2,0),u=0,l=0,r.mode=Jx;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=kO;break}if((15&u)!==Qx){e.msg="unknown compression method",r.mode=kO;break}if(u>>>=4,l-=4,_=8+(15&u),0===r.wbits)r.wbits=_;else if(_>r.wbits){e.msg="invalid window size",r.mode=kO;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&u?sO:aO,u=0,l=0;break;case Jx:while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==Qx){e.msg="unknown compression method",r.mode=kO;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=kO;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(k[0]=255&u,k[1]=u>>>8&255,r.check=sR(r.check,k,2,0)),u=0,l=0,r.mode=Xx;case Xx:while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(k[0]=255&u,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,r.check=sR(r.check,k,4,0)),u=0,l=0,r.mode=Zx;case Zx:while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(k[0]=255&u,k[1]=u>>>8&255,r.check=sR(r.check,k,2,0)),u=0,l=0,r.mode=eO;case eO:if(1024&r.flags){while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(k[0]=255&u,k[1]=u>>>8&255,r.check=sR(r.check,k,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=tO;case tO:if(1024&r.flags&&(f=r.length,f>a&&(f=a),f&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+f),_)),512&r.flags&&(r.check=sR(r.check,n,f,s)),a-=f,s+=f,r.length-=f),r.length))break e;r.length=0,r.mode=rO;case rO:if(2048&r.flags){if(0===a)break e;f=0;do{_=n[s+f++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_))}while(_&&f<a);if(512&r.flags&&(r.check=sR(r.check,n,f,s)),a-=f,s+=f,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=nO;case nO:if(4096&r.flags){if(0===a)break e;f=0;do{_=n[s+f++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_))}while(_&&f<a);if(512&r.flags&&(r.check=sR(r.check,n,f,s)),a-=f,s+=f,_)break e}else r.head&&(r.head.comment=null);r.mode=iO;case iO:if(512&r.flags){while(l<16){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=kO;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=aO;break;case sO:while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}e.adler=r.check=OO(u),u=0,l=0,r.mode=oO;case oO:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,qx;e.adler=r.check=1,r.mode=aO;case aO:if(t===jx||t===Vx)break e;case cO:if(r.last){u>>>=7&l,l-=7&l,r.mode=_O;break}while(l<3){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}switch(r.last=1&u,u>>>=1,l-=1,3&u){case 0:r.mode=uO;break;case 1:if(zO(r),r.mode=yO,t===Vx){u>>>=2,l-=2;break e}break;case 2:r.mode=dO;break;case 3:e.msg="invalid block type",r.mode=kO}u>>>=2,l-=2;break;case uO:u>>>=7&l,l-=7&l;while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if((65535&u)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=kO;break}if(r.length=65535&u,u=0,l=0,r.mode=lO,t===Vx)break e;case lO:r.mode=hO;case hO:if(f=r.length,f){if(f>a&&(f=a),f>c&&(f=c),0===f)break e;i.set(n.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,r.length-=f;break}r.mode=aO;break;case dO:while(l<14){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=kO;break}r.have=0,r.mode=fO;case fO:while(r.have<r.ncode){while(l<3){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.lens[C[r.have++]]=7&u,u>>>=3,l-=3}while(r.have<19)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},A=Bx(Lx,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,A){e.msg="invalid code lengths set",r.mode=kO;break}r.have=0,r.mode=pO;case pO:while(r.have<r.nlen+r.ndist){for(;;){if(S=r.lencode[u&(1<<r.lenbits)-1],g=S>>>24,m=S>>>16&255,w=65535&S,g<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(w<16)u>>>=g,l-=g,r.lens[r.have++]=w;else{if(16===w){T=g+2;while(l<T){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(u>>>=g,l-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=kO;break}_=r.lens[r.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===w){T=g+3;while(l<T){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=g,l-=g,_=0,f=3+(7&u),u>>>=3,l-=3}else{T=g+7;while(l<T){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=g,l-=g,_=0,f=11+(127&u),u>>>=7,l-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=kO;break}while(f--)r.lens[r.have++]=_}}if(r.mode===kO)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=kO;break}if(r.lenbits=9,I={bits:r.lenbits},A=Bx(Mx,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,A){e.msg="invalid literal/lengths set",r.mode=kO;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},A=Bx(Ux,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,A){e.msg="invalid distances set",r.mode=kO;break}if(r.mode=yO,t===Vx)break e;case yO:r.mode=gO;case gO:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,Ax(e,d),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,u=r.hold,l=r.bits,r.mode===aO&&(r.back=-1);break}for(r.back=0;;){if(S=r.lencode[u&(1<<r.lenbits)-1],g=S>>>24,m=S>>>16&255,w=65535&S,g<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(m&&0===(240&m)){for(v=g,b=m,E=w;;){if(S=r.lencode[E+((u&(1<<v+b)-1)>>v)],g=S>>>24,m=S>>>16&255,w=65535&S,v+g<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=g,l-=g,r.back+=g,r.length=w,0===m){r.mode=EO;break}if(32&m){r.back=-1,r.mode=aO;break}if(64&m){e.msg="invalid literal/length code",r.mode=kO;break}r.extra=15&m,r.mode=mO;case mO:if(r.extra){T=r.extra;while(l<T){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=wO;case wO:for(;;){if(S=r.distcode[u&(1<<r.distbits)-1],g=S>>>24,m=S>>>16&255,w=65535&S,g<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(0===(240&m)){for(v=g,b=m,E=w;;){if(S=r.distcode[E+((u&(1<<v+b)-1)>>v)],g=S>>>24,m=S>>>16&255,w=65535&S,v+g<=l)break;if(0===a)break e;a--,u+=n[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=g,l-=g,r.back+=g,64&m){e.msg="invalid distance code",r.mode=kO;break}r.offset=w,r.extra=15&m,r.mode=vO;case vO:if(r.extra){T=r.extra;while(l<T){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=kO;break}r.mode=bO;case bO:if(0===c)break e;if(f=d-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=kO;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),y=r.window}else y=i,p=o-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do{i[o++]=y[p++]}while(--f);0===r.length&&(r.mode=gO);break;case EO:if(0===c)break e;i[o++]=r.length,c--,r.mode=gO;break;case _O:if(r.wrap){while(l<32){if(0===a)break e;a--,u|=n[s++]<<l,l+=8}if(d-=c,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?sR(r.check,i,d,o-d):tR(r.check,i,d,o-d)),d=c,(r.flags?u:OO(u))!==r.check){e.msg="incorrect data check",r.mode=kO;break}u=0,l=0}r.mode=AO;case AO:if(r.wrap&&r.flags){while(l<32){if(0===a)break e;a--,u+=n[s++]<<l,l+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=kO;break}u=0,l=0}r.mode=SO;case SO:A=$x;break e;case kO:A=Hx;break e;case IO:return Gx;case TO:default:return Kx}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=u,r.bits=l,(r.wsize||d!==e.avail_out&&r.mode<kO&&(r.mode<_O||t!==Fx))&&$O(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?sR(r.check,i,d,e.next_out-d):tR(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===aO?128:0)+(r.mode===yO||r.mode===lO?256:0),(0===h&&0===d||t===Fx)&&A===zx&&(A=Wx),A},KO=e=>{if(!e||!e.state)return Kx;let t=e.state;return t.window&&(t.window=null),e.state=null,zx},HO=(e,t)=>{if(!e||!e.state)return Kx;const r=e.state;return 0===(2&r.wrap)?Kx:(r.head=t,t.done=!1,zx)},GO=(e,t)=>{const r=t.length;let n,i,s;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==oO?Kx:n.mode===oO&&(i=1,i=tR(i,t,r,0),i!==n.check)?Hx:(s=$O(e,t,r,r),s?(n.mode=IO,Gx):(n.havedict=1,zx))):Kx};var WO=BO,QO=LO,YO=DO,JO=UO,XO=MO,ZO=qO,eN=KO,tN=HO,rN=GO,nN="pako inflate (from Nodeca project)",iN={inflateReset:WO,inflateReset2:QO,inflateResetKeep:YO,inflateInit:JO,inflateInit2:XO,inflate:ZO,inflateEnd:eN,inflateGetHeader:tN,inflateSetDictionary:rN,inflateInfo:nN};function sN(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var oN=sN;const aN=Object.prototype.toString,{Z_NO_FLUSH:cN,Z_FINISH:uN,Z_OK:lN,Z_STREAM_END:hN,Z_NEED_DICT:dN,Z_STREAM_ERROR:fN,Z_DATA_ERROR:pN,Z_MEM_ERROR:yN}=aR;function gN(e){this.options=KP.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ex,this.strm.avail_out=0;let r=iN.inflateInit2(this.strm,t.windowBits);if(r!==lN)throw new Error(oR[r]);if(this.header=new oN,iN.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=XP.string2buf(t.dictionary):"[object ArrayBuffer]"===aN.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=iN.inflateSetDictionary(this.strm,t.dictionary),r!==lN)))throw new Error(oR[r])}function mN(e,t){const r=new gN(t);if(r.push(e),r.err)throw r.msg||oR[r.err];return r.result}function wN(e,t){return t=t||{},t.raw=!0,mN(e,t)}gN.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?uN:cN,"[object ArrayBuffer]"===aN.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=iN.inflate(r,o),s===dN&&i&&(s=iN.inflateSetDictionary(r,i),s===lN?s=iN.inflate(r,o):s===pN&&(s=dN));while(r.avail_in>0&&s===hN&&r.state.wrap>0&&0!==e[r.next_in])iN.inflateReset(r),s=iN.inflate(r,o);switch(s){case fN:case pN:case dN:case yN:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===hN))if("string"===this.options.to){let e=XP.utf8border(r.output,r.next_out),t=r.next_out-e,i=XP.buf2string(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==lN||0!==a){if(s===hN)return s=iN.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},gN.prototype.onData=function(e){this.chunks.push(e)},gN.prototype.onEnd=function(e){e===lN&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=KP.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var vN=gN,bN=mN,EN=wN,_N=mN,AN=aR,SN={Inflate:vN,inflate:bN,inflateRaw:EN,ungzip:_N,constants:AN};const{Deflate:kN,deflate:IN,deflateRaw:TN,gzip:CN}=bx,{Inflate:RN,inflate:PN,inflateRaw:xN,ungzip:ON}=SN;var NN=kN,DN=IN,BN=TN,LN=CN,MN=RN,UN=PN,FN=xN,jN=ON,VN=aR,zN={Deflate:NN,deflate:DN,deflateRaw:BN,gzip:LN,Inflate:MN,inflate:UN,inflateRaw:FN,ungzip:jN,constants:VN};const $N=6;function qN({repo:e,preload:t}){async function*r(r,n={}){if(null!=n.compressionLevel&&(n.compressionLevel<-1||n.compressionLevel>9))throw Ut(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(!1!==n.preload){let e;try{e=Xf(r).split("/")}catch(nP){throw Ut(nP,"ERR_INVALID_PATH")}t(Zt.k.parse(e[0]))}const i=Zt.k.asCID(r)||r,s=await GI(i,e.blocks,n);if("file"===s.type||"raw"===s.type){const e=[];return n.compress&&!0!==n.archive?e.push(s.content):e.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],BT(),(e=>z_(e,(e=>e.slice())))),n.compress&&e.push((async function*(e){const t=await aT(e);yield zN.gzip(t,{level:n.compressionLevel||$N})})),void(yield*W_(...e))}if("directory"!==s.type)throw Ut(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");{const t=[WI(i,e.blocks,n),async function*(e){for await(const t of e){const e={header:{name:t.path,size:t.size}};if("file"===t.type)e.header.type="file",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0,e.body=t.content();else if("raw"===t.type)e.header.type="file",e.body=t.content();else{if("directory"!==t.type)throw Ut(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");e.header.type="directory",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0}yield e}},BT(),e=>z_(e,(e=>e.slice()))];if(n.compress){if(!n.archive)throw Ut(new Error("file is not regular"),"ERR_INVALID_PATH");n.compress&&t.push((async function*(e){const t=await aT(e);yield zN.gzip(t,{level:n.compressionLevel||$N})}))}yield*W_(...t)}}return qf(r)}function KN({repo:e,preload:t}){async function*r(r,n={}){const i=Xf(r),s=i.split("/");!1!==n.preload&&t(Zt.k.parse(s[0]));const o=Zt.k.asCID(i)||i,a=await GI(o,e.blocks,n);if("file"!==a.type){if("directory"!==a.type)throw Ut(new Error(`Unknown UnixFS type ${a.type}`),"ERR_UNKNOWN_UNIXFS_TYPE");for await(const e of a.content())yield ep(e)}else yield ep(a)}return qf(r)}class HN{constructor({preload:e,repo:t,hashers:r,options:n}){const i=aI({preload:e,repo:t,options:n,hashers:r});this.addAll=i,this.add=DS({addAll:i}),this.cat=QI({repo:t,preload:e}),this.get=qN({repo:t,preload:e}),this.ls=KN({repo:t,preload:e})}}const GN="0.16.1",WN="d1f1e75b2060c5c2e64d133a7a6bbabd2641e5ef",QN="^0.156.1";function YN({repo:e}){async function t(t={}){const r=await e.version.get();return{version:GN,commit:WN,repo:`${r}`,"ipfs-core":GN,"interface-ipfs-core":QN}}return qf(t)}const JN=Mt("ipfs:components:id");function XN({peerId:e,network:t}){async function r(r={}){const n=t.try();if(!n){if(r.peerId)throw new Go;if(null==e.publicKey)throw Ut(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");return{id:e,publicKey:vh(e.publicKey,"base64pad"),addresses:[],agentVersion:`js-ipfs/${GN}`,protocolVersion:"9000",protocols:[]}}const{libp2p:i}=n,s=r.peerId?r.peerId:e,o=await ZN(s,i,r),a=vh(o.metadata.get("AgentVersion")||new Uint8Array),c=vh(o.metadata.get("ProtocolVersion")||new Uint8Array),u=o.id.toString(),l=o.publicKey?vh(o.publicKey,"base64pad"):"";return{id:s,publicKey:l,addresses:(o.addresses||[]).map((e=>{const t=e.toString();return t.endsWith(`/p2p/${u}`)?t:`${t}/p2p/${u}`})).sort().map((e=>Kl(e))),agentVersion:a,protocolVersion:c,protocols:(o.protocols||[]).sort()}}return qf(r)}async function ZN(e,t,r){let n=await t.peerStore.get(e);n||(n=await eD(e,t,r));let i=e.publicKey?e.publicKey:await t.peerStore.keyBook.get(e);if(null==i)try{i=await t.getPublicKey(e,r)}catch(nP){JN.error("Could not load public key for",e.toString(),nP)}return{...n,publicKey:i,metadata:n.metadata||new Map,addresses:n.addresses.map((e=>e.multiaddr))}}async function eD(e,t,r){if(null==t.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(const i of t.dht.findPeer(e,r))if("FINAL_PEER"===i.name)break;const n=await t.peerStore.get(e);if(!n)throw Ut(new Error("Could not find peer"),"ERR_NOT_FOUND");return n}var tD=rD;function rD(e,t,r){var n,i,s;if(Array.isArray(t)&&(n=t.slice(0)),"string"==typeof t&&(n=t.split(".")),"symbol"==typeof t&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;nD(i);while(s=n.shift())if(nD(s),"undefined"==typeof e[s]&&(e[s]={}),e=e[s],!e||"object"!=typeof e)return!1;return e[i]=r,!0}function nD(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}const iD={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:e=>(tD(e,"Discovery.MDNS.Enabled",!1),tD(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm={...e.Swarm||{},DisableNatPortMap:!0},e)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:e=>(tD(e,"Discovery.MDNS.Enabled",!0),tD(e,"Discovery.webRTCStar.Enabled",!0),tD(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:e=>{const t=uS();return tD(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),tD(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),tD(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),tD(e,"Addresses.Delegates",[]),tD(e,"Bootstrap",[]),tD(e,"Discovery.MDNS.Enabled",!1),tD(e,"Discovery.webRTCStar.Enabled",!1),tD(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!0}),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:e=>{const t=uS();return tD(e,"Addresses.API",t.Addresses.API),tD(e,"Addresses.Gateway",t.Addresses.Gateway),tD(e,"Addresses.Swarm",t.Addresses.Swarm),tD(e,"Addresses.Delegates",t.Addresses.Delegates),tD(e,"Bootstrap",t.Bootstrap),tD(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),tD(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),tD(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:e=>{const t=e.Swarm||{},r=t.ConnMgr||{};return r.LowWater=20,r.HighWater=40,t.ConnMgr=r,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:e=>{const t=uS();return e.Swarm=t.Swarm,e}}},sD=Mt("ipfs:core:config");function oD({repo:e}){return{getAll:qf(t),get:qf(r),set:qf(n),replace:qf(i),profiles:{apply:qf(s),list:qf(aD)}};async function t(t={}){return e.config.getAll(t)}async function r(t,r){return t?e.config.get(t,r):Promise.reject(new Error("key argument is required"))}async function n(t,r,n){return e.config.set(t,r,n)}async function i(t,r){return e.config.replace(t,r)}async function s(t,r={dryRun:!1}){const{dryRun:n}=r,i=iD[t];if(!i)throw new Error(`No profile with name '${t}' exists`);try{const t=await e.config.getAll(r);let s=JSON.parse(JSON.stringify(t));return s=i.transform(s),n||await e.config.replace(s,r),delete t.Identity.PrivKey,delete s.Identity.PrivKey,{original:t,updated:s}}catch(nP){throw sD(nP),new Error(`Could not apply profile '${t}' to config: ${nP.message}`)}}}async function aD(e){return Object.keys(iD).map((e=>({name:e,description:iD[e].description})))}const cD=({enumerable:e=!0,configurable:t=!1}={})=>({enumerable:e,configurable:t,writable:!1}),uD=function*(e,t){if(null!=e&&!(e instanceof Uint8Array))for(const[r,n]of Object.entries(e)){const e=[...t,r];if(null!=n&&"object"===typeof n)if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t],i=Zt.k.asCID(r);i?yield[n.join("/"),i]:"object"===typeof r&&(yield*uD(r,n))}else{const t=Zt.k.asCID(n);t?yield[e.join("/"),t]:yield*uD(n,e)}}},lD=function*(e,t){if(null!=e)for(const[r,n]of Object.entries(e)){const e=[...t,r];if(yield e.join("/"),null!=n&&!(n instanceof Uint8Array)&&"object"===typeof n&&!Zt.k.asCID(n))if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t];yield n.join("/"),"object"!==typeof r||Zt.k.asCID(r)||(yield*lD(r,n))}else yield*lD(n,e)}},hD=(e,t)=>{let r=e;for(const[n,i]of t.entries()){if(r=r[i],null==r)throw new Error(`Object has no property at ${t.slice(0,n+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`);const e=Zt.k.asCID(r);if(e)return{value:e,remaining:t.slice(n+1).join("/")}}return{value:r}};class dD{constructor({cid:e,bytes:t,value:r}){if(!e||!t||"undefined"===typeof r)throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:cD(),bytes:cD(),value:cD(),asBlock:cD()})}links(){return uD(this.value,[])}tree(){return lD(this.value,[])}get(e="/"){return hD(this.value,e.split("/").filter(Boolean))}}const fD=({bytes:e,cid:t,value:r,codec:n})=>{const i=void 0!==r?r:n&&n.decode(e);if(void 0===i)throw new Error('Missing required argument, must either provide "value" or "codec"');return new dD({cid:t,bytes:e,value:i})};function pD(e){const t=ls({version:1,roots:e}),r=Wu.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function yD(e){return{async setRoots(t){const r=pD(t);await e.write(r)},async writeBlock(t){const{cid:r,bytes:n}=t;await e.write(new Uint8Array(Wu.encode(r.bytes.length+n.length))),await e.write(r.bytes),n.length&&await e.write(n)},async close(){await e.end()}}}function gD(){}function mD(){const e=[];let t=null,r=gD,n=!1,i=null,s=gD;const o=()=>(t||(t=new Promise((e=>{r=()=>{t=null,r=gD,e()}}))),t),a={write(t){e.push(t);const r=o();return s(),r},async end(){n=!0;const e=o();s(),await e}},c={async next(){const t=e.shift();return t?(0===e.length&&r(),{done:!1,value:t}):n?(r(),{done:!0,value:void 0}):(i||(i=new Promise((e=>{s=()=>(i=null,s=gD,e(c.next()))}))),i)}};return{writer:a,iterator:c}}const wD={Null:e=>null===e,Int:e=>Number.isInteger(e),Float:e=>"number"===typeof e&&Number.isFinite(e),String:e=>"string"===typeof e,Bool:e=>"boolean"===typeof e,Bytes:e=>e instanceof Uint8Array,Link:e=>!wD.Null(e)&&"object"===typeof e&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!wD.Null(e)&&"object"===typeof e&&e.asCID!==e&&!wD.List(e)&&!wD.Bytes(e)},vD={Int:wD.Int,"CarHeader > version":e=>vD.Int(e),"CarHeader > roots (anon) > valueType (anon)":wD.Link,"CarHeader > roots (anon)":e=>wD.List(e)&&Array.prototype.every.call(e,vD["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>vD["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return wD.Map(e)&&["version"].every((e=>t.includes(e)))&&Object.entries(e).every((([e,t])=>vD["CarHeader > "+e]&&vD["CarHeader > "+e](t)))}},bD=vD.CarHeader,ED={SHA2_256:18,LENGTH:32,DAG_PB:112},_D=40;async function AD(e){const t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");const r=Wu.decode(t);return e.seek(Wu.decode.bytes),r}async function SD(e){const t=await e.exactly(_D),r=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;const i={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return e.seek(_D),i}async function kD(e,t){const r=await AD(e);if(0===r)throw new Error("Invalid CAR header (zero length)");const n=await e.exactly(r);e.seek(r);const i=hs(n);if(!bD(i))throw new Error("Invalid CAR header format");if(1!==i.version&&2!==i.version||void 0!==t&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${void 0!==t?` (expected ${t})`:""}`);const s=Array.isArray(i.roots);if(1===i.version&&!s||2===i.version&&s)throw new Error("Invalid CAR header format");if(1===i.version)return i;const o=await SD(e);e.seek(o.dataOffset-e.pos);const a=await kD(e,1);return Object.assign(a,o)}async function ID(e){const t=await e.upTo(8);Wu.decode(t);const r=Wu.decode.bytes,n=Wu.decode(t.subarray(Wu.decode.bytes)),i=Wu.decode.bytes,s=r+i+n,o=await e.exactly(s);return e.seek(s),o}async function TD(e){const t=await e.exactly(2);if(t[0]===ED.SHA2_256&&t[1]===ED.LENGTH){const t=await e.exactly(34);e.seek(34);const r=fs.Jx(t);return Zt.k.create(0,ED.DAG_PB,r)}const r=await AD(e);if(1!==r)throw new Error(`Unexpected CID version (${r})`);const n=await AD(e),i=await ID(e),s=fs.Jx(i);return Zt.k.create(r,n,s)}async function CD(e){const t=e.pos;let r=await AD(e);if(0===r)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;const n=await TD(e),i=r-Number(e.pos-t);return{cid:n,length:r,blockLength:i}}async function RD(e){const{cid:t,blockLength:r}=await CD(e),n=await e.exactly(r);return e.seek(r),{bytes:n,cid:t}}async function PD(e){const t=e.pos,{cid:r,length:n,blockLength:i}=await CD(e),s={cid:r,length:n,blockLength:i,offset:t,blockOffset:e.pos};return e.seek(s.blockLength),s}function xD(e){const t=(async()=>{const t=await kD(e);if(2===t.version){const r=e.pos-t.dataOffset;e=BD(e,t.dataSize-r)}return t})();return{header:()=>t,async*blocks(){await t;while((await e.upTo(8)).length>0)yield await RD(e)},async*blocksIndex(){await t;while((await e.upTo(8)).length>0)yield await PD(e)}}}function OD(e){let t=0;return{async upTo(r){return e.subarray(t,t+Math.min(r,e.length-t))},async exactly(r){if(r>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+r)},seek(e){t+=e},get pos(){return t}}}function ND(e){let t=0,r=0,n=0,i=new Uint8Array(0);const s=async t=>{r=i.length-n;const s=[i.subarray(n)];while(r<t){const t=await e();if(null==t)break;r<0?t.length>r&&s.push(t.subarray(-r)):s.push(t),r+=t.length}i=new Uint8Array(s.reduce(((e,t)=>e+t.length),0));let o=0;for(const e of s)i.set(e,o),o+=e.length;n=0};return{async upTo(e){return i.length-n<e&&await s(e),i.subarray(n,n+Math.min(i.length-n,e))},async exactly(e){if(i.length-n<e&&await s(e),i.length-n<e)throw new Error("Unexpected end of data");return i.subarray(n,n+e)},seek(e){t+=e,n+=e},get pos(){return t}}}function DD(e){const t=e[Symbol.asyncIterator]();async function r(){const e=await t.next();return e.done?null:e.value}return ND(r)}function BD(e,t){let r=0;return{async upTo(n){let i=await e.upTo(n);return i.length+r>t&&(i=i.subarray(0,t-r)),i},async exactly(n){const i=await e.exactly(n);if(i.length+r>t)throw new Error("Unexpected end of data");return i},seek(t){r+=t,e.seek(t)},get pos(){return e.pos}}}class LD{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=Zt.k.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:t,bytes:e.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=FD(e);const{encoder:t,iterator:r}=UD(),n=new LD(e,t),i=new MD(r);return{writer:n,out:i}}static createAppender(){const{encoder:e,iterator:t}=UD();e.setRoots=()=>Promise.resolve();const r=new LD([],e),n=new MD(t);return{writer:r,out:n}}static async updateRootsInBytes(e,t){const r=OD(e);await kD(r);const n=pD(t);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}}class MD{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function UD(){const e=mD(),{writer:t,iterator:r}=e,n=yD(t);return{encoder:n,iterator:r}}function FD(e){if(void 0===e)return[];if(!Array.isArray(e)){const t=Zt.k.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const t=[];for(const r of e){const e=Zt.k.asCID(r);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(e)}return t}const jD=async({cid:e,load:t,seen:r})=>{r=r||new Set;const n=e.toString(bo.base58btc);if(r.has(n))return;const i=await t(e);if(r.add(n),null!==i)for(const[,s]of i.links())await jD({cid:s,load:t,seen:r})},VD=Mt("ipfs:components:dag:import"),zD=[xo,Mo];function $D({repo:e,preload:t,codecs:r}){async function*n(n,i={}){!1!==i.preload&&t(n);const s=Zt.k.asCID(n);if(!s)throw new Error(`Unexpected error converting CID type: ${n}`);VD(`Exporting ${s} as car`);const{writer:o,out:a}=await LD.create([s]);let c=null;(async()=>{try{const t=qD(e,o,{signal:i.signal,timeout:i.timeout},r);await jD({cid:s,load:t})}catch(t){c=t}finally{o.close()}})();for await(const e of a){if(c)break;yield e}if(c)throw c}return qf(n)}function qD(e,t,r,n){return async i=>{const s=await n.getCodec(i.code);if(!s)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);const o=await e.blocks.get(i,r);return VD(`Adding block ${i} to car`),await t.put({cid:i,bytes:o}),zD.includes(i.code)?null:fD({bytes:o,cid:i,codec:s})}}var KD=r(4461);function HD({codecs:e,repo:t,preload:r}){const n=async function(n,i={}){if(!1!==i.preload&&r(n),i.path){const r=i.localResolve?await KD(rp(n,i.path,e,t,i)):await Sm(rp(n,i.path,e,t,i)),s=r;if(!s)throw Ut(new Error("Not found"),"ERR_NOT_FOUND");return s}const s=await e.getCodec(n.code),o=await t.blocks.get(n,i),a=s.decode(o);return{value:a,remainderPath:""}};return qf(n)}class GD{constructor(e,t,r){this._version=e,this._roots=t,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class WD extends GD{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:r,iterator:n}=await YD(e);return new WD(t,r,n)}static async fromIterable(e){const{version:t,roots:r,iterator:n}=await JD(e);return new WD(t,r,n)}}class QD extends(null){[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const e=this._iterable[Symbol.asyncIterator]();return{async next(){const t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){const{version:t,roots:r,iterator:n}=await YD(e);return new QD(t,r,n)}static async fromIterable(e){const{version:t,roots:r,iterator:n}=await JD(e);return new QD(t,r,n)}}async function YD(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return XD(OD(e))}async function JD(e){if(!e||"function"!==typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return XD(DD(e))}async function XD(e){const t=xD(e),{version:r,roots:n}=await t.header();return{version:r,roots:n,iterator:t.blocks()}}const ZD=Mt("ipfs:components:dag:import");function eB({repo:e}){async function*t(t,r={}){const n=await e.gcLock.readLock();try{const i={signal:r.signal,timeout:r.timeout},s=AS(t),{value:o,done:a}=await s.peek();if(a)return;let c;o&&s.push(o),c=o instanceof Uint8Array?[s]:s;for await(const t of c){const n=await tB(e,i,t);if(!1!==r.pinRoots)for(const t of n){let r="";try{await e.blocks.has(t)?(ZD(`Pinning root ${t}`),await e.pins.pinRecursively(t)):r="blockstore: block not found"}catch(nP){r=nP.message}yield{root:{cid:t,pinErrorMsg:r}}}}}finally{n()}}return qf(t)}async function tB(e,t,r){const n=await WD.fromIterable(r),i=await n.getRoots();return await I_(e.blocks.putMany(z_(n,(({cid:e,bytes:t})=>(ZD(`Import block ${e}`),{key:e,value:t}))),{signal:t.signal})),i}function rB({repo:e,codecs:t,hashers:r,preload:n}){async function i(i,s={}){const o=s.pin?await e.gcLock.readLock():null;try{const a=await t.getCodec(s.storeCodec||"dag-cbor");if(!a)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(i instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const e=await t.getCodec(s.inputCodec);if(!e)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);i=e.decode(i)}const c=null!=s.version?s.version:1,u=await r.getHasher(s.hashAlg||"sha2-256");if(!u)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const l=a.encode(i),h=await u.digest(l),d=Zt.k.create(c,a.code,h);return await e.blocks.put(d,l,{signal:s.signal}),s.pin&&await e.pins.pinRecursively(d),!1!==s.preload&&n(d),d}finally{o&&o()}}return qf(i)}function nB({repo:e,codecs:t,preload:r}){async function n(n,i={}){const{cid:s}=Hf(n);return!1!==i.preload&&r(s),Zf(e,t,n,i)}return qf(n)}class iB{constructor({repo:e,codecs:t,hashers:r,preload:n}){this.export=$D({repo:e,preload:n,codecs:t}),this.get=HD({codecs:t,repo:e,preload:n}),this.import=eB({repo:e}),this.resolve=nB({repo:e,codecs:t,preload:n}),this.put=rB({repo:e,codecs:t,hashers:r,preload:n})}}const sB=(e,t)=>t,oB=(e,t,r,n)=>{if(null!=n&&!1===n.assumeHttp)return`tcp://${e}:${t}`;let i="tcp",s=`:${t}`;const o=r[r.length-1];return"tcp"===o.protocol&&(i="443"===t?"https":"http",s="443"===t||"80"===t?"":s),`${i}://${e}${s}`},aB={ip4:sB,ip6:(e,t,r,n)=>1===n.length&&"ip6"===n[0].protocol?t:`[${t}]`,tcp:(e,t,r,n,i)=>n.some((e=>["http","https","ws","wss"].includes(e.protocol)))?`${e}:${t}`:oB(e,t,n,i),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:sB,dns4:sB,dns6:sB,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};function cB(e,t){const r=Kl(e),n=r.toString().split("/").slice(1);return r.tuples().map((e=>({protocol:n.shift()??"",content:null!=e[1]?n.shift()??"":""}))).reduce(((e,r,n,i)=>{const s=aB[r.protocol];if(null==s)throw new Error(`Unsupported protocol ${r.protocol}`);return s(e,r.content,n,i,t)}),"")}function uB(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got "+typeof e);e=[...e];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}const lB=Mt("ipfs:preload"),hB=Wp["default"]?Wp["default"]:Wp,dB=new hB({concurrency:4});function fB(e,t={}){return lB(e),dB.add((async()=>{const r=await Qp.post(e,{signal:t.signal}),n=r.body.getReader();try{while(1){const{done:e}=await n.read();if(e)return}}finally{n.releaseLock()}}))}const pB=Mt("ipfs:preload");function yB(e={}){if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){pB("preload disabled");const e=()=>{};return Object.assign(e,{start:()=>{},stop:()=>{}})}let t=!0,r=[];const n=e.addresses.map((e=>cB(e))),i=op(e.cache),s=async e=>{try{if(t)throw new Error(`preload ${e} but preloader is not started`);const s=e.toString();if(i.has(s))return;i.set(s,!0);const o=uB(n);let a=!1;const c=Date.now();for(const e of o){if(t)throw new Error(`preload aborted for ${s}`);let n;try{n=new AbortController,r=r.concat(n),await fB(`${e}/api/v0/refs?r=true&arg=${encodeURIComponent(s)}`,{signal:n.signal}),a=!0}catch(nP){"aborted"!==nP.type&&pB.error(nP)}finally{r=r.filter((e=>e!==n))}if(a)break}pB(`${a?"":"un"}successfully preloaded ${s} in ${Date.now()-c}ms`)}catch(nP){pB.error(nP)}};return s.start=()=>{t=!1},s.stop=()=>{t=!0,pB(`aborting ${r.length} pending preload request(s)`),r.forEach((e=>e.abort())),r=[]},s}const gB=Mt("ipfs:mfs-preload");function mB({preload:e,files:t,options:r={}}){if(r.interval=r.interval||3e4,!r.enabled){gB("MFS preload disabled");const e=async()=>{};return{start:e,stop:e}}let n,i="";const s=async()=>{try{const o=await t.stat("/"),a=o.cid.toString();i!==a&&(gB(`preloading updated MFS root ${i} -> ${o.cid}`),await e(o.cid),i=a)}catch(nP){gB.error("failed to preload MFS root",nP)}finally{n=setTimeout(s,r.interval)}};return{async start(){const e=await t.stat("/");i=e.cid.toString(),gB(`monitoring MFS root ${e.cid}`),n=setTimeout(s,r.interval)},stop(){clearTimeout(n)}}}class wB extends Error{constructor(e){super(e),this.name="TimeoutError"}}class vB extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const bB=e=>void 0===globalThis.DOMException?new vB(e):new DOMException(e),EB=e=>{const t=void 0===e.reason?bB("This operation was aborted."):e.reason;return t instanceof Error?t:bB(t)};function _B(e,t){const{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let o;const a=new Promise(((a,c)=>{if("number"!==typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r!==Number.POSITIVE_INFINITY){if(t.signal){const{signal:e}=t;e.aborted&&c(EB(e)),e.addEventListener("abort",(()=>{c(EB(e))}))}o=s.setTimeout.call(void 0,(()=>{if(n){try{a(n())}catch(o){c(o)}return}const t="string"===typeof i?i:`Promise timed out after ${r} milliseconds`,s=i instanceof Error?i:new wB(t);"function"===typeof e.cancel&&e.cancel(),c(s)}),r),(async()=>{try{a(await e)}catch(t){c(t)}finally{s.clearTimeout.call(void 0,o)}})()}else a(e)}));return a.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},a}let AB=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e)),"");const SB="lock:worker:request-read",kB="lock:worker:release-read",IB="lock:master:grant-read",TB="lock:worker:request-write",CB="lock:worker:release-write",RB="lock:master:grant-write",PB={},xB=e=>{e.addEventListener("message",(t=>{xB.dispatchEvent("message",e,t)})),null!=e.port&&e.port.addEventListener("message",(t=>{xB.dispatchEvent("message",e,t)}))};xB.addEventListener=(e,t)=>{null==PB[e]&&(PB[e]=[]),PB[e].push(t)},xB.removeEventListener=(e,t)=>{null!=PB[e]&&(PB[e]=PB[e].filter((e=>e===t)))},xB.dispatchEvent=function(e,t,r){null!=PB[e]&&PB[e].forEach((e=>e(t,r)))};var OB=xB;const NB=(e,t,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((e=>{const t=r=>{if(null==r||null==r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i.type===n&&i.identifier===a.identifier&&(s.removeEventListener("message",t),e())};s.addEventListener("message",t)})))}}))},DB=(e,t,r,n)=>async()=>{const i=AB();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise((t=>{const s=o=>{if(null==o||null==o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a.type===r&&a.identifier===i&&(globalThis.removeEventListener("message",s),t((()=>{globalThis.postMessage({type:n,identifier:i,name:e})})))};globalThis.addEventListener("message",s)}))},BB={singleProcess:!1};var LB=e=>{e=Object.assign({},BB,e);const t=Boolean(globalThis.document)||e.singleProcess;if(t){const e=new EventTarget;return OB.addEventListener("message",NB(e,"requestReadLock",SB,kB,IB)),OB.addEventListener("message",NB(e,"requestWriteLock",TB,CB,RB)),e}return{isWorker:!0,readLock:e=>DB(e,SB,IB,kB),writeLock:e=>DB(e,TB,RB,CB)}};const MB={};let UB;async function FB(e,t){let r;const n=new Promise((e=>{r=e}));return e.add((async()=>await _B((async()=>await new Promise((e=>{r((()=>{e()}))})))(),{milliseconds:t.timeout}))),await n}const jB=(e,t)=>{if(!0===UB.isWorker)return{readLock:UB.readLock(e,t),writeLock:UB.writeLock(e,t)};const r=new Wp({concurrency:1});let n;return{async readLock(){if(null!=n)return await FB(n,t);n=new Wp({concurrency:t.concurrency,autoStart:!1});const e=n,i=FB(n,t);return r.add((async()=>(e.start(),await e.onIdle().then((()=>{n===e&&(n=null)}))))),await i},async writeLock(){return n=null,await FB(r,t)}}},VB={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function zB(e){const t=Object.assign({},VB,e);return null==UB&&(UB=LB(t),!0!==UB.isWorker&&(UB.addEventListener("requestReadLock",(e=>{null!=MB[e.data.name]&&MB[e.data.name].readLock().then((async t=>await e.data.handler().finally((()=>t()))))})),UB.addEventListener("requestWriteLock",(async e=>{null!=MB[e.data.name]&&MB[e.data.name].writeLock().then((async t=>await e.data.handler().finally((()=>t()))))})))),null==MB[t.name]&&(MB[t.name]=jB(t.name,t)),MB[t.name]}let $B;function qB(e=!1){if($B)return $B;const t=zB({singleProcess:e});return $B={readLock:e=>async(...r)=>{const n=await t.readLock();try{return await e.apply(null,r)}finally{n()}},writeLock:e=>async(...r)=>{const n=await t.writeLock();try{return await e.apply(null,r)}finally{n()}}},$B}const KB=Mt("ipfs:mfs:utils:with-mfs-root");async function HB(e,t){if(t&&t.signal&&t.signal.aborted)throw Ut(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});let r;await e.repo.datastore.open();try{const t=await e.repo.datastore.get(Qf);r=Zt.k.decode(t)}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP;KB("Creating new MFS root");const i=Rr({Data:new Xt({type:"directory"}).marshal(),Links:[]}),s=await Co.digest(i);if(r=Zt.k.createV0(s),await e.repo.blocks.put(r,i),t&&t.signal&&t.signal.aborted)throw Ut(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await e.repo.datastore.put(Qf,r.bytes)}return KB(`Loaded MFS root /ipfs/${r}`),r}function GB(e=""){return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}const WB="ipfs",QB=async(e,t,r)=>{const n=await HB(e,r);let i={entryType:"file"},s="";if(s=Zt.k.asCID(t)?`/ipfs/${t}`:t.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw Ut(new Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==s.substring(0,1))throw Ut(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1));const o=GB(s);if(o[0]===WB){let e;e=2===o.length?`/${o.join("/")}`:`/${o.slice(0,o.length-1).join("/")}`,i={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:e,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{const e=`/${WB}/${n}${o.length?"/"+o.join("/"):""}`,t=`/${WB}/${n}/${o.slice(0,o.length-1).join("/")}`;i={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:t,mfsPath:e,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}const a="mfs"===i.type?i.mfsPath:i.path;try{const t=await GI(a,e.repo.blocks,r);i.cid=t.cid,i.mfsPath=`/ipfs/${t.path}`,i.entryType=t.type,i.content=t.content,"file"!==i.entryType&&"directory"!==i.entryType||"file"!==t.type&&"directory"!==t.type||(i.unixfs=t.unixfs)}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}return i.exists=Boolean(i.cid),i},YB=gt.bind({ignoreUndefined:!0}),JB=Mt("ipfs:mfs:stat"),XB={withLocal:!1};function ZB(e){async function t(t,r={}){r=YB(XB,r),JB(`Fetching stats for ${t}`);const{type:n,cid:i,mfsPath:s}=await QB(e,t,r),o="ipfs"===n&&i?i:s;let a;try{a=await GI(o,e.repo.blocks)}catch(nP){if("ERR_NOT_FOUND"===nP.code)throw Ut(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw nP}if(!eL[a.type])throw new Error(`Cannot stat codec ${a.cid.code}`);return eL[a.type](a)}return qf(t)}const eL={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:e=>{const t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:Rr(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:e=>{const t={cid:e.cid,type:"directory",size:0,cumulativeSize:Rr(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},tL=Mt("ipfs:mfs:utils:to-trail");async function rL(e,t){tL(`Creating trail for path ${t}`);const r=[];for await(const n of HI(t,e.repo.blocks))r.push({name:n.name,cid:n.cid,size:n.size,type:n.type});return r}const nL=async(e,t,r)=>{r.codec||(r.codec=n),r.hasher||(r.hasher=Co),void 0===r.cidVersion&&(r.cidVersion=1),r.codec===n&&r.hasher!==Co&&(r.cidVersion=1);const i=await r.hasher.digest(e),s=Zt.k.create(r.cidVersion,r.codec.code,i);return r.onlyHash||await t.put(s,e,{signal:r.signal}),s},iL=US.code,sL=8;async function oL(e){return(await US.encode(e)).slice(0,8).reverse()}class aL{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}class cL extends aL{constructor(e,t){super(e,t),this._bucket=jk({hashFn:oL,bits:sL})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){yield*uL(this._bucket,e,this,this.options)}}async function*uL(e,t,r,n){const i=e._children,s=[];let o=0;for(let f=0;f<i.length;f++){const e=i.get(f);if(!e)continue;const r=f.toString(16).toUpperCase().padStart(2,"0");if(e instanceof Ck){let i;for await(const r of await uL(e,t,null,n))i=r;if(!i)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:r,Tsize:i.size,Hash:i.cid}),o+=i.size}else if("function"===typeof e.value.flush){const n=e.value;let i;for await(const e of n.flush(t))i=e,yield i;const a=r+e.key;s.push({Name:a,Tsize:i.size,Hash:i.cid}),o+=i.size}else{const t=e.value;if(!t.cid)continue;const n=r+e.key,i=t.size;s.push({Name:n,Tsize:i,Hash:t.cid}),o+=i}}const a=Uint8Array.from(i.bitField().reverse()),c=new Xt({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:iL,mtime:r&&r.mtime,mode:r&&r.mode}),u={Data:c.marshal(),Links:s},l=Rr(Ar(u)),h=await nL(l,t,n),d=l.length+o;yield{cid:h,node:u,size:d}}const lL=Mt("ipfs:mfs:core:utils:hamt-utils"),hL=async(e,t,r,n)=>{if(!n.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const i=Uint8Array.from(r._children.bitField().reverse()),s=Xt.unmarshal(n.parent.Data),o=new Xt({type:"hamt-sharded-directory",data:i,fanout:r.tableSize(),hashType:iL,mode:s.mode,mtime:s.mtime}),a=await e.hashers.getHasher(n.hashAlg),c={Data:o.marshal(),Links:t.sort(((e,t)=>(e.Name||"").localeCompare(t.Name||"")))},u=Rr(c),l=await a.digest(u),h=Zt.k.create(n.cidVersion,Cr,l);return n.flush&&await e.repo.blocks.put(h,u),{node:c,cid:h,size:t.reduce(((e,t)=>e+(t.Tsize||0)),u.length)}},dL=async(e,t,r,n,i)=>{const s=new Ck({hash:r._options.hash,bits:r._options.bits},n,i);return n._putObjectAt(i,s),await pL(e,t,s,r),s},fL=async e=>{const t=jk({hashFn:oL,bits:sL});return await Promise.all(e.map((async e=>{const r=e.Name||"";if(2===r.length){const e=parseInt(r,16),n=new Ck({hash:t._options.hash,bits:t._options.bits},t,e);return t._putObjectAt(e,n),Promise.resolve()}return t.put(r.substring(2),{size:e.Tsize,cid:e.Hash})}))),t},pL=async(e,t,r,n)=>{await Promise.all(t.map((async t=>{const i=t.Name||"";if(2===i.length){lL("Populating sub bucket",i);const s=parseInt(i,16),o=await e.repo.blocks.get(t.Hash),a=Pr(o),c=new Ck({hash:n._options.hash,bits:n._options.bits},r,s);return r._putObjectAt(s,c),await pL(e,a.Links,c,n),Promise.resolve()}return n.put(i.substring(2),{size:t.Tsize,cid:t.Hash})})))},yL=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),gL=async(e,t,r)=>{const n=await fL(r.Links),i=await n._findNewBucketAndPos(t),s=[{bucket:i.bucket,prefix:yL(i.pos)}];let o=i.bucket;while(o!==n)s.push({bucket:o,prefix:yL(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=r;for(let a=0;a<s.length;a++){const r=s[a];if(!r.node)throw new Error("Could not generate HAMT path");const i=r.node.Links.filter((e=>(e.Name||"").substring(0,2)===r.prefix)).pop();if(!i){lL(`Link ${r.prefix}${t} will be added`);continue}if(i.Name===`${r.prefix}${t}`){lL(`Link ${r.prefix}${t} will be replaced`);continue}lL(`Found subshard ${r.prefix}`);const o=await e.repo.blocks.get(i.Hash),c=Pr(o);if(!s[a+1]){lL(`Loaded new subshard ${r.prefix}`),await dL(e,c.Links,n,r.bucket,parseInt(r.prefix,16));const i=await n._findNewBucketAndPos(t);s.push({bucket:i.bucket,prefix:yL(i.pos),node:c});continue}const u=s[a+1];await pL(e,c.Links,u.bucket,n),u.node=c}return await n.put(t,!0),s.reverse(),{rootBucket:n,path:s}},mL=async(e,t,r={})=>{const n=new cL({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<t.length;s++)await n._bucket.put(t[s].name,{size:t[s].size,cid:t[s].cid});const i=await Sm(n.flush(e.repo.blocks));if(!i)throw new Error("Flushing shard yielded no result");return i},wL=Mt("ipfs:mfs:core:utils:add-link");async function vL(e,t){let r=t.parent;if(t.parentCid){const n=Zt.k.asCID(t.parentCid);if(null===n)throw Ut(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(n.code!==Cr)throw Ut(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");wL(`Loading parent node ${n}`);const i=await e.repo.blocks.get(n);r=Pr(i)}if(!r)throw Ut(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!t.cid)throw Ut(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw Ut(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!t.size&&0!==t.size)throw Ut(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!r.Data)throw Ut(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const n=Xt.unmarshal(r.Data);return"hamt-sharded-directory"===n.type?(wL("Adding link to sharded directory"),_L(e,{...t,parent:r})):r.Links.length>=t.shardSplitThreshold?(wL("Converting directory to sharded directory"),bL(e,{...t,parent:r,mtime:n.mtime,mode:n.mode})):(wL(`Adding ${t.name} (${t.cid}) to regular directory`),EL(e,{...t,parent:r}))}const bL=async(e,t)=>{const r=await mL(e,t.parent.Links.map((e=>({name:e.Name||"",size:e.Tsize||0,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return wL(`Converted directory to sharded directory ${r.cid}`),r},EL=async(e,t)=>{const r=t.parent.Links.filter((e=>e.Name!==t.name));if(r.push({Name:t.name,Tsize:t.size,Hash:t.cid}),!t.parent.Data)throw Ut(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const n=Xt.unmarshal(t.parent.Data);let i;if(n.mtime){const e=Date.now(),t=Math.floor(e/1e3);n.mtime={secs:t,nsecs:1e3*(e-1e3*t)},i=n.marshal()}else i=t.parent.Data;t.parent=Ar({Data:i,Links:r});const s=await e.hashers.getHasher(t.hashAlg),o=Rr(t.parent),a=await s.digest(o),c=Zt.k.create(t.cidVersion,Cr,a);return t.flush&&await e.repo.blocks.put(c,o),{node:t.parent,cid:c,size:o.length}},_L=async(e,t)=>{const{shard:r,path:n}=await AL(e,t),i=await Sm(r.flush(e.repo.blocks));if(!i)throw new Error("No result from flushing shard");const s=await e.repo.blocks.get(i.cid),o=Pr(s),a=t.parent.Links.filter((e=>(e.Name||"").substring(0,2)!==n[0].prefix)),c=o.Links.find((e=>(e.Name||"").substring(0,2)===n[0].prefix));if(!c)throw new Error(`No link found with prefix ${n[0].prefix}`);return a.push(c),hL(e,a,n[0].bucket,t)},AL=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size};if(!t.parent.Data)throw Ut(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const n=await fL(t.parent.Links),i=Xt.unmarshal(t.parent.Data),s=new cL({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},t);s._bucket=n,i.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});const o=await n._findNewBucketAndPos(r.name),a=SL(o);a[0].node=t.parent;let c=0;while(c<a.length){const t=a[c];c++;const i=t.node;if(!i)throw new Error("Segment had no node");const s=i.Links.find((e=>(e.Name||"").substring(0,2)===t.prefix));if(!s){wL(`Link ${t.prefix}${r.name} will be added`),c=a.length;break}if(s.Name===`${t.prefix}${r.name}`){wL(`Link ${t.prefix}${r.name} will be replaced`),c=a.length;break}if((s.Name||"").length>2){wL(`Link ${s.Name} ${s.Hash} will be replaced with a subshard`),c=a.length;break}wL(`Found subshard ${t.prefix}`);const o=await e.repo.blocks.get(s.Hash),u=Pr(o);if(!a[c]){wL(`Loaded new subshard ${t.prefix}`),await dL(e,u.Links,n,t.bucket,parseInt(t.prefix,16));const i=await n._findNewBucketAndPos(r.name);a.push({bucket:i.bucket,prefix:yL(i.pos),node:u});break}const l=a[c];await pL(e,u.Links,l.bucket,n),l.node=u}return await s._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:s,path:a}},SL=e=>{const t=[{bucket:e.bucket,prefix:yL(e.pos)}];let r=e.bucket._parent,n=e.bucket._posAtParent;while(r)t.push({bucket:r,prefix:yL(n)}),n=r._posAtParent,r=r._parent;return t.reverse(),t},kL=Mt("ipfs:mfs:utils:update-tree"),IL={shardSplitThreshold:1e3};async function TL(e,t,r){r=Object.assign({},IL,r),kL("Trail",t),t=t.slice().reverse();let n,i=0;for await(const o of e.repo.blocks.getMany(t.map((e=>e.cid)))){const s=Pr(o),a=t[i].cid,c=t[i].name;if(i++,!n){n={cid:a,name:c,size:o.length};continue}const u=await vL(e,{parent:s,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:u.cid,name:c,size:u.size}}const{cid:s}=n;return kL(`Final CID ${s}`),s}const CL=Mt("ipfs:mfs:utils:update-mfs-root");async function RL(e,t,r){if(r&&r.signal&&r.signal.aborted)throw Ut(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return CL(`New MFS root will be ${t}`),await e.repo.datastore.put(Qf,t.bytes),t}async function PL(e,t,r){const n=new Xt({type:t,mode:r.mode,mtime:r.mtime}),i=await e.hashers.getHasher(r.hashAlg),s={Data:n.marshal(),Links:[]},o=Rr(s),a=await i.digest(o),c=Zt.k.create(r.cidVersion,Cr,a);return r.flush&&await e.repo.blocks.put(c,o),{cid:c,node:s}}const xL=gt.bind({ignoreUndefined:!0}),OL=Mt("ipfs:mfs:mkdir"),NL={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function DL(e){async function t(t,r={}){const n=xL(NL,r);if(!t)throw new Error("no path given to Mkdir");if(t=t.trim(),"/"===t){if(n.parents)return;throw Ut(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==t.substring(0,1))throw Ut(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");OL(`Creating ${t}`);const i=GB(t);if("ipfs"===i[0])throw Ut(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const s=await HB(e,n);let o;const a=[],c=await PL(e,"directory",n);for(let l=0;l<=i.length;l++){const r=i.slice(0,l),u=`/ipfs/${s}/${r.join("/")}`;try{if(o=await GI(u,e.repo.blocks),"file"!==o.type&&"directory"!==o.type)throw Ut(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(l===i.length){if(n.parents)return;throw Ut(new Error("file already exists"),"ERR_ALREADY_EXISTS")}a.push({name:o.name,cid:o.cid})}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP;if(l<i.length&&!n.parents)throw Ut(new Error(`Intermediate directory path ${u} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await BL(e,r[r.length-1],c,a[a.length-1],a,n)}}const u=await TL(e,a,n);await RL(e,u,n)}return qf(t)}const BL=async(e,t,r,n,i,s)=>{OL(`Adding empty dir called ${t} to ${n.cid}`);const o=await vL(e,{parent:n.node,parentCid:n.cid,size:0,cid:r.cid,name:t,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});i[i.length-1].cid=o.cid,i.push({name:t,cid:r.cid})},LL=gt.bind({ignoreUndefined:!0}),ML=Mt("ipfs:mfs:cp"),UL={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function FL(e){async function t(t,r,n={}){const i=LL(UL,n);Array.isArray(t)||(t=[t]);const s=await Promise.all(t.map((t=>QB(e,t,i))));let o=await QB(e,r,i);if(!s.length||!o)throw Ut(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const a=s.find((e=>!e.exists));if(a)throw Ut(new Error(`${a.path} does not exist`),"ERR_INVALID_PARAMS");const c=jL(o);if(o.exists){if(ML("Destination exists"),1===s.length&&!c)throw Ut(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(ML("Destination does not exist"),s.length>1){if(!i.parents)throw Ut(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await DL(e)(o.path,i),o=await QB(e,o.path,i)}else if(o.parts.length>1){const t=`/${o.parts.slice(0,-1).join("/")}`;try{await ZB(e)(t,i)}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP;if(!i.parents)throw Ut(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await DL(e)(t,i),o=await QB(e,o.path,i)}}const u=jL(o)?o.mfsPath:o.mfsDirectory,l=await rL(e,u);if(1===s.length){const t=s.pop();if(!t)throw Ut(new Error("could not find source"),"ERR_INVALID_PARAMS");const r=c?t.name:o.name;return ML(`Only one source, copying to destination ${c?"directory":"file"} ${r}`),VL(e,t,r,l,i)}return ML("Multiple sources, wrapping in a directory"),zL(e,s,o,l,i)}return qf(t)}const jL=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),VL=async(e,t,r,n,i)=>{let s=n.pop();if(!s)throw Ut(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await $L(e,t,r,s,i),n.push(s);const o=await TL(e,n,i);await RL(e,o,i)},zL=async(e,t,r,n,i)=>{for(let o=0;o<t.length;o++){const n=t[o];r=await $L(e,n,n.name,r,i)}n[n.length-1]=r;const s=await TL(e,n,i);await RL(e,s,i)},$L=async(e,t,r,n,i)=>{const s=await e.repo.blocks.get(t.cid),{node:o,cid:a,size:c}=await vL(e,{parentCid:n.cid,size:s.length,cid:t.cid,name:r,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});return n.node=o,n.cid=a,n.size=c,n},qL=Mt("ipfs:mfs:core:utils:remove-link");async function KL(e,t){let r=t.parent;if(t.parentCid){const n=Zt.k.asCID(t.parentCid);if(null===n)throw Ut(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");qL(`Loading parent node ${n}`);const i=await e.repo.blocks.get(n);r=Pr(i)}if(!r)throw Ut(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!t.name)throw Ut(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!r.Data)throw Ut(new Error("Parent node had no data"),"ERR_INVALID_NODE");const n=Xt.unmarshal(r.Data);return"hamt-sharded-directory"===n.type?(qL(`Removing ${t.name} from sharded directory`),GL(e,{...t,parent:r})):(qL(`Removing link ${t.name} regular directory`),HL(e,{...t,parent:r}))}const HL=async(e,t)=>{t.parent.Links=t.parent.Links.filter((e=>e.Name!==t.name));const r=await Rr(t.parent),n=await e.hashers.getHasher(t.hashAlg),i=await n.digest(r),s=Zt.k.create(t.cidVersion,Cr,i);return await e.repo.blocks.put(s,r),qL(`Updated regular directory ${s}`),{node:t.parent,cid:s}},GL=async(e,t)=>{const{rootBucket:r,path:n}=await gL(e,t.name,t.parent);await r.del(t.name);const{node:i}=await WL(e,n,t.name,t);return hL(e,i.Links,r,t)},WL=async(e,t,r,n)=>{const i=t.pop();if(!i)throw Ut(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:s,prefix:o,node:a}=i;if(!a)throw Ut(new Error("Could not find parent"),"EINVALIDPARENT");const c=a.Links.find((e=>(e.Name||"").substring(0,2)===o));if(!c)throw Ut(new Error(`No link found with prefix ${o} for file ${r}`),"ERR_NOT_FOUND");if(c.Name===`${o}${r}`){qL(`Removing existing link ${c.Name}`);const t=a.Links.filter((e=>e.Name!==c.Name));return await s.del(r),hL(e,t,s,n)}qL(`Descending into sub-shard ${c.Name} for ${o}${r}`);const u=await WL(e,t,r,n);let l=u.cid,h=u.size,d=o;if(1===u.node.Links.length){qL(`Removing subshard for ${o}`);const e=u.node.Links[0];d=`${o}${(e.Name||"").substring(2)}`,l=e.Hash,h=e.Tsize||0}return qL(`Updating shard ${o} with name ${d}`),QL(e,s,a,o,d,h,l,n)},QL=(e,t,r,n,i,s,o,a)=>{const c=r.Links.filter((e=>e.Name!==n));return c.push({Name:i,Tsize:s,Hash:o}),hL(e,c,t,a)},YL=gt.bind({ignoreUndefined:!0}),JL={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function XL(e){async function t(t,r={}){const n=YL(JL,r);Array.isArray(t)||(t=[t]);const i=await Promise.all(t.map((t=>QB(e,t,n))));if(!i.length)throw Ut(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");i.forEach((e=>{if("/"===e.path)throw Ut(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const s of i)await ZL(e,s.path,n)}return qf(t)}const ZL=async(e,t,r)=>{const n=await QB(e,t,r),i=await rL(e,n.mfsPath),s=i[i.length-1];i.pop();const o=i[i.length-1];if(!o)throw Ut(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===s.type&&!r.recursive)throw Ut(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:a}=await KL(e,{parentCid:o.cid,name:s.name,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold});o.cid=a;const c=await TL(e,i,r);await RL(e,c,r)},eM=gt.bind({ignoreUndefined:!0}),tM=Mt("ipfs:mfs:touch"),rM={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function nM(e,t,r){let n=0;return(e.includes("x")||e.includes("X")&&(r||1&t||8&t||64&t))&&(n+=1),e.includes("w")&&(n+=2),e.includes("r")&&(n+=4),n}function iM(e,t){let r=0;return e.includes("u")&&(r+=t<<6),e.includes("g")&&(r+=t<<3),e.includes("o")&&(r+=t),r}function sM(e,t,r){return t.includes("t")&&(r+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(r+=parseInt("4000",8)),e.includes("g")&&(r+=parseInt("2000",8))),r}function oM(e,t,r){t||(t=0);const n=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error(`Invalid file mode: ${e}`);let[,i,s,o]=n;"a"!==i&&i||(i="ugo");let a=nM(o,t,r);return a=iM(i,a),a=sM(i,o,a),"="===s?(i.includes("u")&&(t&=parseInt("7077",8),t|=a),i.includes("g")&&(t&=parseInt("7707",8),t|=a),i.includes("o")&&(t&=parseInt("7770",8),t|=a),t):"+"===s?a|t:"-"===s?a^t:t}function aM(e,t){if(e instanceof String||"string"===typeof e){const r=`${e}`;e=r.match(/^\d+$/g)?parseInt(r,8):0+r.split(",").reduce(((e,r)=>oM(r,e,t.isDirectory())),t.mode||0)}return e}function cM(e){async function t(t,r,n={}){const i=eM(rM,n);tM(`Fetching stats for ${t}`);const{cid:s,mfsDirectory:o,name:a}=await QB(e,t,i);if(s.code!==Cr)throw Ut(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(i.recursive){const n=await W_((async function*(){for await(const n of WI(s,e.repo.blocks)){if("file"!==n.type&&"directory"!==n.type)throw Ut(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");n.unixfs.mode=aM(r,n.unixfs);const e=Ar({Data:n.unixfs.marshal(),Links:n.node.Links});yield{path:n.path,content:e}}}),(t=>Zk(t,e.repo.blocks,{...i,pin:!1,dagBuilder:async function*(e,t,r){for await(const n of e)yield async function(){const e=n.content,i=Rr(e),s=await nL(i,t,r);if(!e.Data)throw Ut(new Error(`${s} had no data`),"ERR_INVALID_NODE");const o=Xt.unmarshal(e.Data);return{cid:s,size:i.length,path:n.path,unixfs:o}}}})),(e=>Sm(e)));if(!n)throw Ut(new Error(`Could not chmod ${t}`),"ERR_COULD_NOT_CHMOD");return await XL(e)(t,i),void await FL(e)(`/ipfs/${n.cid}`,t,i)}const c=await e.repo.blocks.get(s),u=Pr(c);if(!u.Data)throw Ut(new Error(`${s} had no data`),"ERR_INVALID_NODE");const l=Xt.unmarshal(u.Data);l.mode=aM(r,l);const h=Rr({Data:l.marshal(),Links:u.Links}),d=i.hashAlg||rM.hashAlg,f=await e.hashers.getHasher(d),p=await f.digest(h),y=Zt.k.create(i.cidVersion,Cr,p);i.flush&&await e.repo.blocks.put(y,h);const g=await rL(e,o),m=g[g.length-1],w=Zt.k.decode(m.cid.bytes),v=await e.repo.blocks.get(w),b=Pr(v),E=await vL(e,{parent:b,name:a,cid:y,size:h.length,flush:i.flush,hashAlg:d,cidVersion:s.version,shardSplitThreshold:1/0});m.cid=E.cid;const _=await TL(e,g,i);await RL(e,_,i)}return qf(t)}const uM=gt.bind({ignoreUndefined:!0}),lM={};function hM(e){async function t(t,r={}){r=uM(lM,r);const{cid:n}=await ZB(e)(t,r);return n}return qf(t)}const dM=gt.bind({ignoreUndefined:!0}),fM={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function pM(e){async function t(t,r,n={}){const i=dM(fM,n);await FL(e)(t,r,i),await XL(e)(t,{...i,recursive:!0})}return qf(t)}const yM=gt.bind({ignoreUndefined:!0}),gM=Mt("ipfs:mfs:touch"),mM={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function wM(e){async function t(t,r={}){const n=yM(mM,r);n.mtime=n.mtime||new Date,gM(`Touching ${t} mtime: ${n.mtime}`);const{cid:i,mfsDirectory:s,name:o,exists:a}=await QB(e,t,n),c=r.hashAlg||mM.hashAlg,u=await e.hashers.getHasher(c);let l,h,d=n.cidVersion;if(a){if(i.code!==Cr)throw Ut(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");d=i.version;const r=await e.repo.blocks.get(i),s=Pr(r);if(!s.Data)throw Ut(new Error(`${t} had no data`),"ERR_INVALID_NODE");const o=Xt.unmarshal(s.Data);o.mtime=n.mtime,l=Rr({Data:o.marshal(),Links:s.Links});const a=await u.digest(l);h=Zt.k.create(n.cidVersion,Cr,a),n.flush&&await e.repo.blocks.put(h,l)}else{const t=new Xt({type:"file",mtime:n.mtime});l=Rr({Data:t.marshal(),Links:[]});const r=await u.digest(l);h=Zt.k.create(n.cidVersion,Cr,r),n.flush&&await e.repo.blocks.put(h,l)}const f=await rL(e,s),p=f[f.length-1],y=p.cid,g=await e.repo.blocks.get(y),m=Pr(g),w=await vL(e,{parent:m,name:o,cid:h,size:l.length,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:d});p.cid=w.cid;const v=await TL(e,f,n);await RL(e,v,n)}return qf(t)}const vM=gt.bind({ignoreUndefined:!0}),bM={offset:0,length:1/0};function EM(e){function t(t,r={}){return r=vM(bM,r),{[Symbol.asyncIterator]:async function*(){const n=await QB(e,t,r),i=await GI(n.mfsPath,e.repo.blocks);if("file"!==i.type)throw Ut(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!i.content)throw Ut(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of i.content({offset:r.offset,length:r.length}))yield e}}}return qf(t)}const _M=Mt("ipfs:mfs:utils:to-async-iterator");function AM(e){if(!e)throw Ut(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(_M("Content was a string"),e=ia(e.toString())),e.length)return _M("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield e}};if(e[Symbol.asyncIterator])return _M("Content was an async iterator"),e;if(e[Symbol.iterator])return _M("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){_M("Content was an HTML5 Blob");let t=0;const r={next:()=>t>e.size?{done:!0}:new Promise(((r,n)=>{const i=e.slice(t,Yf);t+=Yf;const s=new global.FileReader,o=e=>{if(s.removeEventListener("loadend",o,!1),e.error)return n(e.error);r({done:!1,value:new Uint8Array(s.result)})};s.addEventListener("loadend",o),s.readAsArrayBuffer(i)}))};return{[Symbol.asyncIterator]:()=>r}}throw Ut(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}const SM=gt.bind({ignoreUndefined:!0}),kM=Mt("ipfs:mfs:write"),IM={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(e,t)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function TM(e){async function t(t,r,n={}){const i=SM(IM,n);let s,o,a;if(kM("Reading source, destination and parent"),await qB().readLock((async()=>{s=await AM(r),o=await QB(e,t,i),a=await QB(e,o.mfsDirectory,i)}))(),kM("Read source, destination and parent"),!i.parents&&!a.exists)throw Ut(new Error("directory does not exist"),"ERR_NO_EXIST");if(null==s)throw Ut(new Error("could not create source"),"ERR_NO_SOURCE");if(null==o)throw Ut(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!i.create&&!o.exists)throw Ut(new Error("file does not exist"),"ERR_NO_EXIST");if("file"!==o.entryType)throw Ut(new Error("not a file"),"ERR_NOT_A_FILE");return CM(e,t,s,o,i)}return qf(t)}const CM=async(e,t,r,n,i)=>{const s=await RM(e,r,n,i);await qB().writeLock((async()=>{const r=GB(t),n=r.pop();if(null==n)throw Ut(new Error("source does not exist"),"ERR_NO_EXIST");let o=!1;try{await ZB(e)(`/${r.join("/")}`,i),o=!0}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}o||await DL(e)(`/${r.join("/")}`,i);const a=await QB(e,t,i),c=await rL(e,a.mfsDirectory),u=c[c.length-1];if(!u)throw Ut(new Error("directory does not exist"),"ERR_NO_EXIST");if(!u.type||!u.type.includes("directory"))throw Ut(new Error(`cannot write to ${u.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const l=await e.repo.blocks.get(u.cid),h=Pr(l),d=await vL(e,{parent:h,name:n,cid:s.cid,size:s.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});u.cid=d.cid;const f=await TL(e,c,i);await RL(e,f,i)}))()},RM=async(e,t,r,n)=>{r.exists?kM(`Overwriting file ${r.cid} offset ${n.offset} length ${n.length}`):kM(`Writing file offset ${n.offset} length ${n.length}`);const i=[];if(n.offset>0)if(r.unixfs){if(kM(`Writing first ${n.offset} bytes of original file`),i.push((()=>r.content({offset:0,length:n.offset}))),r.unixfs.fileSize()<n.offset){const e=n.offset-r.unixfs.fileSize();kM(`Writing zeros for extra ${e} bytes`),i.push(xM(e))}}else kM(`Writing zeros for first ${n.offset} bytes`),i.push(xM(n.offset));i.push(PM(t,n.length));const s=NM(OM(i),(e=>{if(r.unixfs&&!n.truncate){const t=r.unixfs.fileSize();if(t>e)return kM(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});kM("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let o,a;void 0!==n.mode&&null!==n.mode?o=Yt(n.mode):r&&r.unixfs&&(o=r.unixfs.mode),null!=n.mtime?a=Jt(n.mtime):r&&r.unixfs&&(a=r.unixfs.mtime);const c=await e.hashers.getHasher(n.hashAlg),u=await Sm(Zk([{content:s,mode:o,mtime:a}],e.repo.blocks,{progress:n.progress,hasher:c,cidVersion:n.cidVersion,strategy:n.strategy,rawLeaves:n.rawLeaves,reduceSingleLeafToSelf:n.reduceSingleLeafToSelf,leafType:n.leafType}));if(!u)throw Ut(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return kM(`Wrote ${u.cid}`),{cid:u.cid,size:u.size}},PM=(e,t)=>async function*(){let r=0;for await(const n of e){if(r+=n.length,r>t)return void(yield n.slice(0,t-r));yield n}},xM=(e,t=Yf)=>{const r=new Uint8Array(t);async function*n(){while(1)yield r.slice()}return PM(n(),e)},OM=async function*(e){for(let t=0;t<e.length;t++)yield*e[t]()},NM=async function*(e,t){let r=0;for await(const n of e)r+=n.length,yield n;for await(const n of t(r))r+=n.length,yield n},DM=e=>{const t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};function BM(e){async function*t(t,r={}){const n=await QB(e,t,r),i=await GI(n.mfsPath,e.repo.blocks);"directory"!==i.type?yield DM(i):yield*z_(i.content(r),DM)}return qf(t)}const LM={stat:ZB},MM={chmod:cM,cp:FL,flush:hM,mkdir:DL,mv:pM,rm:XL,touch:wM},UM={write:TM,read:EM,ls:BM},FM=({options:e,mfs:t,operations:r,lock:n})=>{Object.keys(r).forEach((i=>{t[i]=n(r[i](e))}))},jM={repoOwner:!0,repo:null};function VM(e){const{repoOwner:t}=Object.assign({},jM||{},e),r=qB(t),n=e=>r.readLock(e),i=e=>r.writeLock(e),s={};return FM({options:e,mfs:s,operations:LM,lock:n}),FM({options:e,mfs:s,operations:MM,lock:i}),Object.keys(UM).forEach((t=>{s[t]=UM[t](e)})),s}function zM({repo:e,preload:t,hashers:r,options:n}){const i=VM({repo:e,repoOwner:!1!==n.repoOwner,hashers:r}),s=e=>{const r=(...r)=>{const n=r.filter((e=>xh(e)||kh(e)));if(n.length){const e=r[r.length-1];e&&!1!==e.preload&&n.forEach((e=>t(e)))}return e(...r)};return r};return{...i,chmod:i.chmod,cp:s(i.cp),mkdir:i.mkdir,stat:s(i.stat),rm:i.rm,read:s(i.read),touch:i.touch,write:i.write,mv:s(i.mv),flush:i.flush,ls:s((async function*(...e){for await(const t of i.ls(...e))yield{...t,size:t.size||0}}))}}function $M({keychain:e}){const t=(t,r)=>e.exportKey(t,r);return qf(t)}const qM="Ed25519",KM=2048;function HM({keychain:e}){const t=(t,r={type:qM,size:KM})=>e.createKey(t,r.type||qM,r.size||KM);return qf(t)}function GM({keychain:e}){const t=(t,r,n)=>e.importKey(t,r,n);return qf(t)}function WM({keychain:e}){const t=t=>e.findKeyByName(t);return qf(t)}function QM({keychain:e}){const t=()=>e.listKeys();return qf(t)}function YM({keychain:e}){const t=async(t,r)=>{const n=await e.renameKey(t,r);return{was:t,now:n.name,id:n.id,overwrite:!1}};return qf(t)}function JM({keychain:e}){const t=t=>e.removeKey(t);return qf(t)}class XM{constructor({keychain:e}){this.gen=HM({keychain:e}),this.list=QM({keychain:e}),this.rm=JM({keychain:e}),this.rename=YM({keychain:e}),this.export=$M({keychain:e}),this.import=GM({keychain:e}),this.info=WM({keychain:e})}}function ZM({repo:e,preload:t}){async function r(r,n={}){!1!==n.preload&&t(r);const i=await e.blocks.get(r,n);return Pr(i)}return qf(r)}function eU({repo:e,preload:t}){const r=ZM({repo:e,preload:t});async function n(e,t={}){const n=await r(e,t);return n.Data||new Uint8Array(0)}return qf(n)}function tU(e,t=[]){for(const n in e){const i=e[n];if("/"===n&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:Zt.k.parse(i)});continue}catch(r){}const s=Zt.k.asCID(i);s?t.push({Name:"",Tsize:0,Hash:s}):(Array.isArray(i)&&tU(i,t),i&&"object"===typeof i&&tU(i,t))}return t}function rU({repo:e,codecs:t}){async function r(r,n={}){const i=await t.getCodec(r.code),s=await e.blocks.get(r,n),o=i.decode(s);switch(r.code){case xo:return[];case Cr:return o.Links;case us:case Bs:return tU(o);default:throw new Error(`Cannot resolve links from codec ${r.code}`)}}return qf(r)}function nU({repo:e,preload:t}){async function r(r={}){let n;if(r.template){if("unixfs-dir"!==r.template)throw new Error("unknown template");n=new Xt({type:"directory"}).marshal()}const i=Rr({Data:n,Links:[]}),s=await Co.digest(i),o=Zt.k.createV0(s);return await e.blocks.put(o,i,{signal:r.signal}),!1!==r.preload&&t(o),o}return qf(r)}function iU({repo:e,preload:t}){async function r(r,n={}){const i=await e.gcLock.readLock();try{const s=Rr(r),o=await Co.digest(s),a=Zt.k.createV1(Cr,o);return await e.blocks.put(a,s,{signal:n.signal}),!1!==n.preload&&t(a),n.pin&&await e.pins.pinRecursively(a,{signal:n.signal}),a}finally{i()}}return qf(r)}function sU({repo:e,preload:t}){const r=ZM({repo:e,preload:t});async function n(e,t={}){const n=await r(e,t),i=Rr(n),s=i.length,o=n.Links.reduce(((e,t)=>e+(t.Tsize||0)),0);return{Hash:e,NumLinks:n.Links.length,BlockSize:s,LinksSize:s-(n.Data||[]).length,DataSize:(n.Data||[]).length,CumulativeSize:s+o}}return qf(n)}function oU({repo:e,preload:t}){const r=ZM({repo:e,preload:t}),n=iU({repo:e,preload:t});async function i(e,t,i={}){const s=await r(e,i);return n({...s,Links:s.Links.concat([t])},i)}return qf(i)}function aU({repo:e,preload:t}){const r=ZM({repo:e,preload:t}),n=iU({repo:e,preload:t});async function i(e,t,i={}){const s=await r(e,i),o=(0,nw.concat)([s.Data||[],t]);return n({...s,Data:o},i)}return qf(i)}function cU({repo:e,preload:t}){const r=ZM({repo:e,preload:t}),n=iU({repo:e,preload:t});async function i(e,t,i={}){const s=await r(e,i),o=("string"===typeof t?t:t.Name)||"";return s.Links=s.Links.filter((e=>e.Name!==o)),n(s,i)}return qf(i)}function uU({repo:e,preload:t}){const r=ZM({repo:e,preload:t}),n=iU({repo:e,preload:t});async function i(e,t,i={}){const s=await r(e,i);return n({...s,Data:t},i)}return qf(i)}class lU{constructor({repo:e,preload:t}){this.addLink=oU({repo:e,preload:t}),this.appendData=aU({repo:e,preload:t}),this.rmLink=cU({repo:e,preload:t}),this.setData=uU({repo:e,preload:t})}}class hU{constructor({repo:e,codecs:t,preload:r}){this.data=eU({repo:e,preload:r}),this.get=ZM({repo:e,preload:r}),this.links=rU({repo:e,codecs:t}),this.new=nU({repo:e,preload:r}),this.put=iU({repo:e,preload:r}),this.stat=sU({repo:e,preload:r}),this.patch=new lU({repo:e,preload:r})}}const dU=Mt("ipfs:repo:gc");function fU({repo:e,hashers:t}){async function*r(r={}){const n=Date.now();let i;try{i=await HB({repo:e,hashers:t},r),await e.pins.pinRecursively(i),yield*e.gc()}finally{i&&await e.pins.unpin(i)}dU(`Complete (${Date.now()-n}ms)`)}return qf(r)}function pU({repo:e}){async function t(t={}){const r=await e.stat();return{numObjects:BigInt(r.numObjects.toString()),repoSize:BigInt(r.repoSize.toString()),repoPath:r.repoPath,version:`${r.version}`,storageMax:BigInt(r.storageMax.toString())}}return qf(t)}const yU=12;function gU({repo:e}){async function t(t={}){try{await e._checkInitialized(t)}catch(nP){const t=[/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((t=>t.test(nP.message)));if(t)return yU;throw nP}return e.version.get()}return qf(t)}class mU{constructor({repo:e,hashers:t}){this.gc=fU({repo:e,hashers:t}),this.stat=pU({repo:e}),this.version=gU({repo:e}),this.setApiAddr=t=>e.apiAddr.set(t)}}function wU(e,t){let r;if(r=e.metrics?t.peer?e.metrics.forPeer(t.peer):t.proto?e.metrics.forProtocol(t.proto):e.metrics.getGlobal():void 0,!r)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};const n=r.getMovingAverages(),i=r.getSnapshot();return{totalIn:i.dataReceived,totalOut:i.dataSent,rateIn:n.dataReceived[6e4].movingAverage/60,rateOut:n.dataSent[6e4].movingAverage/60}}function vU({network:e}){const t=async function*(t={}){const{libp2p:r}=await e.use(t);if(!t.poll)return void(yield wU(r,t));const n=t.interval||1e3;let i,s=-1;try{if(s="string"===typeof n?zf(n)||-1:n,!s||s<0)throw new Error("invalid duration")}catch(nP){throw Ut(nP,"ERR_INVALID_POLL_INTERVAL")}try{while(1)yield wU(r,t),await new Promise((e=>{i=setTimeout(e,s)}))}finally{clearTimeout(i)}};return qf(t)}class bU{constructor({repo:e,network:t}){this.repo=pU({repo:e}),this.bw=vU({network:t}),this.bitswap=nS({network:t})}}var EU=_U;function _U(e,t,r){if(!e)return r;var n,i;if(Array.isArray(t)&&(n=t.slice(0)),"string"==typeof t&&(n=t.split(".")),"symbol"==typeof t&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");while(n.length){if(i=n.shift(),!e)return r;if(e=e[i],void 0===e)return r}return e}var AU=r(7285);const SU=wt("ipfs:repo:migrator:migration-8");function kU(e){return e.child?kU(e.child):e}function IU(e){try{const t=mo.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=Zt.k.decode(t).multihash.bytes,n=mo.base32.encode(r).slice(1).toUpperCase();return new Df(`/${n}`,!1)}catch(nP){return e}}function TU(e){try{const t=mo.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=fs.Jx(t),n=mo.base32.encode(Zt.k.createV1(xo,r).bytes).slice(1);return new Df(`/${n.toUpperCase()}`,!1)}catch{return e}}async function CU(e,t,r){const n=e.blocks;await n.open();const i=kU(n),s=await AU(i.queryKeys({filters:[e=>{const t=r(e);return t.toString()!==e.toString()}]}));try{let e=0;for await(const n of i.query({})){const o=r(n.key);o.toString()!==n.key.toString()&&(e+=1,SU(`Migrating Block from ${n.key} to ${o}`,await i.has(n.key)),await i.delete(n.key),await i.put(o,n.value),t(e/s*100,`Migrated Block from ${n.key} to ${o}`))}}finally{await n.close()}}const RU={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=(()=>{}))=>CU(e,t,IU),revert:(e,t=(()=>{}))=>CU(e,t,TU)},PU=Ft.Reader,xU=Ft.Writer,OU=(Ft.util,Ft.roots["default"]||(Ft.roots["default"]={})),NU=OU.ipfs=(()=>{const e={};return e.pin=function(){const e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=xU.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof PU||(e=PU.create(e));var r=void 0===t?e.len:e.pos+t,n=new OU.ipfs.pin.Set;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.version=e.uint32();break;case 2:n.fanout=e.uint32();break;case 3:n.seed=e.fixed32();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof OU.ipfs.pin.Set)return e;var t=new OU.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.version=0,r.fanout=0,r.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(r.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(r.seed=e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e}(),e}(),e})();var DU=r(1173);const BU=new Df("/local/pins"),LU=256,MU=8192,UU=Zt.k.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),FU={direct:"direct",recursive:"recursive"};function jU(e){return new Df(`/${mo.base32.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}function VU(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}const zU=NU.pin.Set;function $U(e){const t=e.Data;if(!t)throw new Error("No data present");const r=Wu.decode(t),n=Wu.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");const i=t.slice(n,r+n),s=zU.toObject(zU.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:t.slice(r+n)}}function qU(e,t){const r=new Uint8Array(4),n=new DataView(r.buffer);n.setUint32(0,e,!0);const i=ia(t.toString()),s=(0,nw.concat)([r,i],r.byteLength+i.byteLength);return DU(vh(s))}async function*KU(e,t){const r=$U(t);let n=0;for(const i of t.Links){if(n<r.header.fanout){const t=i.Hash;if(!UU.equals(t)){const r=await e.get(t),n=Pr(r);yield*KU(e,n)}}else yield i.Hash;n++}}async function*HU(e,t,r){const n=t.Links.find((e=>e.Name===r));if(!n)throw new Error("No link found with name "+r);const i=await e.get(n.Hash),s=Pr(i);yield*KU(e,s)}function GU(e,t){return r(t,0);async function r(t,n){const i=zU.encode({version:1,fanout:LU,seed:n}).finish(),s=Wu.encode(i.length),o=(0,nw.concat)([s,i]),a=[];for(let e=0;e<LU;e++)a.push({Name:"",Tsize:1,Hash:UU});if(t.length<=MU){const e=t.map((e=>({link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}))).sort(((e,t)=>VU(e.link.Hash.bytes,t.link.Hash.bytes))),r=a.concat(e.map((e=>e.link))),n=(0,nw.concat)([o,...e.map((e=>e.data))]);return{Data:n,Links:r}}{const e=t.reduce(((e,t)=>{const r=qU(n,t.key)%LU;return e[r]=r in e?e[r].concat([t]):[t],e}),[]);let i=0;for(const t of e){const e=await r(t,n+1);await c(e,i),i++}return{Data:o,Links:a}}async function c(t,r){const n=Rr(t),i=await Co.digest(n),s=Zt.k.createV0(i);await e.put(s,n);const o=t.Links.reduce(((e,t)=>e+(t.Tsize||0)),0)+n.length;a[r]={Name:"",Tsize:o,Hash:s}}}}async function WU(e,t,r){const n=await GU(e,r.map((e=>({key:e})))),i=Rr(n),s=await Co.digest(i),o=Zt.k.createV0(s);await e.put(o,i);const a=n.Links.reduce(((e,t)=>e+t.Tsize),0)+i.length;return{Name:t,Tsize:a,Hash:o}}async function QU(e,t,r,n){if(!await t.has(BU))return;const i=await t.get(BU),s=Zt.k.decode(i),o=await e.get(s),a=Pr(o);let c=0;const u=await AU(HU(e,a,FU.recursive))+await AU(HU(e,a,FU.direct));for await(const l of HU(e,a,FU.recursive)){c++;const e={depth:1/0};0!==l.version&&(e.version=l.version),l.code!==Cr&&(e.codec=l.code),await r.put(jU(l),Hi(e)),n(c/u*100,`Migrated recursive pin ${l}`)}for await(const l of HU(e,a,FU.direct)){c++;const e={depth:0};0!==l.version&&(e.version=l.version),l.code!==Cr&&(e.codec=l.code),await r.put(jU(l),Hi(e)),n(c/u*100,`Migrated direct pin ${l}`)}await e.delete(s),await t.delete(BU)}async function YU(e,t,r,n){const i=[],s=[];let o=0;const a=await AU(r.queryKeys({}));for await(const{key:d,value:f}of r.query({})){o++;const e=es(f),t=Zt.k.create(e.version||0,e.codec||Cr,fs.Jx(mo.base32.decode("b"+d.toString().toLowerCase().split("/").pop())));0===e.depth?(n(o/a*100,`Reverted direct pin ${t}`),s.push(t)):(n(o/a*100,`Reverted recursive pin ${t}`),i.push(t))}n(100,"Updating pin root");const c={Links:[await WU(e,FU.direct,s),await WU(e,FU.recursive,i)]},u=Rr(c),l=await Co.digest(u),h=Zt.k.createV0(l);await e.put(h,u),await t.put(BU,h.bytes)}async function JU(e,t,r){const n=e.blocks,i=e.datastore,s=e.pins;await n.open(),await i.open(),await s.open();try{await r(n,i,s,t)}finally{await s.close(),await i.close(),await n.close()}}const XU={version:9,description:"Migrates pins to datastore",migrate:(e,t=(()=>{}))=>JU(e,t,QU),revert:(e,t=(()=>{}))=>JU(e,t,YU)},ZU=new Df("/config"),eF=new Df("/version");function tF(e){let t=e;while(t.db||t.child)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}async function rF(e,t,r){const n=await t(e);if(n)return n;const i=tF(r);return!!i&&new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{t(Boolean(n.result))}}))}async function nF(e,t,r,n){if(await r(e))return t(e);const i=tF(n);if(!i)throw Um();return new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{if(n.result)return t(n.result);r(Um())}}))}function iF(e){const t=e.get.bind(e),r=e.has.bind(e);return e.get=n=>nF(n,t,r,e),e.has=t=>rF(t,r,e),e}function sF(e){return{...e,root:iF(e.root),datastore:iF(e.datastore),pins:iF(e.pins),keys:iF(e.keys)}}async function oF(e,t,r=(()=>{})){const n=tF(t);if(!n)return void r(`${e} did not need an upgrade`);r(`Upgrading ${e}`);const i=(e,t)=>[{type:"del",key:e},{type:"put",key:ia(e),value:t}];await hF(n,i)}async function aF(e,t,r=(()=>{})){const n=tF(t);if(!n)return void r(`${e} did not need a downgrade`);r(`Downgrading ${e}`);const i=(e,t)=>[{type:"del",key:e},{type:"put",key:vh(e),value:t}];await hF(n,i)}function cF(e){return e.child?cF(e.child):e}async function uF(e,t,r){const n=Object.entries(e).map((([e,t])=>({key:e,backend:cF(t)}))).filter((({key:e,backend:t})=>"LevelDatastore"===t.constructor.name)).map((({key:e,backend:t})=>({name:e,store:t})));t(0,`Migrating ${n.length} dbs`);let i=0;const s=e=>{t(Math.round(i/n.length*100),e)};for(const{name:o,store:a}of n){await a.open();try{await r(o,a,s)}finally{i++,await a.close()}}t(100,`Migrated ${n.length} dbs`)}const lF={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=(()=>{}))=>uF(e,t,oF),revert:(e,t=(()=>{}))=>uF(e,t,aF)};function hF(e,t){function r(t,r){const n=e.store("readwrite"),i=n.transaction;let s,o=0;function a(){const e=t[o++],r=e.key;let c;try{c="del"===e.type?n.delete(r):n.put(e.value,r)}catch(nP){return s=nP,void i.abort()}o<t.length&&(c.onsuccess=a)}i.onabort=()=>r(s||i.error||new Error("aborted by user")),i.oncomplete=()=>r(),a()}return new Promise(((n,i)=>{const s=e.iterator(),o=e=>e;function a(){const e=(e,o,c)=>{if(e||void 0===o){const e=e=>{e?i(e):n()};s.end(e)}else r(t(o,c),a)};s.next(e)}s._deserializeKey=s._deserializeValue=o,a()}))}const dF=new Df("/local/filesroot");async function fF(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(dF)){const t=await e.root.get(dF);await e.datastore.put(dF,t),await e.root.delete(dF)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")}async function pF(e,t=(()=>{})){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(dF)){const t=await e.datastore.get(dF);await e.root.put(dF,t),await e.datastore.delete(dF)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}const yF={version:11,description:"Store mfs root in the datastore",migrate:fF,revert:pF},gF=Ft.Reader,mF=Ft.Writer,wF=Ft.util,vF=Ft.roots["default"]||(Ft.roots["default"]={}),bF=vF.Protocols=(()=>{function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocols=wF.emptyArray,e.encode=function(e,t){if(t||(t=mF.create()),null!=e.protocols&&e.protocols.length)for(var r=0;r<e.protocols.length;++r)t.uint32(10).string(e.protocols[r]);return t},e.decode=function(e,t){e instanceof gF||(e=gF.create(e));var r=void 0===t?e.len:e.pos+t,n=new vF.Protocols;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof vF.Protocols)return e;var t=new vF.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.protocols=[]),e.protocols&&e.protocols.length){r.protocols=[];for(var n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),EF=Ft.Reader,_F=Ft.Writer,AF=Ft.util,SF=Ft.roots["default"]||(Ft.roots["default"]={}),kF=SF.Addresses=(()=>{function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addrs=AF.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=_F.create()),null!=e.addrs&&e.addrs.length)for(var r=0;r<e.addrs.length;++r)SF.Addresses.Address.encode(e.addrs[r],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&SF.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof EF||(e=EF.create(e));var r=void 0===t?e.len:e.pos+t,n=new SF.Addresses;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(SF.Addresses.Address.decode(e,e.uint32()));break;case 2:n.certifiedRecord=SF.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof SF.Addresses)return e;var t=new SF.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var r=0;r<e.addrs.length;++r){if("object"!==typeof e.addrs[r])throw TypeError(".Addresses.addrs: object expected");t.addrs[r]=SF.Addresses.Address.fromObject(e.addrs[r])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=SF.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addrs=[]),t.defaults&&(r.certifiedRecord=null),e.addrs&&e.addrs.length){r.addrs=[];for(var n=0;n<e.addrs.length;++n)r.addrs[n]=SF.Addresses.Address.toObject(e.addrs[n],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(r.certifiedRecord=SF.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.multiaddr=AF.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:AF.oneOfGetter(t=["isCertified"]),set:AF.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=_F.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof EF||(e=EF.create(e));var r=void 0===t?e.len:e.pos+t,n=new SF.Addresses.Address;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof SF.Addresses.Address)return e;var t=new SF.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?AF.base64.decode(e.multiaddr,t.multiaddr=AF.newBuffer(AF.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=AF.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?AF.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=AF.Long?AF.Long.fromBits(0,0,!0):0,e.prototype.raw=AF.newBuffer([]),e.encode=function(e,t){return t||(t=_F.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof EF||(e=EF.create(e));var r=void 0===t?e.len:e.pos+t,n=new SF.Addresses.CertifiedRecord;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.raw=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof SF.Addresses.CertifiedRecord)return e;var t=new SF.Addresses.CertifiedRecord;return null!=e.seq&&(AF.Long?(t.seq=AF.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new AF.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?AF.base64.decode(e.raw,t.raw=AF.newBuffer(AF.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(AF.Long){var n=new AF.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;t.bytes===String?r.raw="":(r.raw=[],t.bytes!==Array&&(r.raw=AF.newBuffer(r.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?AF.Long.prototype.toString.call(e.seq):t.longs===Number?new AF.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(r.raw=t.bytes===String?AF.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e}(),e})(),IF=Ft.Reader,TF=Ft.Writer,CF=Ft.util,RF=Ft.roots["default"]||(Ft.roots["default"]={}),PF=RF.Peer=(()=>{function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.addresses=CF.emptyArray,e.prototype.protocols=CF.emptyArray,e.prototype.metadata=CF.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:CF.oneOfGetter(t=["pubKey"]),set:CF.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:CF.oneOfGetter(t=["peerRecordEnvelope"]),set:CF.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=TF.create()),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)RF.Address.encode(e.addresses[r],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(r=0;r<e.protocols.length;++r)t.uint32(18).string(e.protocols[r]);if(null!=e.metadata&&e.metadata.length)for(r=0;r<e.metadata.length;++r)RF.Metadata.encode(e.metadata[r],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof IF||(e=IF.create(e));var r=void 0===t?e.len:e.pos+t,n=new RF.Peer;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(RF.Address.decode(e,e.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(RF.Metadata.decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof RF.Peer)return e;var t=new RF.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".Peer.addresses: object expected");t.addresses[r]=RF.Address.fromObject(e.addresses[r])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(r=0;r<e.metadata.length;++r){if("object"!==typeof e.metadata[r])throw TypeError(".Peer.metadata: object expected");t.metadata[r]=RF.Metadata.fromObject(e.metadata[r])}}return null!=e.pubKey&&("string"===typeof e.pubKey?CF.base64.decode(e.pubKey,t.pubKey=CF.newBuffer(CF.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?CF.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=CF.newBuffer(CF.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),e.addresses&&e.addresses.length){r.addresses=[];for(var n=0;n<e.addresses.length;++n)r.addresses[n]=RF.Address.toObject(e.addresses[n],t)}if(e.protocols&&e.protocols.length){r.protocols=[];for(n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}if(e.metadata&&e.metadata.length){r.metadata=[];for(n=0;n<e.metadata.length;++n)r.metadata[n]=RF.Metadata.toObject(e.metadata[n],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(r.pubKey=t.bytes===String?CF.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(r._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=t.bytes===String?CF.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),xF=(RF.Address=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.multiaddr=CF.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:CF.oneOfGetter(t=["isCertified"]),set:CF.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=TF.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof IF||(e=IF.create(e));var r=void 0===t?e.len:e.pos+t,n=new RF.Address;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof RF.Address)return e;var t=new RF.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?CF.base64.decode(e.multiaddr,t.multiaddr=CF.newBuffer(CF.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=CF.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?CF.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),RF.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=CF.newBuffer([]),e.encode=function(e,t){return t||(t=TF.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof IF||(e=IF.create(e));var r=void 0===t?e.len:e.pos+t,n=new RF.Metadata;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof RF.Metadata)return e;var t=new RF.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?CF.base64.decode(e.value,t.value=CF.newBuffer(CF.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=CF.newBuffer(r.value)))),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?CF.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),Ft.Reader),OF=Ft.Writer,NF=Ft.util,DF=Ft.roots["default"]||(Ft.roots["default"]={}),BF=DF.Envelope=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.publicKey=NF.newBuffer([]),e.prototype.payloadType=NF.newBuffer([]),e.prototype.payload=NF.newBuffer([]),e.prototype.signature=NF.newBuffer([]),e.encode=function(e,t){return t||(t=OF.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof xF||(e=xF.create(e));var r=void 0===t?e.len:e.pos+t,n=new DF.Envelope;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof DF.Envelope)return e;var t=new DF.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?NF.base64.decode(e.publicKey,t.publicKey=NF.newBuffer(NF.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?NF.base64.decode(e.payloadType,t.payloadType=NF.newBuffer(NF.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?NF.base64.decode(e.payload,t.payload=NF.newBuffer(NF.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?NF.base64.decode(e.signature,t.signature=NF.newBuffer(NF.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.publicKey="":(r.publicKey=[],t.bytes!==Array&&(r.publicKey=NF.newBuffer(r.publicKey))),t.bytes===String?r.payloadType="":(r.payloadType=[],t.bytes!==Array&&(r.payloadType=NF.newBuffer(r.payloadType))),t.bytes===String?r.payload="":(r.payload=[],t.bytes!==Array&&(r.payload=NF.newBuffer(r.payload))),t.bytes===String?r.signature="":(r.signature=[],t.bytes!==Array&&(r.signature=NF.newBuffer(r.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(r.publicKey=t.bytes===String?NF.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(r.payloadType=t.bytes===String?NF.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(r.payload=t.bytes===String?NF.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?NF.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e})(),LF=Ft.Reader,MF=Ft.Writer,UF=Ft.util,FF=Ft.roots["default"]||(Ft.roots["default"]={}),jF=FF.PeerRecord=(()=>{function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.peerId=UF.newBuffer([]),e.prototype.seq=UF.Long?UF.Long.fromBits(0,0,!0):0,e.prototype.addresses=UF.emptyArray,e.encode=function(e,t){if(t||(t=MF.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)FF.PeerRecord.AddressInfo.encode(e.addresses[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof LF||(e=LF.create(e));var r=void 0===t?e.len:e.pos+t,n=new FF.PeerRecord;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(FF.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof FF.PeerRecord)return e;var t=new FF.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?UF.base64.decode(e.peerId,t.peerId=UF.newBuffer(UF.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(UF.Long?(t.seq=UF.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new UF.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[r]=FF.PeerRecord.AddressInfo.fromObject(e.addresses[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[]),t.defaults)if(t.bytes===String?r.peerId="":(r.peerId=[],t.bytes!==Array&&(r.peerId=UF.newBuffer(r.peerId))),UF.Long){var n=new UF.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(r.peerId=t.bytes===String?UF.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?UF.Long.prototype.toString.call(e.seq):t.longs===Number?new UF.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){r.addresses=[];for(var i=0;i<e.addresses.length;++i)r.addresses[i]=FF.PeerRecord.AddressInfo.toObject(e.addresses[i],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.multiaddr=UF.newBuffer([]),e.encode=function(e,t){return t||(t=MF.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof LF||(e=LF.create(e));var r=void 0===t?e.len:e.pos+t,n=new FF.PeerRecord.AddressInfo;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.multiaddr=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof FF.PeerRecord.AddressInfo)return e;var t=new FF.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?UF.base64.decode(e.multiaddr,t.multiaddr=UF.newBuffer(UF.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=UF.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?UF.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e}(),e})();async function VF(e,t=(()=>{})){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();const r={},n=[];for await(const{key:i,value:s}of e.datastore.query({prefix:"/peers"})){n.push(i);const e=i.toString(),[t,o,a,c,u]=e.split("/");if("peers"===o&&(["protos","addrs","metadata","keys"].includes(a)&&c))if(r[c]=r[c]||{addresses:[],protocols:[],metadata:[]},"protos"===a){const e=bF.decode(s);r[c].protocols=e.protocols.sort()}else if("addrs"===a){const e=kF.decode(s);r[c].addresses=e.addrs.sort(((e,t)=>Kl(e.multiaddr).toString().localeCompare(Kl(t.multiaddr).toString()))),e.certifiedRecord&&e.certifiedRecord.raw&&(r[c].peerRecordEnvelope=e.certifiedRecord.raw)}else"metadata"===a?r[c].metadata.push({key:u,value:s}):"keys"===a&&(r[c].pubKey=s)}t(33,"Read peer data from store");for(const i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(const i of Object.keys(r)){const t=r[i];t.metadata=t.metadata.sort(((e,t)=>e.key.localeCompare(t.key)));const n=PF.encode(t).finish();await e.datastore.put(new Df(`/peers/${i}`),n)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")}async function zF(e,t=(()=>{})){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();const r={},n=[];for await(const{key:i,value:s}of e.datastore.query({prefix:"/peers"})){n.push(i);const e=i.toString(),[t,o,a]=e.split("/");r[a]=PF.decode(s)}t(33,"Read peer data from store");for(const i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(const[i,s]of Object.entries(r)){if(s.protocols&&s.protocols.length>0&&await e.datastore.put(new Df(`/peers/protos/${i}`),bF.encode({protocols:s.protocols}).finish()),s.addresses&&s.addresses.length>0){const t=s.peerRecordEnvelope;let r;if(t){const e=BF.decode(t),n=jF.decode(e.payload);r={raw:t,seq:n.seq}}await e.datastore.put(new Df(`/peers/addrs/${i}`),kF.encode({addrs:s.addresses,certifiedRecord:r}).finish())}if(s.metadata&&s.metadata.length>0)for(const{key:t,value:r}of s.metadata)await e.datastore.put(new Df(`/peers/metadata/${i}/${t}`),r);s.pubKey&&await e.datastore.put(new Df(`/peers/keys/${i}`),s.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}Ft.util.Long=void 0,Ft.configure();const $F={version:12,description:"Store each peerstore peer under a single datastore key",migrate:VF,revert:zF},qF={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0};var KF=[Object.assign({version:1},qF),Object.assign({version:2},qF),Object.assign({version:3},qF),Object.assign({version:4},qF),Object.assign({version:5},qF),Object.assign({version:6},qF),Object.assign({version:7},qF),RU,XU,lF,yF,$F];class HF extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=HF.code,this.message=e}}HF.code="ERR_NON_REVERSIBLE_MIGRATION";class GF extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=GF.code,this.message=e}}GF.code="ERR_NOT_INITIALIZED_REPO";class WF extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=WF.code,this.message=e}}WF.code="ERR_REQUIRED_PARAMETER";class QF extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=QF.code,this.message=e}}QF.code="ERR_INVALID_VALUE";class YF extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=YF.code,this.message=e}}YF.code="ERR_MISSING_REPO_OPTIONS";const JF=wt("ipfs:repo:migrator:repo:init");async function XF(e){if(!e)throw new YF("Please pass repo options when trying to open a repo");const t=e.root;try{await t.open();const e=await t.has(eF),r=await t.has(ZU);return!(!e||!r)||(JF(`Version entry present: ${e}`),JF(`Config entry present: ${r}`),!1)}catch(r){return JF("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(void 0!==t)try{await t.close()}catch{}}}async function ZF(e){if(!await XF(e))throw new GF("Repo is not initialized!");const t=e.root;await t.open();try{return parseInt(vh(await t.get(eF)))}finally{await t.close()}}async function ej(e,t){if(!t)throw new YF("Please pass repo options when trying to open a repo");const r=t.root;await r.open(),await r.put(eF,ia(String(e))),await r.close()}const tj=wt("ipfs:repo:migrator");function rj(e){return e=e||KF,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}async function nj(e,t,r,n,i={}){const s=i.ignoreLock??!1,o=i.onProgress,a=i.isDryRun??!1,c=i.migrations??KF;if(!e)throw new oj.RequiredParameterError("Path argument is required!");if(!r)throw new oj.RequiredParameterError("repoOptions argument is required!");if(!n)throw new oj.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new oj.InvalidValueError("Version has to be positive integer!");t=sF(t);const u=await ZF(t);if(u===n)return void tj("Nothing to migrate.");if(u>n)throw new oj.InvalidValueError(`Current repo's version (${u}) is higher then toVersion (${n}), you probably wanted to revert it?`);let l;sj(c,u,n),a||s||(l=await r.repoLock.lock(e));try{for(const e of c){if(void 0!==n&&e.version>n)break;if(!(e.version<=u)){tj(`Migrating version ${e.version}`);try{if(!a){let r=()=>{};o&&(r=(t,r)=>o(e.version,t.toFixed(2),r)),await e.migrate(t,r)}}catch(h){const r=e.version-1;throw tj(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${r}`),await ej(r,t),new Error(`During migration to version ${e.version} exception was raised: ${h.stack||h.message||h}`)}tj(`Migrating to version ${e.version} finished`)}}a||await ej(n||rj(c),t),tj("Repo successfully migrated",void 0!==n?`to version ${n}!`:"to latest version!")}finally{a||s||!l||await l.close()}}async function ij(e,t,r,n,i={}){const s=i.ignoreLock??!1,o=i.onProgress,a=i.isDryRun??!1,c=i.migrations??KF;if(!e)throw new oj.RequiredParameterError("Path argument is required!");if(!r)throw new oj.RequiredParameterError("repoOptions argument is required!");if(!n)throw new oj.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new oj.InvalidValueError("Version has to be positive integer!");t=sF(t);const u=await ZF(t);if(u===n)return void tj("Nothing to revert.");if(u<n)throw new oj.InvalidValueError(`Current repo's version (${u}) is lower then toVersion (${n}), you probably wanted to migrate it?`);let l;sj(c,n,u,!0),a||s||(l=await r.repoLock.lock(e)),tj(`Reverting from version ${u} to ${n}`);try{const e=c.slice().reverse();for(const r of e){if(r.version<=n)break;if(!(r.version>u)){tj(`Reverting migration version ${r.version}`);try{if(!a){let e=()=>{};o&&(e=(e,t)=>o(r.version,e.toFixed(2),t)),await r.revert(t,e)}}catch(h){const e=r.version;throw tj(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${e}`),await ej(e,t),h.message=`During reversion to version ${r.version} exception was raised: ${h.message}`,h}tj(`Reverting to version ${r.version} finished`)}}a||await ej(n,t),tj(`All migrations successfully reverted to version ${n}!`)}finally{a||s||!l||await l.close()}}function sj(e,t,r,n=!1){let i=0;for(const s of e){if(s.version>r)break;if(s.version>t){if(n&&!s.revert)throw new oj.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${s.version} is not reversible. Cancelling reversion.`);i++}}if(i!==r-t)throw new oj.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${r}`)}const oj=le;var aj=r(6827);class cj extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=cj.code}}cj.code="ERR_LOCK_EXISTS";class uj extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=uj.code}}uj.code="ERR_NOT_FOUND";class lj extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=lj.code}}lj.code="ERR_INVALID_REPO_VERSION";const hj="ERR_REPO_NOT_INITIALIZED",dj="ERR_REPO_ALREADY_OPEN",fj="ERR_REPO_ALREADY_CLOSED";async function pj(e,t,r){const n=await t(e);if(n)return n;const i=gj(r);return!!i&&new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{t(Boolean(n.result))}}))}async function yj(e,t,r,n){if(await r(e))return t(e);const i=gj(n);if(!i)throw new uj;return new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{if(n.result)return t(n.result);r(new uj)}}))}function gj(e){let t=e;while(t.db||t.child)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}const mj=wt("ipfs:repo:version"),wj=new Df("version");function vj(e){return{async exists(){return pj(wj,e.has.bind(e),e)},async get(){const t=await yj(wj,e.get.bind(e),e.has.bind(e),e);return parseInt(vh(t),10)},set(t){return e.put(wj,ia(String(t)))},async check(e){const t=await this.get();mj("comparing version: %s and %s",t,e);const r=6===t&&7===e||6===e&&7===t;return t===e||r}}}const bj=Wp["default"]?Wp["default"]:Wp,Ej=new Df("config");function _j(e){const t=new bj({concurrency:1}),r={async getAll(t={}){const r=await yj(Ej,e.get.bind(e),e.has.bind(e),e);return JSON.parse(vh(r))},async get(e,t={}){if(null==e)throw new uj(`Key ${e} does not exist in config`);const r=await this.getAll(t),n=EU(r,e);if(void 0===n)throw new uj(`Key ${e} does not exist in config`);return n},set(e,r,i={}){if("string"!==typeof e&&!(e instanceof String))throw Ut(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===r||r instanceof Uint8Array)throw Ut(new Error("Invalid value type: "+typeof r),"ERR_INVALID_VALUE");return t.add((()=>n({key:e,value:r},i.signal)))},replace(e,r={}){if(!e||e instanceof Uint8Array)throw Ut(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((()=>n({key:void 0,value:e},r.signal)))},async exists(){return pj(Ej,e.has.bind(e),e)}};return r;async function n(e,t){if(t&&t.aborted)return;const n=e.key,s=e.value;if(n){const e=await r.getAll();return"object"===typeof e&&null!==e&&tD(e,n,s),i(e)}return i(s)}function i(t){const r=ia(JSON.stringify(t,null,2));return e.put(Ej,r)}}function Aj(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Sj(e,t={}){if(!Aj(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");const{deep:r,compare:n}=t,i=[],s=[],o=e=>{const t=i.indexOf(e);if(-1!==t)return s[t];const r=[];return i.push(e),s.push(r),r.push(...e.map((e=>Array.isArray(e)?o(e):Aj(e)?a(e):e))),r},a=e=>{const t=i.indexOf(e);if(-1!==t)return s[t];const c={},u=Object.keys(e).sort(n);i.push(e),s.push(c);for(const n of u){const t=e[n];let i;i=r&&Array.isArray(t)?o(t):r&&Aj(t)?a(t):t,Object.defineProperty(c,n,{...Object.getOwnPropertyDescriptor(e,n),value:i})}return c};return Array.isArray(e)?r?o(e):e.slice():a(e)}const kj=new Df("datastore_spec");function Ij(e){return{exists(){return e.has(kj)},async get(){const t=await e.get(kj);return JSON.parse(vh(t))},async set(t){return e.put(kj,ia(JSON.stringify(Sj(t,{deep:!0}))))}}}const Tj=new Df("api");function Cj(e){return{async get(){const t=await e.get(Tj);return t&&t.toString()},set(t){return e.put(Tj,ia(t.toString()))},delete(){return e.delete(Tj)}}}r(4633);function Rj(e){return{open(){return e.open()},close(){return e.close()},query(t,r){return e.query(t,r)},queryKeys(t,r){return e.queryKeys(t,r)},async get(t,r){const n=Pj(t);return n.isIdentity?Promise.resolve(n.digest):e.get(t,r)},async*getMany(e,t){for await(const r of e)yield this.get(r,t)},async put(t,r,n){const{isIdentity:i}=Pj(t);i||await e.put(t,r,n)},async*putMany(t,r){const n=O_({objectMode:!0}),i=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout;i((async()=>{try{await I_(e.putMany(async function*(){for await(const{key:e,value:r}of t)Pj(e).isIdentity||(yield{key:e,value:r}),n.push({key:e,value:r})}())),n.end()}catch(nP){n.end(nP)}})),yield*n},has(t,r){const{isIdentity:n}=Pj(t);return n?Promise.resolve(!0):e.has(t,r)},delete(t,r){const{isIdentity:n}=Pj(t);return n?Promise.resolve():e.delete(t,r)},deleteMany(t,r){return e.deleteMany(T_(t,(e=>!Pj(e).isIdentity)),r)},batch(){const t=e.batch();return{put(e,r){const{isIdentity:n}=Pj(e);n||t.put(e,r)},delete(e){const{isIdentity:r}=Pj(e);r||t.delete(e)},commit:e=>t.commit(e)}}}}function Pj(e){const t=Zt.k.asCID(e);if(null==t)throw Ut(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==uo.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}const xj=wt("ipfs:repo:lock:memory"),Oj="repo.lock",Nj={};async function Dj(e){const t=e+"/"+Oj;if(xj("locking %s",t),!0===Nj[t])throw new cj(`Lock already being held for file: ${t}`);Nj[t]=!0;const r={async close(){Nj[t]&&delete Nj[t]}};return r}async function Bj(e){const t=e+"/"+Oj;return xj(`checking lock: ${t}`),Boolean(Nj[t])}const Lj={lock:Dj,locked:Bj};var Mj={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Lj},Uj={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function Fj(e){const t=Zt.k.asCID(e);if(null==t)throw Ut(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=mo.base32.encode(t.multihash.bytes);return new Df("/"+r.slice(1).toUpperCase(),!1)}function jj(e){return fs.Jx(mo.base32.decode(`b${e.toString().toLowerCase().substring(1)}`))}const Vj=wt("ipfs:repo:utils:walk-dag");async function*zj(e,t,r,n){try{const i=await t.get(e,n),s=await r(e.code),o=fD({bytes:i,cid:e,codec:s});for(const[,e]of o.links())yield e,yield*zj(e,t,r,n)}catch(nP){throw Vj("Could not walk DAG for CID",e.toString(),nP),nP}}class $j extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"===typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"===typeof this.onEviction)for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return"number"===typeof t.expiry&&t.expiry<=Date.now()&&("function"===typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){const r=this._deleteIfExpired(e,t);if(!1===r)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;if(!this.cache.has(t)){const n=this._deleteIfExpired(t,r);!1===n&&(yield e)}}for(const e of this.cache){const[t,r]=e,n=this._deleteIfExpired(t,r);!1===n&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const n="number"===typeof r&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e,n=this._deleteIfExpired(t,r);!1===n&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;if(!this.cache.has(t)){const e=this._deleteIfExpired(t,r);!1===e&&(yield[t,r.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,i]=r,s=this._deleteIfExpired(n,i);!1===s&&(yield[n,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,i]=r;if(!this.cache.has(n)){const e=this._deleteIfExpired(n,i);!1===e&&(yield[n,i.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}const qj=2048;function Kj(e){const t=`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`;return Ut(new Error(t),"ERR_INVALID_PIN_TYPE")}class Hj{constructor({pinstore:e,blockstore:t,loadCodec:r}){this.pinstore=e,this.blockstore=t,this.loadCodec=r,this.log=wt("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);const r={depth:0};return 0!==e.version&&(r.version=e.version),e.code!==Cr&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),this.pinstore.put(Fj(e),Hi(r))}unpin(e,t){return this.pinstore.delete(Fj(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);const r={depth:1/0};0!==e.version&&(r.version=e.version),e.code!==Cr&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),await this.pinstore.put(Fj(e),Hi(r))}async*directKeys(e){for await(const t of this.pinstore.query({filters:[e=>{const t=es(e.value);return 0===t.depth}]})){const e=es(t.value),r=e.version||0,n=null!=e.codec?e.codec:Cr,i=jj(t.key);yield{cid:Zt.k.create(r,n,i),metadata:e.metadata}}}async*recursiveKeys(e){for await(const t of this.pinstore.query({filters:[e=>{const t=es(e.value);return t.depth===1/0}]})){const e=es(t.value),r=e.version||0,n=null!=e.codec?e.codec:Cr,i=jj(t.key);yield{cid:Zt.k.create(r,n,i),metadata:e.metadata}}}async*indirectKeys(e){for await(const{cid:t}of this.recursiveKeys())for await(const r of zj(t,this.blockstore,this.loadCodec,e)){const e=[Cm.recursive],t=await this.isPinnedWithType(r,e);t.pinned||(yield r)}}async isPinnedWithType(e,t,r){Array.isArray(t)||(t=[t]);const n=t.includes(Cm.all),i=t.includes(Cm.direct),s=t.includes(Cm.recursive),o=t.includes(Cm.indirect);if(s||i||n){const r=await KD(this.pinstore.query({prefix:Fj(e).toString(),filters:[e=>{if(n)return!0;const r=es(e.value);return t.includes(0===r.depth?Cm.direct:Cm.recursive)}],limit:1}));if(r){const t=es(r.value);return{cid:e,pinned:!0,reason:0===t.depth?Cm.direct:Cm.recursive,metadata:t.metadata}}}const a=this;async function*c(e,t){for await(const{cid:r}of t)for await(const t of zj(r,a.blockstore,a.loadCodec))if(t.equals(e))return void(yield r)}if(n||o){const t=await KD(c(e,this.recursiveKeys()));if(t)return{cid:e,pinned:!0,reason:Cm.indirect,parent:t}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){const r=new $j({maxSize:t.cidCacheMaxSize??qj}),n=async(e,t)=>{if(r.has(e.toString()))return;r.set(e.toString(),!0);const i=await this.blockstore.get(e,t),s=await this.loadCodec(e.code),o=fD({bytes:i,cid:e,codec:s});await Promise.all([...o.links()].map((([,e])=>n(e,t))))};await n(e,t)}static checkPinType(e){if("string"!==typeof e||!Object.keys(Cm).includes(e))throw Kj(e);return!0}}function Gj(e,t){return{open(){return t.open()},close(){return t.close()},query(e,r){return t.query(e,r)},queryKeys(e,r){return t.queryKeys(e,r)},async get(e,r){return t.get(e,r)},async*getMany(e,r){yield*t.getMany(e,r)},async put(e,r,n){await t.put(e,r,n)},async*putMany(e,r){yield*t.putMany(e,r)},has(e,r){return t.has(e,r)},async delete(r,n){return await Wj(r,e),t.delete(r,n)},deleteMany(r,n){return t.deleteMany(z_(r,(async t=>(await Wj(t,e),t))),n)},batch(){return t.batch()}}}async function Wj(e,t){const{pinned:r,reason:n}=await t.isPinnedWithType(e,Cm.all);if(r)throw Ut(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}const Qj=wt("ipfs:repo:gc"),Yj=Um().code,Jj=256,Xj=new Df("/local/filesroot");function Zj({gcLock:e,pins:t,blockstore:r,root:n,loadCodec:i}){async function*s(){const s=Date.now();Qj("Creating set of marked blocks");const o=await e.writeLock();try{const e=await eV({pins:t,blockstore:r,root:n,loadCodec:i}),a=r.queryKeys({});yield*tV({blockstore:r},e,a),Qj(`Complete (${Date.now()-s}ms)`)}finally{o()}}return s}async function eV({pins:e,blockstore:t,loadCodec:r,root:n}){const i=async function*(){let e;try{e=await n.get(Xj)}catch(nP){if(nP.code===Yj)return void Qj("No blocks in MFS");throw nP}const i=Zt.k.decode(e);yield i,yield*zj(i,t,r)}(),s=$_(z_(e.recursiveKeys(),(({cid:e})=>e)),e.indirectKeys(),z_(e.directKeys(),(({cid:e})=>e)),i),o=new Set;for await(const a of $_(s,i))o.add(mo.base32.encode(a.multihash.bytes));return o}async function*tV({blockstore:e},t,r){let n=0,i=0;const s=async r=>async function(){n++;try{const n=mo.base32.encode(r.multihash.bytes);if(t.has(n))return null;try{await e.delete(r),i++}catch(nP){return{err:new Error(`Could not delete block with CID ${r}: ${nP.message}`)}}return{cid:r}}catch(nP){const t=`Could delete block with CID ${r}`;return Qj(t,nP),{err:new Error(t+`: ${nP.message}`)}}};yield*W_(BS(z_(r,s),Jj),(e=>T_(e,Boolean))),Qj(`Marked set has ${t.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}const rV=wt("ipfs:repo"),nV=Number.MAX_SAFE_INTEGER,iV="repoAutoMigrate";class sV{constructor(e,t,r,n){if("string"!==typeof e)throw new Error("missing repo path");if("function"!==typeof t)throw new Error("missing codec loader");this.options=gt(Mj,n),this.closed=!0,this.path=e,this.root=r.root,this.datastore=r.datastore,this.keys=r.keys;const i=r.blocks,s=r.pins;this.pins=new Hj({pinstore:s,blockstore:i,loadCodec:t});const o=Gj(this.pins,i);this.blocks=Rj(o),this.version=vj(this.root),this.config=_j(this.root),this.spec=Ij(this.root),this.apiAddr=Cj(this.root),this.gcLock=zB({name:e,singleProcess:!1!==this.options.repoOwner}),this.gc=Zj({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){rV("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(cV(e)),await this.spec.set(uV(e)),await this.version.set(yU)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(nP){return!1}}async open(){if(!this.closed)throw Ut(new Error("repo is already open"),dj);rV("opening at: %s",this.path);try{await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),rV("acquired repo.lock");const e=await this.version.check(yU);if(!e){if(!await this._isAutoMigrationEnabled())throw new lj("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");await this._migrate(yU,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys})}rV("creating datastore"),await this.datastore.open(),rV("creating blocks"),await this.blocks.open(),rV("creating keystore"),await this.keys.open(),rV("creating pins"),await this.pins.pinstore.open(),this.closed=!1,rV("all opened")}catch(nP){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(e){rV("error removing lock",e)}throw nP}}async _openRoot(){try{await this.root.open()}catch(nP){if("Already open"!==nP.message)throw nP}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if("function"!==typeof e.close)throw Ut(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){let e;rV("init check");try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(nP){if("ERR_NOT_FOUND"===nP.code)throw Ut(new Error("repo is not initialized yet"),hj,{path:this.path});throw nP}if(!e)throw Ut(new Error("repo is not initialized yet"),hj,{path:this.path})}async close(){if(this.closed)throw Ut(new Error("repo is already closed"),fj);rV("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(nP){if(nP.code!==hj&&!nP.message.startsWith("ENOENT"))throw nP}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((e=>e&&e.close()))),rV("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,t,r,n,i]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),oV(this.datastore),oV(this.keys)]),s=t.size+n+i;return{repoPath:this.path,storageMax:e,version:r,numObjects:t.count,repoSize:s}}throw Ut(new Error("repo is not initialized yet"),hj,{path:this.path})}async _isAutoMigrationEnabled(){if(void 0!==this.options.autoMigrate)return this.options.autoMigrate;let e;try{e=await this.config.get(iV)}catch(t){if(t.code!==uj.code)throw t;e=!0}return e}async _migrate(e,t){const r=await this.version.get();return r>e?(rV(`reverting to version ${e}`),ij(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(rV(`migrating to version ${e}`),nj(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt(aj(e))}catch(nP){return BigInt(nV)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(const{key:r,value:n}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(n.byteLength),t+=BigInt(r.bytes.byteLength);return{count:e,size:t}}}async function oV(e){let t=BigInt(0);for await(const r of e.query({}))t+=BigInt(r.value.byteLength),t+=BigInt(r.key.uint8Array().byteLength);return t}function aV(e,t,r,n){return new sV(e,t,r,n)}function cV(e){return e.Datastore=Object.assign({},Uj,EU(e,"datastore")),e}function uV(e){const t={...Uj.Spec,...EU(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map((e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc})))}}var lV=r(640),hV=r(2514);class dV extends R_{constructor(e,t={}){super(),this.db="string"===typeof e?new hV.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(nP){throw Bm(nP)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(nP){throw Mm(nP)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(nP){if(nP.notFound)throw Um(nP);throw Mm(nP)}return t}async has(e){try{await this.db.get(e.toString())}catch(nP){if(nP.notFound)return!1;throw nP}return!0}async delete(e){try{await this.db.del(e.toString())}catch(nP){throw Lm(nP)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>T_(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>lV(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=T_(t,(()=>e++>=r))}return n&&(t=C_(t,n)),t}queryKeys(e){let t=z_(this._query({values:!1,prefix:e.prefix}),(({key:e})=>e));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>T_(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>lV(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=T_(t,(()=>e++>=r))}return n&&(t=C_(t,n)),t}_query(e){const t={keys:!0,keyEncoding:"buffer",values:e.values};if(null!=e.prefix){const r=e.prefix.toString();t.gte=r,t.lt=r+"ÿ"}const r=this.db.iterator(t);if(r[Symbol.asyncIterator])return fV(r);if(null!=r.next&&null!=r.end)return pV(r);throw new Error("Level returned incompatible iterator")}}async function*fV(e){for await(const[t,r]of e)yield{key:new Df(t,!1),value:r};await e.close()}function pV(e){return{[Symbol.asyncIterator](){return{next:()=>new Promise(((t,r)=>{e.next(((n,i,s)=>n?r(n):null==i?e.end((e=>{if(e)return r(e);t({done:!0,value:void 0})})):void t({done:!1,value:{key:new Df(i,!1),value:s}})))})),return:()=>new Promise(((t,r)=>{e.end((e=>{if(e)return r(e);t({done:!0,value:void 0})}))}))}}}}const yV=(e,t)=>async function*(){const r=await S_(e);yield*r.sort(t)}();class gV{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await I_(this.putMany(e,r)),e=[],await I_(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=T_(r,(t=>t.key.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>T_(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>yV(e,t)),r)),null!=e.offset){let t=0;r=T_(r,(()=>t++>=(e.offset||0)))}return null!=e.limit&&(r=C_(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=T_(r,(t=>t.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>T_(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>yV(e,t)),r)),null!=e.offset){let t=0;r=T_(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=C_(r,e.limit)),r}}function mV(e){const t=Zt.k.asCID(e);if(!t)throw Ut(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Df("/"+mo.base32.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function wV(e){return Zt.k.createV1(xo,fs.Jx(mo.base32.decode("b"+e.toString().slice(1).toLowerCase())))}function vV(e){const t=e.substring(0,1);if("/"===t)return vV(e.substring(1));let r,n;r="b"===t.toLowerCase()?e=>mo.base32.decode(e.toLowerCase()).subarray(2):"c"===t.toLowerCase()?e=>mo.base32pad.decode(e.toLowerCase()).subarray(2):"z"===t?e=>bo.base58btc.decode(e).subarray(2):"Q"===t?e=>bo.base58btc.decode("z"+e):e=>mo.base32.decode("b"+e.toLowerCase()).subarray(2);for(let s=1;s<e.length;s++)try{n=r(e.substring(0,s))}catch(nP){if("Unexpected end of data"!==nP.message)throw nP}let i="/C";return n&&(i=`/${mo.base32.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function bV(e){return{...e,prefix:e.prefix?vV(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e({key:wV(t.key),value:t.value}))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e({key:wV(t.key),value:t.value},{key:wV(r.key),value:r.value}))):void 0}}function EV(e){return{...e,prefix:e.prefix?vV(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e(wV(t)))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e(wV(t),wV(r)))):void 0}}class _V extends gV{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(const{key:r,value:n}of this.child.query(bV(e),t))yield{key:wV(r),value:n}}async*queryKeys(e,t){for await(const r of this.child.queryKeys(EV(e),t))yield wV(r)}async get(e,t){return this.child.get(mV(e),t)}async*getMany(e,t){for await(const r of e)yield this.get(r,t)}async put(e,t,r){await this.child.put(mV(e),t,r)}async*putMany(e,t){const r=O_({objectMode:!0}),n=globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout;n((async()=>{try{const n=this.child;await I_(this.child.putMany(async function*(){for await(const i of e){const e=mV(i.key),s=await n.has(e,t);s||(yield{key:e,value:i.value}),r.push(i)}}())),r.end()}catch(nP){r.end(nP)}})),yield*r}has(e,t){return this.child.has(mV(e),t)}delete(e,t){return this.child.delete(mV(e),t)}deleteMany(e,t){const r=O_({objectMode:!0});return I_(this.child.deleteMany(async function*(){for await(const t of e)yield mV(t),r.push(t);r.end()}(),t)).catch((e=>{r.end(e)})),r}}function AV(e,t,r){const n=r.path||"ipfs";return aV(n,(e=>t.getCodec(e)),{root:new dV(n,{prefix:"",version:2}),blocks:new _V(new dV(`${n}/blocks`,{prefix:"",version:2})),datastore:new dV(`${n}/datastore`,{prefix:"",version:2}),keys:new dV(`${n}/keys`,{prefix:"",version:2}),pins:new dV(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:Lj})}function SV(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var kV=SV,IV=kV,TV=IV;new Uint8Array(0);const CV=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},RV=e=>(new TextEncoder).encode(e),PV=e=>(new TextDecoder).decode(e);class xV{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class OV{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return DV(this,e)}}class NV{constructor(e){this.decoders=e}or(e){return DV(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const DV=(e,t)=>new NV({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class BV{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new xV(e,t,r),this.decoder=new OV(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const LV=({name:e,prefix:t,encode:r,decode:n})=>new BV(e,t,r,n),MV=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=TV(r,t);return LV({prefix:e,name:t,encode:n,decode:e=>CV(i(e))})},UV=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},FV=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},jV=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>LV({prefix:t,name:e,encode(e){return FV(e,n,r)},decode(t){return UV(t,n,r,e)}}),VV=LV({prefix:"\0",name:"identity",encode:e=>PV(e),decode:e=>RV(e)}),zV=jV({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),$V=jV({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),qV=MV({prefix:"9",name:"base10",alphabet:"0123456789"}),KV=jV({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),HV=jV({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),GV=jV({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),WV=jV({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QV=jV({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YV=jV({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JV=jV({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XV=jV({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZV=jV({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ez=jV({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),tz=jV({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rz=MV({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nz=MV({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),iz=MV({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sz=MV({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),oz=jV({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),az=jV({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cz=jV({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uz=jV({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),lz=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),hz=lz.reduce(((e,t,r)=>(e[r]=t,e)),[]),dz=lz.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function fz(e){return e.reduce(((e,t)=>(e+=hz[t],e)),"")}function pz(e){const t=[];for(const r of e){const e=dz[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const yz=LV({prefix:"🚀",name:"base256emoji",encode:fz,decode:pz});var gz=Ez,mz=128,wz=127,vz=~wz,bz=Math.pow(2,31);function Ez(e,t,r){t=t||[],r=r||0;var n=r;while(e>=bz)t[r++]=255&e|mz,e/=128;while(e&vz)t[r++]=255&e|mz,e>>>=7;return t[r]=0|e,Ez.bytes=r-n+1,t}var _z=kz,Az=128,Sz=127;function kz(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw kz.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&Sz)<<i:(r&Sz)*Math.pow(2,i),i+=7}while(r>=Az);return kz.bytes=s-t,n}var Iz=Math.pow(2,7),Tz=Math.pow(2,14),Cz=Math.pow(2,21),Rz=Math.pow(2,28),Pz=Math.pow(2,35),xz=Math.pow(2,42),Oz=Math.pow(2,49),Nz=Math.pow(2,56),Dz=Math.pow(2,63),Bz=function(e){return e<Iz?1:e<Tz?2:e<Cz?3:e<Rz?4:e<Pz?5:e<xz?6:e<Oz?7:e<Nz?8:e<Dz?9:10},Lz={encode:gz,decode:_z,encodingLength:Bz},Mz=Lz,Uz=Mz;const Fz=(e,t,r=0)=>(Uz.encode(e,t,r),t),jz=e=>Uz.encodingLength(e),Vz=(e,t)=>{const r=t.byteLength,n=jz(e),i=n+jz(r),s=new Uint8Array(i+r);return Fz(e,s,0),Fz(r,s,n),s.set(t,i),new zz(e,r,t,s)};class zz{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const $z=({name:e,code:t,encode:r})=>new qz(e,t,r);class qz{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Vz(this.code,t):t.then((e=>Vz(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Kz=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Hz=$z({name:"sha2-256",code:18,encode:Kz("SHA-256")}),Gz=$z({name:"sha2-512",code:19,encode:Kz("SHA-512")}),Wz=0,Qz="identity",Yz=CV,Jz=e=>Vz(Wz,Yz(e)),Xz={code:Wz,name:Qz,encode:Yz,digest:Jz},Zz="raw",e$=85,t$=e=>CV(e),r$=e=>CV(e),n$=new TextEncoder,i$=new TextDecoder,s$="json",o$=512,a$=e=>n$.encode(JSON.stringify(e)),c$=e=>JSON.parse(i$.decode(e));new WeakMap;class u${constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==multiformats_src_cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==multiformats_src_cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return u$.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return u$.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return u$.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Digest.equals(e.multihash,r.multihash)}toString(e){return multiformats_src_cid_format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof u$)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new u$(e,r,n,i||multiformats_src_cid_encodeCID(e,r,n.bytes))}if(null!=t&&!0===t[multiformats_src_cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=Digest.decode(r);return u$.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==multiformats_src_cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${multiformats_src_cid_DAG_PB_CODE}) block encoding`);return new u$(e,t,r,r.bytes);case 1:{const n=multiformats_src_cid_encodeCID(e,t,r.bytes);return new u$(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return u$.create(0,multiformats_src_cid_DAG_PB_CODE,e)}static createV1(e,t){return u$.create(1,e,t)}static decode(e){const[t,r]=u$.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=u$.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?u$.createV0(s):u$.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint.decode(e.subarray(t));return n,r};let n=r(),i=multiformats_src_cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=multiformats_src_cid_parseCIDtoBytes(e,t),i=u$.decode(n);return multiformats_src_cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const l$={...he,...de,...fe,...pe,...ye,...ge,...me,...we,...ve,...be};function h$(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function d$(e=0){return null!=globalThis.Buffer?.allocUnsafe?h$(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function f$(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const p$=f$("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),y$=f$("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=d$(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),g$={utf8:p$,"utf-8":p$,hex:l$.base16,latin1:y$,ascii:y$,binary:y$,...l$};var m$=g$;function w$(e,t="utf8"){const r=m$[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):h$(globalThis.Buffer.from(e,"utf-8"))}function v$(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const b$={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};function E$(){aA._configure(),nA._configure(iA),sA._configure(oA)}E$();const _$=["uint64","int64","sint64","fixed64","sfixed64"];function A$(e){for(const t of _$){if(null==e[t])continue;const r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function S$(e){return A$(new nA(e))}function k$(e){for(const t of _$){if(null==e[t])continue;const r=e[t];e[t]=function(e){return r.call(this,e.toString())}}return e}function I$(){return k$(sA.create())}function T$(e,t){const r=S$(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function C$(e,t){const r=I$();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var R$,P$;function x$(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function O$(e,t){return x$("message",R$.LENGTH_DELIMITED,e,t)}function N$(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,r){e[t]=r}}:{get(t){return e.get(t)},set(t,r){e.set(t,r)}}}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(R$||(R$={})),function(e){let t;e.codec=()=>(null==t&&(t=O$(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.publicKey&&e.publicKey.byteLength>0)&&(t.uint32(10),t.bytes(e.publicKey)),(!0===r.writeDefaults||null!=e.payloadType&&e.payloadType.byteLength>0)&&(t.uint32(18),t.bytes(e.payloadType)),(!0===r.writeDefaults||null!=e.payload&&e.payload.byteLength>0)&&(t.uint32(26),t.bytes(e.payload)),(!0===r.writeDefaults||null!=e.signature&&e.signature.byteLength>0)&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>C$(t,e.codec()),e.decode=t=>T$(t,e.codec())}(P$||(P$={}));const D$=4294967296;class B${constructor(e=0,t=0){this.hi=e,this.lo=t}toBigInt(e){if(!0===e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){const e=-(1&this.lo),t=((this.lo>>>1|this.hi<<31)^e)>>>0,r=(this.hi>>>1^e)>>>0;return new B$(r,t)}zzEncode(){const e=this.hi>>31,t=((this.hi<<1|this.lo>>>31)^e)>>>0,r=(this.lo<<1^e)>>>0;return new B$(t,r)}toBytes(e,t=0){const r=N$(e);while(this.hi>0)r.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;while(this.lo>127)r.set(t++,127&this.lo|128),this.lo=this.lo>>>7;r.set(t++,this.lo)}static fromBigInt(e){if(0n===e)return new B$;const t=e<0;t&&(e=-e);let r=0|Number(e>>32n),n=0|Number(e-(BigInt(r)<<32n));return t&&(r=~r>>>0,n=~n>>>0,++n>D$&&(n=0,++r>D$&&(r=0))),new B$(r,n)}static fromNumber(e){if(0===e)return new B$;const t=e<0;t&&(e=-e);let r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new B$(n,r)}static fromBytes(e,t=0){const r=N$(e),n=new B$;let i=0;if(e.length-t>4){for(;i<4;++i)if(n.lo=(n.lo|(127&r.get(t))<<7*i)>>>0,r.get(t++)<128)return n;if(n.lo=(n.lo|(127&r.get(t))<<28)>>>0,n.hi=(n.hi|(127&r.get(t))>>4)>>>0,r.get(t++)<128)return n;i=0}else for(;i<4;++i){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(n.lo=(n.lo|(127&r.get(t))<<7*i)>>>0,r.get(t++)<128)return n}if(e.length-t>4){for(;i<5;++i)if(n.hi=(n.hi|(127&r.get(t))<<7*i+3)>>>0,r.get(t++)<128)return n}else if(t<e.byteLength)for(;i<5;++i){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(n.hi=(n.hi|(127&r.get(t))<<7*i+3)>>>0,r.get(t++)<128)return n}throw RangeError("invalid varint encoding")}}function L$(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function M$(e=0){return null!=globalThis.Buffer?.allocUnsafe?L$(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}const U$=Math.pow(2,7),F$=Math.pow(2,14),j$=Math.pow(2,21),V$=Math.pow(2,28),z$=Math.pow(2,35),$$=Math.pow(2,42),q$=Math.pow(2,49),K$=Math.pow(2,56),H$=Math.pow(2,63),G$={encodingLength(e){return e<U$?1:e<F$?2:e<j$?3:e<V$?4:e<z$?5:e<$$?6:e<q$?7:e<K$?8:e<H$?9:10},encode(e,t,r=0){if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return null==t&&(t=M$(G$.encodingLength(e))),B$.fromNumber(e).toBytes(t,r),t},decode(e,t=0){return B$.fromBytes(e,t).toNumber(!0)}};class W${constructor(e){const{peerId:t,payloadType:r,payload:n,signature:i}=e;this.peerId=t,this.payloadType=r,this.payload=n,this.signature=i}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=P$.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return v$(this.marshal(),e.marshal())}async validate(e){const t=Q$(e,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const r=bE(this.peerId.publicKey);return await r.verify(t.subarray(),this.signature)}}W$.createFromProtobuf=async e=>{const t=P$.decode(e),r=await Em(t.publicKey);return new W$({peerId:r,payloadType:t.payloadType,payload:t.payload,signature:t.signature})},W$.seal=async(e,t)=>{if(null==t.privateKey)throw new Error("Missing private key");const r=e.domain,n=e.codec,i=e.marshal(),s=Q$(r,n,i),o=await _E(t.privateKey),a=await o.sign(s.subarray());return new W$({peerId:t,payloadType:n,payload:i,signature:a})},W$.openAndCertify=async(e,t)=>{const r=await W$.createFromProtobuf(e),n=await r.validate(t);if(!n)throw Ut(new Error("envelope signature is not valid for the given domain"),b$.ERR_SIGNATURE_NOT_VALID);return r};const Q$=(e,t,r)=>{const n=w$(e),i=G$.encode(n.byteLength),s=G$.encode(t.length),o=G$.encode(r.length);return new iT(i,n,s,t,o,r)};function Y$(e,t){const r=(e,t)=>e.toString().localeCompare(t.toString());return e.length===t.length&&(t.sort(r),e.sort(r).every(((e,r)=>t[r].equals(e))))}var J$;(function(e){let t,r;(function(e){let t;e.codec=()=>(null==t&&(t=O$(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.multiaddr&&e.multiaddr.byteLength>0)&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.multiaddr=e.bytes();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>C$(t,e.codec()),e.decode=t=>T$(t,e.codec())})(t=e.AddressInfo||(e.AddressInfo={})),e.codec=()=>(null==r&&(r=O$(((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),(!0===n.writeDefaults||null!=t.peerId&&t.peerId.byteLength>0)&&(r.uint32(10),r.bytes(t.peerId)),!0!==n.writeDefaults&&0n===t.seq||(r.uint32(16),r.uint64(t.seq)),null!=t.addresses)for(const i of t.addresses)r.uint32(26),e.AddressInfo.codec().encode(i,r,{writeDefaults:!0});!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={peerId:new Uint8Array(0),seq:0n,addresses:[]},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses.push(e.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(7&r);break}}return n}))),r),e.encode=t=>C$(t,e.codec()),e.decode=t=>T$(t,e.codec())})(J$||(J$={}));const X$="libp2p-peer-record",Z$=Uint8Array.from([3,1]);class eq{constructor(e){this.domain=eq.DOMAIN,this.codec=eq.CODEC;const{peerId:t,multiaddrs:r,seqNumber:n}=e;this.peerId=t,this.multiaddrs=r??[],this.seqNumber=n??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=J$.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((e=>({multiaddr:e.bytes})))})),this.marshaled}equals(e){return e instanceof eq&&(!!this.peerId.equals(e.peerId)&&(this.seqNumber===e.seqNumber&&!!Y$(this.multiaddrs,e.multiaddrs)))}}eq.createFromProtobuf=e=>{const t=J$.decode(e),r=vm(t.peerId),n=(t.addresses??[]).map((e=>Kl(e.multiaddr))),i=t.seq;return new eq({peerId:r,multiaddrs:n,seqNumber:i})},eq.DOMAIN=X$,eq.CODEC=Z$;const tq=Symbol.for("@libp2p/topology");function rq(e){return null!=e&&Boolean(e[tq])}const nq=()=>{};class iq{constructor(e){this.min=e.min??0,this.max=e.max??1/0,this.peers=new Set,this.onConnect=e.onConnect??nq,this.onDisconnect=e.onDisconnect??nq}get[Symbol.toStringTag](){return tq.toString()}get[tq](){return!0}async setRegistrar(e){this.registrar=e}disconnect(e){this.onDisconnect(e)}}function sq(e){return new iq(e)}var oq,aq=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class cq extends EventTarget{constructor(){super(...arguments),oq.set(this,new Map)}listenerCount(e){const t=aq(this,oq,"f").get(e);return null==t?0:t.length}addEventListener(e,t,r){super.addEventListener(e,t,r);let n=aq(this,oq,"f").get(e);null==n&&(n=[],aq(this,oq,"f").set(e,n)),n.push({callback:t,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(e,t,r){super.removeEventListener(e.toString(),t??null,r);let n=aq(this,oq,"f").get(e);null!=n&&(n=n.filter((({callback:e})=>e!==t)),aq(this,oq,"f").set(e,n))}dispatchEvent(e){const t=super.dispatchEvent(e);let r=aq(this,oq,"f").get(e.type);return null==r||(r=r.filter((({once:e})=>!e)),aq(this,oq,"f").set(e.type,r)),t}}oq=new WeakMap;class uq extends Event{constructor(e,t){super(e,t),this.detail=t?.detail}}const lq=globalThis.CustomEvent??uq;class hq{constructor(e,t,r){this.gossip=e,this.msgs=new Map,this.history=[],this.msgIdToStrFn=r;for(let n=0;n<t;n++)this.history[n]=[]}get size(){return this.msgs.size}put(e,t,r=!1){const{msgIdStr:n}=e;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),!0)}observeDuplicate(e,t){const r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){const r=this.msgs.get(e);if(!r)return null;const n=(r.iwantCounts.get(t)??0)+1;return r.iwantCounts.set(t,n),{msg:r.message,count:n}}getGossipIDs(e){const t=new Map;for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{const n=this.msgs.get(r.msgIdStr);if(n&&n.validated&&e.has(r.topic)){let e=t.get(r.topic);e||(e=[],t.set(r.topic,e)),e.push(r.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(!t)return null;const{message:r,originatingPeers:n}=t;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}shift(){const e=this.history[this.history.length-1];e.forEach((e=>{this.msgs.delete(e.msgIdStr)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}var dq=r(4482);const{RPC:fq}=dq,pq=1e3,yq=60*pq,gq="/floodsub/1.0.0",mq="/meshsub/1.0.0",wq="/meshsub/1.1.0",vq=6,bq=4,Eq=12,_q=4,Aq=2,Sq=5,kq=3,Iq=6,Tq=.25,Cq=3,Rq=100,Pq=pq,xq=yq,Oq=16,Nq=yq,Dq=15,Bq=300,Lq=pq,Mq=60,Uq=2,Fq=10*pq,jq=5e3,Vq=10,zq=3*pq,$q=2*yq,qq=12e4,Kq="ERR_TOPIC_VALIDATOR_REJECT",Hq="ERR_TOPIC_VALIDATOR_IGNORE",Gq=0,Wq=128,Qq=1e3,Yq=1e3;function Jq(e=[],t){return{subscriptions:[],messages:e,control:t?{graft:t.graft||[],prune:t.prune||[],ihave:t.ihave||[],iwant:t.iwant||[]}:void 0}}function Xq(e){if(e.length<=1)return e;const t=()=>Math.floor(Math.random()*Math.floor(e.length));for(let r=0;r<e.length;r++){const n=t(),i=e[r];e[r]=e[n],e[n]=i}return e}function Zq(e){return vh(e,"base64")}const eK="StrictSign",tK="StrictNoSign";var rK,nK,iK,sK,oK,aK;function cK(e){switch(e){case iK.Ignore:return sK.Ignore;case iK.Reject:return sK.Reject}}async function uK(e,t){switch(e){case eK:{if(!t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await _E(t.privateKey);return{type:nK.Signing,author:t,key:t.publicKey,privateKey:e}}case tK:return{type:nK.Anonymous};default:throw new Error(`Unknown signature policy "${e}"`)}}(function(e){e["StrictSign"]="StrictSign",e["StrictNoSign"]="StrictNoSign"})(rK||(rK={})),function(e){e[e["Signing"]=0]="Signing",e[e["Anonymous"]=1]="Anonymous"}(nK||(nK={})),function(e){e["Accept"]="accept",e["Ignore"]="ignore",e["Reject"]="reject"}(iK||(iK={})),function(e){e["Error"]="error",e["Ignore"]="ignore",e["Reject"]="reject",e["Blacklisted"]="blacklisted"}(sK||(sK={})),function(e){e["InvalidSignature"]="invalid_signature",e["InvalidSeqno"]="invalid_seqno",e["InvalidPeerId"]="invalid_peerid",e["SignaturePresent"]="signature_present",e["SeqnoPresent"]="seqno_present",e["FromPresent"]="from_present",e["TransformFailed"]="transform_failed"}(oK||(oK={})),function(e){e["duplicate"]="duplicate",e["invalid"]="invalid",e["valid"]="valid"}(aK||(aK={}));const lK="ERR_INVALID_PEER_SCORE_PARAMS",hK={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},dK={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function fK(e={}){return{...hK,...e,topics:e.topics?Object.entries(e.topics).reduce(((e,[t,r])=>(e[t]=pK(r),e)),{}):{}}}function pK(e={}){return{...dK,...e}}function yK(e){for(const[r,n]of Object.entries(e.topics))try{gK(n)}catch(t){throw Ut(new Error(`invalid score parameters for topic ${r}: ${t.message}`),lK)}if(e.topicScoreCap<0)throw Ut(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),lK);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw Ut(new Error("missing application specific score function"),lK);if(e.IPColocationFactorWeight>0)throw Ut(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),lK);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw Ut(new Error("invalid IPColocationFactorThreshold; must be at least 1"),lK);if(e.behaviourPenaltyWeight>0)throw Ut(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),lK);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw Ut(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),lK);if(e.decayInterval<1e3)throw Ut(new Error("invalid DecayInterval; must be at least 1s"),lK);if(e.decayToZero<=0||e.decayToZero>=1)throw Ut(new Error("invalid DecayToZero; must be between 0 and 1"),lK)}function gK(e){if(e.topicWeight<0)throw Ut(new Error("invalid topic weight; must be >= 0"),lK);if(0===e.timeInMeshQuantum)throw Ut(new Error("invalid TimeInMeshQuantum; must be non zero"),lK);if(e.timeInMeshWeight<0)throw Ut(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),lK);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw Ut(new Error("invalid TimeInMeshQuantum; must be positive"),lK);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw Ut(new Error("invalid TimeInMeshCap; must be positive"),lK);if(e.firstMessageDeliveriesWeight<0)throw Ut(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),lK);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw Ut(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),lK);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw Ut(new Error("invalid FirstMessageDeliveriesCap; must be positive"),lK);if(e.meshMessageDeliveriesWeight>0)throw Ut(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),lK);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw Ut(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),lK);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw Ut(new Error("invalid MeshMessageDeliveriesCap; must be positive"),lK);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw Ut(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),lK);if(e.meshMessageDeliveriesWindow<0)throw Ut(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),lK);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw Ut(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),lK);if(e.meshFailurePenaltyWeight>0)throw Ut(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),lK);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw Ut(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),lK);if(e.invalidMessageDeliveriesWeight>0)throw Ut(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),lK);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw Ut(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),lK)}const mK={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function wK(e={}){return{...mK,...e}}function vK(e,t,r,n){let i=0;Object.entries(t.topics).forEach((([e,t])=>{const n=r.topics[e];if(void 0===n)return;let s=0;if(t.inMesh){let e=t.meshTime/n.timeInMeshQuantum;e>n.timeInMeshCap&&(e=n.timeInMeshCap),s+=e*n.timeInMeshWeight}let o=t.firstMessageDeliveries;if(o>n.firstMessageDeliveriesCap&&(o=n.firstMessageDeliveriesCap),s+=o*n.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<n.meshMessageDeliveriesThreshold){const e=n.meshMessageDeliveriesThreshold-t.meshMessageDeliveries,r=e*e;s+=r*n.meshMessageDeliveriesWeight}const a=t.meshFailurePenalty;s+=a*n.meshFailurePenaltyWeight;const c=t.invalidMessageDeliveries*t.invalidMessageDeliveries;s+=c*n.invalidMessageDeliveriesWeight,i+=s*n.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const s=r.appSpecificScore(e);if(i+=s*r.appSpecificWeight,t.ips.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),s=t?t.size:0;if(s>r.IPColocationFactorThreshold){const e=s-r.IPColocationFactorThreshold,t=e*e;i+=t*r.IPColocationFactorWeight}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){const e=t.behaviourPenalty-r.behaviourPenaltyThreshold,n=e*e;i+=n*r.behaviourPenaltyWeight}return i}var bK,EK=r(482);(function(e){e[e["unknown"]=0]="unknown",e[e["valid"]=1]="valid",e[e["invalid"]=2]="invalid",e[e["ignored"]=3]="ignored"})(bK||(bK={}));class _K{constructor(){this.records=new Map,this.queue=new EK}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:bK.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const r={msgId:e,expire:Date.now()+qq};return this.queue.push(r),t}gc(){const e=Date.now();let t=this.queue.peekFront();while(t&&t.expire<e)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}function AK(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}function SK(e){return null!=e&&"function"===typeof e.init}class kK{constructor(e={}){this.started=!1,null!=e.peerId&&this.setPeerId(e.peerId),null!=e.addressManager&&this.setAddressManager(e.addressManager),null!=e.peerStore&&this.setPeerStore(e.peerStore),null!=e.upgrader&&this.setUpgrader(e.upgrader),null!=e.metrics&&this.setMetrics(e.metrics),null!=e.registrar&&this.setRegistrar(e.registrar),null!=e.connectionManager&&this.setConnectionManager(e.connectionManager),null!=e.transportManager&&this.setTransportManager(e.transportManager),null!=e.connectionGater&&this.setConnectionGater(e.connectionGater),null!=e.contentRouting&&this.setContentRouting(e.contentRouting),null!=e.peerRouting&&this.setPeerRouting(e.peerRouting),null!=e.datastore&&this.setDatastore(e.datastore),null!=e.connectionProtector&&this.setConnectionProtector(e.connectionProtector),null!=e.dht&&this.setDHT(e.dht),null!=e.pubsub&&this.setPubSub(e.pubsub),null!=e.dialer&&this.setDialer(e.dialer)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{null!=e.beforeStart&&await e.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{await e.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{null!=e.beforeStop&&await e.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{await e.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((e=>AK(e))).map((async e=>{null!=e.afterStop&&await e.afterStop()})))}setPeerId(e){return this.peerId=e,e}getPeerId(){if(null==this.peerId)throw Ut(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(e){return this.metrics=e,SK(e)&&e.init(this),e}getMetrics(){return this.metrics}setAddressManager(e){return this.addressManager=e,SK(e)&&e.init(this),e}getAddressManager(){if(null==this.addressManager)throw Ut(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(e){return this.peerStore=e,SK(e)&&e.init(this),e}getPeerStore(){if(null==this.peerStore)throw Ut(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(e){return this.upgrader=e,SK(e)&&e.init(this),e}getUpgrader(){if(null==this.upgrader)throw Ut(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(e){return this.registrar=e,SK(e)&&e.init(this),e}getRegistrar(){if(null==this.registrar)throw Ut(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(e){return this.connectionManager=e,SK(e)&&e.init(this),e}getConnectionManager(){if(null==this.connectionManager)throw Ut(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(e){return this.transportManager=e,SK(e)&&e.init(this),e}getTransportManager(){if(null==this.transportManager)throw Ut(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(e){return this.connectionGater=e,SK(e)&&e.init(this),e}getConnectionGater(){if(null==this.connectionGater)throw Ut(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(e){return this.contentRouting=e,SK(e)&&e.init(this),e}getContentRouting(){if(null==this.contentRouting)throw Ut(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(e){return this.peerRouting=e,SK(e)&&e.init(this),e}getPeerRouting(){if(null==this.peerRouting)throw Ut(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(e){return this.datastore=e,SK(e)&&e.init(this),e}getDatastore(){if(null==this.datastore)throw Ut(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(e){return this.connectionProtector=e,SK(e)&&e.init(this),e}getConnectionProtector(){return this.connectionProtector}setDHT(e){return this.dht=e,SK(e)&&e.init(this),e}getDHT(){if(null==this.dht)throw Ut(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(e){return this.pubsub=e,SK(e)&&e.init(this),e}getPubSub(){if(null==this.pubsub)throw Ut(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}setDialer(e){return this.dialer=e,SK(e)&&e.init(this),e}getDialer(){if(null==this.dialer)throw Ut(new Error("dialer not set"),"ERR_SERVICE_MISSING");return this.dialer}}const IK=Mt("libp2p:gossipsub:score");class TK{constructor(e,t,r){this.params=e,this.metrics=t,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new _K,this.components=new kK,yK(e),this.scoreCacheValidityMs=r.scoreCacheValidityMs,this.computeScore=r.computeScore??vK}init(e){this.components=e}get size(){return this.peerStats.size}start(){this._backgroundInterval?IK("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),IK("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),IK("stopped")):IK("Peer score already stopped")}background(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((([e,t])=>[e,t])))}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((([r,n])=>{const i=this.params.topics[r];void 0!==i&&(n.firstMessageDeliveries*=i.firstMessageDeliveriesDecay,n.firstMessageDeliveries<t&&(n.firstMessageDeliveries=0),n.meshMessageDeliveries*=i.meshMessageDeliveriesDecay,n.meshMessageDeliveries<t&&(n.meshMessageDeliveries=0),n.meshFailurePenalty*=i.meshFailurePenaltyDecay,n.meshFailurePenalty<t&&(n.meshFailurePenalty=0),n.invalidMessageDeliveries*=i.invalidMessageDeliveriesDecay,n.invalidMessageDeliveries<t&&(n.invalidMessageDeliveries=0),n.inMesh&&(n.meshTime=e-n.graftTime,n.meshTime>i.meshMessageDeliveriesActivation&&(n.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<t&&(r.behaviourPenalty=0)):e>r.expire&&(this.removeIPs(n,r.ips),this.peerStats.delete(n),this.scoreCache.delete(n))}))}score(e){this.metrics?.scoreFnCalls.inc();const t=this.peerStats.get(e);if(!t)return 0;const r=Date.now(),n=this.scoreCache.get(e);if(n&&n.cacheUntil>r)return n.score;this.metrics?.scoreFnRuns.inc();const i=this.computeScore(e,t,this.params,this.peerIPs),s=r+this.scoreCacheValidityMs;return n?(this.metrics?.scoreCachedDelta.observe(Math.abs(i-n.score)),n.score=i,n.cacheUntil=s):this.scoreCache.set(e,{score:i,cacheUntil:s}),i}addPenalty(e,t,r){const n=this.peerStats.get(e);n&&(n.behaviourPenalty+=t,this.metrics?.onScorePenalty(r))}addPeer(e){const t={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(e,t);const r=this.getIPs(e);this.setIPs(e,r,t.ips),t.ips=r}removePeer(e){const t=this.peerStats.get(e);if(t){if(this.score(e)>0)return this.removeIPs(e,t.ips),void this.peerStats.delete(e);Object.entries(t.topics).forEach((([e,t])=>{t.firstMessageDeliveries=0;const r=this.params.topics[e].meshMessageDeliveriesThreshold;if(t.inMesh&&t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<r){const e=r-t.meshMessageDeliveries;t.meshFailurePenalty+=e*e}t.inMesh=!1,t.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){const r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){const t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,r){this.markFirstMessageDelivery(e,r);const n=this.deliveryRecords.ensureRecord(t),i=Date.now();n.status===bK.unknown?(n.status=bK.valid,n.validated=i,n.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,r)}))):IK("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-n.firstSeen,bK[n.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,r,n){switch(n){case sK.Error:return void this.markInvalidMessageDelivery(e,r);case sK.Blacklisted:return}const i=this.deliveryRecords.ensureRecord(t);if(i.status===bK.unknown){if(n===sK.Ignore)return i.status=bK.ignored,void i.peers.clear();i.status=bK.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((e=>{this.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else IK("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeen,bK[i.status])}duplicateMessage(e,t,r){const n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case bK.unknown:n.peers.add(e);break;case bK.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case bK.invalid:this.markInvalidMessageDelivery(e,r);break;case bK.ignored:break}}markInvalidMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(r,e.firstMessageDeliveries+1),e.inMesh&&(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(r,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,r){const n=this.peerStats.get(e);if(n){const e=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(i&&i.inMesh){const n=this.params.topics[t];if(void 0!==r){const i=e-r,s=i>n.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,i,s),s)return}const s=n.meshMessageDeliveriesCap;i.meshMessageDeliveries=Math.min(s,i.meshMessageDeliveries+1)}}}getIPs(e){return this.components.getConnectionManager().getConnections(wm(e)).map((e=>e.remoteAddr.toOptions().host))}setIPs(e,t,r){e:for(const n of t){for(const e of r)if(n===e)continue e;let t=this.peerIPs.get(n);t||(t=new Set,this.peerIPs.set(n,t)),t.add(e)}e:for(const n of r){for(const e of t)if(n===e)continue e;const r=this.peerIPs.get(n);r&&(r.delete(e),r.size||this.peerIPs.delete(n))}}removeIPs(e,t){t.forEach((t=>{const r=this.peerIPs.get(t);r&&(r.delete(e),r.size||this.peerIPs.delete(t))}))}updateIPs(){this.peerStats.forEach(((e,t)=>{const r=this.getIPs(t);this.setIPs(t,r,e.ips),e.ips=r}))}getPtopicStats(e,t){let r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}class CK{constructor(e,t,r){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=r,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const r=Math.floor(Math.random()*t.length),n=t[r],i=this.msgIdToStrFn(n);let s=this.promises.get(i);s||(s=new Map,this.promises.set(i,s));const o=Date.now();s.has(e)||(s.set(e,o+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(i)||this.requestMsByMsg.set(i,o)))}getBrokenPromises(){const e=Date.now(),t=new Map;let r=0;return this.promises.forEach(((n,i)=>{n.forEach(((i,s)=>{i<e&&(t.set(s,(t.get(s)??0)+1),n.delete(s),r++)})),n.size||this.promises.delete(i)})),this.metrics?.iwantPromiseBroken.inc(r),t}deliverMessage(e){this.trackMessage(e);const t=this.promises.get(e);t&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(t.size)))}rejectMessage(e,t){switch(this.trackMessage(e),t){case sK.Error:return}this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;for(const[t,r]of this.requestMsByMsg.entries()){if(!(r<e))break;this.requestMsByMsg.delete(t)}}trackMessage(e){if(this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}class RK{constructor(e){this.entries=new Map,this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs})}prune(){const e=Date.now();for(const[t,r]of this.entries.entries()){if(!(r.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var PK,xK,OK,NK,DK,BK;function LK(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:t,toTopic(e){return this.topicStrToLabel.get(e)??e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,r){const n=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:n,reason:t},r)},onRemoveFromMesh(e,t,r){const n=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:n,reason:t},r)},onReportValidationMcacheHit(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation(e,t){const r=this.toTopic(e);this.asyncValidationResult.inc({topic:r,acceptance:t})},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,r){const n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv(e,t){for(const[r,n]of e){const e=this.toTopic(r);this.iwantRcvMsgids.inc({topic:e},n)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg(e,t,r,n){const i=this.toTopic(e);this.msgPublishCount.inc({topic:i},1),this.msgPublishBytes.inc({topic:i},r*n),this.msgPublishPeers.inc({topic:i},r),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult(e,t){const r=this.toTopic(e);this.msgReceivedStatus.inc({topic:r,status:t})},onMsgRecvInvalid(e,t){const r=this.toTopic(e),n=t.reason===sK.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:r,error:n},1)},onDuplicateMsgDelivery(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),e.messages&&this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),e.messages&&this.rpcSentMessage.inc(e.messages.length),e.control){const t=e.control.ihave?.length??0,r=e.control.iwant?.length??0,n=e.control.graft?.length??0,i=e.control.prune?.length??0;t>0&&this.rpcSentIHave.inc(t),r>0&&this.rpcSentIWant.inc(r),n>0&&this.rpcSentGraft.inc(n),i>0&&this.rpcSentPrune.inc(i),(t>0||r>0||n>0||i>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let r=0,n=0,i=0,s=0;for(const o of e)o>=t.graylistThreshold&&r++,o>=t.publishThreshold&&n++,o>=t.gossipThreshold&&i++,o>=0&&s++;this.peersByScoreThreshold.set({threshold:BK.graylist},r),this.peersByScoreThreshold.set({threshold:BK.publish},n),this.peersByScoreThreshold.set({threshold:BK.gossip},i),this.peersByScoreThreshold.set({threshold:BK.mesh},s),this.score.set(e)},registerScoreWeights(e){for(const[t,r]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},r.p1w),this.scoreWeights.set({topic:t,p:"p2"},r.p2w),this.scoreWeights.set({topic:t,p:"p3"},r.p3w),this.scoreWeights.set({topic:t,p:"p3b"},r.p3bw),this.scoreWeights.set({topic:t,p:"p4"},r.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const r=new Map;e.forEach(((e,t)=>{const n=this.topicStrToLabel.get(t)??"unknown";let i=r.get(n);i||(i=new Set,r.set(n,i)),e.forEach((e=>i?.add(e)))}));for(const[n,i]of r){const e=[];i.forEach((r=>{e.push(t.get(r)??0)})),this.scorePerMesh.set({topic:n},e)}}}}(function(e){e["forward"]="forward",e["publish"]="publish"})(PK||(PK={})),function(e){e["Fanout"]="fanout",e["Random"]="random",e["Subscribed"]="subscribed",e["Outbound"]="outbound",e["NotEnough"]="not_enough",e["Opportunistic"]="opportunistic"}(xK||(xK={})),function(e){e["Dc"]="disconnected",e["BadScore"]="bad_score",e["Prune"]="prune",e["Unsub"]="unsubscribed",e["Excess"]="excess"}(OK||(OK={})),function(e){e["GraftBackoff"]="graft_backoff",e["BrokenPromise"]="broken_promise",e["MessageDeficit"]="message_deficit",e["IPColocation"]="IP_colocation"}(NK||(NK={})),function(e){e["LowScore"]="low_score",e["MaxIhave"]="max_ihave",e["MaxIasked"]="max_iasked"}(DK||(DK={})),function(e){e["graylist"]="graylist",e["publish"]="publish",e["gossip"]="gossip",e["mesh"]="mesh"}(BK||(BK={}));r(22);var MK=r(2515);const UK={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function FK(e,t,r,n,i){if("sha1"!==i&&"sha2-256"!==i&&"sha2-512"!==i){const e=Object.keys(UK).join(" / ");throw Ut(new Error(`Hash '${i}' is unknown or not supported. Must be ${e}`),"ERR_UNSUPPORTED_HASH_TYPE")}const s=UK[i],o=MK(e,t,r,n,s);return sw.encode64(o,null)}const jK=ia("libp2p-pubsub:");async function VK(e,t,r,n){switch(e.type){case nK.Signing:{const i={from:e.author.toBytes(),data:n,seqno:vv(8),topic:t,signature:void 0,key:void 0},s=(0,nw.concat)([jK,fq.Message.encode(i).finish()]);i.signature=await e.privateKey.sign(s),i.key=e.key;const o={type:"signed",from:e.author,data:r,sequenceNumber:BigInt(`0x${vh(i.seqno,"base16")}`),topic:t,signature:i.signature,key:i.key};return{raw:i,msg:o}}case nK.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:t}}}}async function zK(e,t){switch(e){case tK:return null!=t.signature?{valid:!1,error:oK.SignaturePresent}:null!=t.seqno?{valid:!1,error:oK.SeqnoPresent}:null!=t.key?{valid:!1,error:oK.FromPresent}:{valid:!0,message:{type:"unsigned",topic:t.topic,data:t.data??new Uint8Array(0)}};case eK:{if(null==t.seqno)return{valid:!1,error:oK.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:oK.InvalidSeqno};if(null==t.signature)return{valid:!1,error:oK.InvalidSignature};if(null==t.from)return{valid:!1,error:oK.InvalidPeerId};let e,n;try{e=vm(t.from)}catch(r){return{valid:!1,error:oK.InvalidPeerId}}if(t.key){if(n=bE(t.key),void 0!==e.publicKey&&!Fm(n.bytes,e.publicKey))return{valid:!1,error:oK.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:oK.InvalidPeerId};n=bE(e.publicKey)}const i={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},s=(0,nw.concat)([jK,fq.Message.encode(i).finish()]);return await n.verify(s,t.signature)?{valid:!0,message:{type:"signed",from:e,data:t.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${vh(t.seqno,"base16")}`),topic:t.topic,signature:t.signature,key:t.key??EE(n)}}:{valid:!1,error:oK.InvalidSignature}}}}const $K=(e,t)=>{const r=ia(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n};function qK(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return $K(e.from.toBytes(),e.sequenceNumber)}async function KK(e){return await Co.encode(e.data)}function HK(e,t,r,n,i){let s=0;const o=new Map;if(Object.entries(t.topics).forEach((([e,t])=>{const n=i.get(e)??"unknown",a=r.topics[e];if(void 0===a)return;let c=o.get(n);c||(c={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(n,c));let u=0,l=0,h=0,d=0,f=0;if(t.inMesh){const e=Math.max(t.meshTime/a.timeInMeshQuantum,a.timeInMeshCap);u+=e*a.timeInMeshWeight}let p=t.firstMessageDeliveries;if(p>a.firstMessageDeliveriesCap&&(p=a.firstMessageDeliveriesCap),l+=p*a.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<a.meshMessageDeliveriesThreshold){const e=a.meshMessageDeliveriesThreshold-t.meshMessageDeliveries,r=e*e;h+=r*a.meshMessageDeliveriesWeight}const y=t.meshFailurePenalty;d+=y*a.meshFailurePenaltyWeight;const g=t.invalidMessageDeliveries*t.invalidMessageDeliveries;f+=g*a.invalidMessageDeliveriesWeight,s+=(u+l+h+d+f)*a.topicWeight,c.p1w+=u,c.p2w+=l,c.p3w+=h,c.p3bw+=d,c.p4w+=f})),r.topicScoreCap>0&&s>r.topicScoreCap){s=r.topicScoreCap;const e=r.topicScoreCap/s;for(const t of o.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let a=0,c=0,u=0;const l=r.appSpecificScore(e);a+=l*r.appSpecificWeight,t.ips.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){const e=i-r.IPColocationFactorThreshold,t=e*e;c+=t*r.IPColocationFactorWeight}}));const h=t.behaviourPenalty*t.behaviourPenalty;return u+=h*r.behaviourPenaltyWeight,s+=a+c+u,{byTopic:o,p5w:a,p6w:c,p7w:u,score:s}}function GK(e,t,r,n,i){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const o of e){const e=t.get(o);if(e){const t=HK(o,e,r,n,i);for(const[e,r]of t.byTopic){let t=s.byTopic.get(e);t||(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(e,t)),t.p1w.push(r.p1w),t.p2w.push(r.p2w),t.p3w.push(r.p3w),t.p3bw.push(r.p3bw),t.p4w.push(r.p4w)}s.p5w.push(t.p5w),s.p6w.push(t.p6w),s.p7w.push(t.p7w),s.score.push(t.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}function WK(e,t,r=(()=>!0)){const n=new Set;if(t<=0)return n;for(const i of e){if(n.size>=t)break;r(i)&&(n.add(i),e.delete(i))}return n}function QK(e,t){return WK(e,t,(()=>!0))}class YK extends Error{constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function JK(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}function XK(e,t,r){const n=r??{},i=JK(e);async function*s(){let r;const s=()=>{null!=r&&r()};t.addEventListener("abort",s);while(1){let o;try{if(t.aborted){const{abortMessage:e,abortCode:t}=n;throw new YK(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=n;t(new YK(e,r))}}));o=await Promise.race([e,i.next()]),r=null}catch(nP){t.removeEventListener("abort",s);const o="aborted"===nP.type&&t.aborted;if(o&&null!=n.onAbort&&await n.onAbort(e),"function"===typeof i.return)try{const e=i.return();e instanceof Promise&&e.catch((e=>{null!=n.onReturnError&&n.onReturnError(e)}))}catch(nP){null!=n.onReturnError&&n.onReturnError(nP)}if(o&&!0===n.returnOnAbort)return;throw nP}if(!0===o.done)break;yield o.value}t.removeEventListener("abort",s)}return s()}function ZK(e,t,r){return n=>e(XK(n,t,r))}function eH(e,t,r){return{sink:ZK(e.sink,t,{...r,onAbort:void 0}),source:XK(e.source,t,r)}}function tH(e){return null!=globalThis?.Buffer?.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}const rH=e=>{const t=G$.encodingLength(e),r=tH(t);return G$.encode(e,r),rH.bytes=t,r};function nH(e){e=e??{};const t=e.lengthEncoder??rH,r=async function*(e){for await(const r of e){const e=t(r.byteLength);e instanceof Uint8Array?yield e:yield*e,r instanceof Uint8Array?yield r:yield*r}};return r}rH.bytes=0,nH.single=(e,t)=>{t=t??{};const r=t.lengthEncoder??rH;return new iT(r(e.byteLength),e)};const iH=8,sH=4194304;var oH;(function(e){e[e["LENGTH"]=0]="LENGTH",e[e["DATA"]=1]="DATA"})(oH||(oH={}));const aH=e=>{const t=G$.decode(e);return aH.bytes=G$.encodingLength(t),t};function cH(e){const t=async function*(t){const r=new iT;let n=oH.LENGTH,i=-1;const s=e?.lengthDecoder??aH,o=e?.maxLengthLength??iH,a=e?.maxDataLength??sH;for await(const c of t){r.append(c);while(r.byteLength>0){if(n===oH.LENGTH)try{if(i=s(r),i<0)throw Ut(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw Ut(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const t=s.bytes;r.consume(t),null!=e?.onLength&&e.onLength(i),n=oH.DATA}catch(nP){if(nP instanceof RangeError){if(r.byteLength>o)throw Ut(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw nP}if(n===oH.DATA){if(r.byteLength<i)break;const t=r.sublist(0,i);r.consume(i),null!=e?.onData&&e.onData(t),yield t,n=oH.LENGTH}}}if(r.byteLength>0)throw Ut(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")};return t}aH.bytes=0,cH.fromReader=(e,t)=>{let r=1;const n=async function*(){while(1)try{const{done:t,value:n}=await e.next(r);if(!0===t)return;null!=n&&(yield n)}catch(nP){if("ERR_UNDER_READ"===nP.code)return{done:!0,value:null};throw nP}finally{r=1}}(),i=e=>{r=e};return cH({...t??{},onLength:i})(n)};class uH{constructor(e,t,r){this.rawStream=e,this.pushable=O_({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=r.maxBufferSize??1/0,W_(XK(this.pushable,this.closeController.signal,{returnOnAbort:!0}),nH(),this.rawStream).catch(t)}get protocol(){return this.rawStream.stat.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}close(){this.closeController.abort(),this.pushable.return(),this.rawStream.close()}}class lH{constructor(e){this.rawStream=e,this.closeController=new AbortController,this.source=XK(W_(this.rawStream,cH()),this.closeController.signal,{returnOnAbort:!0})}close(){this.closeController.abort(),this.rawStream.close()}}var hH;(function(e){e[e["started"]=0]="started",e[e["stopped"]=1]="stopped"})(hH||(hH={}));class dH extends cq{constructor(e={}){super(),this.multicodecs=[wq,mq],this.peers=new Set,this.streamsInbound=new Map,this.streamsOutbound=new Map,this.outboundInflightQueue=O_({objectMode:!0}),this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.components=new kK,this.directPeerInitial=null,this.status={code:hH.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{const e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=e&&e(),this.status.code===hH.started){clearTimeout(this.status.heartbeatTimeout);let e=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;e<.25*this.opts.heartbeatInterval&&(e+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,e)}}))};const t={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:vq,Dlo:bq,Dhi:Eq,Dscore:_q,Dout:Aq,Dlazy:Iq,heartbeatInterval:Pq,fanoutTTL:xq,mcacheLength:Sq,mcacheGossip:kq,seenTTL:$q,gossipsubIWantFollowupMs:zq,prunePeers:Oq,pruneBackoff:Nq,graftFloodThreshold:Fq,opportunisticGraftPeers:Uq,opportunisticGraftTicks:Mq,directConnectTicks:Bq,...e,scoreParams:fK(e.scoreParams),scoreThresholds:wK(e.scoreThresholds)};if(this.globalSignaturePolicy=t.globalSignaturePolicy??eK,t.fallbackToFloodsub&&this.multicodecs.push(gq),this.log=Mt(t.debugName??"libp2p:gossipsub"),this.opts=t,this.direct=new Set(t.directPeers.map((e=>e.id.toString()))),this.seenCache=new RK({validityMs:t.seenTTL}),this.publishedMessageIds=new RK({validityMs:t.seenTTL}),e.msgIdFn)this.msgIdFn=e.msgIdFn;else switch(this.globalSignaturePolicy){case eK:this.msgIdFn=qK;break;case tK:this.msgIdFn=KK;break}if(e.fastMsgIdFn&&(this.fastMsgIdFn=e.fastMsgIdFn,this.fastMsgIdCache=new RK({validityMs:t.seenTTL})),this.msgIdToStrFn=e.msgIdToStrFn??Zq,this.mcache=e.messageCache||new hq(t.mcacheGossip,t.mcacheLength,this.msgIdToStrFn),e.dataTransform&&(this.dataTransform=e.dataTransform),e.metricsRegister){if(!e.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const r=Math.max(...Object.values(t.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),Yq),n=LK(e.metricsRegister,e.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:t.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:r/1e3});n.mcacheSize.addCollect((()=>this.onScrapeMetrics(n)));for(const e of this.multicodecs)n.protocolsEnabled.set({protocol:e},1);this.metrics=n}else this.metrics=null;this.gossipTracer=new CK(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new TK(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:t.heartbeatInterval}),this.maxInboundStreams=e.maxInboundStreams,this.maxOutboundStreams=e.maxOutboundStreams}getPeers(){return[...this.peers.keys()].map((e=>wm(e)))}isStarted(){return this.status.code===hH.started}async init(e){this.components=e,this.score.init(e)}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await uK(this.globalSignaturePolicy,this.components.getPeerId()),this.outboundInflightQueue=O_({objectMode:!0}),W_(this.outboundInflightQueue,(async e=>{for await(const{peerId:t,connection:r}of e)await this.createOutboundStream(t,r)})).catch((e=>this.log.error("outbound inflight queue error",e))),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.getPeerStore().addressBook.add(e.id,e.addrs)})));const e=this.components.getRegistrar();await Promise.all(this.multicodecs.map((t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))));const t=sq({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),r=await Promise.all(this.multicodecs.map((r=>e.register(r,t)))),n=setTimeout(this.runHeartbeat,Rq);this.status={code:hH.started,registrarTopologyIds:r,heartbeatTimeout:n,hearbeatStartMs:Date.now()+Rq},this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>await this.connect(e))))})).catch((e=>{this.log(e)}))}),Lq),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==hH.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:hH.stopped};const t=this.components.getRegistrar();e.forEach((e=>t.unregister(e))),this.outboundInflightQueue.end();for(const r of this.streamsOutbound.values())r.close();this.streamsOutbound.clear();for(const r of this.streamsInbound.values())r.close();this.streamsInbound.clear(),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;const r=t.remotePeer;this.addPeer(r,t.stat.direction),this.createInboundStream(r,e),this.outboundInflightQueue.push({peerId:r,connection:t})}onPeerConnected(e,t){this.isStarted()&&(this.addPeer(e,t.stat.direction),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(this.peers.has(r)&&!this.streamsOutbound.has(r))try{const n=new uH(await t.newStream(this.multicodecs),(e=>this.log.error("outbound pipe error",e)),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(r,n);const i=n.protocol;i===gq&&this.floodsubPeers.add(r),this.metrics?.peersPerProtocol.inc({protocol:i},1),this.subscriptions.size>0&&(this.log("send subscriptions to",r),this.sendSubscriptions(r,Array.from(this.subscriptions),!0))}catch(n){this.log.error("createOutboundStream error",n)}}async createInboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(!this.peers.has(r))return;const n=this.streamsInbound.get(r);void 0!==n&&(this.log("replacing existing inbound steam %s",r),n.close()),this.log("create inbound stream %s",r);const i=new lH(t);this.streamsInbound.set(r,i),this.pipePeerReadStream(e,i.source).catch((e=>this.log(e)))}addPeer(e,t){const r=e.toString();this.peers.has(r)||(this.log("new peer %p",e),this.peers.add(r),this.score.addPeer(r),this.outbound.has(r)||this.outbound.set(r,"outbound"===t))}removePeer(e){const t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);const r=this.streamsOutbound.get(t),n=this.streamsInbound.get(t);r&&this.metrics?.peersPerProtocol.inc({protocol:r.protocol},-1),r?.close(),n?.close(),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(const i of this.topics.values())i.delete(t);for(const[i,s]of this.mesh)!0===s.delete(t)&&this.metrics?.onRemoveFromMesh(i,OK.Dc,1);for(const i of this.fanout.values())i.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===hH.started}getMeshPeers(e){const t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(t?Array.from(t):[]).map((e=>wm(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await W_(t,(async t=>{for await(const n of t)try{const t=n.subarray(),r=fq.decode(t);this.metrics?.onRpcRecv(r,t.length),this.opts.awaitRpcHandler?await this.handleReceivedRpc(e,r):this.handleReceivedRpc(e,r).catch((e=>this.log(e)))}catch(r){this.log(r)}}))}catch(nP){this.log.error(nP),this.onPeerDisconnected(e)}}async handleReceivedRpc(e,t){if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void this.metrics?.rpcRecvNotAccepted.inc();if(this.log("rpc from %p",e),t.subscriptions&&t.subscriptions.length>0&&(t.subscriptions.forEach((t=>{this.handleReceivedSubscription(e,t)})),this.dispatchEvent(new lq("subscription-change",{detail:{peerId:e,subscriptions:t.subscriptions.filter((e=>null!==e.topic)).map((e=>({topic:e.topic??"",subscribe:Boolean(e.subscribe)})))}}))),t.messages)for(const r of t.messages){const t=this.handleReceivedMessage(e,r).catch((e=>this.log(e)));this.opts.awaitRpcMessageHandler&&await t}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t){if(null==t.topic)return;this.log("subscription update from %p topic %s",e,t.topic);let r=this.topics.get(t.topic);null==r&&(r=new Set,this.topics.set(t.topic,r)),t.subscribe?r.add(e.toString()):r.delete(e.toString())}async handleReceivedMessage(e,t){this.metrics?.onMsgRecvPreValidation(t.topic);const r=await this.validateReceivedMessage(e,t);switch(this.metrics?.onMsgRecvResult(t.topic,r.code),r.code){case aK.duplicate:return this.score.duplicateMessage(e.toString(),r.msgIdStr,t.topic),void this.mcache.observeDuplicate(r.msgIdStr,e.toString());case aK.invalid:if(r.msgIdStr){const n=r.msgIdStr;this.score.rejectMessage(e.toString(),n,t.topic,r.reason),this.gossipTracer.rejectMessage(n,r.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void this.metrics?.onMsgRecvInvalid(t.topic,r);case aK.valid:if(this.score.validateMessage(r.messageId.msgIdStr),this.gossipTracer.deliverMessage(r.messageId.msgIdStr),this.mcache.put(r.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)){const t=this.components.getPeerId().equals(e);t&&!this.opts.emitSelf||(super.dispatchEvent(new lq("gossipsub:message",{detail:{propagationSource:e,msgId:r.messageId.msgIdStr,msg:r.msg}})),super.dispatchEvent(new lq("message",{detail:r.msg})))}this.opts.asyncValidation||this.forwardMessage(r.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){const r=this.fastMsgIdFn?.(t),n=r?this.fastMsgIdCache?.get(r):void 0;if(n)return{code:aK.duplicate,msgIdStr:n};const i=await zK(this.globalSignaturePolicy,t);if(!i.valid)return{code:aK.invalid,reason:sK.Error,error:i.error};const s=i.message;try{this.dataTransform&&(s.data=this.dataTransform.inboundTransform(t.topic,s.data))}catch(l){return this.log("Invalid message, transform failed",l),{code:aK.invalid,reason:sK.Error,error:oK.TransformFailed}}const o=await this.msgIdFn(s),a=this.msgIdToStrFn(o),c={msgId:o,msgIdStr:a};if(r&&this.fastMsgIdCache?.put(r,a),this.seenCache.has(a))return{code:aK.duplicate,msgIdStr:a};this.seenCache.put(a);const u=this.topicValidators.get(t.topic);if(null!=u){let t;try{t=await u(s.topic,s,e)}catch(l){const e=l.code;e===Hq&&(t=iK.Ignore),t=e===Kq?iK.Reject:iK.Ignore}if(t!==iK.Accept)return{code:aK.invalid,reason:cK(t),msgIdStr:a}}return{code:aK.valid,messageId:c,msg:s}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,r){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:r}))),messages:[]})}async handleControlMessage(e,t){if(void 0===t)return;const r=t.ihave?this.handleIHave(e,t.ihave):[],n=t.iwant?this.handleIWant(e,t.iwant):[],i=t.graft?await this.handleGraft(e,t.graft):[];t.prune&&await this.handlePrune(e,t.prune),(r.length||n.length||i.length)&&this.sendRpc(e,Jq(n,{iwant:r,prune:i}))}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<Wq&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;const n=this.score.score(e);return n>=Gq?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+Qq}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){if(!t.length)return[];const r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,r),this.metrics?.ihaveRcvIgnored.inc({reason:DK.LowScore}),[];const n=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,n),n>Vq)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:DK.MaxIhave}),[];const i=this.iasked.get(e)??0;if(i>=jq)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,i),this.metrics?.ihaveRcvIgnored.inc({reason:DK.MaxIasked}),[];const s=new Map;if(t.forEach((({topicID:e,messageIDs:t})=>{if(!e||!t||!this.mesh.has(e))return;let r=0;t.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(s.set(t,e),r++)})),this.metrics?.onIhaveRcv(e,t.length,r)})),!s.size)return[];let o=s.size;o+i>jq&&(o=jq-i),this.log("IHAVE: Asking for %d out of %d messages from %s",o,s.size,e);let a=Array.from(s.values());return Xq(a),a=a.slice(0,o),this.iasked.set(e,i+o),this.gossipTracer.addPromise(e,a),[{messageIDs:a}]}handleIWant(e,t){if(!t.length)return[];const r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,r),[];const n=new Map,i=new Map;let s=0;return t.forEach((({messageIDs:t})=>{t&&t.forEach((t=>{const r=this.msgIdToStrFn(t),o=this.mcache.getWithIWantCount(r,e);null!=o?(i.set(o.msg.topic,1+(i.get(o.msg.topic)??0)),o.count>Cq?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):n.set(r,o.msg)):s++}))})),this.metrics?.onIwantRcv(i,s),n.size?(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){const r=[],n=this.score.score(e),i=Date.now();let s=this.opts.doPX;return t.forEach((({topicID:t})=>{if(!t)return;const o=this.mesh.get(t);if(!o)return void(s=!1);if(o.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),r.push(t),void(s=!1);const a=this.backoff.get(t)?.get(e);if("number"===typeof a&&i<a){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,NK.GraftBackoff),s=!1;const n=a+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return i<n&&this.score.addPenalty(e,1,NK.GraftBackoff),this.addBackoff(e,t),void r.push(t)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,t),r.push(t),s=!1,void this.addBackoff(e,t)):o.size>=this.opts.Dhi&&!this.outbound.get(e)?(r.push(t),void this.addBackoff(e,t)):(this.log("GRAFT: Add mesh link from %s in %s",e,t),this.score.graft(e,t),o.add(e),void this.metrics?.onAddToMesh(t,xK.Subscribed,1))})),r.length?await Promise.all(r.map((t=>this.makePrune(e,t,s)))):[]}async handlePrune(e,t){const r=this.score.score(e);for(const{topicID:n,backoff:i,peers:s}of t){if(null==n)continue;const t=this.mesh.get(n);if(!t)return;if(this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),t.has(e)&&(t.delete(e),this.metrics?.onRemoveFromMesh(n,OK.Unsub,1)),"number"===typeof i&&i>0?this.doAddBackoff(e,n,1e3*i):this.addBackoff(e,n),s&&s.length){if(r<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,r,n);continue}await this.pxConnect(s)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,r){let n=this.backoff.get(t);n||(n=new Map,this.backoff.set(t,n));const i=Date.now()+r,s=n.get(e)??0;s<i&&n.set(e,i)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,NK.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%Dq!==0)return;const e=Date.now();this.backoff.forEach(((t,r)=>{t.forEach(((r,n)=>{r<e&&t.delete(n)})),0===t.size&&this.backoff.delete(r)}))}async directConnect(){const e=[];this.direct.forEach((t=>{this.streamsOutbound.has(t)||e.push(t)})),await Promise.all(e.map((async e=>await this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(Xq(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(!e.peerID)return;const r=vm(e.peerID).toString();if(!this.peers.has(r))if(e.signedPeerRecord)try{const n=await W$.openAndCertify(e.signedPeerRecord,"libp2p-peer-record"),i=n.peerId;if(!n.peerId.equals(r))return void this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",i,r);if(!await this.components.getPeerStore().addressBook.consumePeerRecord(n))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(r)}catch(n){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(r)}))),t.length&&await Promise.all(t.map((async e=>await this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=wm(e),r=await this.components.getConnectionManager().openConnection(t);for(const n of this.multicodecs)for(const e of this.components.getRegistrar().getTopologies(n))e.onConnect(t,r)}subscribe(e){if(this.status.code!==hH.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==hH.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const r of this.peers.keys())this.sendSubscriptions(r,[e],!1);this.leave(e).catch((e=>{this.log(e)}))}join(e){if(this.status.code!==hH.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);const t=new Set,r=this.fanout.get(e);if(r&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),r.forEach((e=>{!this.direct.has(e)&&this.score.score(e)>=0&&t.add(e)})),this.metrics?.onAddToMesh(e,xK.Fanout,t.size)),t.size<this.opts.D){const r=t.size,n=this.getRandomGossipPeers(e,this.opts.D,(e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0));n.forEach((e=>{t.add(e)})),this.metrics?.onAddToMesh(e,xK.Random,t.size-r)}this.mesh.set(e,t),t.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}async leave(e){if(this.status.code!==hH.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);const t=this.mesh.get(e);t&&(await Promise.all(Array.from(t).map((async t=>(this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e))))),this.mesh.delete(e))}selectPeersToForward(e,t,r){const n=new Set,i=this.topics.get(e);i&&(this.direct.forEach((e=>{i.has(e)&&t!==e&&!r?.has(e)&&n.add(e)})),this.floodsubPeers.forEach((e=>{i.has(e)&&t!==e&&!r?.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&n.add(e)})));const s=this.mesh.get(e);return s&&s.size>0&&s.forEach((e=>{t===e||r?.has(e)||n.add(e)})),n}selectPeersToPublish(e){const t=new Set,r={direct:0,floodsub:0,mesh:0,fanout:0},n=this.topics.get(e);if(n)if(this.opts.floodPublish)n.forEach((e=>{this.direct.has(e)?(t.add(e),r.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));else{this.direct.forEach((e=>{n.has(e)&&(t.add(e),r.direct++)})),this.floodsubPeers.forEach((e=>{n.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));const i=this.mesh.get(e);if(i&&i.size>0)i.forEach((e=>{t.add(e),r.mesh++}));else{const n=this.fanout.get(e);if(n&&n.size>0)n.forEach((e=>{t.add(e),r.fanout++}));else{const n=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));n.size>0&&(this.fanout.set(e,n),n.forEach((e=>{t.add(e),r.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:r}}forwardMessage(e,t,r,n){r&&this.score.deliverMessage(r,e,t.topic);const i=this.selectPeersToForward(t.topic,r,n),s=Jq([t]);i.forEach((e=>{this.sendRpc(e,s)})),this.metrics?.onForwardMsg(t.topic,i.size)}async publish(e,t){const r=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const{raw:n,msg:i}=await VK(this.publishConfig,e,t,r),s=await this.msgIdFn(i),o=this.msgIdToStrFn(s);if(this.seenCache.has(o))throw Error("PublishError.Duplicate");const{tosend:a,tosendCount:c}=this.selectPeersToPublish(e),u=!0===this.opts.emitSelf&&this.subscriptions.has(e);if(0===a.size&&!this.opts.allowPublishToZeroPeers&&!u)throw Error("PublishError.InsufficientPeers");this.seenCache.put(o),this.mcache.put({msgId:s,msgIdStr:o},n,!0),this.publishedMessageIds.put(o);const l=Jq([n]);for(const h of a){const e=this.sendRpc(h,l);e||a.delete(h)}return this.metrics?.onPublishMsg(e,c,a.size,null!=n.data?n.data.length:0),u&&(a.add(this.components.getPeerId().toString()),super.dispatchEvent(new lq("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:o,msg:i}})),super.dispatchEvent(new lq("message",{detail:i}))),{recipients:Array.from(a.values()).map((e=>wm(e)))}}reportMessageValidationResult(e,t,r){if(r===iK.Accept){const n=this.mcache.validate(e);if(this.metrics?.onReportValidationMcacheHit(null!==n),null!=n){const{message:i,originatingPeers:s}=n;this.score.deliverMessage(t.toString(),e,i.topic),this.forwardMessage(e,n.message,t.toString(),s),this.metrics?.onReportValidation(i.topic,r)}}else{const n=this.mcache.remove(e);if(this.metrics?.onReportValidationMcacheHit(null!==n),n){const i=cK(r),{message:s,originatingPeers:o}=n;this.score.rejectMessage(t.toString(),e,s.topic,i);for(const t of o)this.score.rejectMessage(t,e,s.topic,i);this.metrics?.onReportValidation(s.topic,r)}}}sendGraft(e,t){const r=[{topicID:t}],n=Jq([],{graft:r});this.sendRpc(e,n)}async sendPrune(e,t){const r=[await this.makePrune(e,t,this.opts.doPX)],n=Jq([],{prune:r});this.sendRpc(e,n)}sendRpc(e,t){const r=this.streamsOutbound.get(e);if(!r)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const n=this.control.get(e);n&&(this.piggybackControl(e,t,n),this.control.delete(e));const i=this.gossip.get(e);i&&(this.piggybackGossip(e,t,i),this.gossip.delete(e));const s=fq.encode(t).finish();try{r.push(s)}catch(o){return this.log.error(`Cannot send rpc to ${e}`,o),n&&this.control.set(e,n),i&&this.gossip.set(e,i),!1}return this.metrics?.onRpcSent(t,s.length),!0}piggybackControl(e,t,r){const n=(r.graft||[]).filter((({topicID:t})=>(t&&this.mesh.get(t)||new Set).has(e))),i=(r.prune||[]).filter((({topicID:t})=>!(t&&this.mesh.get(t)||new Set).has(e)));(n.length||i.length)&&(t.control?(t.control.graft=t.control.graft&&t.control.graft.concat(n),t.control.prune=t.control.prune&&t.control.prune.concat(i)):t.control={graft:n,prune:i,ihave:[],iwant:[]})}piggybackGossip(e,t,r){t.control||(t.control={ihave:[],iwant:[],graft:[],prune:[]}),t.control.ihave=r}async sendGraftPrune(e,t,r){const n=this.opts.doPX;for(const[i,s]of e){const e=s.map((e=>({topicID:e})));let o=[];const a=t.get(i);a&&(o=await Promise.all(a.map((async e=>await this.makePrune(i,e,n&&!r.get(i))))),t.delete(i));const c=Jq([],{graft:e,prune:o});this.sendRpc(i,c)}for(const[i,s]of t){const e=await Promise.all(s.map((async e=>await this.makePrune(i,e,n&&!r.get(i))))),t=Jq([],{prune:e});this.sendRpc(i,t)}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[r,n]of e)this.doEmitGossip(r,n,t.get(r)??[])}doEmitGossip(e,t,r){if(!r.length)return;if(Xq(r),r.length>jq&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),!t.size)return;let n=this.opts.Dlazy;const i=Tq*t.size;let s=t;i>n&&(n=i),n>s.size?n=s.size:s=Xq(Array.from(s)).slice(0,n),s.forEach((t=>{let n=r;r.length>jq&&(n=Xq(n.slice()).slice(0,jq)),this.pushGossip(t,{topicID:e,messageIDs:n})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,Jq([],{ihave:t}));for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,Jq([],{graft:t.graft,prune:t.prune}))}pushGossip(e,t){this.log("Add gossip to %s",e);const r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}async makePrune(e,t,r){if(this.score.prune(e,t),this.streamsOutbound.get(e).protocol===mq)return{topicID:t,peers:[]};const n=this.opts.pruneBackoff/1e3;if(!r)return{topicID:t,peers:[],backoff:n};const i=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),s=await Promise.all(Array.from(i).map((async e=>{const t=wm(e);return{peerID:t.toBytes(),signedPeerRecord:await this.components.getPeerStore().addressBook.getRawEnvelope(t)}})));return{topicID:t,peers:s,backoff:n}}async heartbeat(){const{D:e,Dlo:t,Dhi:r,Dscore:n,Dout:i,fanoutTTL:s}=this.opts;this.heartbeatTicks++;const o=new Map,a=e=>{let t=o.get(e);return void 0===t&&(t=this.score.score(e),o.set(e,t)),t},c=new Map,u=new Map,l=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const h=new Map;this.mesh.forEach(((s,o)=>{const d=this.topics.get(o),f=new Set,p=new Set;if(h.set(o,p),d){const e=Xq(Array.from(d)),t=this.backoff.get(o);for(const r of e){const e=this.streamsOutbound.get(r);if(e&&this.multicodecs.includes(e.protocol)&&!s.has(r)&&!this.direct.has(r)){const e=a(r);t&&t.has(r)||!(e>=0)||f.add(r),e>=this.opts.scoreThresholds.gossipThreshold&&p.add(r)}}}const y=(e,t)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",e,o),this.addBackoff(e,o),s.delete(e),a(e)>=this.opts.scoreThresholds.gossipThreshold&&p.add(e),this.metrics?.onRemoveFromMesh(o,t,1);const r=u.get(e);r?r.push(o):u.set(e,[o])},g=(e,t)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",e,o),this.score.graft(e,o),s.add(e),p.delete(e),this.metrics?.onAddToMesh(o,t,1);const r=c.get(e);r?r.push(o):c.set(e,[o])};if(s.forEach((e=>{const t=a(e);t<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,o),y(e,OK.BadScore),l.set(e,!0))})),s.size<t){const t=e-s.size,r=QK(f,t);r.forEach((e=>{g(e,xK.NotEnough)}))}if(s.size>r){let t=Array.from(s);t.sort(((e,t)=>a(t)-a(e))),t=t.slice(0,n).concat(Xq(t.slice(n)));let r=0;if(t.slice(0,e).forEach((e=>{this.outbound.get(e)&&r++})),r<i){const n=e=>{const r=t[e];for(let n=e;n>0;n--)t[n]=t[n-1];t[0]=r};if(r>0){let i=r;for(let r=1;r<e&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}let i=e-r;for(let r=e;r<t.length&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}t.slice(e).forEach((e=>{y(e,OK.Excess)}))}if(s.size>=t){let e=0;if(s.forEach((t=>{this.outbound.get(t)&&e++})),e<i){const t=i-e,r=WK(f,t,(e=>!0===this.outbound.get(e)));r.forEach((e=>{g(e,xK.Outbound)}))}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&s.size>1){const e=Array.from(s).sort(((e,t)=>a(e)-a(t))),t=Math.floor(s.size/2),r=a(e[t]);if(r<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=this.opts.opportunisticGraftPeers,t=WK(f,e,(e=>a(e)>r));for(const r of t)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",r,o),g(r,xK.Opportunistic)}}}));const d=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+s<d&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((t,r)=>{const n=this.topics.get(r);t.forEach((e=>{(!n.has(e)||a(e)<this.opts.scoreThresholds.publishThreshold)&&t.delete(e)}));const i=this.topics.get(r),s=[],o=new Set;if(h.set(r,o),i){const e=Xq(Array.from(i));for(const r of e){const e=this.streamsOutbound.get(r);if(e&&this.multicodecs.includes(e.protocol)&&!t.has(r)&&!this.direct.has(r)){const e=a(r);e>=this.opts.scoreThresholds.publishThreshold&&s.push(r),e>=this.opts.scoreThresholds.gossipThreshold&&o.add(r)}}}if(t.size<e){const r=e-t.size;s.slice(0,r).forEach((e=>{t.add(e),o?.delete(e)}))}})),this.emitGossip(h),await this.sendGraftPrune(c,u,l),this.flush(),this.mcache.shift(),this.dispatchEvent(new lq("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,r=(()=>!0)){const n=this.topics.get(e);if(!n)return new Set;let i=[];return n.forEach((e=>{const t=this.streamsOutbound.get(e);t&&this.multicodecs.includes(t.protocol)&&r(e)&&i.push(e)})),i=Xq(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0;for(const s of this.backoff.values())t+=s.size;e.cacheSize.set({cache:"backoff"},t);for(const[s,o]of this.topics)e.topicPeersCount.set({topicStr:s},o.size);for(const[s,o]of this.mesh)e.meshPeerCounts.set({topicStr:s},o.size);const r=[],n=new Map;e.behaviourPenalty.reset();for(const s of this.peers.keys()){const t=this.score.score(s);r.push(t),n.set(s,t),e.behaviourPenalty.observe(this.score.peerStats.get(s)?.behaviourPenalty??0)}e.registerScores(r,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,n);const i=GK(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(i)}}dH.multicodec=wq;const fH=()=>({gossipsub:new dH({allowPublishToZeroPeers:!0,fallbackToFloodsub:!0,emitSelf:!0,maxInboundStreams:64,maxOutboundStreams:128})});function pH(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}const yH=Mt("libp2p-delegated-peer-routing"),gH=3e4,mH=4;class wH{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Wp({concurrency:mH});const{protocol:t,host:r,port:n}=e.getEndpointConfig();yH(`enabled DelegatedPeerRouting via ${t}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(e,t={}){yH("findPeer starts: %p",e),t.timeout=t.timeout??gH,t.signal=Uf([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const r=pH(),n=pH();this.httpQueue.add((async()=>(r.resolve(),await n.promise)));try{await r.promise;for await(const r of this.client.dht.findPeer(e,t))if("FINAL_PEER"===r.name){const e={id:r.peer.id,multiaddrs:r.peer.multiaddrs,protocols:[]};return e}}catch(nP){throw yH.error("findPeer errored: %o",nP),nP}finally{n.resolve(),yH("findPeer finished: %p",e)}throw Ut(new Error("Not found"),"ERR_NOT_FOUND")}async*getClosestPeers(e,t={}){let r;const n=Zt.k.asCID(e);r=null!=n?n:vm(e),yH("getClosestPeers starts: %s",r),t.timeout=t.timeout??gH,t.signal=Uf([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const i=pH(),s=pH();this.httpQueue.add((async()=>(i.resolve(),await s.promise)));try{await i.promise;for await(const e of this.client.dht.query(r,t))"PEER_RESPONSE"===e.name&&(yield*e.closer.map((e=>({id:e.id,multiaddrs:e.multiaddrs,protocols:[]}))))}catch(nP){throw yH.error("getClosestPeers errored:",nP),nP}finally{s.resolve(),yH("getClosestPeers finished: %b",e)}}}const vH=Mt("libp2p:delegated-content-routing"),bH=3e4,EH=4,_H=2;class AH{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new Wp({concurrency:EH}),this.httpQueueRefs=new Wp({concurrency:_H});const{protocol:t,host:r,port:n}=e.getEndpointConfig();vH(`enabled DelegatedContentRouting via ${t}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(e,t={}){vH("findProviders starts: %c",e),t.timeout=t.timeout??bH,t.signal=Uf([this.abortController.signal].concat(null!=t.signal?[t.signal]:[]));const r=pH(),n=pH();this.httpQueue.add((async()=>(r.resolve(),await n.promise)));try{await r.promise;for await(const r of this.client.dht.findProvs(e,t))"PROVIDER"===r.name&&(yield*r.providers.map((e=>{const t={id:e.id,protocols:[],multiaddrs:e.multiaddrs};return t})))}catch(nP){throw vH.error("findProviders errored:",nP),nP}finally{n.resolve(),vH("findProviders finished: %c",e)}}async provide(e,t={}){vH("provide starts: %c",e),t.timeout=t.timeout??bH,t.signal=Uf([this.abortController.signal].concat(null!=t.signal?[t.signal]:[])),await this.httpQueueRefs.add((async()=>{await this.client.block.stat(e,t),await I_(this.client.dht.provide(e,t))})),vH("provide finished: %c",e)}async put(e,t,r={}){vH("put value start: %b",e),r.timeout=r.timeout??bH,r.signal=Uf([this.abortController.signal].concat(null!=r.signal?[r.signal]:[])),await this.httpQueue.add((async()=>{await I_(this.client.dht.put(e,t,r))})),vH("put value finished: %b",e)}async get(e,t={}){return vH("get value start: %b",e),t.timeout=t.timeout??bH,t.signal=Uf([this.abortController.signal].concat(null!=t.signal?[t.signal]:[])),await this.httpQueue.add((async()=>{for await(const r of this.client.dht.get(e,t))if("VALUE"===r.name)return vH("get value finished: %b",e),r.value;throw Ut(new Error("Not found"),"ERR_NOT_FOUND")}))}}const SH=e=>Promise.reject(new Error(`No base found for "${e}"`));class kH{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||SH;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const IH=e=>Promise.reject(new Error(`No codec found for "${e}"`));class TH{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||IH;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const r=await this._loadCodec(e);return null==t[e]&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}const CH=e=>Promise.reject(new Error(`No hasher found for "${e}"`));class RH{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||CH;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const r=await this._loadHasher(e);return null==t[e]&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}function PH(e){try{e=cB(Kl(e))}catch(nP){}return e=e.toString(),e}var xH=()=>{};const OH=Mt("ipfs-http-client:lib:error-handler"),NH=gt.bind({ignoreUndefined:!0}),DH=mt.isBrowser||mt.isWebWorker?location.protocol:"http",BH=mt.isBrowser||mt.isWebWorker?location.hostname:"localhost",LH=mt.isBrowser||mt.isWebWorker?location.port:"5001",MH=(e={})=>{let t,r,n={};if("string"===typeof e||$l(e))t=new URL(PH(e));else if(e instanceof URL)t=e;else if("string"===typeof e.url||$l(e.url))t=new URL(PH(e.url)),n=e;else if(e.url instanceof URL)t=e.url,n=e;else{n=e||{};const r=(n.protocol||DH).replace(":",""),i=(n.host||BH).split(":")[0],s=n.port||LH;t=new URL(`${r}://${i}:${s}`)}if(n.apiPath?t.pathname=n.apiPath:"/"!==t.pathname&&void 0!==t.pathname||(t.pathname="api/v0"),mt.isNode){const e=xH(t);r=n.agent||new e({keepAlive:!0,maxSockets:6})}return{...n,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:r}},UH=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const r=await e.json();OH(r),t=r.Message||r.message}else t=await e.text()}catch(nP){OH("Failed to parse error response",nP),t=nP.message}let r=new Qp.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(r=new Qp.TimeoutError),t&&t.includes("context deadline exceeded")&&(r=new Qp.TimeoutError)),t&&t.includes("request timed out")&&(r=new Qp.TimeoutError),t&&(r.message=t),r},FH=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,jH=e=>e.replace(FH,(function(e){return"-"+e.toLowerCase()})),VH=e=>"string"===typeof e?zf(e):e;class zH extends Qp{constructor(e={}){const t=MH(e);super({timeout:VH(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:UH,transformSearchParams:e=>{const t=new URLSearchParams;for(const[r,n]of e)"undefined"!==n&&"null"!==n&&"signal"!==r&&t.append(jH(r),n),"timeout"!==r||isNaN(n)||t.append(jH(r),n);return t},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=(e,n={})=>("string"!==typeof e||e.startsWith("/")||(e=`${t.url}/${e}`),r.call(this,e,NH(n,{method:"POST"})))}}Qp.HTTPError;const $H=e=>t=>e(new zH(t),t);function qH(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function KH(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw Ut(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function HH({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:i,...s}={}){t&&(s={...s,...t}),r&&(s.hash=r),null!=n&&(n=KH(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),null!=i&&(s.mode=qH(i)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const o=new URLSearchParams(s);return e.forEach((e=>o.append("arg",e))),o}const GH=$H((e=>{async function t(t={}){const r=await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:HH(t),headers:t.headers})).json();return(r.Keys||[]).map((e=>Zt.k.parse(e["/"])))}return t})),WH=$H((e=>{async function t(t,r={}){const n=await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:HH({...r,peer:t.toString()}),headers:r.headers})).json();return(n.Keys||[]).map((e=>Zt.k.parse(e["/"])))}return t})),QH=$H((e=>{async function t(t={}){const r=await e.post("bitswap/stat",{searchParams:HH(t),signal:t.signal,headers:t.headers});return YH(await r.json())}return t}));function YH(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((e=>Zt.k.parse(e["/"]))),peers:(e.Peers||[]).map((e=>wm(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}const JH=$H((e=>{async function t(t,r={}){const n=await e.post("bitswap/unwant",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers});return n.json()}return t}));function XH(e){return{wantlist:GH(e),wantlistForPeer:WH(e),unwant:JH(e),stat:QH(e)}}const ZH=$H((e=>{async function t(t,r={}){const n=await e.post("block/get",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers});return new Uint8Array(await n.arrayBuffer())}return t}));async function eG(e){if(SS(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(kS(e))return e;if(TS(e)&&(e=ES(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=AS(e),{value:r,done:n}=await t.peek();if(n)return tG(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await S_(t))]);if(SS(r)||"string"===typeof r||r instanceof String)return tG(t)}throw Ut(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function tG(e){const t=[];for await(const r of e)t.push(r);return new Blob(t)}function rG(e){return eI(e,eG,!0)}function nG(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function iG(e,t,r={}){const n=[],i=new FormData;let s=0,o=0;for await(const{content:a,path:c,mode:u,mtime:l}of rG(e)){let e="";const t=a?"file":"dir";s>0&&(e=`-${s}`);let r=t+e;const h=[];if(null!==u&&void 0!==u&&h.push(`mode=${nG(u)}`),null!=l){const{secs:e,nsecs:t}=l;h.push(`mtime=${e}`),null!=t&&h.push(`mtime-nsecs=${t}`)}if(h.length&&(r=`${r}?${h.join("&")}`),a){i.set(r,a,null!=c?encodeURIComponent(c):void 0);const e=o+a.size;n.push({name:c,start:o,end:e}),o=e}else{if(null==c)throw new Error("path or content or both must be set");i.set(r,new File([""],encodeURIComponent(c),{type:"application/x-directory"}))}s++}return{total:o,parts:n,headers:r,body:i}}function sG(e){return e.filter(Boolean)}function oG(...e){return(0,Uf.anySignal)(sG(e))}const aG=$H((e=>{async function t(r,n={}){const i=new AbortController,s=oG(i.signal,n.signal);let o;try{const t=await e.post("block/put",{signal:s,searchParams:HH(n),...await iG([r],i,n.headers)});o=await t.json()}catch(nP){if("dag-pb"===n.format)return t(r,{...n,format:"protobuf"});if("dag-cbor"===n.format)return t(r,{...n,format:"cbor"});throw nP}return Zt.k.parse(o.Key)}return t})),cG=$H((e=>{async function*t(t,r={}){Array.isArray(t)||(t=[t]);const n=await e.post("block/rm",{signal:r.signal,searchParams:HH({arg:t.map((e=>e.toString())),"stream-channels":!0,...r}),headers:r.headers});for await(const e of n.ndjson())yield uG(e)}return t}));function uG(e){const t={cid:Zt.k.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const lG=$H((e=>{async function t(t,r={}){const n=await e.post("block/stat",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers}),i=await n.json();return{cid:Zt.k.parse(i.Key),size:i.Size}}return t}));function hG(e){return{get:ZH(e),put:aG(e),rm:cG(e),stat:lG(e)}}const dG=$H((e=>{async function t(t,r={}){const n=await e.post("bootstrap/add",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((e=>Kl(e)))}}return t})),fG=$H((e=>{async function t(t={}){const r=await e.post("bootstrap/rm",{signal:t.signal,searchParams:HH({...t,all:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>Kl(e)))}}return t})),pG=$H((e=>{async function t(t={}){const r=await e.post("bootstrap/list",{signal:t.signal,searchParams:HH(t),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>Kl(e)))}}return t})),yG=$H((e=>{async function t(t={}){const r=await e.post("bootstrap/add",{signal:t.signal,searchParams:HH({...t,default:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>Kl(e)))}}return t})),gG=$H((e=>{async function t(t,r={}){const n=await e.post("bootstrap/rm",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((e=>Kl(e)))}}return t}));function mG(e){return{add:dG(e),clear:fG(e),list:pG(e),reset:yG(e),rm:gG(e)}}const wG=$H((e=>{async function t(t,r={}){const n=await e.post("config/profile/apply",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return{original:i.OldCfg,updated:i.NewCfg}}return t}));function vG(e){if(null==e)return e;const t=/^[A-Z]+$/,r={};return Object.keys(e).reduce(((r,n)=>(t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r)),r)}const bG=$H((e=>{async function t(t={}){const r=await e.post("config/profile/list",{signal:t.signal,searchParams:HH(t),headers:t.headers}),n=await r.json();return n.map((e=>vG(e)))}return t}));function EG(e){return{apply:wG(e),list:bG(e)}}const _G=$H((e=>{const t=async(t,r={})=>{if(!t)throw new Error("key argument is required");const n=await e.post("config",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Value};return t})),AG=$H((e=>{const t=async(t={})=>{const r=await e.post("config/show",{signal:t.signal,searchParams:HH({...t}),headers:t.headers}),n=await r.json();return n};return t})),SG=$H((e=>{const t=async(t,r={})=>{const n=new AbortController,i=oG(n.signal,r.signal),s=await e.post("config/replace",{signal:i,searchParams:HH(r),...await iG([ia(JSON.stringify(t))],n,r.headers)});await s.text()};return t})),kG=$H((e=>{const t=async(t,r,n={})=>{if("string"!==typeof t)throw new Error("Invalid key type");const i={...n,...IG(t,r)},s=await e.post("config",{signal:n.signal,searchParams:HH(i),headers:n.headers});await s.text()};return t})),IG=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function TG(e){return{getAll:AG(e),get:_G(e),set:kG(e),replace:SG(e),profiles:EG(e)}}const CG=$H((e=>{async function*t(t,r={}){const n=await e.post("dag/export",{signal:r.signal,searchParams:HH({arg:t.toString()}),headers:r.headers});yield*n.iterator()}return t}));async function*RG(e,t,r,n,i){const s=async e=>{const t=await r.getCodec(e.code),s=await n(e,i);return t.decode(s)},o=t.split("/").filter(Boolean);let a=await s(e),c=e;while(o.length){const e=o.shift();if(!e)throw Ut(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,e))throw Ut(new Error(`no link named "${e}" under ${c}`),"ERR_NO_LINK");a=a[e],yield{value:a,remainderPath:o.join("/")};const r=Zt.k.asCID(a);r&&(c=r,a=await s(a))}yield{value:a,remainderPath:""}}const PG=(e,t)=>{const r=$H(((t,r)=>{const n=ZH(r),i=async(t,r={})=>{if(r.path){const i=r.localResolve?await KD(RG(t,r.path,e,n,r)):await Sm(RG(t,r.path,e,n,r)),s=i;if(!s)throw Ut(new Error("Not found"),"ERR_NOT_FOUND");return s}const i=await e.getCodec(t.code),s=await n(t,r),o=i.decode(s);return{value:o,remainderPath:""}};return i}));return r(t)},xG=$H((e=>{async function*t(t,r={}){const n=new AbortController,i=oG(n.signal,r.signal),{headers:s,body:o}=await iG(t,n,r.headers),a=await e.post("dag/import",{signal:i,headers:s,body:o,searchParams:HH({"pin-roots":r.pinRoots})});for await(const{Root:e}of a.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:r}=e;yield{root:{cid:Zt.k.parse(t),pinErrorMsg:r}}}}return t})),OG=(e,t)=>{const r=$H((t=>{const r=async(r,n={})=>{const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...n};let s;if(i.inputCodec){if(!(r instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=r}else{const t=await e.getCodec(i.storeCodec);s=t.encode(r),i.inputCodec=i.storeCodec}const o=new AbortController,a=oG(o.signal,i.signal),c=await t.post("dag/put",{timeout:i.timeout,signal:a,searchParams:HH(i),...await iG([s],o,i.headers)}),u=await c.json();return Zt.k.parse(u.Cid["/"])};return r}));return r(t)},NG=$H((e=>{const t=async(t,r={})=>{const n=await e.post("dag/resolve",{signal:r.signal,searchParams:HH({arg:`${t}${r.path?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers}),i=await n.json();return{cid:Zt.k.parse(i.Cid["/"]),remainderPath:i.RemPath}};return t}));function DG(e,t){return{export:CG(t),get:PG(e,t),import:xG(t),put:OG(e,t),resolve:NG(t)}}const BG=0,LG=1,MG=2,UG=3,FG=4,jG=5,VG=6,zG=7,$G=e=>{if(e.Type===BG)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===LG)return{from:wm(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:wm(e),multiaddrs:t.map((e=>Kl(e))),protocols:[]}))),providers:(e.Responses||[]).map((({ID:e,Addrs:t})=>({id:wm(e),multiaddrs:t.map((e=>Kl(e))),protocols:[]})))};if(e.Type===MG){let t={id:e.ID??wm(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(t={id:wm(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>Kl(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===UG)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===FG)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((({ID:e,Addrs:t})=>({id:wm(e),multiaddrs:t.map((e=>Kl(e))),protocols:[]})))};if(e.Type===jG)return{name:"VALUE",type:e.Type,value:ia(e.Extra,"base64pad")};if(e.Type===VG){const t=e.Responses.map((({ID:e})=>wm(e)));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===zG)return{name:"DIALING_PEER",type:e.Type,peer:wm(e.ID)};throw new Error("Unknown DHT event type")},qG=$H((e=>{async function*t(t,r={}){const n=await e.post("dht/findpeer",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers});for await(const e of n.ndjson())yield $G(e)}return t})),KG=$H((e=>{async function*t(t,r={}){const n=await e.post("dht/findprovs",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield $G(e)}return t})),HG=$H((e=>{async function*t(t,r={}){const n=await e.post("dht/get",{signal:r.signal,searchParams:HH({arg:t instanceof Uint8Array?vh(t):t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield $G(e)}return t})),GG=$H((e=>{async function*t(t,r={recursive:!1}){const n=Array.isArray(t)?t:[t],i=await e.post("dht/provide",{signal:r.signal,searchParams:HH({arg:n.map((e=>e.toString())),...r}),headers:r.headers});for await(const e of i.ndjson())yield $G(e)}return t})),WG=$H((e=>{async function*t(t,r,n={}){const i=new AbortController,s=oG(i.signal,n.signal),o=await e.post("dht/put",{signal:s,searchParams:HH({arg:t instanceof Uint8Array?vh(t):t.toString(),...n}),...await iG([r],i,n.headers)});for await(const e of o.ndjson())yield $G(e)}return t})),QG=$H((e=>{async function*t(t,r={}){const n=await e.post("dht/query",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield $G(e)}return t}));function YG(e){return{findPeer:qG(e),findProvs:KG(e),get:HG(e),provide:GG(e),put:WG(e),query:QG(e)}}const JG=$H((e=>{async function t(t={}){const r=await e.post("diag/cmds",{signal:t.signal,searchParams:HH(t),headers:t.headers});return r.json()}return t})),XG=$H((e=>{async function t(t={}){const r=await e.post("diag/net",{signal:t.signal,searchParams:HH(t),headers:t.headers});return r.json()}return t})),ZG=$H((e=>{async function t(t={}){const r=await e.post("diag/sys",{signal:t.signal,searchParams:HH(t),headers:t.headers});return r.json()}return t}));function eW(e){return{cmds:JG(e),net:XG(e),sys:ZG(e)}}const tW=$H((e=>{async function t(t,r,n={}){const i=await e.post("files/chmod",{signal:n.signal,searchParams:HH({arg:t,mode:r,...n}),headers:n.headers});await i.text()}return t})),rW=$H((e=>{async function t(t,r,n={}){const i=Array.isArray(t)?t:[t],s=await e.post("files/cp",{signal:n.signal,searchParams:HH({arg:i.concat(r).map((e=>Zt.k.asCID(e)?`/ipfs/${e}`:e)),...n}),headers:n.headers});await s.text()}return t})),nW=$H((e=>{async function t(t,r={}){if(!t||"string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const n=await e.post("files/flush",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return Zt.k.parse(i.Cid)}return t}));function iW(e){const t=vG(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const sW=$H((e=>{async function*t(t,r={}){if(!t)throw new Error("ipfs.files.ls requires a path");const n=await e.post("files/ls",{signal:r.signal,searchParams:HH({arg:Zt.k.asCID(t)?`/ipfs/${t}`:t,long:!0,...r,stream:!0}),headers:r.headers});for await(const e of n.ndjson())if("Entries"in e)for(const t of e.Entries||[])yield oW(iW(t));else yield oW(iW(e))}return t}));function oW(e){return e.hash&&(e.cid=Zt.k.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}const aW=$H((e=>{async function t(t,r={}){const n=await e.post("files/mkdir",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers});await n.text()}return t})),cW=$H((e=>{async function t(t,r,n={}){Array.isArray(t)||(t=[t]);const i=await e.post("files/mv",{signal:n.signal,searchParams:HH({arg:t.concat(r),...n}),headers:n.headers});await i.text()}return t}));var uW=r(7966);const lW=$H((e=>{async function*t(t,r={}){const n=await e.post("files/read",{signal:r.signal,searchParams:HH({arg:t,count:r.length,...r}),headers:r.headers});yield*uW(n.body)}return t})),hW=$H((e=>{async function t(t,r={}){const n=await e.post("files/rm",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.text();if(""!==i){const e=new Qp.HTTPError(n);throw e.message=i,e}}return t})),dW=$H((e=>{async function t(t,r={}){const n=await e.post("files/stat",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return i.WithLocality=i.WithLocality||!1,fW(iW(i))}return t}));function fW(e){return e.cid=Zt.k.parse(e.hash),delete e.hash,e}const pW=$H((e=>{async function t(t,r={}){const n=await e.post("files/touch",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers});await n.text()}return t})),yW=$H((e=>{async function t(t,r,n={}){const i=new AbortController,s=oG(i.signal,n.signal),o=await e.post("files/write",{signal:s,searchParams:HH({arg:t,streamChannels:!0,count:n.length,...n}),...await iG([{content:r,path:"arg",mode:qH(n.mode),mtime:KH(n.mtime)}],i,n.headers)});await o.text()}return t}));function gW(e){return{chmod:tW(e),cp:rW(e),flush:nW(e),ls:sW(e),mkdir:aW(e),mv:cW(e),read:lW(e),rm:hW(e),stat:dW(e),touch:pW(e),write:yW(e)}}const mW=$H((e=>{const t=async(e,t,r={})=>{throw Ut(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),wW=$H((e=>{async function t(t,r={type:"Ed25519"}){const n=await e.post("key/gen",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return vG(i)}return t})),vW=$H((e=>{async function t(t,r,n,i={}){const s=await e.post("key/import",{signal:i.signal,searchParams:HH({arg:t,pem:r,password:n,...i}),headers:i.headers}),o=await s.json();return vG(o)}return t})),bW=$H((e=>{const t=async(e,t={})=>{throw Ut(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),EW=$H((e=>{async function t(t={}){const r=await e.post("key/list",{signal:t.signal,searchParams:HH(t),headers:t.headers}),n=await r.json();return(n.Keys||[]).map((e=>vG(e)))}return t})),_W=$H((e=>{async function t(t,r,n={}){const i=await e.post("key/rename",{signal:n.signal,searchParams:HH({arg:[t,r],...n}),headers:n.headers});return vG(await i.json())}return t})),AW=$H((e=>{async function t(t,r={}){const n=await e.post("key/rm",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return vG(i.Keys[0])}return t}));function SW(e){return{export:mW(e),gen:wW(e),import:vW(e),info:bW(e),list:EW(e),rename:_W(e),rm:AW(e)}}const kW=$H((e=>{async function t(t,r,n={}){const i=await e.post("log/level",{signal:n.signal,searchParams:HH({arg:[t,r],...n}),headers:n.headers});return vG(await i.json())}return t})),IW=$H((e=>{async function t(t={}){const r=await e.post("log/ls",{signal:t.signal,searchParams:HH(t),headers:t.headers}),n=await r.json();return n.Strings}return t})),TW=$H((e=>{async function*t(t={}){const r=await e.post("log/tail",{signal:t.signal,searchParams:HH(t),headers:t.headers});yield*r.ndjson()}return t}));function CW(e){return{level:kW(e),ls:IW(e),tail:TW(e)}}const RW=$H((e=>{async function t(t,r={}){const n=await e.post("name/publish",{signal:r.signal,searchParams:HH({arg:`${t}`,...r}),headers:r.headers});return vG(await n.json())}return t})),PW=$H((e=>{async function*t(t,r={}){const n=await e.post("name/resolve",{signal:r.signal,searchParams:HH({arg:t,stream:!0,...r}),headers:r.headers});for await(const e of n.ndjson())yield e.Path}return t})),xW=$H((e=>{async function t(t,r={}){const n=await e.post("name/pubsub/cancel",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers});return vG(await n.json())}return t})),OW=$H((e=>{async function t(t={}){const r=await e.post("name/pubsub/state",{signal:t.signal,searchParams:HH(t),headers:t.headers});return vG(await r.json())}return t})),NW=$H((e=>{async function t(t={}){const r=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:HH(t),headers:t.headers}),n=await r.json();return n.Strings||[]}return t}));function DW(e){return{cancel:xW(e),state:OW(e),subs:NW(e)}}function BW(e){return{publish:RW(e),resolve:PW(e),pubsub:DW(e)}}const LW=$H((e=>{async function t(t,r={}){const n=await e.post("object/data",{signal:r.signal,searchParams:HH({arg:`${t instanceof Uint8Array?Zt.k.decode(t):t}`,...r}),headers:r.headers}),i=await n.arrayBuffer();return new Uint8Array(i,0,i.byteLength)}return t})),MW=$H((e=>{async function t(t,r={}){const n=await e.post("object/get",{signal:r.signal,searchParams:HH({arg:`${t instanceof Uint8Array?Zt.k.decode(t):t}`,dataEncoding:"base64",...r}),headers:r.headers}),i=await n.json();return{Data:ia(i.Data,"base64pad"),Links:(i.Links||[]).map((e=>({Name:e.Name,Hash:Zt.k.parse(e.Hash),Tsize:e.Size})))}}return t})),UW=$H((e=>{async function t(t,r={}){const n=await e.post("object/links",{signal:r.signal,searchParams:HH({arg:`${t instanceof Uint8Array?Zt.k.decode(t):t}`,...r}),headers:r.headers}),i=await n.json();return(i.Links||[]).map((e=>({Name:e.Name,Tsize:e.Size,Hash:Zt.k.parse(e.Hash)})))}return t})),FW=$H((e=>{async function t(t={}){const r=await e.post("object/new",{signal:t.signal,searchParams:HH({arg:t.template,...t}),headers:t.headers}),{Hash:n}=await r.json();return Zt.k.parse(n)}return t})),jW=(e,t)=>{const r=$H((r=>{const n=OG(e,t);async function i(e,t={}){return n(e,{...t,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return i}));return r(t)},VW=$H((e=>{async function t(t,r={}){const n=await e.post("object/stat",{signal:r.signal,searchParams:HH({arg:`${t}`,...r}),headers:r.headers}),i=await n.json();return{...i,Hash:Zt.k.parse(i.Hash)}}return t})),zW=$H((e=>{async function t(t,r,n={}){const i=await e.post("object/patch/add-link",{signal:n.signal,searchParams:HH({arg:[`${t}`,r.Name||r.name||"",(r.Hash||r.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return Zt.k.parse(s)}return t})),$W=$H((e=>{async function t(t,r,n={}){const i=new AbortController,s=oG(i.signal,n.signal),o=await e.post("object/patch/append-data",{signal:s,searchParams:HH({arg:`${t}`,...n}),...await iG([r],i,n.headers)}),{Hash:a}=await o.json();return Zt.k.parse(a)}return t})),qW=$H((e=>{async function t(t,r,n={}){const i=await e.post("object/patch/rm-link",{signal:n.signal,searchParams:HH({arg:[`${t}`,r.Name||r.name||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return Zt.k.parse(s)}return t})),KW=$H((e=>{async function t(t,r,n={}){const i=new AbortController,s=oG(i.signal,n.signal),o=await e.post("object/patch/set-data",{signal:s,searchParams:HH({arg:[`${t}`],...n}),...await iG([r],i,n.headers)}),{Hash:a}=await o.json();return Zt.k.parse(a)}return t}));function HW(e){return{addLink:zW(e),appendData:$W(e),rmLink:qW(e),setData:KW(e)}}function GW(e,t){return{data:LW(t),get:MW(t),links:UW(t),new:FW(t),put:jW(e,t),stat:VW(t),patch:HW(t)}}const WW=$H((e=>{async function*t(t,r={}){for await(const{path:n,recursive:i,metadata:s}of Im(t)){const t=await e.post("pin/add",{signal:r.signal,searchParams:HH({...r,arg:n,recursive:i,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:r.headers});for await(const e of t.ndjson())if(e.Pins)for(const t of e.Pins)yield Zt.k.parse(t);else yield Zt.k.parse(e)}}return t}));function QW(e){const t=WW(e);return $H((()=>{async function e(e,r={}){return Sm(t([{path:e,...r}],r))}return e}))(e)}function YW(e,t,r){const n={type:e,cid:Zt.k.parse(t)};return r&&(n.metadata=r),n}const JW=$H((e=>{async function*t(t={}){let r=[];t.paths&&(r=Array.isArray(t.paths)?t.paths:[t.paths]);const n=await e.post("pin/ls",{signal:t.signal,searchParams:HH({...t,arg:r.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of n.ndjson()){if(e.Keys){for(const t of Object.keys(e.Keys))yield YW(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield YW(e.Type,e.Cid,e.Metadata)}}return t})),XW=$H((e=>{async function*t(t,r={}){for await(const{path:n,recursive:i}of Im(t)){const t=new URLSearchParams(r.searchParams);t.append("arg",`${n}`),null!=i&&t.set("recursive",String(i));const s=await e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:HH({...r,arg:`${n}`,recursive:i})});for await(const e of s.ndjson())e.Pins?yield*e.Pins.map((e=>Zt.k.parse(e))):yield Zt.k.parse(e)}}return t})),ZW=e=>{const t=XW(e);return $H((()=>{async function e(e,r={}){return Sm(t([{path:e,...r}],r))}return e}))(e)},eQ=({Name:e,Status:t,Cid:r})=>({cid:Zt.k.parse(r),name:e,status:t}),tQ=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},rQ=e=>{if(Zt.k.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},nQ=({service:e,cid:t,name:r,status:n,all:i})=>{const s=HH({service:tQ(e),name:r,force:!!i||void 0});if(t)for(const o of t)s.append("cid",rQ(o));if(n)for(const o of n)s.append("status",o);return s},iQ=({cid:e,service:t,background:r,name:n,origins:i})=>{const s=HH({arg:rQ(e),service:tQ(t),name:n,background:!!r||void 0});if(i)for(const o of i)s.append("origin",o.toString());return s};function sQ(e){async function t(t,{timeout:r,signal:n,headers:i,...s}){const o=await e.post("pin/remote/add",{timeout:r,signal:n,headers:i,searchParams:iQ({cid:t,...s})});return eQ(await o.json())}return t}function oQ(e){async function*t({timeout:t,signal:r,headers:n,...i}){const s=await e.post("pin/remote/ls",{timeout:t,signal:r,headers:n,searchParams:nQ(i)});for await(const e of s.ndjson())yield eQ(e)}return t}function aQ(e){async function t({timeout:t,signal:r,headers:n,...i}){await e.post("pin/remote/rm",{timeout:t,signal:r,headers:n,searchParams:nQ({...i,all:!1})})}return t}function cQ(e){async function t({timeout:t,signal:r,headers:n,...i}){await e.post("pin/remote/rm",{timeout:t,signal:r,headers:n,searchParams:nQ({...i,all:!0})})}return t}function uQ(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function lQ(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:hQ(e.Stat)}}}function hQ(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:r,Queued:n,Failed:i}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function dQ(e){async function t(t,r){const{endpoint:n,key:i,headers:s,timeout:o,signal:a}=r;await e.post("pin/remote/service/add",{timeout:o,signal:a,searchParams:HH({arg:[t,uQ(n),i]}),headers:s})}return t}function fQ(e){async function t(t={}){const{stat:r,headers:n,timeout:i,signal:s}=t,o=await e.post("pin/remote/service/ls",{timeout:i,signal:s,headers:n,searchParams:!0===r?HH({stat:r}):void 0}),{RemoteServices:a}=await o.json();return a.map(lQ)}return t}function pQ(e){async function t(t,r={}){await e.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:HH({arg:t})})}return t}function yQ(e){const t=new zH(e);return{add:dQ(t),ls:fQ(t),rm:pQ(t)}}function gQ(e){const t=new zH(e);return{add:sQ(t),ls:oQ(t),rm:aQ(t),rmAll:cQ(t),service:yQ(e)}}function mQ(e){return{addAll:WW(e),add:QW(e),ls:JW(e),rmAll:XW(e),rm:ZW(e),remote:gQ(e)}}const wQ=e=>Array.isArray(e)?e.map(vQ):e,vQ=e=>vh(bQ(e)),bQ=e=>vs.decode(e),EQ=e=>BigInt(`0x${vh(vs.decode(e),"base16")}`),_Q=e=>vs.encode(ia(e)),AQ=$H((e=>{async function t(t={}){const{Strings:r}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:HH(t),headers:t.headers})).json();return wQ(r)||[]}return t})),SQ=$H((e=>{async function t(t,r={}){const n=await e.post("pubsub/peers",{signal:r.signal,searchParams:HH({arg:_Q(t),...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}return t})),kQ=$H((e=>{async function t(t,r,n={}){const i=HH({arg:_Q(t),...n}),s=new AbortController,o=oG(s.signal,n.signal),a=await e.post("pubsub/pub",{signal:o,searchParams:i,...await iG([r],s,n.headers)});await a.text()}return t})),IQ=Mt("ipfs-http-client:pubsub:subscribe"),TQ=(e,t)=>$H((e=>{async function r(r,n,i={}){let s,o;i.signal=t.subscribe(r,n,i.signal);const a=new Promise(((e,t)=>{s=e,o=t})),c=setTimeout((()=>s()),1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:HH({arg:_Q(r),...i}),headers:i.headers}).catch((e=>{t.unsubscribe(r,n),o(e)})).then((e=>{clearTimeout(c),e&&(CQ(e,{onMessage:e=>{n&&("function"!==typeof n?"function"===typeof n.handleEvent&&n.handleEvent(e):n(e))},onEnd:()=>t.unsubscribe(r,n),onError:i.onError}),s())})),a}return r}))(e);async function CQ(e,{onMessage:t,onEnd:r,onError:n}){n=n||IQ;try{for await(const r of e.ndjson())try{if(!r.from)continue;null!=r.from&&null!=r.seqno?t({type:"signed",from:wm(r.from),data:bQ(r.data),sequenceNumber:EQ(r.seqno),topic:vQ(r.topicIDs[0]),key:bQ(r.key??"u"),signature:bQ(r.signature??"u")}):t({type:"unsigned",data:bQ(r.data),topic:vQ(r.topicIDs[0])})}catch(nP){nP.message=`Failed to parse pubsub message: ${nP.message}`,n(nP,!1,r)}}catch(nP){RQ(nP)||n(nP,!0)}finally{r()}}const RQ=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return"AbortError"===e.name}},PQ=(e,t)=>{async function r(e,r){t.unsubscribe(e,r)}return r};class xQ{constructor(){this._subs=new Map}subscribe(e,t,r){const n=this._subs.get(e)||[];if(n.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(n)),r&&r.addEventListener("abort",(()=>this.unsubscribe(e,t))),i.signal}unsubscribe(e,t){const r=this._subs.get(e)||[];let n;t?(this._subs.set(e,r.filter((e=>e.handler!==t))),n=r.filter((e=>e.handler===t))):(this._subs.set(e,[]),n=r),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach((e=>e.controller.abort()))}}function OQ(e){const t=new xQ;return{ls:AQ(e),peers:SQ(e),publish:kQ(e),subscribe:TQ(e,t),unsubscribe:PQ(e,t)}}const NQ=$H((e=>{async function*t(t={}){const r=await e.post("refs/local",{signal:t.signal,transform:vG,searchParams:HH(t),headers:t.headers});yield*r.ndjson()}return t})),DQ=$H(((e,t)=>{const r=async function*(t,r={}){const n=Array.isArray(t)?t:[t],i=await e.post("refs",{signal:r.signal,searchParams:HH({arg:n.map((e=>`${e instanceof Uint8Array?Zt.k.decode(e):e}`)),...r}),headers:r.headers,transform:vG});yield*i.ndjson()};return Object.assign(r,{local:NQ(t)})})),BQ=$H((e=>{async function*t(t={}){const r=await e.post("repo/gc",{signal:t.signal,searchParams:HH(t),headers:t.headers,transform:e=>({err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?Zt.k.parse(e.Key["/"]):null})});yield*r.ndjson()}return t})),LQ=$H((e=>{async function t(t={}){const r=await e.post("repo/stat",{signal:t.signal,searchParams:HH(t),headers:t.headers}),n=await r.json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return t})),MQ=$H((e=>{async function t(t={}){const r=await(await e.post("repo/version",{signal:t.signal,searchParams:HH(t),headers:t.headers})).json();return r.Version}return t}));function UQ(e){return{gc:BQ(e),stat:LQ(e),version:MQ(e)}}const FQ=$H((e=>{async function*t(t={}){const r=await e.post("stats/bw",{signal:t.signal,searchParams:HH(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*r.ndjson()}return t}));function jQ(e){return{bitswap:QH(e),repo:LQ(e),bw:FQ(e)}}const VQ=$H((e=>{async function t(t={}){const r=await e.post("swarm/addrs",{signal:t.signal,searchParams:HH(t),headers:t.headers}),{Addrs:n}=await r.json();return Object.keys(n).map((e=>({id:wm(e),addrs:(n[e]||[]).map((e=>Kl(e)))})))}return t})),zQ=$H((e=>{async function t(t,r={}){const n=await e.post("swarm/connect",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}return t})),$Q=$H((e=>{async function t(t,r={}){const n=await e.post("swarm/disconnect",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}return t})),qQ=$H((e=>{async function t(t={}){const r=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:HH(t),headers:t.headers}),{Strings:n}=await r.json();return(n||[]).map((e=>Kl(e)))}return t})),KQ=$H((e=>{async function t(t={}){const r=await e.post("swarm/peers",{signal:t.signal,searchParams:HH(t),headers:t.headers}),{Peers:n}=await r.json();return(n||[]).map((e=>({addr:Kl(e.Addr),peer:wm(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}return t}));function HQ(e){return{addrs:VQ(e),connect:zQ(e),disconnect:$Q(e),localAddrs:qQ(e),peers:KQ(e)}}const GQ=$H((e=>{async function*t(t,r={}){const n=new AbortController,i=oG(n.signal,r.signal),{headers:s,body:o,total:a,parts:c}=await iG(t,n,r.headers),[u,l]="function"===typeof r.progress?WQ(a,c,r.progress):[void 0,void 0],h=await e.post("add",{searchParams:HH({"stream-channels":!0,...r,progress:Boolean(u)}),onUploadProgress:l,signal:i,headers:s,body:o});for await(let e of h.ndjson())e=vG(e),void 0!==e.hash?yield YQ(e):u&&u(e.bytes||0,e.name)}return t})),WQ=(e,t,r)=>t?[void 0,QQ(e,t,r)]:[r,void 0],QQ=(e,t,r)=>{let n=0;const i=t.length;return({loaded:s,total:o})=>{const a=Math.floor(s/o*e);while(n<i){const{start:e,end:i,name:s}=t[n];if(a<i){r(a-e,s);break}r(i-e,s),n+=1}}};function YQ({name:e,hash:t,size:r,mode:n,mtime:i,mtimeNsecs:s}){const o={path:e,cid:Zt.k.parse(t),size:parseInt(r)};return null!=n&&(o.mode=parseInt(n,8)),null!=i&&(o.mtime={secs:i,nsecs:s||0}),o}function JQ(e){const t=GQ(e);return $H((()=>{async function e(e,r={}){return await Sm(t(NS(e),r))}return e}))(e)}const XQ=$H((e=>{async function*t(t,r={}){const n=await e.post("cat",{signal:r.signal,searchParams:HH({arg:t.toString(),...r}),headers:r.headers});yield*n.iterator()}return t})),ZQ=$H((e=>{const t=async(t={})=>{const r=await e.post("commands",{signal:t.signal,searchParams:HH(t),headers:t.headers});return r.json()};return t})),eY=$H((e=>{const t=async(t,r={})=>{const n=await e.post("dns",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Path};return t})),tY=$H((e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}})),rY=$H((e=>{async function*t(t,r={}){const n={arg:`${t instanceof Uint8Array?Zt.k.decode(t):t}`,...r};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel);const i=await e.post("get",{signal:r.signal,searchParams:HH(n),headers:r.headers});yield*i.iterator()}return t})),nY=$H((e=>{async function t(t={}){const r=await e.post("id",{signal:t.signal,searchParams:HH({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),n=await r.json(),i={...vG(n)};return i.id=wm(i.id),i.addresses&&(i.addresses=i.addresses.map((e=>Kl(e)))),i}return t})),iY=e=>{const t=nY(e);async function r(e={}){const r=await t(e);return Boolean(r&&r.addresses&&r.addresses.length)}return r},sY=$H(((e,t)=>{async function*r(r,n={}){const i=`${r instanceof Uint8Array?Zt.k.decode(r):r}`;async function s(e){let r=e.Hash;if(r.includes("/")){const e=r.startsWith("/ipfs/")?r:`/ipfs/${r}`,n=await dW(t)(e);r=n.cid}else r=Zt.k.parse(r);const n={name:e.Name,path:i+(e.Name?`/${e.Name}`:""),size:e.Size,cid:r,type:oY(e)};return e.Mode&&(n.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(n.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(n.mtime.nsecs=e.MtimeNsecs)),n}const o=await e.post("ls",{signal:n.signal,searchParams:HH({arg:i,...n}),headers:n.headers});for await(let e of o.ndjson()){if(e=e.Objects,!e)throw new Error("expected .Objects in results");if(e=e[0],!e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(!t.length)return void(yield s(e));yield*t.map(s)}}return r}));function oY(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const aY=$H((e=>{async function t(t={}){const r=await e.post("dns",{signal:t.signal,searchParams:HH(t),headers:t.headers});return vG(await r.json())}return t})),cY=$H((e=>{async function*t(t,r={}){const n=await e.post("ping",{signal:r.signal,searchParams:HH({arg:`${t}`,...r}),headers:r.headers,transform:vG});yield*n.ndjson()}return t})),uY=$H((e=>{async function t(t,r={}){const n=await e.post("resolve",{signal:r.signal,searchParams:HH({arg:t,...r}),headers:r.headers}),{Path:i}=await n.json();return i}return t})),lY=$H((e=>{const t=async(e={})=>{throw Ut(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t})),hY=$H((e=>{async function t(t={}){const r=await e.post("shutdown",{signal:t.signal,searchParams:HH(t),headers:t.headers});await r.text()}return t})),dY=$H((e=>{async function t(t={}){const r=await e.post("version",{signal:t.signal,searchParams:HH(t),headers:t.headers});return{...vG(await r.json()),"ipfs-http-client":"1.0.0"}}return t}));r(3897),r(8624);function fY(e={}){const t={name:uo.name,code:uo.code,encode:e=>e,decode:e=>e},r=Object.values(jo);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach((e=>r.push(e)));const s=new kH({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),c=Object.values(zo);[n,i,o,a,t].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>c.push(e)));const u=new TH({codecs:c,loadCodec:e.ipld&&e.ipld.loadCodec}),l=Object.values(Vo);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach((e=>l.push(e)));const h=new RH({hashers:l,loadHasher:e.ipld&&e.ipld.loadHasher}),d={add:JQ(e),addAll:GQ(e),bitswap:XH(e),block:hG(e),bootstrap:mG(e),cat:XQ(e),commands:ZQ(e),config:TG(e),dag:DG(u,e),dht:YG(e),diag:eW(e),dns:eY(e),files:gW(e),get:rY(e),getEndpointConfig:tY(e),id:nY(e),isOnline:iY(e),key:SW(e),log:CW(e),ls:sY(e),mount:aY(e),name:BW(e),object:GW(u,e),pin:mQ(e),ping:cY(e),pubsub:OQ(e),refs:DQ(e),repo:UQ(e),resolve:uY(e),start:lY(e),stats:jQ(e),stop:hY(e),swarm:HQ(e),version:dY(e),bases:s,codecs:u,hashers:h};return d}const pY=421,yY=290,gY=2e3,mY=Object.create(null);mY["open"]="0",mY["close"]="1",mY["ping"]="2",mY["pong"]="3",mY["message"]="4",mY["upgrade"]="5",mY["noop"]="6";const wY=Object.create(null);Object.keys(mY).forEach((e=>{wY[mY[e]]=e}));const vY={type:"error",data:"parser error"},bY="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),EY="function"===typeof ArrayBuffer,_Y=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,AY=({type:e,data:t},r,n)=>bY&&t instanceof Blob?r?n(t):SY(t,n):EY&&(t instanceof ArrayBuffer||_Y(t))?r?n(t):SY(new Blob([t]),n):n(mY[e]+(t||"")),SY=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)};var kY=AY;const IY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TY="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let ese=0;ese<IY.length;ese++)TY[IY.charCodeAt(ese)]=ese;const CY=e=>{let t,r,n,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const u=new ArrayBuffer(o),l=new Uint8Array(u);for(t=0;t<a;t+=4)r=TY[e.charCodeAt(t)],n=TY[e.charCodeAt(t+1)],i=TY[e.charCodeAt(t+2)],s=TY[e.charCodeAt(t+3)],l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return u},RY="function"===typeof ArrayBuffer,PY=(e,t)=>{if("string"!==typeof e)return{type:"message",data:OY(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:xY(e.substring(1),t)};const n=wY[r];return n?e.length>1?{type:wY[r],data:e.substring(1)}:{type:wY[r]}:vY},xY=(e,t)=>{if(RY){const r=CY(e);return OY(r,t)}return{base64:!0,data:e}},OY=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};var NY=PY;const DY=String.fromCharCode(30),BY=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach(((e,s)=>{kY(e,!1,(e=>{n[s]=e,++i===r&&t(n.join(DY))}))}))},LY=(e,t)=>{const r=e.split(DY),n=[];for(let i=0;i<r.length;i++){const e=NY(r[i],t);if(n.push(e),"error"===e.type)break}return n},MY=4;function UY(e){if(e)return FY(e)}function FY(e){for(var t in UY.prototype)e[t]=UY.prototype[t];return e}UY.prototype.on=UY.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},UY.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},UY.prototype.off=UY.prototype.removeListener=UY.prototype.removeAllListeners=UY.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},UY.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);n=0;for(var i=r.length;n<i;++n)r[n].apply(this,t)}return this},UY.prototype.emitReserved=UY.prototype.emit,UY.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},UY.prototype.hasListeners=function(e){return!!this.listeners(e).length};const jY=(()=>"undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")())();function VY(e,...t){return t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const zY=setTimeout,$Y=clearTimeout;function qY(e,t){t.useNativeTimers?(e.setTimeoutFn=zY.bind(jY),e.clearTimeoutFn=$Y.bind(jY)):(e.setTimeoutFn=setTimeout.bind(jY),e.clearTimeoutFn=clearTimeout.bind(jY))}const KY=1.33;function HY(e){return"string"===typeof e?GY(e):Math.ceil((e.byteLength||e.size)*KY)}function GY(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}class WY extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class QY extends UY{constructor(e){super(),this.writable=!1,qY(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new WY(e,t,r)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=NY(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const YY="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),JY=64,XY={};let ZY,eJ=0,tJ=0;function rJ(e){let t="";do{t=YY[e%JY]+t,e=Math.floor(e/JY)}while(e>0);return t}function nJ(){const e=rJ(+new Date);return e!==ZY?(eJ=0,ZY=e):e+"."+rJ(eJ++)}for(;tJ<JY;tJ++)XY[YY[tJ]]=tJ;function iJ(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function sJ(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let e=r[n].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}let oJ=!1;try{oJ="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(nP){}const aJ=oJ;function cJ(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||aJ))return new XMLHttpRequest}catch(r){}if(!t)try{return new(jY[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function uJ(){}const lJ=function(){const e=new cJ({xdomain:!1});return null!=e.responseType}();class hJ extends QY{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=lJ&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};LY(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,BY(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=nJ()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=iJ(e),i=-1!==this.opts.hostname.indexOf(":");return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new dJ(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class dJ extends UY{constructor(e,t){super(),qY(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=VY(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new cJ(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(r){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{t.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(r){return void this.setTimeoutFn((()=>{this.onError(r)}),0)}"undefined"!==typeof document&&(this.index=dJ.requestsCount++,dJ.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=uJ,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete dJ.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(dJ.requestsCount=0,dJ.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",fJ);else if("function"===typeof addEventListener){const e="onpagehide"in jY?"pagehide":"unload";addEventListener(e,fJ,!1)}function fJ(){for(let e in dJ.requests)dJ.requests.hasOwnProperty(e)&&dJ.requests[e].abort()}const pJ=(()=>{const e="function"===typeof Promise&&"function"===typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),yJ=jY.WebSocket||jY.MozWebSocket,gJ=!0,mJ="arraybuffer",wJ="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class vJ extends QY{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=wJ?{}:VY(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=gJ&&!wJ?t?new yJ(e,t):new yJ(e):new yJ(e,t,r)}catch(nP){return this.emitReserved("error",nP)}this.ws.binaryType=this.socket.binaryType||mJ,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;kY(r,this.supportsBinary,(e=>{const t={};if(!gJ&&(r.options&&(t.compress=r.options.compress),this.opts.perMessageDeflate)){const r="string"===typeof e?Buffer.byteLength(e):e.length;r<this.opts.perMessageDeflate.threshold&&(t.compress=!1)}try{gJ?this.ws.send(e):this.ws.send(e,t)}catch(i){}n&&pJ((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=nJ()),this.supportsBinary||(e.b64=1);const n=iJ(e),i=-1!==this.opts.hostname.indexOf(":");return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!yJ}}const bJ={websocket:vJ,polling:hJ},EJ=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_J=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function AJ(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=EJ.exec(e||""),s={},o=14;while(o--)s[_J[o]]=i[o]||"";return-1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=SJ(s,s["path"]),s.queryKey=kJ(s,s["query"]),s}function SJ(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1),"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1),n}function kJ(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}class IJ extends UY{constructor(e,t={}){super(),e&&"object"===typeof e&&(t=e,e=null),e?(e=AJ(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=AJ(t.host).host),qY(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"===typeof this.opts.query&&(this.opts.query=sJ(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=MY,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new bJ[e](r)}open(){let e;if(this.opts.rememberUpgrade&&IJ.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),r=!1;IJ.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;IJ.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){r||(r=!0,u(),t.close(),t=null)}const s=e=>{const r=new Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function c(e){t&&e.name!==t.name&&i()}const u=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",n),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",IJ.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){const e=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const e=this.writeBuffer[r].data;if(e&&(t+=HY(e)),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;r=r||{},r.compress=!1!==r.compress;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(e){IJ.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}IJ.protocol=MY;IJ.protocol;function TJ(e,t="",r){let n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=AJ(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":"),s=i?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}const CJ="function"===typeof ArrayBuffer,RJ=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,PJ=Object.prototype.toString,xJ="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===PJ.call(Blob),OJ="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===PJ.call(File);function NJ(e){return CJ&&(e instanceof ArrayBuffer||RJ(e))||xJ&&e instanceof Blob||OJ&&e instanceof File}function DJ(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(DJ(e[t]))return!0;return!1}if(NJ(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return DJ(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&DJ(e[r]))return!0;return!1}function BJ(e){const t=[],r=e.data,n=e;return n.data=LJ(r,t),n.attachments=t.length,{packet:n,buffers:t}}function LJ(e,t){if(!e)return e;if(NJ(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=LJ(e[n],t);return r}if("object"===typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=LJ(e[n],t));return r}return e}function MJ(e,t){return e.data=UJ(e.data,t),e.attachments=void 0,e}function UJ(e,t){if(!e)return e;if(e&&!0===e._placeholder){const r="number"===typeof e.num&&e.num>=0&&e.num<t.length;if(r)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=UJ(e[r],t);else if("object"===typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=UJ(e[r],t));return e}const FJ=5;var jJ;(function(e){e[e["CONNECT"]=0]="CONNECT",e[e["DISCONNECT"]=1]="DISCONNECT",e[e["EVENT"]=2]="EVENT",e[e["ACK"]=3]="ACK",e[e["CONNECT_ERROR"]=4]="CONNECT_ERROR",e[e["BINARY_EVENT"]=5]="BINARY_EVENT",e[e["BINARY_ACK"]=6]="BINARY_ACK"})(jJ||(jJ={}));class VJ{constructor(e){this.replacer=e}encode(e){return e.type!==jJ.EVENT&&e.type!==jJ.ACK||!DJ(e)?[this.encodeAsString(e)]:(e.type=e.type===jJ.EVENT?jJ.BINARY_EVENT:jJ.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==jJ.BINARY_EVENT&&e.type!==jJ.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=BJ(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}class zJ extends UY{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===jJ.BINARY_EVENT||t.type===jJ.BINARY_ACK?(this.reconstructor=new $J(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!NJ(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===jJ[r.type])throw new Error("unknown packet type "+r.type);if(r.type===jJ.BINARY_EVENT||r.type===jJ.BINARY_ACK){const n=t+1;while("-"!==e.charAt(++t)&&t!=e.length);const i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){const n=t+1;while(++t){const r=e.charAt(t);if(","===r)break;if(t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;while(++t){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(!zJ.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case jJ.CONNECT:return"object"===typeof t;case jJ.DISCONNECT:return void 0===t;case jJ.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case jJ.EVENT:case jJ.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case jJ.ACK:case jJ.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class $J{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=MJ(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function qJ(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const KJ=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class HJ extends UY{constructor(e,t,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[qJ(e,"open",this.onopen.bind(this)),qJ(e,"packet",this.onpacket.bind(this)),qJ(e,"error",this.onerror.bind(this)),qJ(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io["_reconnecting"]||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(KJ.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');t.unshift(e);const r={type:jJ.EVENT,data:t,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"===typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),r.id=e}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,i=this.flags.volatile&&(!n||!this.connected);return i||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){const r=this.flags.timeout;if(void 0===r)return void(this.acks[e]=t);const n=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,[null,...e])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this.packet({type:jJ.CONNECT,data:e})})):this.packet({type:jJ.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){const t=e.nsp===this.nsp;if(t)switch(e.type){case jJ.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case jJ.EVENT:case jJ.BINARY_EVENT:this.onevent(e);break;case jJ.ACK:case jJ.BINARY_ACK:this.onack(e);break;case jJ.DISCONNECT:this.ondisconnect();break;case jJ.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t);break}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(...n){r||(r=!0,t.packet({type:jJ.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io["_destroy"](this)}disconnect(){return this.connected&&this.packet({type:jJ.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function GJ(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}GJ.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},GJ.prototype.reset=function(){this.attempts=0},GJ.prototype.setMin=function(e){this.ms=e},GJ.prototype.setMax=function(e){this.max=e},GJ.prototype.setJitter=function(e){this.jitter=e};class WJ extends UY{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,qY(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new GJ({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||ke;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new IJ(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=qJ(t,"open",(function(){r.onopen(),e&&e()})),i=qJ(t,"error",(t=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",t),e?e(t):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&n();const r=this.setTimeoutFn((()=>{n(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(qJ(e,"ping",this.onping.bind(this)),qJ(e,"data",this.ondata.bind(this)),qJ(e,"error",this.onerror.bind(this)),qJ(e,"close",this.onclose.bind(this)),qJ(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error")}}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new HJ(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){const e=this.nsps[r];if(e.active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const QJ={};function YJ(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};const r=TJ(e,t.path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=QJ[i]&&s in QJ[i]["nsps"],a=t.forceNew||t["force new connection"]||!1===t.multiplex||o;let c;return a?c=new WJ(n,t):(QJ[i]||(QJ[i]=new WJ(n,t)),c=QJ[i]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(YJ,{Manager:WJ,Socket:HJ,io:YJ,connect:YJ});var JJ=r(1809);const XJ=65536,ZJ=5e3;class eX{constructor(e,t){this.label=e.label,this.open=pH(),this.channel=e,this.channel.binaryType="arraybuffer",this.log=t.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=XJ),e.addEventListener("message",(e=>{t.onMessage(e)})),e.addEventListener("bufferedamountlow",(()=>{this.log("stop backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open.resolve()})),e.addEventListener("open",(()=>{this.open.resolve(),t.onOpen()})),e.addEventListener("close",(()=>{t.onClose()})),e.addEventListener("error",(r=>{if("Transport channel closed"===r.error?.message)return this.close();t.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',e.readyState,r.error?.message,r.error?.errorDetail);const n=r.error instanceof Error?r.error:new Error(`datachannel error: ${r.error?.message} ${r.error?.errorDetail}`);t.onError(Ut(n,"ERR_DATA_CHANNEL"))}));let r=!1;this.closingInterval=setInterval((()=>{"closing"===e.readyState?(r&&t.onClose(),r=!0):r=!1}),ZJ)}async send(e){await this.open.promise,this.channel.send(e),this.channel.bufferedAmount>XJ&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=pH())}close(){clearInterval(this.closingInterval),this.channel.close()}get bufferedAmount(){return this.channel.bufferedAmount}}var tX=r(8592);const rX={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};function nX(){if("undefined"===typeof globalThis)throw Ut(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");const e={RTCPeerConnection:globalThis.RTCPeerConnection??globalThis.mozRTCPeerConnection??globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription??globalThis.mozRTCSessionDescription??globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate??globalThis.mozRTCIceCandidate??globalThis.webkitRTCIceCandidate};if(null==e.RTCPeerConnection)throw Ut(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return e}class iX extends cq{constructor(e){super(),this.id=e.id??vh(JJ(4),"hex").slice(0,7),this.log=Mt(`libp2p:webrtc-peer:${e.logPrefix}:${this.id}`),this.wrtc=e.wrtc??nX(),this.peerConnection=new this.wrtc.RTCPeerConnection(Object.assign({},rX,e.peerConnectionConfig)),this.closed=!1,this.connected=pH(),this.source=O_(),this.sink=async e=>{if(await this.connected.promise,null==this.channel)throw Ut(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");for await(const t of e)await this.channel.send(t);await this.close()}}handleDataChannelEvent(e){const t=e.channel;null!=t?this.channel=new eX(t,{log:this.log,onMessage:e=>{this.source.push(new Uint8Array(e.data))},onOpen:()=>{this.connected.resolve(),this.dispatchEvent(new lq("ready"))},onClose:()=>{this.close().catch((e=>{this.log("error closing connection after channel close",e)}))},onError:e=>{this.close(e).catch((e=>{this.log("error closing connection after channel error",e)}))}}):this.close(Ut(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((e=>{this.log("Error closing after event channel was found to be null",e)}))}async close(e){if(this.closed=!0,null==e&&null!=this.channel)while(this.channel.bufferedAmount>0)await tX(100);this.channel?.close(),this.peerConnection.close(),this.source.end(e),this.dispatchEvent(new lq("close"))}}class sX extends cq{constructor(e){super(),this.log=e.log,this.peerConnection=e.peerConnection,this.wrtc=e.wrtc,this.status="idle",this.peerConnection.addEventListener("negotiationneeded",(()=>{this.log("peer connection negotiation needed"),this.handleRenegotiate({type:"renegotiate"}).catch((e=>{this.log.error("could not renegotiate %o",e)}))}))}async handleSignal(e){return this.log('incoming signal "%s"',e.type),"offer"===e.type?await this.handleOffer(e):"answer"===e.type?await this.handleAnswer(e):"candidate"===e.type?await this.handleCandidate(e):"renegotiate"===e.type?await this.handleRenegotiate(e):"goodbye"===e.type?await this.handleGoodye(e):void this.log(`Unknown signal type ${e.type}`)}async handleOffer(e){}async handleAnswer(e){}async handleRenegotiate(e){}async handleGoodye(e){this.peerConnection.close()}async handleCandidate(e){const t=new this.wrtc.RTCIceCandidate(e.candidate);try{await this.peerConnection.addIceCandidate(t)}catch(nP){if(null!=t.address&&!t.address.endsWith(".local"))throw Ut(nP,"ERR_ADD_ICE_CANDIDATE");this.log("ignoring unsupported ICE candidate.")}}}const oX=Mt("libp2p:webrtc-peer:receiver");class aX extends iX{constructor(e={}){super({...e,logPrefix:"receiver"}),this.handshake=new cX({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,answerOptions:e.answerOptions}),this.handshake.addEventListener("signal",(e=>this.dispatchEvent(new lq("signal",{detail:e.detail})))),this.peerConnection.addEventListener("datachannel",(e=>{this.handleDataChannelEvent(e)}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class cX extends sX{constructor(e){super(e),this.options=e,this.status="idle",this.iceCandidates=[]}async handleRenegotiate(){oX.trace("renegotiate"),this.dispatchEvent(new lq("signal",{detail:{type:"renegotiate"}}))}async handleOffer(e){await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e));for(const r of this.iceCandidates)await this.handleCandidate(r);this.iceCandidates=[];const t=await this.peerConnection.createAnswer(this.options.answerOptions);await this.peerConnection.setLocalDescription(t),oX.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new lq("signal",{detail:this.peerConnection.localDescription??t}))}async handleCandidate(e){null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type?await super.handleCandidate(e):this.iceCandidates.push(e)}}class uX extends Error{constructor(e){super(e),this.name="TimeoutError"}}class lX extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const hX=e=>void 0===globalThis.DOMException?new lX(e):new DOMException(e),dX=e=>{const t=void 0===e.reason?hX("This operation was aborted."):e.reason;return t instanceof Error?t:hX(t)};function fX(e,t,r,n){let i;const s=new Promise(((s,o)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if(n={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...n},n.signal){const{signal:e}=n;e.aborted&&o(dX(e)),e.addEventListener("abort",(()=>{o(dX(e))}))}i=n.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{s(r())}catch(a){o(a)}return}const n="string"===typeof r?r:`Promise timed out after ${t} milliseconds`,i=r instanceof Error?r:new uX(n);"function"===typeof e.cancel&&e.cancel(),o(i)}),t),(async()=>{try{s(await e)}catch(t){o(t)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()}else s(e)}));return s.clear=()=>{clearTimeout(i),i=void 0},s}const pX=e=>{const t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function yX(e,t,r){let n;const i=new Promise(((i,s)=>{if(r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r},!(r.count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");const o=[t].flat(),a=[],{addListener:c,removeListener:u}=pX(e),l=(...e)=>{const t=r.multiArgs?e:e[0];r.filter&&!r.filter(t)||(a.push(t),r.count===a.length&&(n(),i(a)))},h=e=>{n(),s(e)};n=()=>{for(const e of o)u(e,l);for(const e of r.rejectionEvents)u(e,h)};for(const e of o)c(e,l);for(const e of r.rejectionEvents)c(e,h);r.resolveImmediately&&i(a)}));if(i.cancel=n,"number"===typeof r.timeout){const e=fX(i,r.timeout);return e.cancel=n,e}return i}function gX(e,t,r){"function"===typeof r&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};const n=yX(e,t,r),i=n.then((e=>e[0]));return i.cancel=n.cancel,i}const mX=Mt("libp2p:webrtc-peer:initator"),wX=1e3;class vX extends iX{constructor(e={}){super({...e,logPrefix:"initiator"}),this.handleDataChannelEvent({channel:this.peerConnection.createDataChannel(e.dataChannelLabel??vh(JJ(20),"hex").slice(0,7),e.dataChannelInit)}),this.handshake=new bX({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,offerOptions:e.offerOptions}),this.handshake.addEventListener("signal",(e=>{this.dispatchEvent(new lq("signal",{detail:e.detail}))}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class bX extends sX{constructor(e){super(e),this.options=e,this.status="idle",this.peerConnection.addEventListener("icecandidate",(e=>{if(null==e.candidate)return;const t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};mX.trace("create candidate",t),this.dispatchEvent(new lq("signal",{detail:t})),this.dispatchEvent(new lq("ice-candidate"))}))}async handleRenegotiate(){if("negotiating"===this.status)return void this.log("already negotiating, queueing");this.status="negotiating";const e=await this.peerConnection.createOffer(this.options.offerOptions);await this.peerConnection.setLocalDescription(e),await gX(this,"ice-candidate"),await tX(wX),mX.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new lq("signal",{detail:this.peerConnection.localDescription??e}))}async handleAnswer(e){mX.trace("handle answer",e),await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e)),this.status="idle"}}const EX=Mt("libp2p:webrtc-star:socket");function _X(e,t){const{sink:r,source:n}=e,i={remoteAddr:t.remoteAddr,async sink(e){null!=t.signal&&(e=XK(e,t.signal));try{await r(e)}catch(nP){"aborted"!==nP.type&&EX.error(nP)}},source:null!=t.signal?XK(n,t.signal):n,timeline:{open:Date.now()},async close(){if(e.closed)return;const t=Date.now(),r=setTimeout((()=>{if(null!=i.remoteAddr){const{host:e,port:r}=i.remoteAddr.toOptions();EX("timeout closing socket to %s:%s after %dms, destroying it manually",e,r,Date.now()-t)}e.closed||e.close().catch((e=>{EX.error("could not close socket",e)}))}),gY);try{await e.close()}finally{clearTimeout(r)}}};return e.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}function AX(e){const t=e.toString().split("/"),r=e.protos()[1].name,n=e.protos()[2].name,i=e.stringTuples()[1][1];if("tcp"!==r||"ws"!==n&&"wss"!==n)throw new Error(`invalid multiaddr: ${e.toString()}`);if(!zl(e))return`http://${t[2]}:${t[4]}`;if("ws"===n)return`http://${t[2]}${null==i||"80"===i?"":`:${i}`}`;if("wss"===n)return`https://${t[2]}${null==i||"443"===i?"":`:${i}`}`;throw new Error("invalid multiaddr: "+e.toString())}function SX(e){const t="/libp2p-webrtc-star";if(e.startsWith(t)){e=e.substring(t.length,e.length);let r=Kl(e);const n=r.stringTuples().filter((e=>421===e[0]))[0];if(null==n[1])throw new Error("invalid multiaddr: "+e);r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${n[1]}`),e=r.toString()}return e}const kX=Mt("libp2p:webrtc-star:listener"),IX={transports:["websocket"],path:"/socket.io-next/"};class TX extends cq{constructor(e,t,r,n,i){super(),this.signallingAddr=t,this.socket=YJ(e,IX),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=r,this.handler=n,this.channelOptions=i,this.handleWsHandshake=this.handleWsHandshake.bind(this);let s=!1;this.socket.on("connect_error",(e=>{s&&"TransportError"===e.type||this.dispatchEvent(new lq("error",{detail:e}))})),this.socket.on("error",(e=>{this.dispatchEvent(new lq("error",{detail:e}))})),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",(e=>{this.dispatchEvent(new lq("peer",{detail:e}))})),this.socket.on("connect",(()=>{this.socket.emit("ss-join",this.signallingAddr.toString()),s&&this.dispatchEvent(new lq("reconnect"))})),this.socket.once("connect",(()=>{s=!0,this.dispatchEvent(new lq("listening"))})),this.socket.on("disconnect",(()=>{this.dispatchEvent(new lq("disconnect"))}))}_createChannel(e,t,r){const n={...this.channelOptions},i=new aX(n),s=e=>{const t=e.detail;kX.error("incoming connection errored",t)};return i.addEventListener("error",s),i.addEventListener("close",(()=>{i.removeEventListener("error",s)}),{once:!0}),i.addEventListener("signal",(n=>{const i=n.detail;this.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(()=>{const t=_X(i,{remoteAddr:this.signallingAddr});kX("new inbound connection %s",t.remoteAddr);try{this.upgrader.upgradeInbound(t).then((r=>{kX("inbound connection %s upgraded",t.remoteAddr),this.connections.push(t);const n=()=>{this.connections=this.connections.filter((e=>e!==t)),this.channels.delete(e),this.pendingSignals.delete(e)};i.addEventListener("close",n,{once:!0}),this.dispatchEvent(new lq("connection",{detail:r})),this.handler(r)})).catch((e=>{kX.error("inbound connection failed to upgrade",e),t.close().catch((e=>{kX.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(nP){kX.error("inbound connection failed to upgrade",nP),t.close().catch((e=>{kX.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),i}handleWsHandshake(e){if(kX('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0===e.answer||null!=e.err||null==e.intentId)return;const t=e.intentId;let r=this.pendingSignals.get(t);null==r&&(r=[],this.pendingSignals.set(t,r)),r.push(e);let n=this.channels.get(t);if(null==n){if("offer"!==e.signal.type)return void kX("handshake is not an offer and channel does not exist, buffering until we receive an offer");kX("creating new channel to handle offer handshake"),n=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,n)}else kX("channel already exists, using it to handle handshake");while(r.length>0){const e=r.shift();null!=e?.signal&&n.handleSignal(e.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map((async e=>await e.close())),...Array.from(this.channels.values()).map((async e=>await e.close()))]),this.dispatchEvent(new lq("close"))}}class CX extends cq{constructor(e,t,r,n,i){super(),this.upgrader=e,this.handler=t,this.peerId=r,this.transport=n,this.options=i}async listen(e){if(null!=this.listeningAddr)throw Ut(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const t=pH();let r;this.listeningAddr=e,r=e.protoCodes().includes(pY)?e:e.encapsulate(`/p2p/${this.peerId.toString()}`);const n=this.signallingUrl=AX(e);kX("connecting to signalling server on: %s",this.signallingUrl);const i=new TX(this.signallingUrl,r,this.upgrader,this.handler,this.options.channelOptions);return i.addEventListener("error",(e=>{const r=e.detail;kX("error connecting to signalling server %o",r),i.close().catch((e=>{kX.error("error closing server after error",e)})),t.reject(r)})),i.addEventListener("listening",(()=>{kX("connected to signalling server"),this.dispatchEvent(new lq("listening")),t.resolve()})),i.addEventListener("peer",(e=>{this.transport.peerDiscovered(e.detail)})),i.addEventListener("connection",(t=>{const r=t.detail;if(null==r.remoteAddr)try{r.remoteAddr=e.decapsulateCode(pY).encapsulate(`/p2p/${r.remotePeer.toString()}`)}catch(nP){kX.error("could not determine remote address",nP)}this.dispatchEvent(new lq("connection",{detail:r}))})),i.addEventListener("disconnect",(()=>{this.transport.sigServers.delete(n)})),i.addEventListener("reconnect",(()=>{this.transport.sigServers.set(n,i)})),this.transport.sigServers.set(this.signallingUrl,i),await t.promise}async close(){if(null!=this.signallingUrl){const e=this.transport.sigServers.get(this.signallingUrl);null!=e&&(await e.close(),this.transport.sigServers.delete(this.signallingUrl))}this.dispatchEvent(new lq("close")),this.listeningAddr=void 0}getAddrs(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}function RX(e,t,r,n,i){return new CX(e,t,r,n,i)}function PX(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const r=(0,Jo.E)(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return(0,na.P)(r)}const xX=Symbol.for("@libp2p/transport");const OX=Symbol.for("@libp2p/peer-discovery");const NX="RTCPeerConnection"in globalThis,DX=Mt("libp2p:webrtc-star"),BX=()=>{};class LX extends cq{constructor(){super(...arguments),this.started=!1}get[OX](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(e){return!!this.isStarted()&&super.dispatchEvent(e)}}class MX{constructor(e){this.components=new kK,null!=e?.wrtc&&(this.wrtc=e.wrtc),this.sigServers=new Map,this.discovery=new LX,this.peerDiscovered=this.peerDiscovered.bind(this)}get[xX](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}init(e){this.components=e}async dial(e,t){const r=await this._connect(e,t),n=_X(r,{remoteAddr:e,signal:t.signal});DX("new outbound connection %s",n.remoteAddr);const i=await t.upgrader.upgradeOutbound(n);return DX("outbound connection %s upgraded",n.remoteAddr),i}async _connect(e,t){if(!0===t.signal?.aborted)throw new YK;const r={...t.channelOptions??{}};null!=this.wrtc&&(r.wrtc=this.wrtc);const n=e.toOptions(),i=vh(JJ(36),"hex");return await new Promise(((s,o)=>{const a=this.sigServers.get(AX(e));if(null==a?.socket)return o(Ut(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let c=!1;DX("dialing %s:%s",n.host,n.port);const u=new vX(r),l=e=>{const t=e.detail;if(!c){const e=`connection error ${n.host}:${n.port}: ${t.message}`;DX.error(e),f(t)}},h=()=>{c=!0,DX("connection opened %s:%s",n.host,n.port),f()},d=()=>{DX.error("connection aborted %s:%s",n.host,n.port),u.close().finally((()=>{f(new YK)}))},f=e=>{u.removeEventListener("ready",h),t.signal?.removeEventListener("abort",d),null==e?s(u):o(e)};u.addEventListener("ready",h,{once:!0}),u.addEventListener("close",(()=>{u.removeEventListener("error",l)})),t.signal?.addEventListener("abort",d),u.addEventListener("signal",(t=>{const r=t.detail;a.socket.emit("ss-handshake",{intentId:i,srcMultiaddr:a.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:r})})),a.socket.on("ws-handshake",(e=>{e.intentId===i&&null!=e.err&&u.close().finally((()=>{o(Ut(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==i||null==e.answer||u.closed||u.handleSignal(e.signal)}))}))}createListener(e){if(!NX&&null==this.wrtc)throw Ut(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return e.channelOptions=e.channelOptions??{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),RX(e.upgrader,e.handler??BX,this.components.getPeerId(),this,e)}filter(e){return e=Array.isArray(e)?e:[e],e.filter((e=>!e.protoCodes().includes(yY)&&sh.matches(e)))}peerDiscovered(e){DX("peer discovered: %s",e),e=SX(e);const t=Kl(e),r=t.getPeerId();if(null==r)return;const n=wm(r);this.discovery.dispatchEvent(new lq("peer",{detail:{id:n,multiaddrs:[t],protocols:[]}}))}}function UX(){const e=new MX,t={transports:[e],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1},metrics:{enabled:!0}};return t}var FX,jX;async function*VX(e,t){yield*z_(e,(async e=>(await t.addressBook.add(e.id,e.multiaddrs),e)))}function zX(e){const t=new Set;return T_(e,(e=>!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)))}async function*$X(e,t=1){let r=0;for await(const n of e)r++,yield n;if(r<t)throw Ut(new Error("not found"),"NOT_FOUND")}(function(e){e["NOT_STARTED_YET"]="The libp2p node is not started yet",e["DHT_DISABLED"]="DHT is not available",e["PUBSUB_DISABLED"]="PubSub is not available",e["CONN_ENCRYPTION_REQUIRED"]="At least one connection encryption module is required",e["ERR_TRANSPORTS_REQUIRED"]="At least one transport module is required",e["ERR_PROTECTOR_REQUIRED"]="Private network is enforced, but no protector was provided",e["NOT_FOUND"]="Not found"})(FX||(FX={})),function(e){e["DHT_DISABLED"]="ERR_DHT_DISABLED",e["ERR_PUBSUB_DISABLED"]="ERR_PUBSUB_DISABLED",e["PUBSUB_NOT_STARTED"]="ERR_PUBSUB_NOT_STARTED",e["DHT_NOT_STARTED"]="ERR_DHT_NOT_STARTED",e["CONN_ENCRYPTION_REQUIRED"]="ERR_CONN_ENCRYPTION_REQUIRED",e["ERR_TRANSPORTS_REQUIRED"]="ERR_TRANSPORTS_REQUIRED",e["ERR_PROTECTOR_REQUIRED"]="ERR_PROTECTOR_REQUIRED",e["ERR_PEER_DIAL_INTERCEPTED"]="ERR_PEER_DIAL_INTERCEPTED",e["ERR_CONNECTION_INTERCEPTED"]="ERR_CONNECTION_INTERCEPTED",e["ERR_INVALID_PROTOCOLS_FOR_STREAM"]="ERR_INVALID_PROTOCOLS_FOR_STREAM",e["ERR_CONNECTION_ENDED"]="ERR_CONNECTION_ENDED",e["ERR_CONNECTION_FAILED"]="ERR_CONNECTION_FAILED",e["ERR_NODE_NOT_STARTED"]="ERR_NODE_NOT_STARTED",e["ERR_ALREADY_ABORTED"]="ERR_ALREADY_ABORTED",e["ERR_TOO_MANY_ADDRESSES"]="ERR_TOO_MANY_ADDRESSES",e["ERR_NO_VALID_ADDRESSES"]="ERR_NO_VALID_ADDRESSES",e["ERR_RELAYED_DIAL"]="ERR_RELAYED_DIAL",e["ERR_DIALED_SELF"]="ERR_DIALED_SELF",e["ERR_DISCOVERED_SELF"]="ERR_DISCOVERED_SELF",e["ERR_DUPLICATE_TRANSPORT"]="ERR_DUPLICATE_TRANSPORT",e["ERR_ENCRYPTION_FAILED"]="ERR_ENCRYPTION_FAILED",e["ERR_HOP_REQUEST_FAILED"]="ERR_HOP_REQUEST_FAILED",e["ERR_INVALID_KEY"]="ERR_INVALID_KEY",e["ERR_INVALID_MESSAGE"]="ERR_INVALID_MESSAGE",e["ERR_INVALID_PARAMETERS"]="ERR_INVALID_PARAMETERS",e["ERR_INVALID_PEER"]="ERR_INVALID_PEER",e["ERR_MUXER_UNAVAILABLE"]="ERR_MUXER_UNAVAILABLE",e["ERR_NOT_FOUND"]="ERR_NOT_FOUND",e["ERR_TIMEOUT"]="ERR_TIMEOUT",e["ERR_TRANSPORT_UNAVAILABLE"]="ERR_TRANSPORT_UNAVAILABLE",e["ERR_TRANSPORT_DIAL_FAILED"]="ERR_TRANSPORT_DIAL_FAILED",e["ERR_UNSUPPORTED_PROTOCOL"]="ERR_UNSUPPORTED_PROTOCOL",e["ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED"]="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e["ERR_INVALID_MULTIADDR"]="ERR_INVALID_MULTIADDR",e["ERR_SIGNATURE_NOT_VALID"]="ERR_SIGNATURE_NOT_VALID",e["ERR_FIND_SELF"]="ERR_FIND_SELF",e["ERR_NO_ROUTERS_AVAILABLE"]="ERR_NO_ROUTERS_AVAILABLE",e["ERR_CONNECTION_NOT_MULTIPLEXED"]="ERR_CONNECTION_NOT_MULTIPLEXED",e["ERR_NO_DIAL_TOKENS"]="ERR_NO_DIAL_TOKENS",e["ERR_KEYCHAIN_REQUIRED"]="ERR_KEYCHAIN_REQUIRED",e["ERR_INVALID_CMS"]="ERR_INVALID_CMS",e["ERR_MISSING_KEYS"]="ERR_MISSING_KEYS",e["ERR_NO_KEY"]="ERR_NO_KEY",e["ERR_INVALID_KEY_NAME"]="ERR_INVALID_KEY_NAME",e["ERR_INVALID_KEY_TYPE"]="ERR_INVALID_KEY_TYPE",e["ERR_KEY_ALREADY_EXISTS"]="ERR_KEY_ALREADY_EXISTS",e["ERR_INVALID_KEY_SIZE"]="ERR_INVALID_KEY_SIZE",e["ERR_KEY_NOT_FOUND"]="ERR_KEY_NOT_FOUND",e["ERR_OLD_KEY_NAME_INVALID"]="ERR_OLD_KEY_NAME_INVALID",e["ERR_NEW_KEY_NAME_INVALID"]="ERR_NEW_KEY_NAME_INVALID",e["ERR_PASSWORD_REQUIRED"]="ERR_PASSWORD_REQUIRED",e["ERR_PEM_REQUIRED"]="ERR_PEM_REQUIRED",e["ERR_CANNOT_READ_KEY"]="ERR_CANNOT_READ_KEY",e["ERR_MISSING_PRIVATE_KEY"]="ERR_MISSING_PRIVATE_KEY",e["ERR_MISSING_PUBLIC_KEY"]="ERR_MISSING_PUBLIC_KEY",e["ERR_INVALID_OLD_PASS_TYPE"]="ERR_INVALID_OLD_PASS_TYPE",e["ERR_INVALID_NEW_PASS_TYPE"]="ERR_INVALID_NEW_PASS_TYPE",e["ERR_INVALID_PASS_LENGTH"]="ERR_INVALID_PASS_LENGTH",e["ERR_NOT_IMPLEMENTED"]="ERR_NOT_IMPLEMENTED",e["ERR_WRONG_PING_ACK"]="ERR_WRONG_PING_ACK",e["ERR_INVALID_RECORD"]="ERR_INVALID_RECORD",e["ERR_ALREADY_SUCCEEDED"]="ERR_ALREADY_SUCCEEDED",e["ERR_NO_HANDLER_FOR_PROTOCOL"]="ERR_NO_HANDLER_FOR_PROTOCOL",e["ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",e["ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS"]="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS"}(jX||(jX={}));var qX=r(2407),KX=r(3793);const HX=Mt("libp2p:peer-routing");class GX{constructor(e,t){this.components=e,this.routers=t.routers,this.refreshManagerInit=t.refreshManager??{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,qX.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{this.abortController=new sa.TimeoutController(this.refreshManagerInit.timeout??1e4);try{(0,KX.setMaxListeners)?.(1/0,this.abortController.signal)}catch{}await I_(this.getClosestPeers(this.components.getPeerId().toBytes(),{signal:this.abortController.signal}))}catch(nP){HX.error(nP)}finally{this.abortController?.clear(),this.abortController=void 0}}async stop(){(0,qX.clearDelayedInterval)(this.timeoutId),this.abortController?.abort(),this.started=!1}async findPeer(e,t){if(0===this.routers.length)throw Ut(new Error("No peer routers available"),jX.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.getPeerId().toString())throw Ut(new Error("Should not try to find self"),jX.ERR_FIND_SELF);const r=await W_($_(...this.routers.map((r=>async function*(){try{yield await r.findPeer(e,t)}catch(nP){HX.error(nP)}}()))),(e=>T_(e,Boolean)),(e=>VX(e,this.components.getPeerStore())),(async e=>await KD(e)));if(null!=r)return r;throw Ut(new Error(FX.NOT_FOUND),jX.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(0===this.routers.length)throw Ut(new Error("No peer routers available"),jX.ERR_NO_ROUTERS_AVAILABLE);yield*W_($_(...this.routers.map((r=>r.getClosestPeers(e,t)))),(e=>VX(e,this.components.getPeerStore())),(e=>zX(e)),(e=>$X(e)))}}class WX{constructor(e,t){this.routers=t.routers??[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e,t={}){if(0===this.routers.length)throw Ut(new Error("No content this.routers available"),jX.ERR_NO_ROUTERS_AVAILABLE);yield*W_($_(...this.routers.map((r=>r.findProviders(e,t)))),(e=>VX(e,this.components.getPeerStore())),(e=>zX(e)),(e=>$X(e)))}async provide(e,t={}){if(0===this.routers.length)throw Ut(new Error("No content routers available"),jX.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async r=>await r.provide(e,t))))}async put(e,t,r){if(!this.isStarted())throw Ut(new Error(FX.NOT_STARTED_YET),jX.DHT_NOT_STARTED);const n=this.components.getDHT();null!=n&&await I_(n.put(e,t,r))}async get(e,t){if(!this.isStarted())throw Ut(new Error(FX.NOT_STARTED_YET),jX.DHT_NOT_STARTED);const r=this.components.getDHT();if(null!=r)for await(const n of r.get(e,t))if("VALUE"===n.name)return n.value;throw Ut(new Error(FX.NOT_FOUND),jX.ERR_NOT_FOUND)}async*getMany(e,t,r){if(!this.isStarted())throw Ut(new Error(FX.NOT_STARTED_YET),jX.DHT_NOT_STARTED);if(null==t||0===t)return;let n=0;const i=this.components.getDHT();if(null!=i)for await(const s of i.get(e,r))if("VALUE"===s.name&&(yield{from:s.from,val:s.value},n++,n===t))break;if(0===n)throw Ut(new Error(FX.NOT_FOUND),jX.ERR_NOT_FOUND)}}function QX(e){const t=e.getPeerId();if(null==t)throw Ut(new Error(`${e.toString()} does not have a valid peer type`),jX.ERR_INVALID_MULTIADDR);try{return wm(t)}catch(nP){throw Ut(new Error(`${e.toString()} is not a valid peer type`),jX.ERR_INVALID_MULTIADDR)}}function YX(e){if(cm(e))return{id:e,multiaddrs:[],protocols:[]};let t;return"string"===typeof e&&(e=Kl(e)),$l(e)&&(t=e,e=QX(e)),{id:e,multiaddrs:null!=t?[t]:[],protocols:[]}}const JX=e=>e;class XX extends cq{constructor(e,t){super();const{listen:r=[],announce:n=[]}=t;this.components=e,this.listen=new Set(r.map((e=>e.toString()))),this.announce=new Set(n.map((e=>e.toString()))),this.observed=new Set,this.announceFilter=t.announceFilter??JX}getListenAddrs(){return Array.from(this.listen).map((e=>Kl(e)))}getAnnounceAddrs(){return Array.from(this.announce).map((e=>Kl(e)))}getObservedAddrs(){return Array.from(this.observed).map((e=>Kl(e)))}addObservedAddr(e){let t=Kl(e);const r=t.getPeerId();if(null!=r){const e=wm(r);e.equals(this.components.getPeerId())&&(t=t.decapsulate(Kl(`/p2p/${this.components.getPeerId().toString()}`)))}const n=t.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new lq("change:addresses")))}getAddresses(){let e=this.getAnnounceAddrs().map((e=>e.toString()));0===e.length&&(e=this.components.getTransportManager().getAddrs().map((e=>e.toString()))),e=e.concat(this.getObservedAddrs().map((e=>e.toString())));const t=new Set(e);return this.announceFilter(Array.from(t).map((e=>Kl(e)))).map((e=>e.getPeerId()===this.components.getPeerId().toString()?e:e.encapsulate(`/p2p/${this.components.getPeerId().toString()}`)))}}const ZX=Mt("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class eZ extends cq{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}_addVisibilityChangeListener(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?ZX("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const e=!1===globalThis.document[this.hidden];ZX(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new lq("visibilityChange",{detail:e}))}}const tZ=Mt("libp2p:connection-manager:latency-monitor");class rZ extends cq{constructor(e={}){super();const{latencyCheckIntervalMs:t,dataEmitIntervalMs:r,asyncTestFn:n,latencyRandomPercentage:i}=e;this.latencyCheckIntervalMs=t??500,this.latencyRandomPercentage=i??10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===r||0===r?void 0:r??5e3,tZ("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?tZ("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):tZ("Not emitting summaries"),this.asyncTestFn=n,null!=globalThis.process?.hrtime?(tZ("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{const t=this.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=window.performance?.now?(tZ("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(tZ("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this.latencyData=this.initLatencyData()}start(){nZ()&&(this.visibilityChangeEmitter=new eZ,this.visibilityChangeEmitter.addEventListener("visibilityChange",(e=>{const{detail:t}=e;t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===this.visibilityChangeEmitter?.isVisible()&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const e=this.getSummary();e.events>0&&this.dispatchEvent(new lq("data",{detail:e}))}getSummary(){const e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),tZ.trace("Summary: %O",e),e}checkLatency(){const e=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,t={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+e),startTime:this.now()},r=()=>{if(null==this.checkLatencyID)return;const e=this.getDeltaMS(t.startTime)-t.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,e),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,e),this.latencyData.totalMs+=e,tZ.trace("MS: %s Data: %O",e,this.latencyData)};tZ.trace("localData: %O",t),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(t.deltaOffset=0,t.startTime=this.now(),this.asyncTestFn(r)):(t.deltaOffset-=1,r())}),t.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}function nZ(){return"undefined"!==typeof globalThis.window}var iZ=r(3057);const sZ="OPEN",oZ="CLOSING",aZ="CLOSED";function cZ(e,t){const r={[Symbol.iterator]:()=>r,next:()=>{const r=e.next(),n=r.value;if(!0===r.done||null==n){const e={done:!0,value:void 0};return e}return{done:!1,value:t(n)}}};return r}class uZ{constructor(e){if(this.map=new Map,null!=e)for(const[t,r]of e.entries())this.map.set(t.toString(),r)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return cZ(this.map.entries(),(e=>[wm(e[0]),e[1]]))}forEach(e){this.map.forEach(((t,r)=>{e(t,wm(r),this)}))}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return cZ(this.map.keys(),(e=>wm(e)))}values(){return this.map.values()}get size(){return this.map.size}}class lZ{constructor(e){if(this.set=new Set,null!=e)for(const t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return cZ(this.set.entries(),(e=>{const t=wm(e[0]);return[t,t]}))}forEach(e){this.set.forEach((t=>{const r=wm(t);e(r,r,this)}))}has(e){return this.set.has(e.toString())}values(){return cZ(this.set.values(),(e=>wm(e)))}intersection(e){const t=new lZ;for(const r of e)this.has(r)&&t.add(r);return t}difference(e){const t=new lZ;for(const r of this)e.has(r)||t.add(r);return t}union(e){const t=new lZ;for(const r of e)t.add(r);for(const r of this)t.add(r);return t}}class hZ{constructor(e){if(this.list=[],null!=e)for(const t of e)this.list.push(t.toString())}[Symbol.iterator](){return mapIterable(this.list.entries(),(e=>peerIdFromString(e[1])))}concat(e){const t=new hZ(this);for(const r of e)t.push(r);return t}entries(){return mapIterable(this.list.entries(),(e=>[e[0],peerIdFromString(e[1])]))}every(e){return this.list.every(((t,r)=>e(peerIdFromString(t),r,this)))}filter(e){const t=new hZ;return this.list.forEach(((r,n)=>{const i=peerIdFromString(r);e(i,n,this)&&t.push(i)})),t}find(e){const t=this.list.find(((t,r)=>e(peerIdFromString(t),r,this)));if(null!=t)return peerIdFromString(t)}findIndex(e){return this.list.findIndex(((t,r)=>e(peerIdFromString(t),r,this)))}forEach(e){this.list.forEach(((t,r)=>{e(peerIdFromString(t),r,this)}))}includes(e){return this.list.includes(e.toString())}indexOf(e){return this.list.indexOf(e.toString())}pop(){const e=this.list.pop();if(null!=e)return peerIdFromString(e)}push(...e){for(const t of e)this.list.push(t.toString())}shift(){const e=this.list.shift();if(null!=e)return peerIdFromString(e)}unshift(...e){let t=this.list.length;for(let r=e.length-1;r>-1;r--)this.list.unshift(e[r].toString());return t}get length(){return this.list.length}}const dZ="keep-alive",fZ=Mt("libp2p:connection-manager"),pZ={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4},yZ="libp2p",gZ="connection-manager",mZ=6e4;class wZ extends cq{constructor(e){if(super(),this.components=new kK,this.opts=gt.call({ignoreUndefined:!0},pZ,e),this.opts.maxConnections<this.opts.minConnections)throw Ut(new Error("Connection Manager maxConnections must be greater than minConnections"),jX.ERR_INVALID_PARAMETERS);fZ("options: %o",this.opts),this.connections=new Map,this.started=!1,this._checkMetrics=this._checkMetrics.bind(this),this.latencyMonitor=new rZ({latencyCheckIntervalMs:e.pollInterval,dataEmitIntervalMs:e.pollInterval});try{(0,KX.setMaxListeners)?.(1/0,this)}catch{}this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.startupReconnectTimeout=e.startupReconnectTimeout??mZ,this.dialTimeout=e.dialTimeout??3e4}init(e){this.components=e,this.components.getMetrics()?.updateComponentMetric({system:yZ,component:gZ,metric:"connections",label:"direction",value:()=>{const e={inbound:0,outbound:0};for(const t of this.connections.values())for(const r of t)"inbound"===r.stat.direction?e.inbound++:e.outbound++;return e}}),this.components.getMetrics()?.updateComponentMetric({system:yZ,component:gZ,metric:"protocol-streams-total",label:"protocol",value:()=>{const e={};for(const t of this.connections.values())for(const r of t)for(const t of r.streams){const r=`${t.stat.direction} ${t.stat.protocol??"unnegotiated"}`;e[r]=(e[r]??0)+1}return e}}),this.components.getMetrics()?.updateComponentMetric({system:yZ,component:gZ,metric:"protocol-streams-per-connection-90th-percentile",label:"protocol",value:()=>{const e={};for(const r of this.connections.values())for(const t of r){const r={};for(const e of t.streams){const t=`${e.stat.direction} ${e.stat.protocol??"unnegotiated"}`;r[t]=(r[t]??0)+1}for(const[t,n]of Object.entries(r))e[t]=e[t]??[],e[t].push(n)}const t={};for(let[r,n]of Object.entries(e)){n=n.sort(((e,t)=>e-t));const e=Math.floor(.9*n.length);t[r]=n[e]}return t}})}isStarted(){return this.started}async start(){null!=this.components.getMetrics()&&(this.timer=this.timer??iZ(this._checkMetrics,this.opts.pollInterval)),this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),this.started=!0,fZ("started")}async afterStart(){this.components.getUpgrader().addEventListener("connection",this.onConnect),this.components.getUpgrader().addEventListener("connectionEnd",this.onDisconnect),Promise.resolve().then((async()=>{const e=[];for(const t of await this.components.getPeerStore().all()){const r=await this.components.getPeerStore().getTags(t.id),n=r.filter((e=>e.name===dZ)).length>0;n&&e.push(t.id)}this.connectOnStartupController?.clear(),this.connectOnStartupController=new sa.TimeoutController(this.startupReconnectTimeout);try{(0,KX.setMaxListeners)?.(1/0,this.connectOnStartupController.signal)}catch{}await Promise.all(e.map((async e=>{await this.openConnection(e,{signal:this.connectOnStartupController?.signal}).catch((e=>{fZ.error(e)}))})))})).catch((e=>{fZ.error(e)})).finally((()=>{this.connectOnStartupController?.clear()}))}async beforeStop(){this.connectOnStartupController?.abort(),this.components.getUpgrader().removeEventListener("connection",this.onConnect),this.components.getUpgrader().removeEventListener("connectionEnd",this.onDisconnect)}async stop(){this.timer?.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),this.started=!1,await this._close(),fZ("stopped")}async _close(){const e=[];for(const t of this.connections.values())for(const r of t)e.push((async()=>{try{await r.close()}catch(nP){fZ.error(nP)}})());fZ("closing %d connections",e.length),await Promise.all(e),this.connections.clear()}async _checkMetrics(){const e=this.components.getMetrics();if(null!=e)try{const t=e.getGlobal().getMovingAverages(),r=t.dataReceived[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxReceivedData",r);const n=t.dataSent[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxSentData",n);const i=r+n;await this._checkMaxLimit("maxData",i),fZ.trace("metrics update",i)}finally{this.timer=iZ(this._checkMetrics,this.opts.pollInterval)}}onConnect(e){this._onConnect(e).catch((e=>{fZ.error(e)}))}async _onConnect(e){const{detail:t}=e;if(!this.started)return void await t.close();const r=t.remotePeer,n=r.toString(),i=this.connections.get(n);null!=i?i.push(t):this.connections.set(n,[t]),null!=r.publicKey&&await this.components.getPeerStore().keyBook.set(r,r.publicKey);const s=this.getConnections().length,o=s-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",s,o),this.dispatchEvent(new lq("peer:connect",{detail:t}))}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const r=t.remotePeer.toString();let n=this.connections.get(r);null!=n&&n.length>1?(n=n.filter((e=>e.id!==t.id)),this.connections.set(r,n)):null!=n&&(this.connections.delete(r),this.dispatchEvent(new lq("peer:disconnect",{detail:t})),this.components.getMetrics()?.onPeerDisconnected(t.remotePeer))}getConnections(e){if(null!=e)return this.connections.get(e.toString())??[];let t=[];for(const r of this.connections.values())t=t.concat(r);return t}async openConnection(e,t={}){fZ("dial to %p",e);const r=this.getConnections(e);if(r.length>0)return fZ("had an existing connection to %p",e),r[0];let n;if(null==t?.signal){n=new sa.TimeoutController(this.dialTimeout),t.signal=n.signal;try{(0,KX.setMaxListeners)?.(1/0,n.signal)}catch{}}try{const r=await this.components.getDialer().dial(e,t);let i=this.connections.get(e.toString());null==i&&(i=[],this.connections.set(e.toString(),i));let s=!1;for(const e of i)e.id===r.id&&(s=!0);return s||i.push(r),r}finally{null!=n&&n.clear()}}async closeConnections(e){const t=this.connections.get(e.toString())??[];await Promise.all(t.map((async e=>await e.close())))}getAll(e){if(!cm(e))throw Ut(new Error("peerId must be an instance of peer-id"),jX.ERR_INVALID_PARAMETERS);const t=e.toString(),r=this.connections.get(t);return null!=r?r.filter((e=>e.stat.status===sZ)):[]}_onLatencyMeasure(e){const{detail:t}=e;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((e=>{fZ.error(e)}))}async _checkMaxLimit(e,t,r=1){const n=this.opts[e];fZ.trace("checking limit of %s. current value: %d of %d",e,t,n),t>n&&(fZ("%s: limit exceeded: %p, %d/%d, pruning %d connection(s)",this.components.getPeerId(),e,t,n,r),await this._maybePruneConnections(r))}async _maybePruneConnections(e){const t=this.getConnections();if(t.length<=this.opts.minConnections||e<1)return;const r=new uZ;for(const s of t){const e=s.remotePeer;if(r.has(e))continue;const t=await this.components.getPeerStore().getTags(e);r.set(e,t.reduce(((e,t)=>e+t.value),0))}const n=t.sort(((e,t)=>{const n=r.get(e.remotePeer)??0,i=r.get(t.remotePeer)??0;return n>i?1:n<i?-1:0})),i=[];for(const s of n)if(fZ("too many connections open - closing a connection to %p",s.remotePeer),i.push(s),i.length===e)break;await Promise.all(i.map((async e=>{try{await e.close()}catch(nP){fZ.error(nP)}this.onDisconnect(new lq("connectionEnd",{detail:e}))})))}async acceptIncomingConnection(e){return!0}}const vZ=Mt("libp2p:connection-manager:auto-dialler"),bZ={enabled:!0,minConnections:0,autoDialInterval:1e4};class EZ{constructor(e,t){this.components=e,this.options=gt.call({ignoreUndefined:!0},bZ,t),this.running=!1,this._autoDial=this._autoDial.bind(this),vZ("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((e=>{vZ.error("could start autodial",e)})),vZ("started")):vZ("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),vZ("stopped")):vZ("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const e=this.options.minConnections;if(this.components.getConnectionManager().getConnections().length>=e)return void(this.autoDialTimeout=iZ(this._autoDial,this.options.autoDialInterval));const t=await this.components.getPeerStore().all(),r=await W_(t.sort((()=>Math.random()>.5?1:-1)),(e=>T_(e,(e=>!e.id.equals(this.components.getPeerId())))),(e=>lV(e,((e,t)=>t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1))),(async e=>await S_(e)));for(let n=0;this.running&&n<r.length&&this.components.getConnectionManager().getConnections().length<e;n++){if(!this.running)return;const e=r[n];if(0===this.components.getConnectionManager().getConnections(e.id).length){vZ("connecting to a peerStore stored peer %p",e.id);try{await this.components.getConnectionManager().openConnection(e.id)}catch(nP){vZ.error("could not connect to peerStore stored peer",nP)}}}this.running&&(this.autoDialTimeout=iZ(this._autoDial,this.options.autoDialInterval))}}var _Z;(function(e){let t,r,n,i,s,o;(function(e){e["SUCCESS"]="SUCCESS",e["HOP_SRC_ADDR_TOO_LONG"]="HOP_SRC_ADDR_TOO_LONG",e["HOP_DST_ADDR_TOO_LONG"]="HOP_DST_ADDR_TOO_LONG",e["HOP_SRC_MULTIADDR_INVALID"]="HOP_SRC_MULTIADDR_INVALID",e["HOP_DST_MULTIADDR_INVALID"]="HOP_DST_MULTIADDR_INVALID",e["HOP_NO_CONN_TO_DST"]="HOP_NO_CONN_TO_DST",e["HOP_CANT_DIAL_DST"]="HOP_CANT_DIAL_DST",e["HOP_CANT_OPEN_DST_STREAM"]="HOP_CANT_OPEN_DST_STREAM",e["HOP_CANT_SPEAK_RELAY"]="HOP_CANT_SPEAK_RELAY",e["HOP_CANT_RELAY_TO_SELF"]="HOP_CANT_RELAY_TO_SELF",e["STOP_SRC_ADDR_TOO_LONG"]="STOP_SRC_ADDR_TOO_LONG",e["STOP_DST_ADDR_TOO_LONG"]="STOP_DST_ADDR_TOO_LONG",e["STOP_SRC_MULTIADDR_INVALID"]="STOP_SRC_MULTIADDR_INVALID",e["STOP_DST_MULTIADDR_INVALID"]="STOP_DST_MULTIADDR_INVALID",e["STOP_RELAY_REFUSED"]="STOP_RELAY_REFUSED",e["MALFORMED_MESSAGE"]="MALFORMED_MESSAGE"})(t=e.Status||(e.Status={})),function(e){e[e["SUCCESS"]=100]="SUCCESS",e[e["HOP_SRC_ADDR_TOO_LONG"]=220]="HOP_SRC_ADDR_TOO_LONG",e[e["HOP_DST_ADDR_TOO_LONG"]=221]="HOP_DST_ADDR_TOO_LONG",e[e["HOP_SRC_MULTIADDR_INVALID"]=250]="HOP_SRC_MULTIADDR_INVALID",e[e["HOP_DST_MULTIADDR_INVALID"]=251]="HOP_DST_MULTIADDR_INVALID",e[e["HOP_NO_CONN_TO_DST"]=260]="HOP_NO_CONN_TO_DST",e[e["HOP_CANT_DIAL_DST"]=261]="HOP_CANT_DIAL_DST",e[e["HOP_CANT_OPEN_DST_STREAM"]=262]="HOP_CANT_OPEN_DST_STREAM",e[e["HOP_CANT_SPEAK_RELAY"]=270]="HOP_CANT_SPEAK_RELAY",e[e["HOP_CANT_RELAY_TO_SELF"]=280]="HOP_CANT_RELAY_TO_SELF",e[e["STOP_SRC_ADDR_TOO_LONG"]=320]="STOP_SRC_ADDR_TOO_LONG",e[e["STOP_DST_ADDR_TOO_LONG"]=321]="STOP_DST_ADDR_TOO_LONG",e[e["STOP_SRC_MULTIADDR_INVALID"]=350]="STOP_SRC_MULTIADDR_INVALID",e[e["STOP_DST_MULTIADDR_INVALID"]=351]="STOP_DST_MULTIADDR_INVALID",e[e["STOP_RELAY_REFUSED"]=390]="STOP_RELAY_REFUSED",e[e["MALFORMED_MESSAGE"]=400]="MALFORMED_MESSAGE"}(r||(r={})),function(e){e.codec=()=>ew(r)}(t=e.Status||(e.Status={})),function(e){e["HOP"]="HOP",e["STOP"]="STOP",e["STATUS"]="STATUS",e["CAN_HOP"]="CAN_HOP"}(n=e.Type||(e.Type={})),function(e){e[e["HOP"]=1]="HOP",e[e["STOP"]=2]="STOP",e[e["STATUS"]=3]="STATUS",e[e["CAN_HOP"]=4]="CAN_HOP"}(i||(i={})),function(e){e.codec=()=>ew(i)}(n=e.Type||(e.Type={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.id)throw new Error('Protocol error: required field "id" was not found in object');if(t.uint32(10),t.bytes(e.id),null==e.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');for(const n of e.addrs)t.uint32(18),t.bytes(n);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.id=e.bytes();break;case 2:r.addrs=r.addrs??[],r.addrs.push(e.bytes());break;default:e.skipType(7&t);break}}if(r.addrs=r.addrs??[],null==r.id)throw new Error('Protocol error: value for required field "id" was not found in protobuf');if(null==r.addrs)throw new Error('Protocol error: value for required field "addrs" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>(null==o&&(o=tw(((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.srcPeer&&(r.uint32(18),e.Peer.codec().encode(t.srcPeer,r)),null!=t.dstPeer&&(r.uint32(26),e.Peer.codec().encode(t.dstPeer,r)),null!=t.code&&(r.uint32(32),e.Status.codec().encode(t.code,r)),!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.type=e.Type.codec().decode(t);break;case 2:n.srcPeer=e.Peer.codec().decode(t,t.uint32());break;case 3:n.dstPeer=e.Peer.codec().decode(t,t.uint32());break;case 4:n.code=e.Status.codec().decode(t);break;default:t.skipType(7&r);break}}return n}))),o),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(_Z||(_Z={}));const AZ=Mt("libp2p:stream:converter");function SZ(e,t={}){const{stream:r,remoteAddr:n}=e,{sink:i,source:s}=r,o=async function*(){for await(const e of s)yield*e}(),a={async sink(e){null!=t.signal&&(e=XK(e,t.signal));try{await i(e),await c()}catch(nP){"aborted"!==nP.type&&AZ(nP)}},source:null!=t.signal?XK(o,t.signal):o,remoteAddr:n,timeline:{open:Date.now(),close:void 0},async close(){await i(async function*(){yield new Uint8Array(0)}()),await c()}};async function c(){return null==a.timeline.close&&(a.timeline.close=Date.now()),await Promise.resolve()}return a}const kZ="/libp2p/circuit/relay/0.1.0";function IZ(e){const t=new Map;async function r(r){const n=r.toString().split("/p2p-circuit").find((e=>""!==e)),s=Kl(n),o=s.getPeerId();if(null==o)throw new Error("Could not determine relay peer from multiaddr");const a=wm(o);await e.peerStore.addressBook.add(a,[s]);const c=await e.connectionManager.openConnection(a),u=c.remoteAddr.encapsulate("/p2p-circuit");t.set(c.remotePeer.toString(),u),i.dispatchEvent(new lq("listening"))}function n(){const e=[];for(const r of t.values())e.push(r);return e}const i=Object.assign(new cq,{close:async()=>await Promise.resolve(),listen:r,getAddrs:n});return e.connectionManager.addEventListener("peer:disconnect",(e=>{const{detail:r}=e,n=t.delete(r.remotePeer.toString());n&&i.dispatchEvent(new lq("close"))})),i}function TZ(e,t){e.write({type:_Z.Type.STATUS,code:t})}function CZ(e,t){try{null!=e.dstPeer?.addrs&&e.dstPeer.addrs.forEach((e=>Kl(e)))}catch(nP){throw TZ(t,e.type===_Z.Type.HOP?_Z.Status.HOP_DST_MULTIADDR_INVALID:_Z.Status.STOP_DST_MULTIADDR_INVALID),nP}try{null!=e.srcPeer?.addrs&&e.srcPeer.addrs.forEach((e=>Kl(e)))}catch(nP){throw TZ(t,e.type===_Z.Type.HOP?_Z.Status.HOP_SRC_MULTIADDR_INVALID:_Z.Status.STOP_SRC_MULTIADDR_INVALID),nP}}function RZ(e){const t=O_(),r=sT(e.source),n=pH();let i;const s=e.sink(async function*(){yield*t;const e=await n.promise;yield*e}());s.catch((e=>{i=e}));const o={sink:async e=>null!=i?await Promise.reject(i):(n.resolve(e),await s),source:r};return{reader:r,writer:t,stream:o,rest:()=>t.end(),write:t.push,read:async()=>{const e=await r.next();if(null!=e.value)return e.value}}}const PZ=Mt("libp2p:circuit:stream-handler");class xZ{constructor(e){const{stream:t,maxLength:r=4096}=e;this.stream=t,this.shake=RZ(this.stream),this.decoder=cH.fromReader(this.shake.reader,{maxDataLength:r})}async read(){const e=await this.decoder.next();if(null!=e.value){const t=_Z.decode(e.value);return PZ("read message type",t.type),t}PZ("read received no value, closing stream"),this.close()}write(e){PZ("write message type %s",e.type),this.shake.write(nH.single(_Z.encode(e)))}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){PZ("closing the stream"),this.rest().sink([]).catch((e=>{PZ.error(e)}))}}const OZ=Mt("libp2p:circuit:stop");function NZ(e){const{connection:t,request:r,streamHandler:n}=e;try{CZ(r,n)}catch(nP){return void OZ.error("invalid stop request via peer %p %o",t.remotePeer,nP)}return OZ("stop request is valid"),n.write({type:_Z.Type.STATUS,code:_Z.Status.SUCCESS}),n.rest()}async function DZ(e){const{connection:t,request:r,signal:n}=e,i=await t.newStream(kZ,{signal:n});OZ("starting stop request to %p",t.remotePeer);const s=new xZ({stream:i});s.write(r);const o=await s.read();if(null!=o){if(o.code===_Z.Status.SUCCESS)return OZ("stop request to %p was successful",t.remotePeer),s.rest();OZ("stop request failed with code %d",o.code),s.close()}else s.close()}const BZ=Mt("libp2p:circuit:hop");async function LZ(e){const{connection:t,request:r,streamHandler:n,circuit:i,connectionManager:s}=e;if(!i.hopEnabled())return BZ("HOP request received but we are not acting as a relay"),n.end({type:_Z.Type.STATUS,code:_Z.Status.HOP_CANT_SPEAK_RELAY});try{CZ(r,n)}catch(nP){return void BZ.error("invalid hop request via peer %p %o",t.remotePeer,nP)}if(null==r.dstPeer)return void BZ("HOP request received but we do not receive a dstPeer");const o=vm(r.dstPeer.id),a=s.getConnections(o);if(0===a.length&&!i.hopActive())return BZ("HOP request received but we are not connected to the destination peer"),n.end({type:_Z.Type.STATUS,code:_Z.Status.HOP_NO_CONN_TO_DST});if(0===a.length)return BZ("did not have connection to remote peer"),n.end({type:_Z.Type.STATUS,code:_Z.Status.HOP_NO_CONN_TO_DST});const c={type:_Z.Type.STOP,dstPeer:r.dstPeer,srcPeer:r.srcPeer};let u;try{BZ("performing STOP request");const e=await DZ({connection:a[0],request:c});if(null==e)throw new Error("Could not stop");u=e}catch(nP){return void BZ.error(nP)}BZ("hop request from %p is valid",t.remotePeer),n.write({type:_Z.Type.STATUS,code:_Z.Status.SUCCESS});const l=n.rest();return BZ("creating related connections"),await W_(l,u,l)}async function MZ(e){const{connection:t,request:r,signal:n}=e,i=await t.newStream(kZ,{signal:n}),s=new xZ({stream:i});s.write(r);const o=await s.read();if(null==o)throw Ut(new Error("HOP request had no response"),jX.ERR_HOP_REQUEST_FAILED);if(o.code===_Z.Status.SUCCESS)return BZ("hop request was successful"),s.rest();throw BZ("hop request failed with code %d, closing stream",o.code),s.close(),Ut(new Error(`HOP request failed with code "${o.code??"unknown"}"`),jX.ERR_HOP_REQUEST_FAILED)}async function UZ(e){const{connection:t,signal:r}=e,n=await t.newStream(kZ,{signal:r}),i=new xZ({stream:n});i.write({type:_Z.Type.CAN_HOP});const s=await i.read();return await i.close(),null!=s&&s.code===_Z.Status.SUCCESS}function FZ(e){const{connection:t,streamHandler:r,circuit:n}=e,i=n.hopEnabled();BZ("can hop (%s) request from %p",i,t.remotePeer),r.end({type:_Z.Type.STATUS,code:i?_Z.Status.SUCCESS:_Z.Status.HOP_CANT_SPEAK_RELAY})}const jZ=Mt("libp2p:circuit");class VZ{constructor(e){this.components=new kK,this._init=e}init(e){this.components=e,this.components.getRegistrar().handle(kZ,(e=>{this._onProtocol(e).catch((e=>{jZ.error(e)}))})).catch((e=>{jZ.error(e)}))}hopEnabled(){return!0}hopActive(){return!0}get[xX](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(e){const{connection:t,stream:r}=e,n=new sa.TimeoutController(this._init.hop.timeout);try{(0,KX.setMaxListeners)?.(1/0,n.signal)}catch{}try{const e=eH(r,n.signal),i=new xZ({stream:{...r,...e}}),s=await i.read();if(null==s)return jZ("request was invalid, could not read from stream"),i.write({type:_Z.Type.STATUS,code:_Z.Status.MALFORMED_MESSAGE}),void i.close();let o;switch(s.type){case _Z.Type.CAN_HOP:jZ("received CAN_HOP request from %p",t.remotePeer),await FZ({circuit:this,connection:t,streamHandler:i});break;case _Z.Type.HOP:jZ("received HOP request from %p",t.remotePeer),await LZ({connection:t,request:s,streamHandler:i,circuit:this,connectionManager:this.components.getConnectionManager()});break;case _Z.Type.STOP:jZ("received STOP request from %p",t.remotePeer),o=await NZ({connection:t,request:s,streamHandler:i});break;default:return jZ("Request of type %s not supported",s.type),i.write({type:_Z.Type.STATUS,code:_Z.Status.MALFORMED_MESSAGE}),void i.close()}if(null!=o){const e=t.remoteAddr.encapsulate("/p2p-circuit").encapsulate(Kl(s.dstPeer?.addrs[0])),r=Kl(s.srcPeer?.addrs[0]),n=SZ({stream:o,remoteAddr:e,localAddr:r}),i=s.type===_Z.Type.HOP?"relay":"inbound";jZ("new %s connection %s",i,n.remoteAddr);const a=await this.components.getUpgrader().upgradeInbound(n);jZ("%s connection %s upgraded",i,n.remoteAddr),null!=this.handler&&this.handler(a)}}finally{n.clear()}}async dial(e,t={}){const r=e.toString().split("/p2p-circuit"),n=Kl(r[0]),i=Kl(r[r.length-1]),s=n.getPeerId(),o=i.getPeerId();if(null==s||null==o){const e="Circuit relay dial failed as addresses did not have peer id";throw jZ.error(e),Ut(new Error(e),jX.ERR_RELAYED_DIAL)}const a=wm(s),c=wm(o);let u=!1;const l=this.components.getConnectionManager().getConnections(a);let h=l[0];null==h&&(await this.components.getPeerStore().addressBook.add(a,[n]),h=await this.components.getConnectionManager().openConnection(a,t),u=!0);try{const r=await MZ({...t,connection:h,request:{type:_Z.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map((e=>e.bytes))},dstPeer:{id:c.toBytes(),addrs:[Kl(i).bytes]}}}),s=n.encapsulate(`/p2p-circuit/p2p/${this.components.getPeerId().toString()}`),o=SZ({stream:r,remoteAddr:e,localAddr:s});return jZ("new outbound connection %s",o.remoteAddr),await this.components.getUpgrader().upgradeOutbound(o)}catch(nP){throw jZ.error("Circuit relay dial failed",nP),u&&await h.close(),nP}}createListener(e){return this.handler=e.handler,IZ({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}filter(e){return e=Array.isArray(e)?e:[e],e.filter((e=>hh.matches(e)))}}async function zZ(e){const t=(new TextEncoder).encode(e),r=await Co.digest(t);return Zt.k.createV0(r)}const $Z=6e4,qZ=15*$Z,KZ=30*$Z,HZ=290,GZ="hop_relay",WZ="true",QZ="/libp2p/relay";var YZ=r(2645);function JZ(e){const{address:t}=e.nodeAddress();return Boolean(YZ(t))}function XZ(e,t){const r=JZ(e.multiaddr),n=JZ(t.multiaddr);return r&&!n?1:!r&&n||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}const ZZ=Mt("libp2p:auto-relay"),e0=()=>{};class t0{constructor(e,t){this.components=e,this.addressSorter=t.addressSorter??XZ,this.maxListeners=t.maxListeners??1,this.listenRelays=new Set,this.onError=t.onError??e0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.getPeerStore().addEventListener("change:protocols",(e=>{this._onProtocolChange(e).catch((e=>{ZZ.error(e)}))})),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(e){const{peerId:t,protocols:r}=e.detail,n=t.toString(),i=r.find((e=>e===kZ));if(null!=i){if(!this.listenRelays.has(n))try{const e=this.components.getConnectionManager().getConnections(t);if(0===e.length)return;const r=e[0];if(r.remoteAddr.protoCodes().includes(HZ))return void ZZ(`relayed connection to ${n} will not be used to hop on`);const i=await UZ({connection:r});i&&(await this.components.getPeerStore().metadataBook.setValue(t,GZ,ia(WZ)),await this._addListenRelay(r,n))}catch(nP){this.onError(nP)}}else this.listenRelays.has(n)&&await this._removeListenRelay(n)}_onPeerDisconnected(e){const t=e.detail,r=t.remotePeer,n=r.toString();this.listenRelays.has(n)&&this._removeListenRelay(n).catch((e=>{ZZ.error(e)}))}async _addListenRelay(e,t){try{if(this.listenRelays.size>=this.maxListeners)return;const r=await W_(await this.components.getPeerStore().addressBook.get(e.remotePeer),(e=>lV(e,this.addressSorter)),(async e=>await S_(e))),n=await Promise.all(r.map((async t=>{try{let r=t.multiaddr;return null==r.getPeerId()&&(r=r.encapsulate(`/p2p/${e.remotePeer.toString()}`)),r=r.encapsulate("/p2p-circuit"),await this.components.getTransportManager().listen([r]),!0}catch(nP){ZZ.error("error listening on circuit address",nP),this.onError(nP)}return!1})));n.includes(!0)&&this.listenRelays.add(t)}catch(nP){this.onError(nP),this.listenRelays.delete(t)}}async _removeListenRelay(e){this.listenRelays.delete(e)&&await this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(e=[]){if(this.listenRelays.size>=this.maxListeners)return;const t=[],r=await this.components.getPeerStore().all();for(const{id:n,metadata:i}of r){const r=n.toString();if(this.listenRelays.has(r))continue;if(e.includes(r))continue;const s=i.get(GZ);if(null==s||vh(s)!==WZ)continue;const o=this.components.getConnectionManager().getConnections(n);if(0!==o.length){if(await this._addListenRelay(o[0],r),this.listenRelays.size>=this.maxListeners)return}else t.push(n)}for(const n of t)if(await this._tryToListenOnRelay(n),this.listenRelays.size>=this.maxListeners)return;try{const e=await zZ(QZ);for await(const t of this.components.getContentRouting().findProviders(e)){if(0===t.multiaddrs.length)continue;const e=t.id;if(!e.equals(this.components.getPeerId())&&(await this.components.getPeerStore().addressBook.add(e,t.multiaddrs),await this._tryToListenOnRelay(e),this.listenRelays.size>=this.maxListeners))return}}catch(nP){this.onError(nP)}}async _tryToListenOnRelay(e){try{const t=await this.components.getConnectionManager().openConnection(e);await this._addListenRelay(t,e.toString())}catch(nP){ZZ.error("Could not use %p as relay",e,nP),this.onError(nP,`could not connect and listen on known hop relay ${e.toString()}`)}}}const r0=Mt("libp2p:relay");class n0{constructor(e,t){this.components=e,this.autoRelay=!1!==t.autoRelay?.enabled?new t0(e,{addressSorter:t.addressSorter,...t.autoRelay}):void 0,this.started=!1,this.init=t,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,qX.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,qX.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const e=await zZ(QZ);await this.components.getContentRouting().provide(e)}catch(nP){nP.code===jX.ERR_NO_ROUTERS_AVAILABLE?(r0.error("a content router, such as a DHT, must be provided in order to advertise the relay service",nP),await this.stop()):r0.error(nP)}}}var i0=r(4840);r(7323),r(8410);const s0=rw.pki,o0=(e,t)=>{const r=s0.rsa.setPublicKey(t.n,t.e),n=s0.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(t),n};async function a0(e,t){const r=e.map(t),n=await Promise.all(r),i=n.findIndex((e=>e));return e[i]}const c0=Mt("libp2p:keychain:cms"),u0=new WeakMap;class l0{constructor(e,t){if(null==e)throw Ut(new Error("keychain is required"),jX.ERR_KEYCHAIN_REQUIRED);this.keychain=e,u0.set(this,{dek:t})}async encrypt(e,t){if(!(t instanceof Uint8Array))throw Ut(new Error("Plain data must be a Uint8Array"),jX.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(e),n=await this.keychain.getPrivateKey(e),i=u0.get(this);if(null==i)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const s=i.dek,o=rw.pki.decryptRsaPrivateKey(n,s),a=await o0(r,o),c=rw.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=rw.util.createBuffer(t),c.encrypt();const u=rw.asn1.toDer(c.toAsn1()).getBytes();return ia(u,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw Ut(new Error("CMS data is required"),jX.ERR_INVALID_PARAMETERS);let t;try{const r=rw.util.createBuffer(vh(e,"ascii")),n=rw.asn1.fromDer(r);t=rw.pkcs7.messageFromAsn1(n)}catch(nP){throw c0.error(nP),Ut(new Error("Invalid CMS"),jX.ERR_INVALID_CMS)}const r=t.recipients.filter((e=>e.issuer.find((e=>"O"===e.shortName&&"ipfs"===e.value)))).filter((e=>e.issuer.find((e=>"CN"===e.shortName)))).map((e=>({recipient:e,keyId:e.issuer.find((e=>"CN"===e.shortName)).value}))),n=await a0(r,(async e=>{try{const t=await this.keychain.findKeyById(e.keyId);if(null!=t)return!0}catch(nP){return!1}return!1}));if(null==n){const e=r.map((e=>e.keyId));throw Ut(new Error(`Decryption needs one of the key(s): ${e.join(", ")}`),jX.ERR_MISSING_KEYS,{missingKeys:e})}const i=await this.keychain.findKeyById(n.keyId);if(null==i)throw Ut(new Error("No key available to decrypto"),jX.ERR_NO_KEY);const s=await this.keychain.getPrivateKey(i.name),o=u0.get(this);if(null==o)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const a=o.dek,c=rw.pki.decryptRsaPrivateKey(s,a);return t.decrypt(n.recipient,c),ia(t.content.getBytes(),"ascii")}}const h0=Mt("libp2p:keychain"),d0="/pkcs8/",f0="/info/",p0=new WeakMap,y0={minKeyLength:14,minSaltLength:16,minIterationCount:1e3},g0={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function m0(e){return null!=e&&("string"===typeof e&&(e===i0(e.trim())&&e.length>0))}async function w0(){const e=200,t=1e3,r=Math.random()*(t-e)+e;await new Promise((e=>setTimeout(e,r)))}function v0(e){return new Df(d0+e)}function b0(e){return new Df(f0+e)}class E0{constructor(e,t){if(this.components=e,this.init=gt(g0,t),null!=this.init.pass&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(null!=this.init.dek?.keyLength&&this.init.dek.keyLength<y0.minKeyLength)throw new Error(`dek.keyLength must be least ${y0.minKeyLength} bytes`);if(null!=this.init.dek?.salt?.length&&this.init.dek.salt.length<y0.minSaltLength)throw new Error(`dek.saltLength must be least ${y0.minSaltLength} bytes`);if(null!=this.init.dek?.iterationCount&&this.init.dek.iterationCount<y0.minIterationCount)throw new Error(`dek.iterationCount must be least ${y0.minIterationCount}`);const r=null!=this.init.pass&&null!=this.init.dek?.salt?FK(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";p0.set(this,{dek:r}),this.started=!1}isStarted(){return this.started}async start(){const e=b0("self");await this.components.getDatastore().has(e)||await this.importPeer("self",this.components.getPeerId()),this.started=!0}stop(){this.started=!1}get cms(){const e=p0.get(this);if(null==e)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const t=e.dek;return new l0(this,t)}static generateOptions(){const e=Object.assign({},g0),t=3*Math.ceil(y0.minSaltLength/3);return e.dek.salt=vh(vv(t),"base64"),e}static get options(){return g0}async createKey(e,t,r=2048){if(!m0(e)||"self"===e)throw await w0(),Ut(new Error("Invalid key name"),jX.ERR_INVALID_KEY_NAME);if("string"!==typeof t)throw await w0(),Ut(new Error("Invalid key type"),jX.ERR_INVALID_KEY_TYPE);const n=v0(e),i=await this.components.getDatastore().has(n);if(i)throw await w0(),Ut(new Error("Key name already exists"),jX.ERR_KEY_ALREADY_EXISTS);switch(t.toLowerCase()){case"rsa":if(!Number.isSafeInteger(r)||r<2048)throw await w0(),Ut(new Error("Invalid RSA key size"),jX.ERR_INVALID_KEY_SIZE);break;default:break}let s;try{const i=await vE(t,r),o=await i.id(),a=p0.get(this);if(null==a)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const c=a.dek,u=await i.export(c);s={name:e,id:o};const l=this.components.getDatastore().batch();l.put(n,ia(u)),l.put(b0(e),ia(JSON.stringify(s))),await l.commit()}catch(nP){throw await w0(),nP}return s}async listKeys(){const e={prefix:f0},t=[];for await(const r of this.components.getDatastore().query(e))t.push(JSON.parse(vh(r.value)));return t}async findKeyById(e){try{const t=await this.listKeys();return t.find((t=>t.id===e))}catch(nP){throw await w0(),nP}}async findKeyByName(e){if(!m0(e))throw await w0(),Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);const t=b0(e);try{const e=await this.components.getDatastore().get(t);return JSON.parse(vh(e))}catch(nP){throw await w0(),h0.error(nP),Ut(new Error(`Key '${e}' does not exist.`),jX.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!m0(e)||"self"===e)throw await w0(),Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);const t=v0(e),r=await this.findKeyByName(e),n=this.components.getDatastore().batch();return n.delete(t),n.delete(b0(e)),await n.commit(),r}async renameKey(e,t){if(!m0(e)||"self"===e)throw await w0(),Ut(new Error(`Invalid old key name '${e}'`),jX.ERR_OLD_KEY_NAME_INVALID);if(!m0(t)||"self"===t)throw await w0(),Ut(new Error(`Invalid new key name '${t}'`),jX.ERR_NEW_KEY_NAME_INVALID);const r=v0(e),n=v0(t),i=b0(e),s=b0(t),o=await this.components.getDatastore().has(n);if(o)throw await w0(),Ut(new Error(`Key '${t}' already exists`),jX.ERR_KEY_ALREADY_EXISTS);try{const e=await this.components.getDatastore().get(r),o=await this.components.getDatastore().get(i),a=JSON.parse(vh(o));a.name=t;const c=this.components.getDatastore().batch();return c.put(n,e),c.put(s,ia(JSON.stringify(a))),c.delete(r),c.delete(i),await c.commit(),a}catch(nP){throw await w0(),nP}}async exportKey(e,t){if(!m0(e))throw await w0(),Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);if(null==t)throw await w0(),Ut(new Error("Password is required"),jX.ERR_PASSWORD_REQUIRED);const r=v0(e);try{const e=await this.components.getDatastore().get(r),n=vh(e),i=p0.get(this);if(null==i)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const s=i.dek,o=await SE(n,s);return await o.export(t)}catch(nP){throw await w0(),nP}}async importKey(e,t,r){if(!m0(e)||"self"===e)throw await w0(),Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);if(null==t)throw await w0(),Ut(new Error("PEM encoded key is required"),jX.ERR_PEM_REQUIRED);const n=v0(e),i=await this.components.getDatastore().has(n);if(i)throw await w0(),Ut(new Error(`Key '${e}' already exists`),jX.ERR_KEY_ALREADY_EXISTS);let s,o;try{s=await SE(t,r)}catch(nP){throw await w0(),Ut(new Error("Cannot read the key, most likely the password is wrong"),jX.ERR_CANNOT_READ_KEY)}try{o=await s.id();const e=p0.get(this);if(null==e)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const r=e.dek;t=await s.export(r)}catch(nP){throw await w0(),nP}const a={name:e,id:o},c=this.components.getDatastore().batch();return c.put(n,ia(t)),c.put(b0(e),ia(JSON.stringify(a))),await c.commit(),a}async importPeer(e,t){try{if(!m0(e))throw Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);if(null==t)throw Ut(new Error("PeerId is required"),jX.ERR_MISSING_PRIVATE_KEY);if(null==t.privateKey)throw Ut(new Error("PeerId.privKey is required"),jX.ERR_MISSING_PRIVATE_KEY);const r=await _E(t.privateKey),n=v0(e),i=await this.components.getDatastore().has(n);if(i)throw await w0(),Ut(new Error(`Key '${e}' already exists`),jX.ERR_KEY_ALREADY_EXISTS);const s=p0.get(this);if(null==s)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const o=s.dek,a=await r.export(o),c={name:e,id:t.toString()},u=this.components.getDatastore().batch();return u.put(n,ia(a)),u.put(b0(e),ia(JSON.stringify(c))),await u.commit(),c}catch(nP){throw await w0(),nP}}async getPrivateKey(e){if(!m0(e))throw await w0(),Ut(new Error(`Invalid key name '${e}'`),jX.ERR_INVALID_KEY_NAME);try{const t=v0(e),r=await this.components.getDatastore().get(t);return vh(r)}catch(nP){throw await w0(),h0.error(nP),Ut(new Error(`Key '${e}' does not exist.`),jX.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){if("string"!==typeof e)throw await w0(),Ut(new Error(`Invalid old pass type '${typeof e}'`),jX.ERR_INVALID_OLD_PASS_TYPE);if("string"!==typeof t)throw await w0(),Ut(new Error(`Invalid new pass type '${typeof t}'`),jX.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await w0(),Ut(new Error(`Invalid pass length ${t.length}`),jX.ERR_INVALID_PASS_LENGTH);h0("recreating keychain");const r=p0.get(this);if(null==r)throw Ut(new Error("dek missing"),jX.ERR_INVALID_PARAMETERS);const n=r.dek;this.init.pass=t;const i=null!=t&&null!=this.init.dek?.salt?FK(t,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";p0.set(this,{dek:i});const s=await this.listKeys();for(const o of s){const e=await this.components.getDatastore().get(v0(o.name)),t=vh(e),r=await SE(t,n),s=i.toString(),a=await r.export(s),c=this.components.getDatastore().batch(),u={name:o.name,id:o.id};c.put(v0(o.name),ia(a)),c.put(b0(o.name),ia(JSON.stringify(u))),await c.commit()}h0("keychain reconstructed")}}var _0=r(8189);const A0=3e4,S0=3e4,k0=100,I0=4,T0=25,C0={computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50};class R0{constructor(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,t){return 1-Math.exp(-(e-t)/this.timespan)}push(e,t){if(null!=this.previousTime){const r=this.alpha(e,this.previousTime),n=t-this.movingAverage,i=r*n;this.movingAverage=r*t+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+n*i),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=t;this.previousTime=e}}function P0(e){return new R0(e)}class x0 extends cq{constructor(e){super(),this.enabled=e.enabled,this.queue=[],this.stats={dataReceived:0n,dataSent:0n},this.frequencyLastTime=Date.now(),this.frequencyAccumulators={},this.movingAverages={dataReceived:[],dataSent:[]},this.computeThrottleMaxQueueSize=e.computeThrottleMaxQueueSize,this.computeThrottleTimeout=e.computeThrottleTimeout,this._update=this._update.bind(this),this.movingAverageIntervals=e.movingAverageIntervals;for(let t=0;t<e.initialCounters.length;t++){const r=e.initialCounters[t];this.stats[r]=0n,this.movingAverages[r]=[];for(let e=0;e<this.movingAverageIntervals.length;e++){const t=this.movingAverageIntervals[e],n=this.movingAverages[r][t]=P0(t);n.push(this.frequencyLastTime,0)}}}start(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}stop(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}getSnapshot(){return Object.assign({},this.stats)}getMovingAverages(){return Object.assign({},this.movingAverages)}push(e,t){this.queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this.timeout=iZ(this._update,this._nextTimeout())}_nextTimeout(){const e=this.queue.length/this.computeThrottleMaxQueueSize,t=Math.max(this.computeThrottleTimeout*(1-e),0);return t}_update(){if(this.timeout=null,this.queue.length>0){let e=["",0,0];for(e of this.queue)this._applyOp(e);this.queue=[],e.length>2&&""!==e[0]&&this._updateFrequency(e[2]),this.dispatchEvent(new lq("update",{detail:this.stats}))}}_updateFrequency(e){const t=e-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",t,e),this._updateFrequencyFor("dataSent",t,e),this.frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this.frequencyAccumulators[e]??0;this.frequencyAccumulators[e]=0;const i=t??1,s=n/i*1e3;let o=this.movingAverages[e];null==o&&(o=this.movingAverages[e]=[]);const a=this.movingAverageIntervals;for(let c=0;c<a.length;c++){const e=a[c];let t=o[e];null==t&&(t=o[e]=P0(e)),t.push(r,s)}}_applyOp(e){const t=e[0],r=e[1];if("number"!==typeof r)throw new Error("invalid increment number");let n;n=Object.prototype.hasOwnProperty.call(this.stats,t)?this.stats[t]:this.stats[t]=0n,this.stats[t]=n+BigInt(r),null==this.frequencyAccumulators[t]&&(this.frequencyAccumulators[t]=0),this.frequencyAccumulators[t]+=r}}const O0=["dataReceived","dataSent"],N0={in:"dataReceived",out:"dataSent"};class D0{constructor(e){this.enabled=e.enabled,this.statsInit={...e,initialCounters:O0},this.globalStats=new x0(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=op(e.maxOldPeersRetention??C0.maxOldPeersRetention),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}isStarted(){return this.running}async start(){this.enabled&&(this.running=!0)}async stop(){if(this.running){this.running=!1,this.globalStats.stop();for(const e of this.peerStats.values())e.stop();for(const e of this.protocolStats.values())e.stop()}}getGlobal(){return this.globalStats}getPeers(){return Array.from(this.peerStats.keys())}getComponentMetrics(){return this.systems}updateComponentMetric(e){const{system:t="libp2p",component:r,metric:n,value:i,label:s,help:o}=e;this.systems.has(t)||this.systems.set(t,new Map);const a=this.systems.get(t);if(null==a)throw new Error("Unknown metric system");a.has(r)||a.set(r,new Map);const c=a.get(r);if(null==c)throw new Error("Unknown metric component");c.set(n,{label:s,help:o,calculate:"function"!==typeof i?()=>i:i})}forPeer(e){const t=e.toString();return this.peerStats.get(t)??this.oldPeers.get(t)}getProtocols(){return Array.from(this.protocolStats.keys())}forProtocol(e){return this.protocolStats.get(e)}onPeerDisconnected(e){const t=e.toString(),r=this.peerStats.get(t);null!=r&&(r.stop(),this.peerStats.delete(t),this.oldPeers.set(t,r))}_onMessage(e){if(!this.running)return;const{remotePeer:t,protocol:r,direction:n,dataLength:i}=e,s=N0[n];let o=this.forPeer(t);if(null==o){const e=new x0(this.statsInit);this.peerStats.set(t.toString(),e),o=e}if(o.push(s,i),this.globalStats.push(s,i),null!=r){let e=this.forProtocol(r);if(null==e){const t=new x0(this.statsInit);this.protocolStats.set(r,t),e=t}e.push(s,i)}}updatePlaceholder(e,t){if(!this.running)return;const r=e.toString(),n=this.peerStats.get(r)??this.oldPeers.get(r),i=t.toString(),s=this.peerStats.get(i)??this.oldPeers.get(i);let o=n;null!=s&&(o=B0(s,o),this.oldPeers.remove(i)),this.peerStats.delete(e.toString()),this.peerStats.set(i,o),o.start()}trackStream(e){const{stream:t,remotePeer:r,protocol:n}=e;if(!this.running)return;const i=t.source;t.source=_0(i,(e=>this._onMessage({remotePeer:r,protocol:n,direction:"in",dataLength:e.byteLength})));const s=t.sink;t.sink=async e=>await W_(e,(e=>_0(e,(e=>{this._onMessage({remotePeer:r,protocol:n,direction:"out",dataLength:e.byteLength})}))),s)}}function B0(e,t){return e.stop(),t.stop(),e.queue=[...e.queue,...t.queue],e}async function L0(e){try{const t=await e;return{status:"fulfilled",value:t,isFulfilled:!0,isRejected:!1}}catch(t){return{status:"rejected",reason:t,isFulfilled:!1,isRejected:!0}}}function M0(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function U0(e,t,r){M0(e,t),t.set(e,r)}function F0(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function j0(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function V0(e,t,r){var n=j0(e,t,"set");return F0(e,n,r),r}function z0(e,t){return t.get?t.get.call(e):t.value}function $0(e,t){var r=j0(e,t,"get");return z0(e,r)}function q0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let K0;class H0{constructor(e){q0(this,"value",void 0),q0(this,"next",void 0),this.value=e}}var G0=new WeakMap,W0=new WeakMap,Q0=new WeakMap;K0=Symbol.iterator;class Y0{constructor(){U0(this,G0,{writable:!0,value:void 0}),U0(this,W0,{writable:!0,value:void 0}),U0(this,Q0,{writable:!0,value:void 0}),this.clear()}enqueue(e){var t;const r=new H0(e);$0(this,G0)?($0(this,W0).next=r,V0(this,W0,r)):(V0(this,G0,r),V0(this,W0,r)),V0(this,Q0,(t=$0(this,Q0),t++,t))}dequeue(){var e;const t=$0(this,G0);if(t)return V0(this,G0,$0(this,G0).next),V0(this,Q0,(e=$0(this,Q0),e--,e)),t.value}clear(){V0(this,G0,void 0),V0(this,W0,void 0),V0(this,Q0,0)}get size(){return $0(this,Q0)}*[K0](){let e=$0(this,G0);while(e)yield e.value,e=e.next}}function J0(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=new Y0;let r=0;const n=()=>{r--,t.size>0&&t.dequeue()()},i=async(e,t,i)=>{r++;const s=(async()=>e(...i))();t(s);try{await s}catch{}n()},s=(n,s,o)=>{t.enqueue(i.bind(void 0,n,s,o)),(async()=>{await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()})()},o=(e,...t)=>new Promise((r=>{s(e,r,t)}));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),o}async function X0(e,t={}){const{concurrency:r=Number.POSITIVE_INFINITY}=t,n=J0(r);return Promise.all(e.map((e=>e&&"function"===typeof e.then?L0(e):L0("function"===typeof e?n((()=>e())):Promise.resolve(e)))))}class Z0 extends Map{constructor(e){super();const{system:t,component:r,metric:n,metrics:i}=e;this.system=t??"libp2p",this.component=r,this.metric=n,this.metrics=i,this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){const t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}function e1(e){const{system:t,component:r,metric:n,metrics:i}=e;let s;return s=null!=i?new Z0({system:t,component:r,metric:n,metrics:i}):new Map,s}const t1=Mt("libp2p:transports");class r1 extends cq{constructor(e,t={}){super(),this.components=e,this.started=!1,this.transports=new Map,this.listeners=e1({component:"transport-manager",metric:"listeners",metrics:this.components.getMetrics()}),this.faultTolerance=t.faultTolerance??n1.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(null==t)throw Ut(new Error("Transport must have a valid tag"),jX.ERR_INVALID_KEY);if(this.transports.has(t))throw Ut(new Error("There is already a transport with this tag"),jX.ERR_DUPLICATE_TRANSPORT);t1("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}async start(){const e=this.components.getAddressManager().getListenAddrs();await this.listen(e),this.started=!0}async stop(){const e=[];for(const[t,r]of this.listeners){t1("closing listeners for %s",t);while(r.length>0){const t=r.pop();null!=t&&e.push(t.close())}}await Promise.all(e),t1("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){const r=this.transportForMultiaddr(e);if(null==r)throw Ut(new Error(`No transport available for address ${String(e)}`),jX.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(e,{...t,upgrader:this.components.getUpgrader()})}catch(nP){throw null==nP.code&&(nP.code=jX.ERR_TRANSPORT_DIAL_FAILED),nP}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const r of t)e=[...e,...r.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(e){for(const t of this.transports.values()){const r=t.filter([e]);if(r.length>0)return t}}async listen(e){if(null==e||0===e.length)return void t1("no addresses were provided for listening, this node is dial only");const t=[];for(const[r,n]of this.transports.entries()){const i=n.filter(e),s=[];for(const e of i){t1("creating listener for %s on %s",r,e);const t=n.createListener({upgrader:this.components.getUpgrader()});let i=this.listeners.get(r);null==i&&(i=[],this.listeners.set(r,i)),i.push(t),t.addEventListener("listening",(()=>{this.dispatchEvent(new lq("listener:listening",{detail:t}))})),t.addEventListener("close",(()=>{this.dispatchEvent(new lq("listener:close",{detail:t}))})),s.push(t.listen(e))}if(0===s.length){t.push(r);continue}const o=await X0(s),a=o.find((e=>e.isFulfilled));if(null==a&&this.faultTolerance!==n1.NO_FATAL)throw Ut(new Error(`Transport (${r}) could not listen on any available address`),jX.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){const e=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===n1.FATAL_ALL)throw Ut(new Error(e),jX.ERR_NO_VALID_ADDRESSES);t1(`libp2p in dial mode only: ${e}`)}}async remove(e){t1("removing %s",e);for(const t of this.listeners.get(e)??[])await t.close();this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}var n1;(function(e){e[e["FATAL_ALL"]=0]="FATAL_ALL",e[e["NO_FATAL"]=1]="NO_FATAL"})(n1||(n1={}));const i1="/multistream/1.0.0";function s1(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var o1=s1,a1=o1,c1=a1;new Uint8Array(0);const u1=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},l1=e=>(new TextEncoder).encode(e),h1=e=>(new TextDecoder).decode(e);class d1{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class f1{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return y1(this,e)}}class p1{constructor(e){this.decoders=e}or(e){return y1(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const y1=(e,t)=>new p1({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class g1{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new d1(e,t,r),this.decoder=new f1(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const m1=({name:e,prefix:t,encode:r,decode:n})=>new g1(e,t,r,n),w1=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=c1(r,t);return m1({prefix:e,name:t,encode:n,decode:e=>u1(i(e))})},v1=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},b1=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},E1=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>m1({prefix:t,name:e,encode(e){return b1(e,n,r)},decode(t){return v1(t,n,r,e)}}),_1=m1({prefix:"\0",name:"identity",encode:e=>h1(e),decode:e=>l1(e)}),A1=E1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),S1=E1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),k1=w1({prefix:"9",name:"base10",alphabet:"0123456789"}),I1=E1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),T1=E1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),C1=E1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R1=E1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),P1=E1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x1=E1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),O1=E1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),N1=E1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),D1=E1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),B1=E1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L1=E1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),M1=w1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),U1=w1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),F1=w1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),j1=w1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V1=E1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),z1=E1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$1=E1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),q1=E1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),K1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),H1=K1.reduce(((e,t,r)=>(e[r]=t,e)),[]),G1=K1.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function W1(e){return e.reduce(((e,t)=>(e+=H1[t],e)),"")}function Q1(e){const t=[];for(const r of e){const e=G1[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const Y1=m1({prefix:"🚀",name:"base256emoji",encode:W1,decode:Q1});var J1=r2,X1=128,Z1=127,e2=~Z1,t2=Math.pow(2,31);function r2(e,t,r){t=t||[],r=r||0;var n=r;while(e>=t2)t[r++]=255&e|X1,e/=128;while(e&e2)t[r++]=255&e|X1,e>>>=7;return t[r]=0|e,r2.bytes=r-n+1,t}var n2=o2,i2=128,s2=127;function o2(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw o2.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&s2)<<i:(r&s2)*Math.pow(2,i),i+=7}while(r>=i2);return o2.bytes=s-t,n}var a2=Math.pow(2,7),c2=Math.pow(2,14),u2=Math.pow(2,21),l2=Math.pow(2,28),h2=Math.pow(2,35),d2=Math.pow(2,42),f2=Math.pow(2,49),p2=Math.pow(2,56),y2=Math.pow(2,63),g2=function(e){return e<a2?1:e<c2?2:e<u2?3:e<l2?4:e<h2?5:e<d2?6:e<f2?7:e<p2?8:e<y2?9:10},m2={encode:J1,decode:n2,encodingLength:g2},w2=m2,v2=w2;const b2=(e,t,r=0)=>(v2.encode(e,t,r),t),E2=e=>v2.encodingLength(e),_2=(e,t)=>{const r=t.byteLength,n=E2(e),i=n+E2(r),s=new Uint8Array(i+r);return b2(e,s,0),b2(r,s,n),s.set(t,i),new A2(e,r,t,s)};class A2{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const S2=({name:e,code:t,encode:r})=>new k2(e,t,r);class k2{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?_2(this.code,t):t.then((e=>_2(this.code,e)))}throw Error("Unknown type, must be binary type")}}const I2=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),T2=S2({name:"sha2-256",code:18,encode:I2("SHA-256")}),C2=S2({name:"sha2-512",code:19,encode:I2("SHA-512")}),R2=0,P2="identity",x2=u1,O2=e=>_2(R2,x2(e)),N2={code:R2,name:P2,encode:x2,digest:O2},D2="raw",B2=85,L2=e=>u1(e),M2=e=>u1(e),U2=new TextEncoder,F2=new TextDecoder,j2="json",V2=512,z2=e=>U2.encode(JSON.stringify(e)),$2=e=>JSON.parse(F2.decode(e));new WeakMap;class q2{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==node_modules_multiformats_src_cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return q2.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return q2.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return q2.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Digest.equals(e.multihash,r.multihash)}toString(e){return node_modules_multiformats_src_cid_format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof q2)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new q2(e,r,n,i||node_modules_multiformats_src_cid_encodeCID(e,r,n.bytes))}if(null!=t&&!0===t[node_modules_multiformats_src_cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=Digest.decode(r);return q2.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${node_modules_multiformats_src_cid_DAG_PB_CODE}) block encoding`);return new q2(e,t,r,r.bytes);case 1:{const n=node_modules_multiformats_src_cid_encodeCID(e,t,r.bytes);return new q2(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return q2.create(0,node_modules_multiformats_src_cid_DAG_PB_CODE,e)}static createV1(e,t){return q2.create(1,e,t)}static decode(e){const[t,r]=q2.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=q2.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?q2.createV0(s):q2.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint.decode(e.subarray(t));return n,r};let n=r(),i=node_modules_multiformats_src_cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=node_modules_multiformats_src_cid_parseCIDtoBytes(e,t),i=q2.decode(n);return node_modules_multiformats_src_cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const K2={...Ie,...Te,...Ce,...Re,...Pe,...xe,...Oe,...Ne,...De,...Be};function H2(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function G2(e=0){return null!=globalThis.Buffer?.allocUnsafe?H2(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function W2(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Q2=W2("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),Y2=W2("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=G2(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),J2={utf8:Q2,"utf-8":Q2,hex:K2.base16,latin1:Y2,ascii:Y2,binary:Y2,...K2};var X2=J2;function Z2(e,t="utf8"){const r=X2[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):H2(globalThis.Buffer.from(e,"utf-8"))}function e3(e,t="utf8"){const r=X2[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const t3=Z2("\n");function r3(e){const t=new iT(e,t3);return nH.single(t)}function n3(e,t,r={}){const n=r3(t);!0===r.writeBytes?e.push(n.subarray()):e.push(n)}function i3(e,t,r={}){const n=new iT;for(const i of t)n.append(r3(i));!0===r.writeBytes?e.push(n.subarray()):e.push(n)}async function s3(e,t){let r=1;const n={[Symbol.asyncIterator]:()=>n,next:async()=>await e.next(r)};let i=n;null!=t?.signal&&(i=XK(n,t.signal));const s=e=>{r=e},o=await W_(i,cH({onLength:s}),(async e=>await KD(e)));if(null==o)throw Ut(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(o.get(o.byteLength-1)!==t3[0])throw Ut(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return o.sublist(0,-1)}async function o3(e,t){const r=await s3(e,t);return e3(r.subarray())}const a3=Mt("libp2p:mss:select");async function c3(e,t,r={}){t=Array.isArray(t)?[...t]:[t];const{reader:n,writer:i,rest:s,stream:o}=RZ(e),a=t.shift();if(null==a)throw new Error("At least one protocol must be specified");a3('select: write ["%s", "%s"]',i1,a);const c=Z2(i1),u=Z2(a);i3(i,[c,u],r);let l=await o3(n,r);if(a3('select: read "%s"',l),l===i1&&(l=await o3(n,r),a3('select: read "%s"',l)),l===a)return s(),{stream:o,protocol:a};for(const h of t){a3('select: write "%s"',h),n3(i,Z2(h),r);const e=await o3(n,r);if(a3('select: read "%s" for "%s"',e,h),e===h)return s(),{stream:o,protocol:h}}throw s(),Ut(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}const u3=Mt("libp2p:mss:handle");async function l3(e,t,r){t=Array.isArray(t)?t:[t];const{writer:n,reader:i,rest:s,stream:o}=RZ(e);while(1){const e=await o3(i,r);if(u3('read "%s"',e),e!==i1){if(t.includes(e))return n3(n,Z2(e),r),u3('respond with "%s" for "%s"',e,e),s(),{stream:o,protocol:e};"ls"!==e?(n3(n,Z2("na"),r),u3('respond with "na" for "%s"',e)):(n3(n,new iT(...t.map((e=>r3(Z2(e))))),r),u3('respond with "%s" for %s',t,e))}else u3('respond with "%s" for "%s"',i1,e),n3(n,Z2(i1),r)}}var h3=r(8295);const d3=Symbol.for("@libp2p/connection");const f3=Mt("libp2p:connection");class p3{constructor(e){const{remoteAddr:t,remotePeer:r,newStream:n,close:i,getStreams:s,stat:o}=e;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=r,this.stat={...o,status:sZ},this._newStream=n,this._close=i,this._getStreams=s,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[d3](){return!0}get streams(){return this._getStreams()}async newStream(e,t){if(this.stat.status===oZ)throw Ut(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===aZ)throw Ut(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);const r=await this._newStream(e,t);return r.stat.direction="outbound",r}addStream(e){e.stat.direction="inbound"}removeStream(e){}async close(){if(this.stat.status!==aZ&&!this._closing){this.stat.status=oZ;try{this.streams.forEach((e=>e.close()))}catch(nP){f3.error(nP)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=aZ}}}function y3(e){return new p3(e)}const g3=Mt("libp2p:registrar"),m3=32,w3=64;class v3{constructor(e){this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onDisconnect),this.components.getPeerStore().addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){return Array.from(new Set([...this.topologies.keys(),...this.handlers.keys()])).sort()}getHandler(e){const t=this.handlers.get(e);if(null==t)throw Ut(new Error(`No handler registered for protocol ${e}`),jX.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){const t=this.topologies.get(e);return null==t?[]:[...t.values()]}async handle(e,t,r){if(this.handlers.has(e))throw Ut(new Error(`Handler already registered for protocol ${e}`),jX.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const n=gt.bind({ignoreUndefined:!0})({maxInboundStreams:m3,maxOutboundStreams:w3},r);this.handlers.set(e,{handler:t,options:n}),await this.components.getPeerStore().protoBook.add(this.components.getPeerId(),[e])}async unhandle(e){const t=Array.isArray(e)?e:[e];t.forEach((e=>{this.handlers.delete(e)})),await this.components.getPeerStore().protoBook.remove(this.components.getPeerId(),t)}async register(e,t){if(!rq(t))throw g3.error("topology must be an instance of interfaces/topology"),Ut(new Error("topology must be an instance of interfaces/topology"),jX.ERR_INVALID_PARAMETERS);const r=`${(1e9*Math.random()).toString(36)}${Date.now()}`;let n=this.topologies.get(e);return null==n&&(n=new Map,this.topologies.set(e,n)),n.set(r,t),await t.setRegistrar(this),r}unregister(e){for(const[t,r]of this.topologies.entries())r.has(e)&&(r.delete(e),0===r.size&&this.topologies.delete(t))}_onDisconnect(e){const t=e.detail;this.components.getPeerStore().protoBook.get(t.remotePeer).then((e=>{for(const r of e){const e=this.topologies.get(r);if(null!=e)for(const r of e.values())r.onDisconnect(t.remotePeer)}})).catch((e=>{g3.error(e)}))}_onProtocolChange(e){const{peerId:t,protocols:r,oldProtocols:n}=e.detail,i=n.filter((e=>!r.includes(e))),s=r.filter((e=>!n.includes(e)));for(const o of i){const e=this.topologies.get(o);if(null!=e)for(const r of e.values())r.onDisconnect(t)}for(const o of s){const e=this.topologies.get(o);if(null!=e)for(const r of e.values()){const e=this.components.getConnectionManager().getConnections(t)[0];null!=e&&r.onConnect(t,e)}}}}const b3=Mt("libp2p:upgrader");function E3(e,t){try{const{options:r}=t.getHandler(e);return r.maxInboundStreams}catch(nP){if(nP.code!==jX.ERR_NO_HANDLER_FOR_PROTOCOL)throw nP}return m3}function _3(e,t){try{const{options:r}=t.getHandler(e);return r.maxOutboundStreams}catch(nP){if(nP.code!==jX.ERR_NO_HANDLER_FOR_PROTOCOL)throw nP}return w3}function A3(e,t,r){let n=0;return r.streams.forEach((r=>{r.stat.direction===t&&r.stat.protocol===e&&n++})),n}class S3 extends cq{constructor(e,t){super(),this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach((e=>{this.connectionEncryption.set(e.protocol,e)})),this.muxers=new Map,t.muxers.forEach((e=>{this.muxers.set(e.protocol,e)})),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout}async upgradeInbound(e){let t,r,n,i,s,o,a;const c=this.components.getMetrics(),u=new sa.TimeoutController(this.inboundUpgradeTimeout);try{(0,KX.setMaxListeners)?.(1/0,u.signal)}catch{}try{const l=eH(e,u.signal);if(e.source=l.source,e.sink=l.sink,await this.components.getConnectionGater().denyInboundConnection(e))throw Ut(new Error("The multiaddr connection is blocked by gater.acceptConnection"),jX.ERR_CONNECTION_INTERCEPTED);if(null!=c){({setTarget:o,proxy:a}=h3());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;o({toString:()=>t}),c.trackStream({stream:e,remotePeer:a})}b3("starting the inbound connection upgrade");let h=e;const d=this.components.getConnectionProtector();null!=d&&(b3("protecting the inbound connection"),h=await d.protect(e));try{if(({conn:t,remotePeer:r,protocol:s}=await this._encryptInbound(h)),await this.components.getConnectionGater().denyInboundEncryptedConnection(r,{...h,...t}))throw Ut(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),jX.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const e=await this._multiplexInbound({...h,...t},this.muxers);i=e.muxerFactory,n=e.stream}else n=t}catch(nP){throw b3.error("Failed to upgrade inbound connection",nP),await e.close(nP),nP}if(await this.components.getConnectionGater().denyInboundUpgradedConnection(r,{...h,...t}))throw Ut(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),jX.ERR_CONNECTION_INTERCEPTED);return null!=c&&(c.updatePlaceholder(a,r),o(r)),b3("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:e,upgradedConn:n,muxerFactory:i,remotePeer:r})}finally{u.clear()}}async upgradeOutbound(e){const t=e.remoteAddr.getPeerId();if(null==t)throw Ut(new Error("outbound connection must have a peer id"),jX.ERR_INVALID_MULTIADDR);const r=wm(t);if(await this.components.getConnectionGater().denyOutboundConnection(r,e))throw Ut(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),jX.ERR_CONNECTION_INTERCEPTED);let n,i,s,o,a,c,u;const l=this.components.getMetrics();if(null!=l){({setTarget:c,proxy:u}=h3());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;c({toB58String:()=>t}),l.trackStream({stream:e,remotePeer:u})}b3("Starting the outbound connection upgrade");let h=e;const d=this.components.getConnectionProtector();null!=d&&(h=await d.protect(e));try{if(({conn:n,remotePeer:i,protocol:o}=await this._encryptOutbound(h,r)),await this.components.getConnectionGater().denyOutboundEncryptedConnection(i,{...h,...n}))throw Ut(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),jX.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const e=await this._multiplexOutbound({...h,...n},this.muxers);a=e.muxerFactory,s=e.stream}else s=n}catch(nP){throw b3.error("Failed to upgrade outbound connection",nP),await e.close(nP),nP}if(await this.components.getConnectionGater().denyOutboundUpgradedConnection(i,{...h,...n}))throw Ut(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),jX.ERR_CONNECTION_INTERCEPTED);return null!=l&&(l.updatePlaceholder(u,i),c(i)),b3("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:o,direction:"outbound",maConn:e,upgradedConn:s,muxerFactory:a,remotePeer:i})}_createConnection(e){const{cryptoProtocol:t,direction:r,maConn:n,upgradedConn:i,remotePeer:s,muxerFactory:o}=e;let a,c,u;null!=o&&(a=o.createStreamMuxer({direction:r,onIncomingStream:e=>{null!=u&&Promise.resolve().then((async()=>{const t=this.components.getRegistrar().getProtocols(),{stream:n,protocol:i}=await l3(e,t);b3("%s: incoming stream opened on %s",r,i);const o=this.components.getMetrics();if(null!=o&&o.trackStream({stream:n,remotePeer:s,protocol:i}),null==u)return;const a=E3(i,this.components.getRegistrar()),c=A3(i,"inbound",u);c!==a?(e.source=n.source,e.sink=n.sink,e.stat.protocol=i,this.components.getPeerStore().protoBook.add(s,[i]).catch((e=>b3.error(e))),u.addStream(e),this._onStream({connection:u,stream:e,protocol:i})):e.abort(Ut(new Error(`Too many inbound protocol streams for protocol "${i}" - limit ${a}`),jX.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS))})).catch((t=>{b3.error(t),null==e.stat.timeline.close&&e.close()}))},onStreamEnd:e=>{u?.removeStream(e.id)}}),SK(a)&&a.init(this.components),c=async(e,t={})=>{if(null==a)throw Ut(new Error("Stream is not multiplexed"),jX.ERR_MUXER_UNAVAILABLE);b3("%s: starting new stream on %s",r,e);const n=a.newStream(),i=this.components.getMetrics();let o;try{if(null==t.signal){b3("No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",e),o=new sa.TimeoutController(3e4),t.signal=o.signal;try{(0,KX.setMaxListeners)?.(1/0,o.signal)}catch{}}const{stream:r,protocol:a}=await c3(n,e,t);null!=i&&i.trackStream({stream:r,remotePeer:s,protocol:a});const c=_3(a,this.components.getRegistrar()),l=A3(a,"outbound",u);if(l===c){const e=Ut(new Error(`Too many outbound protocol streams for protocol "${a}" - limit ${c}`),jX.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw n.abort(e),e}return this.components.getPeerStore().protoBook.add(s,[a]).catch((e=>b3.error(e))),n.source=r.source,n.sink=r.sink,n.stat.protocol=a,n}catch(nP){if(b3.error("could not create new stream",nP),null==n.stat.timeline.close&&n.close(),null!=nP.code)throw nP;throw Ut(nP,jX.ERR_UNSUPPORTED_PROTOCOL)}finally{null!=o&&o.clear()}},W_(i,a,i).catch(b3.error));const l=n.timeline;n.timeline=new Proxy(l,{set:(...e)=>(null!=u&&"close"===e[1]&&null!=e[2]&&null==l.close&&(async()=>{try{"OPEN"===u.stat.status&&await u.close()}catch(nP){b3.error(nP)}finally{this.dispatchEvent(new lq("connectionEnd",{detail:u}))}})().catch((e=>{b3.error(e)})),Reflect.set(...e))}),n.timeline.upgraded=Date.now();const h=()=>{throw Ut(new Error("connection is not multiplexed"),jX.ERR_CONNECTION_NOT_MULTIPLEXED)};return u=y3({remoteAddr:n.remoteAddr,remotePeer:s,stat:{status:"OPEN",direction:r,timeline:n.timeline,multiplexer:a?.protocol,encryption:t},newStream:c??h,getStreams:()=>null!=a?a.streams:h(),close:async()=>{await n.close(),null!=a&&a.close()}}),this.dispatchEvent(new lq("connection",{detail:u})),u}_onStream(e){const{connection:t,stream:r,protocol:n}=e,{handler:i}=this.components.getRegistrar().getHandler(n);i({connection:t,stream:r})}async _encryptInbound(e){const t=Array.from(this.connectionEncryption.keys());b3("handling inbound crypto protocol selection",t);try{const{stream:r,protocol:n}=await l3(e,t,{writeBytes:!0}),i=this.connectionEncryption.get(n);if(null==i)throw new Error(`no crypto module found for ${n}`);return b3("encrypting inbound connection..."),{...await i.secureInbound(this.components.getPeerId(),r),protocol:n}}catch(nP){throw Ut(nP,jX.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const r=Array.from(this.connectionEncryption.keys());b3("selecting outbound crypto protocol",r);try{const{stream:n,protocol:i}=await c3(e,r,{writeBytes:!0}),s=this.connectionEncryption.get(i);if(null==s)throw new Error(`no crypto module found for ${i}`);return b3("encrypting outbound connection to %p",t),{...await s.secureOutbound(this.components.getPeerId(),n,t),protocol:i}}catch(nP){throw Ut(nP,jX.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const r=Array.from(t.keys());b3("outbound selecting muxer %s",r);try{const{stream:n,protocol:i}=await c3(e,r,{writeBytes:!0});b3("%s selected as muxer protocol",i);const s=t.get(i);return{stream:n,muxerFactory:s}}catch(nP){throw b3.error("error multiplexing outbound stream",nP),Ut(nP,jX.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const r=Array.from(t.keys());b3("inbound handling muxers %s",r);try{const{stream:n,protocol:i}=await l3(e,r,{writeBytes:!0}),s=t.get(i);return{stream:n,muxerFactory:s}}catch(nP){throw b3.error("error multiplexing inbound stream",nP),Ut(nP,jX.ERR_MUXER_UNAVAILABLE)}}}var k3;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null==e.listenAddrs)throw new Error('Protocol error: required field "listenAddrs" was not found in object');for(const n of e.listenAddrs)t.uint32(18),t.bytes(n);if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null==e.protocols)throw new Error('Protocol error: required field "protocols" was not found in object');for(const n of e.protocols)t.uint32(26),t.string(n);null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 5:r.protocolVersion=e.string();break;case 6:r.agentVersion=e.string();break;case 1:r.publicKey=e.bytes();break;case 2:r.listenAddrs=r.listenAddrs??[],r.listenAddrs.push(e.bytes());break;case 4:r.observedAddr=e.bytes();break;case 3:r.protocols=r.protocols??[],r.protocols.push(e.string());break;case 8:r.signedPeerRecord=e.bytes();break;default:e.skipType(7&t);break}}if(r.listenAddrs=r.listenAddrs??[],r.protocols=r.protocols??[],null==r.listenAddrs)throw new Error('Protocol error: value for required field "listenAddrs" was not found in protobuf');if(null==r.protocols)throw new Error('Protocol error: value for required field "protocols" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(k3||(k3={}));const I3="0.0.0",T3="libp2p",C3=`js-libp2p/${I3}`,R3="0.1.0",P3="id",x3="id/push",O3="1.0.0",N3="1.0.0",D3=Mt("libp2p:identify"),B3=8192;class L3{constructor(e,t){this.components=e,this.started=!1,this.init=t,this.identifyProtocolStr=`/${t.protocolPrefix}/${P3}/${O3}`,this.identifyPushProtocolStr=`/${t.protocolPrefix}/${x3}/${N3}`,this.host={protocolVersion:`${t.protocolPrefix}/${R3}`,...t.host},this.components.getConnectionManager().addEventListener("peer:connect",(e=>{const t=e.detail;this.identify(t).catch(D3.error)})),this.components.getPeerStore().addEventListener("change:multiaddrs",(e=>{const{peerId:t}=e.detail;this.components.getPeerId().equals(t)&&this.pushToPeerStore().catch((e=>D3.error(e)))})),this.components.getPeerStore().addEventListener("change:protocols",(e=>{const{peerId:t}=e.detail;this.components.getPeerId().equals(t)&&this.pushToPeerStore().catch((e=>D3.error(e)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",ia(this.host.agentVersion)),await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",ia(this.host.protocolVersion)),await this.components.getRegistrar().handle(this.identifyProtocolStr,(e=>{this._handleIdentify(e).catch((e=>{D3.error(e)}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),await this.components.getRegistrar().handle(this.identifyPushProtocolStr,(e=>{this._handlePush(e).catch((e=>{D3.error(e)}))}),{maxInboundStreams:this.init.maxPushIncomingStreams,maxOutboundStreams:this.init.maxPushOutgoingStreams}),this.started=!0)}async stop(){await this.components.getRegistrar().unhandle(this.identifyProtocolStr),await this.components.getRegistrar().unhandle(this.identifyPushProtocolStr),this.started=!1}async push(e){const t=await this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId()),r=this.components.getAddressManager().getAddresses().map((e=>e.bytes)),n=await this.components.getPeerStore().protoBook.get(this.components.getPeerId()),i=e.map((async e=>{let i;const s=new sa.TimeoutController(this.init.timeout);try{(0,KX.setMaxListeners)?.(1/0,s.signal)}catch{}try{i=await e.newStream([this.identifyPushProtocolStr],{signal:s.signal});const o=eH(i,s.signal);await W_([k3.encode({listenAddrs:r,signedPeerRecord:t,protocols:n})],nH(),o,I_)}catch(nP){D3.error("could not push identify update to peer",nP)}finally{null!=i&&i.close(),s.clear()}}));await Promise.all(i)}async pushToPeerStore(){if(!this.isStarted())return;const e=[];for(const t of this.components.getConnectionManager().getConnections()){const r=t.remotePeer,n=await this.components.getPeerStore().get(r);n.protocols.includes(this.identifyPushProtocolStr)&&e.push(t)}await this.push(e)}async _identify(e,t={}){let r,n,i=t.signal;if(null==i){r=new sa.TimeoutController(this.init.timeout),i=r.signal;try{(0,KX.setMaxListeners)?.(1/0,r.signal)}catch{}}try{n=await e.newStream([this.identifyProtocolStr],{signal:i});const t=eH(n,i),s=await W_([],t,cH({maxDataLength:this.init.maxIdentifyMessageSize??B3}),(async e=>await KD(e)));if(null==s)throw Ut(new Error("No data could be retrieved"),jX.ERR_CONNECTION_ENDED);try{return k3.decode(s)}catch(nP){throw Ut(nP,jX.ERR_INVALID_MESSAGE)}}finally{null!=r&&r.clear(),null!=n&&n.close()}}async identify(e,t={}){const r=await this._identify(e,t),{publicKey:n,listenAddrs:i,protocols:s,observedAddr:o,signedPeerRecord:a,agentVersion:c,protocolVersion:u}=r;if(null==n)throw Ut(new Error("public key was missing from identify message"),jX.ERR_MISSING_PUBLIC_KEY);const l=await Em(n);if(!e.remotePeer.equals(l))throw Ut(new Error("identified peer does not match the expected peer"),jX.ERR_INVALID_PEER);if(this.components.getPeerId().equals(l))throw Ut(new Error("identified peer is our own peer id?"),jX.ERR_INVALID_PEER);const h=L3.getCleanMultiaddr(o);if(null!=a){D3("received signed peer record from %p",l);try{const e=await W$.openAndCertify(a,eq.DOMAIN);if(!e.peerId.equals(l))throw Ut(new Error("identified peer does not match the expected peer"),jX.ERR_INVALID_PEER);if(await this.components.getPeerStore().addressBook.consumePeerRecord(e))return await this.components.getPeerStore().protoBook.set(l,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(l,"AgentVersion",ia(c)),null!=u&&await this.components.getPeerStore().metadataBook.setValue(l,"ProtocolVersion",ia(u)),void D3("identify completed for peer %p and protocols %o",l,s)}catch(nP){D3("received invalid envelope, discard it and fallback to listenAddrs is available",nP)}}else D3("no signed peer record received from %p",l);D3("falling back to legacy addresses from %p",l);try{await this.components.getPeerStore().addressBook.set(l,i.map((e=>Kl(e))))}catch(nP){D3.error("received invalid addrs",nP)}await this.components.getPeerStore().protoBook.set(l,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(l,"AgentVersion",ia(c)),null!=u&&await this.components.getPeerStore().metadataBook.setValue(l,"ProtocolVersion",ia(u)),D3("identify completed for peer %p and protocols %o",l,s),D3("received observed address of %s",h?.toString())}async _handleIdentify(e){const{connection:t,stream:r}=e,n=new sa.TimeoutController(this.init.timeout);try{(0,KX.setMaxListeners)?.(1/0,n.signal)}catch{}try{const e=this.components.getPeerId().publicKey??new Uint8Array(0),i=await this.components.getPeerStore().get(this.components.getPeerId()),s=this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(Gu("p2p").code)));let o=i.peerRecordEnvelope;if(s.length>0&&null==o){const e=new eq({peerId:this.components.getPeerId(),multiaddrs:s}),t=await W$.seal(e,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(t),o=t.marshal().subarray()}const a=k3.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:s.map((e=>e.bytes)),signedPeerRecord:o,observedAddr:t.remoteAddr.bytes,protocols:i.protocols}),c=eH(r,n.signal);await W_([a],nH(),c,I_)}catch(nP){D3.error("could not respond to identify request",nP)}finally{r.close(),n.clear()}}async _handlePush(e){const{connection:t,stream:r}=e,n=new sa.TimeoutController(this.init.timeout);try{(0,KX.setMaxListeners)?.(1/0,n.signal)}catch{}let i;try{const e=eH(r,n.signal),t=await W_([],e,cH({maxDataLength:this.init.maxIdentifyMessageSize??B3}),(async e=>await KD(e)));null!=t&&(i=k3.decode(t))}catch(nP){return D3.error("received invalid message",nP)}finally{r.close(),n.clear()}if(null==i)return D3.error("received invalid message");const s=t.remotePeer;if(this.components.getPeerId().equals(s))D3("received push from ourselves?");else{if(D3("received push from %p",s),null!=i.signedPeerRecord){D3("received signedPeerRecord in push");try{const e=await W$.openAndCertify(i.signedPeerRecord,eq.DOMAIN);if(await this.components.getPeerStore().addressBook.consumePeerRecord(e))return D3("consumed signedPeerRecord sent in push"),void await this.components.getPeerStore().protoBook.set(s,i.protocols);D3("failed to consume signedPeerRecord sent in push")}catch(nP){D3("received invalid envelope, discard it and fallback to listenAddrs is available",nP)}}else D3("did not receive signedPeerRecord in push");try{await this.components.getPeerStore().addressBook.set(s,i.listenAddrs.map((e=>Kl(e))))}catch(nP){D3.error("received invalid addrs",nP)}try{await this.components.getPeerStore().protoBook.set(s,i.protocols)}catch(nP){D3.error("received invalid protocols",nP)}D3("handled push from %p",s)}}static getCleanMultiaddr(e){if(null!=e&&e.length>0)try{return Kl(e)}catch{}}}var M3,U3;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.identifier)throw new Error('Protocol error: required field "identifier" was not found in object');t.uint32(10),t.string(e.identifier),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.identifier=e.string();break;default:e.skipType(7&t);break}}if(null==r.identifier)throw new Error('Protocol error: value for required field "identifier" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(M3||(M3={})),function(e){let t,r,n;(function(e){e["OK"]="OK",e["NOT_FOUND"]="NOT_FOUND",e["ERROR"]="ERROR"})(t=e.StatusCode||(e.StatusCode={})),function(e){e[e["OK"]=0]="OK",e[e["NOT_FOUND"]=1]="NOT_FOUND",e[e["ERROR"]=2]="ERROR"}(r||(r={})),function(e){e.codec=()=>ew(r)}(t=e.StatusCode||(e.StatusCode={})),e.codec=()=>(null==n&&(n=tw(((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null==t.status)throw new Error('Protocol error: required field "status" was not found in object');if(r.uint32(8),e.StatusCode.codec().encode(t.status,r),null==t.data)throw new Error('Protocol error: required field "data" was not found in object');r.uint32(18),r.bytes(t.data),!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.status=e.StatusCode.codec().decode(t);break;case 2:n.data=t.bytes();break;default:t.skipType(7&r);break}}if(null==n.status)throw new Error('Protocol error: value for required field "status" was not found in protobuf');if(null==n.data)throw new Error('Protocol error: value for required field "data" was not found in protobuf');return n}))),n),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(U3||(U3={}));const F3="0.0.1",j3="fetch",V3=Mt("libp2p:fetch");class z3{constructor(e,t){this.started=!1,this.components=e,this.protocol=`/${t.protocolPrefix??"libp2p"}/${j3}/${F3}`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this),this.init=t}async start(){await this.components.getRegistrar().handle(this.protocol,(e=>{this.handleMessage(e).catch((e=>{V3.error(e)})).finally((()=>{e.stream.close()}))}),{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(e,t,r={}){V3("dialing %s to %p",this.protocol,e);const n=await this.components.getConnectionManager().openConnection(e,r);let i,s,o=r.signal;if(null==o){i=new sa.TimeoutController(this.init.timeout),o=i.signal;try{(0,KX.setMaxListeners)?.(1/0,i.signal)}catch{}}try{s=await n.newStream([this.protocol],{signal:o});const e=eH(s,o),r=await W_([M3.encode({identifier:t})],nH(),e,cH(),(async function(e){const t=await KD(e);if(null==t)throw Ut(new Error("No data received"),jX.ERR_INVALID_MESSAGE);const r=U3.decode(t);switch(r.status){case U3.StatusCode.OK:return r.data;case U3.StatusCode.NOT_FOUND:return null;case U3.StatusCode.ERROR:{const e=(new TextDecoder).decode(r.data);throw Ut(new Error("Error in fetch protocol response: "+e),jX.ERR_INVALID_PARAMETERS)}default:throw Ut(new Error("Unknown response status"),jX.ERR_INVALID_MESSAGE)}}));return r??null}finally{null!=i&&i.clear(),null!=s&&s.close()}}async handleMessage(e){const{stream:t}=e,r=this;await W_(t,cH(),(async function*(e){const t=await KD(e);if(null==t)throw Ut(new Error("No data received"),jX.ERR_INVALID_MESSAGE);const n=M3.decode(t);let i;const s=r._getLookupFunction(n.identifier);if(null!=s){const e=await s(n.identifier);i=null!=e?{status:U3.StatusCode.OK,data:e}:{status:U3.StatusCode.NOT_FOUND,data:new Uint8Array(0)}}else{const e=(new TextEncoder).encode("No lookup function registered for key: "+n.identifier);i={status:U3.StatusCode.ERROR,data:e}}yield U3.encode(i)}),nH(),t)}_getLookupFunction(e){for(const t of this.lookupFunctions.keys())if(e.startsWith(t))return this.lookupFunctions.get(t)}registerLookupFunction(e,t){if(this.lookupFunctions.has(e))throw Ut(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),jX.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}unregisterLookupFunction(e,t){if(null!=t){const r=this.lookupFunctions.get(e);if(r!==t)return}this.lookupFunctions.delete(e)}}const $3=32,q3="1.0.0",K3="ping",H3=Mt("libp2p:ping");class G3{constructor(e,t){this.components=e,this.started=!1,this.protocol=`/${t.protocolPrefix}/${K3}/${q3}`,this.init=t}async start(){await this.components.getRegistrar().handle(this.protocol,this.handleMessage,{maxInboundStreams:this.init.maxInboundStreams,maxOutboundStreams:this.init.maxOutboundStreams}),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){const{stream:t}=e;W_(t,t).catch((e=>{H3.error(e)}))}async ping(e,t={}){H3("dialing %s to %p",this.protocol,e);const r=Date.now(),n=vv($3),i=await this.components.getConnectionManager().openConnection(e,t);let s,o,a=t.signal;if(null==a){s=new sa.TimeoutController(this.init.timeout),a=s.signal;try{(0,KX.setMaxListeners)?.(1/0,s.signal)}catch{}}try{o=await i.newStream([this.protocol],{signal:a});const e=eH(o,a),t=await W_([n],e,(async e=>await KD(e))),c=Date.now();if(null==t||!Fm(n,t.subarray()))throw Ut(new Error("Received wrong ping ack"),jX.ERR_WRONG_PING_ACK);return c-r}finally{null!=s&&s.clear(),null!=o&&o.close()}}}async function W3(){throw new Error("Not supported in browsers")}var Q3=r(4024);const Y3="object"===typeof window&&"object"===typeof document&&9===document.nodeType,J3=Q3(),X3=Y3&&!J3,Z3=J3&&!Y3,e6=J3&&Y3,t6="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!J3,r6="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,n6=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"],"undefined"!==typeof navigator&&"ReactNative"===navigator.product);function i6(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^::1$/.test(e)}function s6(e){const{address:t}=e.nodeAddress();return i6(t)}const o6=Mt("libp2p:nat"),a6=7200;function c6(e=1024,t=65535){return Math.floor(Math.random()*(t-e+1)+e)}class u6{constructor(e,t){if(this.components=e,this.started=!1,this.enabled=t.enabled,this.externalAddress=t.externalAddress,this.localAddress=t.localAddress,this.description=t.description??`${T3}@${I3} ${this.components.getPeerId().toString()}`,this.ttl=t.ttl??a6,this.keepAlive=t.keepAlive??!0,this.gateway=t.gateway,this.ttl<a6)throw Ut(new Error(`NatManager ttl should be at least ${a6} seconds`),jX.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){X3||!this.enabled||this.started||(this.started=!0,this._start().catch((e=>{o6.error(e)})))}async _start(){const e=this.components.getTransportManager().getAddrs();for(const t of e){const{family:e,host:r,port:n,transport:i}=t.toOptions();if(!t.isThinWaistAddress()||"tcp"!==i)continue;if(s6(t))continue;if(4!==e)continue;const s=await this._getClient(),o=this.externalAddress??await s.externalIp();if(YZ(o))throw new Error(`${o} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const a=c6();o6(`opening uPnP connection from ${o}:${a} to ${r}:${n}`),await s.map({publicPort:a,localPort:n,localAddress:this.localAddress,protocol:"TCP"===i.toUpperCase()?"TCP":"UDP"}),this.components.getAddressManager().addObservedAddr(Vl({family:4,address:o,port:a},i))}}async _getClient(){return null!=this.client||(this.client=await W3({description:this.description,ttl:this.ttl,keepAlive:this.keepAlive,gateway:this.gateway})),this.client}async stop(){if(!X3&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(nP){o6.error(nP)}}}const l6=Mt("libp2p:peer-record-updater");class h6{constructor(e){this.components=e,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.getTransportManager().addEventListener("listener:listening",this.update),this.components.getTransportManager().addEventListener("listener:close",this.update),this.components.getAddressManager().addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.getTransportManager().removeEventListener("listener:listening",this.update),this.components.getTransportManager().removeEventListener("listener:close",this.update),this.components.getAddressManager().removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const e=new eq({peerId:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(Gu("p2p").code)))}),t=await W$.seal(e,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(t)})).catch((e=>{l6.error("Could not update self peer record: %o",e)}))}}class d6{constructor(e){this.dht=e}async findPeer(e,t={}){for await(const r of this.dht.findPeer(e,t))if("FINAL_PEER"===r.name)return r.peer;throw Ut(new Error(FX.NOT_FOUND),jX.ERR_NOT_FOUND)}async*getClosestPeers(e,t={}){for await(const r of this.dht.getClosestPeers(e,t))"FINAL_PEER"===r.name&&(yield r.peer)}}const f6={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_NOT_FOUND:"ERR_NOT_FOUND"},p6=Mt("libp2p:peer-store:address-book"),y6="change:multiaddrs";async function g6(){return!0}class m6{constructor(e,t,r){this.dispatchEvent=e,this.store=t,this.addressFilter=r??g6}async consumePeerRecord(e){p6.trace("consumePeerRecord await write lock");const t=await this.store.lock.writeLock();let r,n,i;p6.trace("consumePeerRecord got write lock");try{let s;try{s=eq.createFromProtobuf(e.payload)}catch(nP){return p6.error("invalid peer record received"),!1}r=s.peerId;const o=s.multiaddrs;if(!r.equals(e.peerId))return p6("signing key does not match PeerId in the PeerRecord"),!1;if(null==o||0===o.length)return!1;if(await this.store.has(r)&&(n=await this.store.load(r),null!=n.peerRecordEnvelope)){const e=await W$.createFromProtobuf(n.peerRecordEnvelope),t=eq.createFromProtobuf(e.payload);if(t.seqNumber>=s.seqNumber)return p6("sequence number was lower or equal to existing sequence number - stored: %d received: %d",t.seqNumber,s.seqNumber),!1}const a=await w6(r,o,this.addressFilter,!0);i=await this.store.patchOrCreate(r,{addresses:a,peerRecordEnvelope:e.marshal().subarray()}),p6("stored provided peer record for %p",s.peerId)}finally{p6.trace("consumePeerRecord release write lock"),t()}return this.dispatchEvent(new lq(y6,{detail:{peerId:r,multiaddrs:i.addresses.map((({multiaddr:e})=>e)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:e})=>e))}})),!0}async getRawEnvelope(e){p6.trace("getRawEnvelope await read lock");const t=await this.store.lock.readLock();p6.trace("getRawEnvelope got read lock");try{const r=await this.store.load(e);return r.peerRecordEnvelope}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{p6.trace("getRawEnvelope release read lock"),t()}}async getPeerRecord(e){const t=await this.getRawEnvelope(e);if(null!=t)return await W$.createFromProtobuf(t)}async get(e){e=mm(e),p6.trace("get wait for read lock");const t=await this.store.lock.readLock();p6.trace("get got read lock");try{const r=await this.store.load(e);return r.addresses}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{p6.trace("get release read lock"),t()}return[]}async set(e,t){if(e=mm(e),!Array.isArray(t))throw p6.error("multiaddrs must be an array of Multiaddrs"),Ut(new Error("multiaddrs must be an array of Multiaddrs"),f6.ERR_INVALID_PARAMETERS);p6.trace("set await write lock");const r=await this.store.lock.writeLock();p6.trace("set got write lock");let n,i,s=!1;try{const o=await w6(e,t,this.addressFilter);if(0===o.length)return;try{if(n=await this.store.load(e),s=!0,new Set([...o.map((({multiaddr:e})=>e.toString())),...n.addresses.map((({multiaddr:e})=>e.toString()))]).size===n.addresses.length&&o.length===n.addresses.length)return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}i=await this.store.patchOrCreate(e,{addresses:o}),p6("set multiaddrs for %p",e)}finally{p6.trace("set multiaddrs for %p",e),p6("set release write lock"),r()}this.dispatchEvent(new lq(y6,{detail:{peerId:e,multiaddrs:i.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==n?[]:n.addresses.map((({multiaddr:e})=>e))}})),s||this.dispatchEvent(new lq("peer",{detail:{id:e,multiaddrs:i.addresses.map((e=>e.multiaddr)),protocols:i.protocols}}))}async add(e,t){if(e=mm(e),!Array.isArray(t))throw p6.error("multiaddrs must be an array of Multiaddrs"),Ut(new Error("multiaddrs must be an array of Multiaddrs"),f6.ERR_INVALID_PARAMETERS);p6.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i,s;p6.trace("add got write lock");try{const o=await w6(e,t,this.addressFilter);if(0===o.length)return;try{if(i=await this.store.load(e),n=!0,new Set([...o.map((({multiaddr:e})=>e.toString())),...i.addresses.map((({multiaddr:e})=>e.toString()))]).size===i.addresses.length)return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}s=await this.store.mergeOrCreate(e,{addresses:o}),p6("added multiaddrs for %p",e)}finally{p6.trace("set release write lock"),r()}this.dispatchEvent(new lq(y6,{detail:{peerId:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==i?[]:i.addresses.map((({multiaddr:e})=>e))}})),!0===n&&this.dispatchEvent(new lq("peer",{detail:{id:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),protocols:s.protocols}}))}async delete(e){e=mm(e),p6.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;p6.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}await this.store.patchOrCreate(e,{addresses:[]})}finally{p6.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new lq(y6,{detail:{peerId:e,multiaddrs:[],oldMultiaddrs:null==r?[]:r.addresses.map((({multiaddr:e})=>e))}}))}}async function w6(e,t,r,n=!1){return await W_(t,(e=>_0(e,(e=>{if(!$l(e))throw p6.error("multiaddr must be an instance of Multiaddr"),Ut(new Error("multiaddr must be an instance of Multiaddr"),f6.ERR_INVALID_PARAMETERS)}))),(t=>T_(t,(async t=>await r(e,t)))),(e=>z_(e,(e=>({multiaddr:e,isCertified:n})))),(async e=>await S_(e)))}const v6=Mt("libp2p:peer-store:key-book"),b6="change:pubkey";class E6{constructor(e,t){this.dispatchEvent=e,this.store=t}async set(e,t){if(e=mm(e),!(t instanceof Uint8Array))throw v6.error("publicKey must be an instance of Uint8Array to store data"),Ut(new Error("publicKey must be an instance of PublicKey"),f6.ERR_INVALID_PARAMETERS);v6.trace("set await write lock");const r=await this.store.lock.writeLock();v6.trace("set got write lock");let n,i=!1;try{try{if(n=await this.store.load(e),null!=n.pubKey&&Fm(n.pubKey,t))return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}await this.store.patchOrCreate(e,{pubKey:t}),i=!0}finally{v6.trace("set release write lock"),r()}i&&this.dispatchEvent(new lq(b6,{detail:{peerId:e,publicKey:t,oldPublicKey:null==n?void 0:n.pubKey}}))}async get(e){e=mm(e),v6.trace("get await write lock");const t=await this.store.lock.readLock();v6.trace("get got write lock");try{const r=await this.store.load(e);return r.pubKey}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{v6("get release write lock"),t()}}async delete(e){e=mm(e),v6.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;v6.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}await this.store.patchOrCreate(e,{pubKey:void 0})}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{v6.trace("delete release write lock"),t()}this.dispatchEvent(new lq(b6,{detail:{peerId:e,publicKey:void 0,oldPublicKey:null==r?void 0:r.pubKey}}))}}const _6=Mt("libp2p:peer-store:metadata-book"),A6="change:metadata";class S6{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){e=mm(e),_6.trace("get await read lock");const t=await this.store.lock.readLock();_6.trace("get got read lock");try{const r=await this.store.load(e);return r.metadata}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{_6.trace("get release read lock"),t()}return new Map}async getValue(e,t){e=mm(e),_6.trace("getValue await read lock");const r=await this.store.lock.readLock();_6.trace("getValue got read lock");try{const n=await this.store.load(e);return n.metadata.get(t)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{_6.trace("getValue release write lock"),r()}}async set(e,t){if(e=mm(e),!(t instanceof Map))throw _6.error("valid metadata must be provided to store data"),Ut(new Error("valid metadata must be provided"),f6.ERR_INVALID_PARAMETERS);_6.trace("set await write lock");const r=await this.store.lock.writeLock();let n;_6.trace("set got write lock");try{try{n=await this.store.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}await this.store.mergeOrCreate(e,{metadata:t})}finally{_6.trace("set release write lock"),r()}this.dispatchEvent(new lq(A6,{detail:{peerId:e,metadata:t,oldMetadata:null==n?new Map:n.metadata}}))}async setValue(e,t,r){if(e=mm(e),"string"!==typeof t||!(r instanceof Uint8Array))throw _6.error("valid key and value must be provided to store data"),Ut(new Error("valid key and value must be provided"),f6.ERR_INVALID_PARAMETERS);_6.trace("setValue await write lock");const n=await this.store.lock.writeLock();let i,s;_6.trace("setValue got write lock");try{try{i=await this.store.load(e);const n=i.metadata.get(t);if(null!=n&&Fm(r,n))return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}s=await this.store.mergeOrCreate(e,{metadata:new Map([[t,r]])})}finally{_6.trace("setValue release write lock"),n()}this.dispatchEvent(new lq(A6,{detail:{peerId:e,metadata:s.metadata,oldMetadata:null==i?new Map:i.metadata}}))}async delete(e){e=mm(e),_6.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;_6.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}null!=r&&await this.store.patch(e,{metadata:new Map})}finally{_6.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new lq(A6,{detail:{peerId:e,metadata:new Map,oldMetadata:r.metadata}}))}async deleteValue(e,t){e=mm(e),_6.trace("deleteValue await write lock");const r=await this.store.lock.writeLock();let n,i;_6.trace("deleteValue got write lock");try{i=await this.store.load(e),n=i.metadata,n.delete(t),await this.store.patch(e,{metadata:n})}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{_6.trace("deleteValue release write lock"),r()}null!=n&&this.dispatchEvent(new lq(A6,{detail:{peerId:e,metadata:n,oldMetadata:null==i?new Map:i.metadata}}))}}const k6=Mt("libp2p:peer-store:proto-book"),I6="change:protocols";class T6{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){k6.trace("get wait for read lock");const t=await this.store.lock.readLock();k6.trace("get got read lock");try{const r=await this.store.load(e);return r.protocols}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}finally{k6.trace("get release read lock"),t()}return[]}async set(e,t){if(e=mm(e),!Array.isArray(t))throw k6.error("protocols must be provided to store data"),Ut(new Error("protocols must be provided"),f6.ERR_INVALID_PARAMETERS);k6.trace("set await write lock");const r=await this.store.lock.writeLock();let n,i;k6.trace("set got write lock");try{try{if(n=await this.store.load(e),new Set([...t]).size===n.protocols.length)return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}i=await this.store.patchOrCreate(e,{protocols:t}),k6("stored provided protocols for %p",e)}finally{k6.trace("set release write lock"),r()}this.dispatchEvent(new lq(I6,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async add(e,t){if(e=mm(e),!Array.isArray(t))throw k6.error("protocols must be provided to store data"),Ut(new Error("protocols must be provided"),f6.ERR_INVALID_PARAMETERS);k6.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i;k6.trace("add got write lock");try{try{if(n=await this.store.load(e),new Set([...n.protocols,...t]).size===n.protocols.length)return}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}i=await this.store.mergeOrCreate(e,{protocols:t}),k6("added provided protocols for %p",e)}finally{k6.trace("add release write lock"),r()}this.dispatchEvent(new lq(I6,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async remove(e,t){if(e=mm(e),!Array.isArray(t))throw k6.error("protocols must be provided to store data"),Ut(new Error("protocols must be provided"),f6.ERR_INVALID_PARAMETERS);k6.trace("remove await write lock");const r=await this.store.lock.writeLock();let n,i;k6.trace("remove got write lock");try{try{n=await this.store.load(e);const r=new Set(n.protocols);for(const e of t)r.delete(e);if(n.protocols.length===r.size)return;t=Array.from(r)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}i=await this.store.patchOrCreate(e,{protocols:t})}finally{k6.trace("remove release write lock"),r()}this.dispatchEvent(new lq(I6,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async delete(e){e=mm(e),k6.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;k6.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP}await this.store.patchOrCreate(e,{protocols:[]})}finally{k6.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new lq(I6,{detail:{peerId:e,protocols:[],oldProtocols:r.protocols}}))}}var C6,R6,P6;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.addresses)throw new Error('Protocol error: required field "addresses" was not found in object');for(const n of e.addresses)t.uint32(10),R6.codec().encode(n,t);if(null==e.protocols)throw new Error('Protocol error: required field "protocols" was not found in object');for(const n of e.protocols)t.uint32(18),t.string(n);if(null==e.metadata)throw new Error('Protocol error: required field "metadata" was not found in object');for(const n of e.metadata)t.uint32(26),P6.codec().encode(n,t);null!=e.pubKey&&(t.uint32(34),t.bytes(e.pubKey)),null!=e.peerRecordEnvelope&&(t.uint32(42),t.bytes(e.peerRecordEnvelope)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={addresses:[],protocols:[],metadata:[]},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.addresses.push(R6.codec().decode(e,e.uint32()));break;case 2:r.protocols.push(e.string());break;case 3:r.metadata.push(P6.codec().decode(e,e.uint32()));break;case 4:r.pubKey=e.bytes();break;case 5:r.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(C6||(C6={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.multiaddr)throw new Error('Protocol error: required field "multiaddr" was not found in object');t.uint32(10),t.bytes(e.multiaddr),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&t);break}}if(null==r.multiaddr)throw new Error('Protocol error: value for required field "multiaddr" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(R6||(R6={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.key)throw new Error('Protocol error: required field "key" was not found in object');if(t.uint32(10),t.string(e.key),null==e.value)throw new Error('Protocol error: required field "value" was not found in object');t.uint32(18),t.bytes(e.value),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={key:"",value:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&t);break}}if(null==r.key)throw new Error('Protocol error: value for required field "key" was not found in protobuf');if(null==r.value)throw new Error('Protocol error: value for required field "value" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(P6||(P6={}));const x6=Mt("libp2p:peer-store:store"),O6="/peers/";class N6{constructor(){this.components=new kK,this.lock=zB({name:"peer-store",singleProcess:!0})}init(e){this.components=e}_peerIdToDatastoreKey(e){if(null==e.type)throw x6.error("peerId must be an instance of peer-id to store data"),Ut(new Error("peerId must be an instance of peer-id"),f6.ERR_INVALID_PARAMETERS);const t=e.toCID().toString();return new Df(`${O6}${t}`)}async has(e){return await this.components.getDatastore().has(this._peerIdToDatastoreKey(e))}async delete(e){await this.components.getDatastore().delete(this._peerIdToDatastoreKey(e))}async load(e){const t=await this.components.getDatastore().get(this._peerIdToDatastoreKey(e)),r=C6.decode(t),n=new Map;for(const i of r.metadata)n.set(i.key,i.value);return{...r,id:e,addresses:r.addresses.map((({multiaddr:e,isCertified:t})=>({multiaddr:Kl(e),isCertified:t??!1}))),metadata:n,pubKey:r.pubKey??void 0,peerRecordEnvelope:r.peerRecordEnvelope??void 0}}async save(e){if(null!=e.pubKey&&null!=e.id.publicKey&&!Fm(e.pubKey,e.id.publicKey))throw x6.error("peer publicKey bytes do not match peer id publicKey bytes"),Ut(new Error("publicKey bytes do not match peer id publicKey bytes"),f6.ERR_INVALID_PARAMETERS);const t=new Set,r=e.addresses.filter((e=>!t.has(e.multiaddr.toString())&&(t.add(e.multiaddr.toString()),!0))).sort(((e,t)=>e.multiaddr.toString().localeCompare(t.multiaddr.toString()))).map((({multiaddr:e,isCertified:t})=>({multiaddr:e.bytes,isCertified:t}))),n=[];[...e.metadata.keys()].sort().forEach((t=>{const r=e.metadata.get(t);null!=r&&n.push({key:t,value:r})}));const i=C6.encode({addresses:r,protocols:e.protocols.sort(),pubKey:e.pubKey,metadata:n,peerRecordEnvelope:e.peerRecordEnvelope});return await this.components.getDatastore().put(this._peerIdToDatastoreKey(e.id),i.subarray()),await this.load(e.id)}async patch(e,t){const r=await this.load(e);return await this._patch(e,t,r)}async patchOrCreate(e,t){let r;try{r=await this.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP;r={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._patch(e,t,r)}async _patch(e,t,r){return await this.save({...r,...t,id:e})}async merge(e,t){const r=await this.load(e);return await this._merge(e,t,r)}async mergeOrCreate(e,t){let r;try{r=await this.load(e)}catch(nP){if(nP.code!==f6.ERR_NOT_FOUND)throw nP;r={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._merge(e,t,r)}async _merge(e,t,r){const n=new Map;return r.addresses.forEach((e=>{n.set(e.multiaddr.toString(),e.isCertified)})),(t.addresses??[]).forEach((e=>{const t=e.multiaddr.toString(),r=Boolean(n.get(t)),i=r||e.isCertified;n.set(t,i)})),await this.save({id:e,addresses:Array.from(n.entries()).map((([e,t])=>({multiaddr:Kl(e),isCertified:t}))),protocols:Array.from(new Set([...r.protocols??[],...t.protocols??[]])),metadata:new Map([...r.metadata?.entries()??[],...t.metadata?.entries()??[]]),pubKey:t.pubKey??(null!=r?r.pubKey:void 0),peerRecordEnvelope:t.peerRecordEnvelope??(null!=r?r.peerRecordEnvelope:void 0)})}async*all(){for await(const e of this.components.getDatastore().queryKeys({prefix:O6})){const t=e.toString().split("/")[2],r=mo.base32.decode(t);yield this.load(vm(r))}}}var D6,B6;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.tags)throw new Error('Protocol error: required field "tags" was not found in object');for(const n of e.tags)t.uint32(10),B6.codec().encode(n,t);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={tags:[]},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.tags.push(B6.codec().decode(e,e.uint32()));break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(D6||(D6={})),function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.name)throw new Error('Protocol error: required field "name" was not found in object');t.uint32(10),t.string(e.name),null!=e.value&&(t.uint32(16),t.uint32(e.value)),null!=e.expiry&&(t.uint32(24),t.uint64(e.expiry)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={name:""},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.name=e.string();break;case 2:r.value=e.uint32();break;case 3:r.expiry=e.uint64();break;default:e.skipType(7&t);break}}if(null==r.name)throw new Error('Protocol error: value for required field "name" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(B6||(B6={}));const L6=Mt("libp2p:peer-store");class M6 extends cq{constructor(e={}){super(),this.components=new kK,this.store=new N6,this.addressBook=new m6(this.dispatchEvent.bind(this),this.store,e.addressFilter),this.keyBook=new E6(this.dispatchEvent.bind(this),this.store),this.metadataBook=new S6(this.dispatchEvent.bind(this),this.store),this.protoBook=new T6(this.dispatchEvent.bind(this),this.store)}init(e){this.components=e,this.store.init(e)}async forEach(e){L6.trace("getPeers await read lock");const t=await this.store.lock.readLock();L6.trace("getPeers got read lock");try{for await(const t of this.store.all())t.id.equals(this.components.getPeerId())||e(t)}finally{L6.trace("getPeers release read lock"),t()}}async all(){const e=[];return await this.forEach((t=>{e.push(t)})),e}async delete(e){L6.trace("delete await write lock");const t=await this.store.lock.writeLock();L6.trace("delete got write lock");try{await this.store.delete(e)}finally{L6.trace("delete release write lock"),t()}}async get(e){L6.trace("get await read lock");const t=await this.store.lock.readLock();L6.trace("get got read lock");try{return await this.store.load(e)}finally{L6.trace("get release read lock"),t()}}async has(e){L6.trace("has await read lock");const t=await this.store.lock.readLock();L6.trace("has got read lock");try{return await this.store.has(e)}finally{L6.trace("has release read lock"),t()}}async tagPeer(e,t,r={}){const n=r.value??0,i=Math.round(n),s=r.ttl??void 0;if(i!==n||i<0||i>100)throw Ut(new Error("Tag value must be between 0-100"),"ERR_TAG_VALUE_OUT_OF_BOUNDS");const o=await this.metadataBook.getValue(e,"tags");let a=[];null!=o&&(a=D6.decode(o).tags);for(const c of a)if(c.name===t)throw Ut(new Error("Peer already tagged"),"ERR_DUPLICATE_TAG");a.push({name:t,value:i,expiry:null==s?void 0:BigInt(Date.now()+s)}),await this.metadataBook.setValue(e,"tags",D6.encode({tags:a}).subarray())}async unTagPeer(e,t){const r=await this.metadataBook.getValue(e,"tags");let n=[];null!=r&&(n=D6.decode(r).tags),n=n.filter((e=>e.name!==t)),await this.metadataBook.setValue(e,"tags",D6.encode({tags:n}).subarray())}async getTags(e){const t=await this.metadataBook.getValue(e,"tags");let r=[];null!=t&&(r=D6.decode(t).tags);const n=BigInt(Date.now()),i=r.filter((e=>null==e.expiry||e.expiry>n));return i.length!==r.length&&await this.metadataBook.setValue(e,"tags",D6.encode({tags:i}).subarray()),i.map((e=>({name:e.name,value:e.value??0})))}}class U6{constructor(e){this.dht=e}async provide(e){await I_(this.dht.provide(e))}async*findProviders(e,t={}){for await(const r of this.dht.findProviders(e,t))"PROVIDER"===r.name&&(yield*r.providers)}async put(e,t,r){await I_(this.dht.put(e,t,r))}async get(e,t){for await(const r of this.dht.get(e,t))if("VALUE"===r.name)return r.value;throw Ut(new Error("Not found"),"ERR_NOT_FOUND")}}const F6=Mt("libp2p:dialer:auto-dialer");class j6{constructor(e,t){this.components=e,this.enabled=t.enabled,this.minConnections=t.minConnections,this.dialTimeout=t.dialTimeout}handle(e){const{detail:t}=e;if(!this.enabled)return;const r=this.components.getConnectionManager().getConnections(t.id);if(0===r.length){const e=this.minConnections??0,r=this.components.getConnectionManager().getConnections();if(e>r.length){F6("auto-dialing discovered peer %p with timeout %d",t.id,this.dialTimeout);const e=new sa.TimeoutController(this.dialTimeout);try{(0,KX.setMaxListeners)?.(1/0,e.signal)}catch{}this.components.getConnectionManager().openConnection(t.id,{signal:e.signal}).catch((e=>{F6.error("could not connect to discovered peer %p with %o",t.id,e)})).finally((()=>{e.clear()}))}}}}var V6=r(3061);const z6=globalThis.fetch,$6=globalThis.Headers;globalThis.Request,globalThis.Response;function q6(e,t,r){return`${e}?name=${t}&type=${r}`}async function K6(e,t){const r=await z6(e,{headers:new $6({accept:"application/dns-json"}),signal:t}),n=await r.json();return n}function H6(e,t){return`${t}_${e}`}const G6=Object.assign(wt("dns-over-http-resolver"),{error:wt("dns-over-http-resolver:error")});class W6{constructor(e={}){this._cache=new V6({max:e?.maxCache??100}),this._TXTcache=new V6({max:e?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=e.request??K6,this._abortControllers=[]}cancel(){this._abortControllers.forEach((e=>e.abort()))}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}setServers(e){this._servers=e}async resolve(e,t="A"){switch(t){case"A":return await this.resolve4(e);case"AAAA":return await this.resolve6(e);case"TXT":return await this.resolveTxt(e);default:throw new Error(`${t} is not supported`)}}async resolve4(e){const t="A",r=this._cache.get(H6(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(q6(i,e,t),r.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(H6(e,t),s,{ttl:o}),s}catch(nP){r.signal.aborted&&(n=!0),G6.error(`${i} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolve6(e){const t="AAAA",r=this._cache.get(H6(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(q6(i,e,t),r.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(H6(e,t),s,{ttl:o}),s}catch(nP){r.signal.aborted&&(n=!0),G6.error(`${i} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}async resolveTxt(e){const t="TXT",r=this._TXTcache.get(H6(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(q6(i,e,t),r.signal),s=n.Answer.map((e=>[e.data.replace(/['"]+/g,"")])),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._TXTcache.set(H6(e,t),s,{ttl:o}),s}catch(nP){r.signal.aborted&&(n=!0),G6.error(`${i} could not resolve ${e} record ${t}`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record ${t}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}}var Q6=W6,Y6=Q6;const{code:J6}=Gu("dnsaddr");async function X6(e,t={}){const r=new Y6;null!=t.signal&&t.signal.addEventListener("abort",(()=>{r.cancel()}));const n=e.getPeerId(),[,i]=e.stringTuples().find((([e])=>e===J6))??[];if(null==i)throw new Error("No hostname found in multiaddr");const s=await r.resolveTxt(`_dnsaddr.${i}`);let o=s.flat().map((e=>e.split("=")[1]));return null!=n&&(o=o.filter((e=>e.includes(n)))),o}const Z6={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:k0,maxDialsPerPeer:I0,dialTimeout:A0,inboundUpgradeTimeout:S0,resolvers:{dnsaddr:X6},addressSorter:XZ},connectionGater:{},transportManager:{faultTolerance:n1.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:qZ,enabled:!1,ttl:KZ},hop:{enabled:!1,active:!1,timeout:3e4},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:C3},timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1},ping:{protocolPrefix:"ipfs",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4},fetch:{protocolPrefix:"libp2p",maxInboundStreams:1,maxOutboundStreams:1,timeout:1e4}};function e5(e){const t=gt(Z6,e);if(null==t.transports||t.transports.length<1)throw Ut(new Error(FX.ERR_TRANSPORTS_REQUIRED),jX.ERR_TRANSPORTS_REQUIRED);if(null==t.connectionEncryption||0===t.connectionEncryption.length)throw Ut(new Error(FX.CONN_ENCRYPTION_REQUIRED),jX.CONN_ENCRYPTION_REQUIRED);if(null===t.connectionProtector&&null!=globalThis.process?.env?.LIBP2P_FORCE_PNET)throw Ut(new Error(FX.ERR_PROTECTOR_REQUIRED),jX.ERR_PROTECTOR_REQUIRED);return t.identify.host.agentVersion===C3&&(t6||Z3?t.identify.host.agentVersion+=` UserAgent=${globalThis.process.version}`:(X3||r6||e6||n6)&&(t.identify.host.agentVersion+=` UserAgent=${globalThis.navigator.userAgent}`)),t}function t5(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var r5=t5,n5=r5,i5=n5;new Uint8Array(0);const s5=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},o5=e=>(new TextEncoder).encode(e),a5=e=>(new TextDecoder).decode(e);class c5{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class u5{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return h5(this,e)}}class l5{constructor(e){this.decoders=e}or(e){return h5(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h5=(e,t)=>new l5({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class d5{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new c5(e,t,r),this.decoder=new u5(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const f5=({name:e,prefix:t,encode:r,decode:n})=>new d5(e,t,r,n),p5=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=i5(r,t);return f5({prefix:e,name:t,encode:n,decode:e=>s5(i(e))})},y5=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},g5=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},m5=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>f5({prefix:t,name:e,encode(e){return g5(e,n,r)},decode(t){return y5(t,n,r,e)}}),w5=f5({prefix:"\0",name:"identity",encode:e=>a5(e),decode:e=>o5(e)}),v5=m5({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),b5=m5({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),E5=p5({prefix:"9",name:"base10",alphabet:"0123456789"}),_5=m5({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A5=m5({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),S5=m5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),k5=m5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),I5=m5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),T5=m5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),C5=m5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),R5=m5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),P5=m5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),x5=m5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),O5=m5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),N5=p5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),D5=p5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),B5=p5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),L5=p5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),M5=m5({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),U5=m5({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),F5=m5({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),j5=m5({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),V5=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),z5=V5.reduce(((e,t,r)=>(e[r]=t,e)),[]),$5=V5.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function q5(e){return e.reduce(((e,t)=>(e+=z5[t],e)),"")}function K5(e){const t=[];for(const r of e){const e=$5[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const H5=f5({prefix:"🚀",name:"base256emoji",encode:q5,decode:K5});var G5=X5,W5=128,Q5=127,Y5=~Q5,J5=Math.pow(2,31);function X5(e,t,r){t=t||[],r=r||0;var n=r;while(e>=J5)t[r++]=255&e|W5,e/=128;while(e&Y5)t[r++]=255&e|W5,e>>>=7;return t[r]=0|e,X5.bytes=r-n+1,t}var Z5=r4,e4=128,t4=127;function r4(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw r4.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&t4)<<i:(r&t4)*Math.pow(2,i),i+=7}while(r>=e4);return r4.bytes=s-t,n}var n4=Math.pow(2,7),i4=Math.pow(2,14),s4=Math.pow(2,21),o4=Math.pow(2,28),a4=Math.pow(2,35),c4=Math.pow(2,42),u4=Math.pow(2,49),l4=Math.pow(2,56),h4=Math.pow(2,63),d4=function(e){return e<n4?1:e<i4?2:e<s4?3:e<o4?4:e<a4?5:e<c4?6:e<u4?7:e<l4?8:e<h4?9:10},f4={encode:G5,decode:Z5,encodingLength:d4},p4=f4,y4=p4;const g4=(e,t,r=0)=>(y4.encode(e,t,r),t),m4=e=>y4.encodingLength(e),w4=(e,t)=>{const r=t.byteLength,n=m4(e),i=n+m4(r),s=new Uint8Array(i+r);return g4(e,s,0),g4(r,s,n),s.set(t,i),new v4(e,r,t,s)};class v4{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const b4=({name:e,code:t,encode:r})=>new E4(e,t,r);class E4{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?w4(this.code,t):t.then((e=>w4(this.code,e)))}throw Error("Unknown type, must be binary type")}}const _4=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),A4=b4({name:"sha2-256",code:18,encode:_4("SHA-256")}),S4=b4({name:"sha2-512",code:19,encode:_4("SHA-512")}),k4=0,I4="identity",T4=s5,C4=e=>w4(k4,T4(e)),R4={code:k4,name:I4,encode:T4,digest:C4},P4="raw",x4=85,O4=e=>s5(e),N4=e=>s5(e),D4=new TextEncoder,B4=new TextDecoder,L4="json",M4=512,U4=e=>D4.encode(JSON.stringify(e)),F4=e=>JSON.parse(B4.decode(e));new WeakMap;class j4{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==peer_id_factory_node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==peer_id_factory_node_modules_multiformats_src_cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return j4.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return j4.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return j4.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Digest.equals(e.multihash,r.multihash)}toString(e){return peer_id_factory_node_modules_multiformats_src_cid_format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof j4)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new j4(e,r,n,i||peer_id_factory_node_modules_multiformats_src_cid_encodeCID(e,r,n.bytes))}if(null!=t&&!0===t[peer_id_factory_node_modules_multiformats_src_cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=Digest.decode(r);return j4.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==peer_id_factory_node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${peer_id_factory_node_modules_multiformats_src_cid_DAG_PB_CODE}) block encoding`);return new j4(e,t,r,r.bytes);case 1:{const n=peer_id_factory_node_modules_multiformats_src_cid_encodeCID(e,t,r.bytes);return new j4(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return j4.create(0,peer_id_factory_node_modules_multiformats_src_cid_DAG_PB_CODE,e)}static createV1(e,t){return j4.create(1,e,t)}static decode(e){const[t,r]=j4.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=j4.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?j4.createV0(s):j4.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint.decode(e.subarray(t));return n,r};let n=r(),i=peer_id_factory_node_modules_multiformats_src_cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=peer_id_factory_node_modules_multiformats_src_cid_parseCIDtoBytes(e,t),i=j4.decode(n);return peer_id_factory_node_modules_multiformats_src_cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const V4={...je,...Ve,...ze,...$e,...qe,...Ke,...He,...Ge,...We,...Qe};function z4(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function $4(e=0){return null!=globalThis.Buffer?.allocUnsafe?z4(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function q4(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const K4=q4("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),H4=q4("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=$4(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}));V4.base16;function G4(){aA._configure(),nA._configure(iA),sA._configure(oA)}G4();const W4=["uint64","int64","sint64","fixed64","sfixed64"];function Q4(e){for(const t of W4){if(null==e[t])continue;const r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function Y4(e){return Q4(new nA(e))}function J4(e){for(const t of W4){if(null==e[t])continue;const r=e[t];e[t]=function(e){return r.call(this,e.toString())}}return e}function X4(){return J4(sA.create())}function Z4(e,t){const r=Y4(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function e8(e,t){const r=X4();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var t8,r8;function n8(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function i8(e,t){return n8("message",t8.LENGTH_DELIMITED,e,t)}(function(e){e[e["VARINT"]=0]="VARINT",e[e["BIT64"]=1]="BIT64",e[e["LENGTH_DELIMITED"]=2]="LENGTH_DELIMITED",e[e["START_GROUP"]=3]="START_GROUP",e[e["END_GROUP"]=4]="END_GROUP",e[e["BIT32"]=5]="BIT32"})(t8||(t8={})),function(e){let t;e.codec=()=>(null==t&&(t=i8(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),(!0===r.writeDefaults||null!=e.id&&e.id.byteLength>0)&&(t.uint32(10),t.bytes(e.id)),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={id:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>e8(t,e.codec()),e.decode=t=>Z4(t,e.codec())}(r8||(r8={}));const s8=async()=>{const e=await vE("Ed25519"),t=await a8(e);if("Ed25519"===t.type)return t;throw new Error(`Generated unexpected PeerId type "${t.type}"`)},o8=async e=>{const t=await vE("RSA",e?.bits??2048),r=await a8(t);if("RSA"===r.type)return r;throw new Error(`Generated unexpected PeerId type "${r.type}"`)};async function a8(e){return await Em(EE(e.public),AE(e))}class c8 extends cq{get[OX](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}get lan(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}get(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}findProviders(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}findPeer(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}getClosestPeers(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}provide(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}put(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}async getMode(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}async setMode(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}async refreshRoutingTable(){throw Ut(new Error(FX.DHT_DISABLED),jX.DHT_DISABLED)}}class u8 extends cq{isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}get multicodecs(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}getPeers(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}getTopics(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}subscribe(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}unsubscribe(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}getSubscribers(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}async publish(){throw Ut(new Error(FX.PUBSUB_DISABLED),jX.ERR_PUBSUB_DISABLED)}}class l8 extends Error{constructor(e="The operation was aborted"){super(e),this.code=l8.code,this.type=l8.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}var h8=r(1838);const d8=Mt("libp2p:dialer:dial-request");class f8{constructor(e){const{addrs:t,dialAction:r,dialer:n}=e;this.addrs=t,this.dialer=n,this.dialAction=r}async run(e={}){const t=this.dialer.getTokens(this.addrs.length);if(t.length<1)throw Ut(new Error("No dial tokens available"),jX.ERR_NO_DIAL_TOKENS);const r=new h8;for(const o of t)r.push(o).catch((e=>{d8.error(e)}));const n=this.addrs.map((()=>{const e=new AbortController;try{(0,KX.setMaxListeners)?.(1/0,e.signal)}catch{}return e}));if(null!=e.signal)try{(0,KX.setMaxListeners)?.(1/0,e.signal)}catch{}let i=0,s=!1;try{return await Promise.any(this.addrs.map((async(o,a)=>{const c=await r.shift();if(s)throw this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0]),Ut(new Error("dialAction already succeeded"),jX.ERR_ALREADY_SUCCEEDED);const u=n[a];if(null==u)throw Ut(new Error("dialAction did not come with an AbortController"),jX.ERR_INVALID_PARAMETERS);let l;try{const s=u.signal;l=await this.dialAction(o,{...e,signal:null!=e.signal?(0,Uf.anySignal)([s,e.signal]):s}),n[a]=void 0}finally{i++,this.addrs.length-i>=t.length?r.push(c).catch((e=>{d8.error(e)})):this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0])}if(null==l)throw Ut(new Error("dialAction led to empty object"),jX.ERR_TRANSPORT_DIAL_FAILED);return s=!0,l})))}finally{n.forEach((e=>{void 0!==e&&e.abort()})),t.forEach((e=>this.dialer.releaseToken(e)))}}}const p8=Mt("libp2p:dialer"),y8="dialler",g8="pending-dials",m8="pending-dial-targets";class w8{constructor(e,t={}){this.started=!1,this.addressSorter=t.addressSorter??XZ,this.maxAddrsToDial=t.maxAddrsToDial??T0,this.timeout=t.dialTimeout??A0,this.maxDialsPerPeer=t.maxDialsPerPeer??I0,this.tokens=[...new Array(t.maxParallelDials??k0)].map(((e,t)=>t)),this.components=e,this.pendingDials=e1({component:y8,metric:g8,metrics:t.metrics}),this.pendingDialTargets=e1({component:y8,metric:m8,metrics:e.getMetrics()});for(const[r,n]of Object.entries(t.resolvers??{}))Fl.set(r,n)}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const e of this.pendingDials.values())try{e.controller.abort()}catch(nP){p8.error(nP)}this.pendingDials.clear();for(const e of this.pendingDialTargets.values())e.reject(new l8("Dialer was destroyed"));this.pendingDialTargets.clear()}async dial(e,t={}){const{id:r,multiaddrs:n}=YX(e);if(this.components.getPeerId().equals(r))throw Ut(new Error("Tried to dial self"),jX.ERR_DIALED_SELF);if(p8("check multiaddrs %p",r),null!=n&&n.length>0&&(p8("storing multiaddrs %p",r,n),await this.components.getPeerStore().addressBook.add(r,n)),await this.components.getConnectionGater().denyDialPeer(r))throw Ut(new Error("The dial request is blocked by gater.allowDialPeer"),jX.ERR_PEER_DIAL_INTERCEPTED);p8("creating dial target for %p",r);const i=await this._createCancellableDialTarget(r,t);if(0===i.addrs.length)throw Ut(new Error("The dial request has no valid addresses"),jX.ERR_NO_VALID_ADDRESSES);const s=this.pendingDials.get(i.id)??this._createPendingDial(i,t);try{const e=await s.promise;return p8("dial succeeded to %s",i.id),e}catch(nP){throw p8("dial failed to %s",i.id,nP),s.controller.signal.aborted&&(nP.code=jX.ERR_TIMEOUT),p8.error(nP),nP}finally{s.destroy()}}async _createCancellableDialTarget(e,t){const r=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,n=new Promise(((e,t)=>{this.pendingDialTargets.set(r,{resolve:e,reject:t})}));try{const i=await Promise.race([this._createDialTarget(e,t),n]);return i}finally{this.pendingDialTargets.delete(r)}}async _createDialTarget(e,t){const r=this._resolve.bind(this),n=await W_(await this.components.getPeerStore().addressBook.get(e),(t=>T_(t,(async t=>!await this.components.getConnectionGater().denyDialMultiaddr(e,t.multiaddr)))),(e=>lV(e,this.addressSorter)),(async function*(e){for await(const n of e)yield*await r(n.multiaddr,t)}),(e=>T_(e,(e=>Boolean(this.components.getTransportManager().transportForMultiaddr(e))))),(t=>z_(t,(t=>e.toString()===t.getPeerId()?t:t.encapsulate(`/p2p/${e.toString()}`)))),(async e=>await S_(e)));if(n.length>this.maxAddrsToDial)throw await this.components.getPeerStore().delete(e),Ut(new Error("dial with more addresses than allowed"),jX.ERR_TOO_MANY_ADDRESSES);return{id:e.toString(),addrs:n}}_createPendingDial(e,t={}){const r=async(e,t={})=>{if(!0===t.signal?.aborted)throw Ut(new Error("already aborted"),jX.ERR_ALREADY_ABORTED);return await this.components.getTransportManager().dial(e,t).catch((t=>{throw p8.error("dial to %s failed",e,t),t}))},n=new f8({addrs:e.addrs,dialAction:r,dialer:this}),i=new sa.TimeoutController(this.timeout),s=[i.signal];null!=t.signal&&s.push(t.signal);const o=(0,Uf.anySignal)(s);try{(0,KX.setMaxListeners)?.(1/0,o)}catch{}const a={dialRequest:n,controller:i,promise:n.run({...t,signal:o}),destroy:()=>{i.clear(),this.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,a),a}getTokens(e){const t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,t);return p8("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),r}releaseToken(e){this.tokens.includes(e)||(p8("token %d released",e),this.tokens.push(e))}async _resolve(e,t){const r=e.protoNames().includes("dnsaddr");if(!r)return[e];const n=await this._resolveRecord(e,t),i=await Promise.all(n.map((async e=>await this._resolve(e,t)))),s=i.flat();return s.reduce(((e,t)=>(null==e.find((e=>e.equals(t)))&&e.push(t),e)),[])}async _resolveRecord(e,t){try{e=Kl(e.toString());const r=await e.resolve(t);return r}catch(nP){return p8.error(`multiaddr ${e.toString()} could not be resolved`,nP),[]}}}const v8=Mt("libp2p");class b8 extends cq{constructor(e){super(),this.initializables=[],this.started=!1,this.peerId=e.peerId,this.components=new kK({peerId:e.peerId,datastore:e.datastore??new V_,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...e.connectionGater}}),this.components.setPeerStore(new M6({addressFilter:this.components.getConnectionGater().filterMultiaddrForPeer,...e.peerStore})),this.services=[this.components],e.metrics.enabled&&(this.metrics=this.components.setMetrics(new D0(e.metrics))),this.peerStore=this.components.getPeerStore(),this.peerStore.addEventListener("peer",(e=>{const{detail:t}=e;this.dispatchEvent(new lq("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&this.components.setConnectionProtector(e.connectionProtector),this.components.setUpgrader(new S3(this.components,{connectionEncryption:(e.connectionEncryption??[]).map((e=>this.configureComponent(e))),muxers:(e.streamMuxers??[]).map((e=>this.configureComponent(e))),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout})),this.components.setDialer(new w8(this.components,e.connectionManager)),this.connectionManager=this.components.setConnectionManager(new wZ(e.connectionManager)),this.registrar=this.components.setRegistrar(new v3(this.components)),this.components.setTransportManager(new r1(this.components,e.transportManager)),this.components.setAddressManager(new XX(this.components,e.addresses)),this.configureComponent(new h6(this.components)),this.configureComponent(new EZ(this.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));const t=E0.generateOptions();this.keychain=this.configureComponent(new E0(this.components,{...t,...e.keychain})),this.services.push(new u6(this.components,e.nat)),e.transports.forEach((e=>{this.components.getTransportManager().add(this.configureComponent(e))})),null!=e.streamMuxers&&e.streamMuxers.length>0&&(this.identifyService=new L3(this.components,{...e.identify}),this.configureComponent(this.identifyService)),null!=e.dht?this.dht=this.components.setDHT(e.dht):this.dht=new c8,null!=e.pubsub?this.pubsub=this.components.setPubSub(e.pubsub):this.pubsub=new u8;const r=(e.peerRouters??[]).map((e=>this.configureComponent(e)));null!=e.dht&&(r.push(this.configureComponent(new d6(this.dht))),this.dht.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))),this.peerRouting=this.components.setPeerRouting(this.configureComponent(new GX(this.components,{...e.peerRouting,routers:r})));const n=(e.contentRouters??[]).map((e=>this.configureComponent(e)));null!=e.dht&&n.push(this.configureComponent(new U6(this.dht))),this.contentRouting=this.components.setContentRouting(this.configureComponent(new WX(this.components,{routers:n}))),e.relay.enabled&&(this.components.getTransportManager().add(this.configureComponent(new VZ(e.relay))),this.configureComponent(new n0(this.components,{addressSorter:e.connectionManager.addressSorter,...e.relay}))),this.fetchService=this.configureComponent(new z3(this.components,{...e.fetch})),this.pingService=this.configureComponent(new G3(this.components,{...e.ping}));const i=this.configureComponent(new j6(this.components,{enabled:!1!==e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,dialTimeout:e.connectionManager.dialTimeout??3e4}));this.addEventListener("peer:discovery",(e=>{this.isStarted()&&i.handle(e)}));for(const s of e.peerDiscovery??[])this.configureComponent(s),s.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))}configureComponent(e){return AK(e)&&this.services.push(e),SK(e)&&this.initializables.push(e),e}async start(){if(!this.started){this.started=!0,v8("libp2p is starting");try{this.initializables.forEach((e=>{e.init(this.components)})),await Promise.all(this.services.map((async e=>{null!=e.beforeStart&&await e.beforeStart()}))),await Promise.all(this.services.map((e=>e.start()))),await Promise.all(this.services.map((async e=>{null!=e.afterStart&&await e.afterStart()}))),v8("libp2p has started")}catch(nP){throw v8.error("An error occurred starting libp2p",nP),await this.stop(),nP}}}async stop(){this.started&&(v8("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async e=>{null!=e.beforeStop&&await e.beforeStop()}))),await Promise.all(this.services.map((e=>e.stop()))),await Promise.all(this.services.map((async e=>{null!=e.afterStop&&await e.afterStop()}))),v8("libp2p has stopped"))}isStarted(){return this.started}getConnections(e){return this.components.getConnectionManager().getConnections(e)}getPeers(){const e=new lZ;for(const t of this.components.getConnectionManager().getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e,t={}){const{id:r,multiaddrs:n}=YX(e);return await this.components.getPeerStore().addressBook.add(r,n),await this.components.getConnectionManager().openConnection(r,t)}async dialProtocol(e,t,r={}){if(null==t)throw Ut(new Error("no protocols were provided to open a stream"),jX.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(t=Array.isArray(t)?t:[t],0===t.length)throw Ut(new Error("no protocols were provided to open a stream"),jX.ERR_INVALID_PROTOCOLS_FOR_STREAM);const n=await this.dial(e,r);return await n.newStream(t,r)}getMultiaddrs(){return this.components.getAddressManager().getAddresses()}async hangUp(e){const{id:t}=YX(e);await this.components.getConnectionManager().closeConnections(t)}async getPublicKey(e,t={}){if(v8("getPublicKey %p",e),null!=e.publicKey)return e.publicKey;const r=await this.peerStore.get(e);if(null!=r.pubKey)return r.pubKey;if(null==this.dht)throw Ut(new Error("Public key was not in the peer store and the DHT is not enabled"),jX.ERR_NO_ROUTERS_AVAILABLE);const n=(0,nw.concat)([ia("/pk/"),e.multihash.digest]);for await(const i of this.dht.get(n,t))if("VALUE"===i.name){const t=bE(i.value);return await this.peerStore.keyBook.set(e,i.value),t.bytes}throw Ut(new Error(`Node not responding with its public key: ${e.toString()}`),jX.ERR_INVALID_RECORD)}async fetch(e,t,r={}){const{id:n,multiaddrs:i}=YX(e);return null!=i&&await this.components.getPeerStore().addressBook.add(n,i),await this.fetchService.fetch(n,t,r)}async ping(e,t={}){const{id:r,multiaddrs:n}=YX(e);return n.length>0&&await this.components.getPeerStore().addressBook.add(r,n),await this.pingService.ping(r,t)}async handle(e,t,r){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.getRegistrar().handle(e,t,r)})))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.getRegistrar().unhandle(e)})))}onDiscoveryPeer(e){const{detail:t}=e;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.getPeerStore().addressBook.add(t.id,t.multiaddrs).catch((e=>v8.error(e))),t.protocols.length>0&&this.components.getPeerStore().protoBook.set(t.id,t.protocols).catch((e=>v8.error(e))),this.dispatchEvent(new lq("peer:discovery",{detail:t}))):v8.error(new Error(jX.ERR_DISCOVERED_SELF))}}async function E8(e){return null==e.peerId&&(e.peerId=await s8()),new b8(e5(e))}async function _8(e){return await E8(e)}var A8=r(6657);const S8=1e3,k8=60*S8,I8=60*k8,T8=36*I8,C8="/lan",R8="/ipfs",P8="/kad/1.0.0",x8="/dht/record",O8="/dht/provider",N8=256,D8=24*I8,B8=I8,L8=20,M8=3,U8=Number(5*k8),F8=Number(30*S8),j8=Number(5*k8),V8=Number(30*S8),z8=Number(30*S8),$8=ia("/pk/");function q8(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,r]]=e.stringTuples();return(4===t||6===t)&&(null!=r&&!YZ(r))}))}}function K8(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,r]]=e.stringTuples();return(4===t||6===t)&&(null!=r&&YZ(r))}))}}async function H8(e){const t=await Co.digest(e);return t.digest}async function G8(e){return await H8(e.toBytes())}function W8(e){return new Df(`${x8}/${vh(e,"base32")}`,!1)}function Q8(e){return(0,nw.concat)([$8,e.toBytes()])}function Y8(e){return"/pk/"===vh(e.subarray(0,4))}function J8(e){return vm(e.subarray(4))}function X8(e,t){const r=new Date,n=new _A(e,t,r);return n.serialize()}function Z8(e,t=100){let r;return()=>{clearTimeout(r),r=setTimeout((()=>e()),t)}}const e7="kad-close",t7=50,r7=20,n7=1e4,i7=10,s7="routing-table-size",o7="ping-queue-size",a7="ping-running";class c7{constructor(e){this.components=new kK;const{kBucketSize:t,pingTimeout:r,lan:n,pingConcurrency:i,protocol:s,tagName:o,tagValue:a}=e;this.log=Mt(`libp2p:kad-dht:${n?"lan":"wan"}:routing-table`),this.kBucketSize=t??r7,this.pingTimeout=r??n7,this.pingConcurrency=i??i7,this.lan=n,this.running=!1,this.protocol=s,this.tagName=o??e7,this.tagValue=a??t7;const c=()=>{this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:o7,value:this.pingQueue.size}),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:a7,value:this.pingQueue.pending})};this.pingQueue=new Wp({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",c),this.pingQueue.addListener("next",c),this._onPing=this._onPing.bind(this)}init(e){this.components=e}isStarted(){return this.running}async start(){this.running=!0;const e=new A8({localNodeId:await G8(this.components.getPeerId()),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});this.kb=e,e.on("ping",this._onPing),this._tagPeers(e)}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_tagPeers(e){let t=new lZ;const r=Z8((()=>{const r=new lZ(e.closest(e.localNodeId,r7).map((e=>e.peer))),n=r.difference(t),i=t.difference(r);Promise.resolve().then((async()=>{for(const e of n)await this.components.getPeerStore().tagPeer(e,this.tagName,{value:this.tagValue});for(const e of i)await this.components.getPeerStore().unTagPeer(e,this.tagName)})).catch((e=>{this.log.error("Could not update peer tags",e)})),t=r}));e.on("added",(()=>{r()})),e.on("removed",(()=>{r()}))}_onPing(e,t){this.pingQueue.add((async()=>{if(!this.running)return;let r=0;try{await Promise.all(e.map((async e=>{let t;try{t=new sa.TimeoutController(this.pingTimeout);const n={signal:t.signal};this.log("pinging old contact %p",e.peer);const i=await this.components.getConnectionManager().openConnection(e.peer,n),s=await i.newStream(this.protocol,n);s.close(),r++}catch(nP){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",e.peer,nP),this.log("evicting old contact after ping failed %p",e),this.kb.remove(e.id))}finally{null!=t&&t.clear(),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:s7,value:this.size})}}))),this.running&&r<e.length&&null!=this.kb&&(this.log("adding new contact %p",t.peer),this.kb.add(t))}catch(nP){this.log.error("could not process k-bucket ping event",nP)}})).catch((e=>{this.log.error("could not process k-bucket ping event",e)}))}get size(){return null==this.kb?0:this.kb.count()}async find(e){const t=await G8(e),r=this.closestPeer(t);if(null!=r&&e.equals(r))return r}closestPeer(e){const t=this.closestPeers(e,1);if(t.length>0)return t[0]}closestPeers(e,t=this.kBucketSize){if(null==this.kb)return[];const r=this.kb.closest(e,t);return r.map((e=>e.peer))}async add(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await G8(e);this.kb.add({id:t,peer:e}),this.log("added %p with kad id %b",e,t),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:s7,value:this.size})}async remove(e){if(null==this.kb)throw new Error("RoutingTable is not started");const t=await G8(e);this.kb.remove(t),this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:s7,value:this.size})}}var u7=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782];const l7=15;class h7{constructor(e){const{peerRouting:t,routingTable:r,refreshInterval:n,refreshQueryTimeout:i,lan:s}=e;this.log=Mt(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=t,this.routingTable=r,this.refreshInterval=n??j8,this.refreshQueryTimeout=i??V8,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}init(e){}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1){this.log("refreshing routing table");const t=this._maxCommonPrefix(),r=this._getTrackedCommonPrefixLengthsForRefresh(t);this.log(`max common prefix length ${t}`),this.log(`tracked CPLs [ ${r.map((e=>e.toISOString())).join(", ")} ]`),Promise.all(r.map((async(n,i)=>{try{if(await this._refreshCommonPrefixLength(i,n,e),0===this._numPeersForCpl(t)){const t=Math.min(2*(i+1),r.length-1);for(let r=i+1;r<t+1;r++)try{await this._refreshCommonPrefixLength(r,n,e)}catch(nP){this.log.error(nP)}}}catch(nP){this.log.error(nP)}}))).catch((e=>{this.log.error(e)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((e=>{this.log.error(e)}))}async _refreshCommonPrefixLength(e,t,r){if(!r&&t.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",e);const n=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,n,this.routingTable.size);const i=new sa.TimeoutController(this.refreshQueryTimeout);try{const t=await AU(this.peerRouting.getClosestPeers(n.toBytes(),{signal:i.signal}));this.log(`found ${t} peers that were close to imaginary peer %p`,n),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,n,this.routingTable.size)}finally{i.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>l7&&(e=l7);const t=[];for(let r=0;r<=e;r++)t[r]=this.commonPrefixLengthRefreshedAt[r]??new Date;return t}async _generateRandomPeerId(e){if(null==this.routingTable.kb)throw new Error("Routing table not started");const t=vv(2),r=(t[1]<<8)+t[0],n=await this._makePeerId(this.routingTable.kb.localNodeId,r,e);return vm(n)}async _makePeerId(e,t,r){if(r>l7)throw new Error(`Cannot generate peer ID for common prefix length greater than ${l7}`);const n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint16(0,!1),s=i^32768>>r,o=65535<<16-(r+1),a=s&o|t&~o,c=u7[a],u=new ArrayBuffer(34),l=new DataView(u,0,u.byteLength);return l.setUint8(0,Co.code),l.setUint8(1,32),l.setUint32(2,c,!1),new Uint8Array(l.buffer,l.byteOffset,l.byteLength)}_maxCommonPrefix(){let e=0;for(const t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(const r of this._prefixLengths())r===e&&t++;return t}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:e}of this.routingTable.kb.toIterable()){const t=PX(this.routingTable.kb.localNodeId,e);let r=0;for(const e of t){if(0!==e)break;r++}yield r}}}var d7,f7;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.key=e.bytes();break;case 2:r.value=e.bytes();break;case 3:r.author=e.bytes();break;case 4:r.signature=e.bytes();break;case 5:r.timeReceived=e.string();break;default:e.skipType(7&t);break}}return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(d7||(d7={})),function(e){let t,r,n,i,s,o;(function(e){e["PUT_VALUE"]="PUT_VALUE",e["GET_VALUE"]="GET_VALUE",e["ADD_PROVIDER"]="ADD_PROVIDER",e["GET_PROVIDERS"]="GET_PROVIDERS",e["FIND_NODE"]="FIND_NODE",e["PING"]="PING"})(t=e.MessageType||(e.MessageType={})),function(e){e[e["PUT_VALUE"]=0]="PUT_VALUE",e[e["GET_VALUE"]=1]="GET_VALUE",e[e["ADD_PROVIDER"]=2]="ADD_PROVIDER",e[e["GET_PROVIDERS"]=3]="GET_PROVIDERS",e[e["FIND_NODE"]=4]="FIND_NODE",e[e["PING"]=5]="PING"}(r||(r={})),function(e){e.codec=()=>ew(r)}(t=e.MessageType||(e.MessageType={})),function(e){e["NOT_CONNECTED"]="NOT_CONNECTED",e["CONNECTED"]="CONNECTED",e["CAN_CONNECT"]="CAN_CONNECT",e["CANNOT_CONNECT"]="CANNOT_CONNECT"}(n=e.ConnectionType||(e.ConnectionType={})),function(e){e[e["NOT_CONNECTED"]=0]="NOT_CONNECTED",e[e["CONNECTED"]=1]="CONNECTED",e[e["CAN_CONNECT"]=2]="CAN_CONNECT",e[e["CANNOT_CONNECT"]=3]="CANNOT_CONNECT"}(i||(i={})),function(e){e.codec=()=>ew(i)}(n=e.ConnectionType||(e.ConnectionType={})),function(t){let r;t.codec=()=>(null==r&&(r=tw(((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.id&&(r.uint32(10),r.bytes(t.id)),null==t.addrs)throw new Error('Protocol error: required field "addrs" was not found in object');for(const e of t.addrs)r.uint32(18),r.bytes(e);null!=t.connection&&(r.uint32(24),e.ConnectionType.codec().encode(t.connection,r)),!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={addrs:[]},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.id=t.bytes();break;case 2:n.addrs.push(t.bytes());break;case 3:n.connection=e.ConnectionType.codec().decode(t);break;default:t.skipType(7&r);break}}return n}))),r),t.encode=e=>Gm(e,t.codec()),t.decode=e=>qm(e,t.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>(null==o&&(o=tw(((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.MessageType.codec().encode(t.type,r)),null!=t.clusterLevelRaw&&(r.uint32(80),r.int32(t.clusterLevelRaw)),null!=t.key&&(r.uint32(18),r.bytes(t.key)),null!=t.record&&(r.uint32(26),r.bytes(t.record)),null==t.closerPeers)throw new Error('Protocol error: required field "closerPeers" was not found in object');for(const i of t.closerPeers)r.uint32(66),e.Peer.codec().encode(i,r);if(null==t.providerPeers)throw new Error('Protocol error: required field "providerPeers" was not found in object');for(const i of t.providerPeers)r.uint32(74),e.Peer.codec().encode(i,r);!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={closerPeers:[],providerPeers:[]},i=null==r?t.len:t.pos+r;while(t.pos<i){const r=t.uint32();switch(r>>>3){case 1:n.type=e.MessageType.codec().decode(t);break;case 10:n.clusterLevelRaw=t.int32();break;case 2:n.key=t.bytes();break;case 3:n.record=t.bytes();break;case 8:n.closerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;case 9:n.providerPeers.push(e.Peer.codec().decode(t,t.uint32()));break;default:t.skipType(7&r);break}}return n}))),o),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())}(f7||(f7={}));const p7=f7.MessageType,y7=f7.ConnectionType,g7=Object.keys(p7);class m7{constructor(e,t,r){if(!(t instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=t,this.clusterLevelRaw=r,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const e=this.clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this.clusterLevelRaw=e}serialize(){return f7.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(w7),providerPeers:this.providerPeers.map(w7),record:null==this.record?void 0:this.record.serialize().subarray()})}static deserialize(e){const t=f7.decode(e),r=new m7(t.type??f7.MessageType.PUT_VALUE,t.key??Uint8Array.from([]),t.clusterLevelRaw??0);return r.closerPeers=t.closerPeers.map(v7),r.providerPeers=t.providerPeers.map(v7),null!=t.record?.length&&(r.record=_A.deserialize(t.record)),r}}function w7(e){const t={id:e.id.toBytes(),addrs:(e.multiaddrs??[]).map((e=>e.bytes)),connection:y7.CONNECTED};return t}function v7(e){if(null==e.id)throw new Error("Invalid peer in message");return{id:vm(e.id),multiaddrs:(e.addrs??[]).map((e=>Kl(e))),protocols:[]}}function b7(e){return{...e,name:"SENDING_QUERY",type:0,messageName:e.type,messageType:g7.indexOf(e.type.toString())}}function E7(e){return{...e,name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]}}function _7(e){return{...e,name:"FINAL_PEER",type:2}}function A7(e){return{...e,name:"QUERY_ERROR",type:3}}function S7(e){return{...e,name:"PROVIDER",type:4}}function k7(e){return{...e,name:"VALUE",type:5}}function I7(e){return{...e,name:"DIALING_PEER",type:7}}class T7 extends cq{constructor(e){super(),this.components=new kK;const{protocol:t,lan:r}=e;this.log=Mt(`libp2p:kad-dht:${r?"lan":"wan"}:network`),this.running=!1,this.protocol=t}init(e){this.components=e}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,t,r={}){if(!this.running)return;this.log("sending %s to %p",t.type,e),yield I7({peer:e}),yield b7({to:e,type:t.type});try{const n=await this.components.getConnectionManager().openConnection(e,r),i=await n.newStream(this.protocol,r),s=await this._writeReadMessage(i,t.serialize(),r);yield E7({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record})}catch(nP){yield A7({from:e,error:nP})}finally{null!=i&&i.close()}}async*sendMessage(e,t,r={}){if(!this.running)return;this.log("sending %s to %p",t.type,e),yield I7({peer:e}),yield b7({to:e,type:t.type});try{const n=await this.components.getConnectionManager().openConnection(e,r),i=await n.newStream(this.protocol,r);await this._writeMessage(i,t.serialize(),r),yield E7({from:e,messageType:t.type})}catch(nP){yield A7({from:e,error:nP})}finally{null!=i&&i.close()}}async _writeMessage(e,t,r){null!=r.signal&&(e=eH(e,r.signal)),await W_([t],nH(),e,I_)}async _writeReadMessage(e,t,r){null!=r.signal&&(e=eH(e,r.signal));const n=await W_([t],nH(),e,cH(),(async e=>{const t=await KD(e);if(null!=t)return t;throw Ut(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED")})),i=m7.deserialize(n);return i.closerPeers.forEach((e=>{this.dispatchEvent(new lq("peer",{detail:e}))})),i.providerPeers.forEach((e=>{this.dispatchEvent(new lq("peer",{detail:e}))})),i}}function C7(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var R7=C7,P7=R7,x7=P7;new Uint8Array(0);const O7=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},N7=e=>(new TextEncoder).encode(e),D7=e=>(new TextDecoder).decode(e);class B7{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class L7{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return U7(this,e)}}class M7{constructor(e){this.decoders=e}or(e){return U7(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const U7=(e,t)=>new M7({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class F7{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new B7(e,t,r),this.decoder=new L7(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const j7=({name:e,prefix:t,encode:r,decode:n})=>new F7(e,t,r,n),V7=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=x7(r,t);return j7({prefix:e,name:t,encode:n,decode:e=>O7(i(e))})},z7=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},$7=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},q7=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>j7({prefix:t,name:e,encode(e){return $7(e,n,r)},decode(t){return z7(t,n,r,e)}}),K7=j7({prefix:"\0",name:"identity",encode:e=>D7(e),decode:e=>N7(e)}),H7=q7({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),G7=q7({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),W7=V7({prefix:"9",name:"base10",alphabet:"0123456789"}),Q7=q7({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Y7=q7({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),J7=q7({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),X7=q7({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Z7=q7({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),e9=q7({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),t9=q7({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),r9=q7({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),n9=q7({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i9=q7({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),s9=q7({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),o9=V7({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),a9=V7({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),c9=V7({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u9=V7({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),l9=q7({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),h9=q7({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),d9=q7({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f9=q7({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),p9=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),y9=p9.reduce(((e,t,r)=>(e[r]=t,e)),[]),g9=p9.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);function m9(e){return e.reduce(((e,t)=>(e+=y9[t],e)),"")}function w9(e){const t=[];for(const r of e){const e=g9[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}const v9=j7({prefix:"🚀",name:"base256emoji",encode:m9,decode:w9});var b9=k9,E9=128,_9=127,A9=~_9,S9=Math.pow(2,31);function k9(e,t,r){t=t||[],r=r||0;var n=r;while(e>=S9)t[r++]=255&e|E9,e/=128;while(e&A9)t[r++]=255&e|E9,e>>>=7;return t[r]=0|e,k9.bytes=r-n+1,t}var I9=R9,T9=128,C9=127;function R9(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw R9.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&C9)<<i:(r&C9)*Math.pow(2,i),i+=7}while(r>=T9);return R9.bytes=s-t,n}var P9=Math.pow(2,7),x9=Math.pow(2,14),O9=Math.pow(2,21),N9=Math.pow(2,28),D9=Math.pow(2,35),B9=Math.pow(2,42),L9=Math.pow(2,49),M9=Math.pow(2,56),U9=Math.pow(2,63),F9=function(e){return e<P9?1:e<x9?2:e<O9?3:e<N9?4:e<D9?5:e<B9?6:e<L9?7:e<M9?8:e<U9?9:10},j9={encode:b9,decode:I9,encodingLength:F9},V9=j9,z9=V9;const $9=(e,t,r=0)=>(z9.encode(e,t,r),t),q9=e=>z9.encodingLength(e),K9=(e,t)=>{const r=t.byteLength,n=q9(e),i=n+q9(r),s=new Uint8Array(i+r);return $9(e,s,0),$9(r,s,n),s.set(t,i),new H9(e,r,t,s)};class H9{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const G9=({name:e,code:t,encode:r})=>new W9(e,t,r);class W9{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?K9(this.code,t):t.then((e=>K9(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Q9=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Y9=G9({name:"sha2-256",code:18,encode:Q9("SHA-256")}),J9=G9({name:"sha2-512",code:19,encode:Q9("SHA-512")}),X9=0,Z9="identity",eee=O7,tee=e=>K9(X9,eee(e)),ree={code:X9,name:Z9,encode:eee,digest:tee},nee="raw",iee=85,see=e=>O7(e),oee=e=>O7(e),aee=new TextEncoder,cee=new TextDecoder,uee="json",lee=512,hee=e=>aee.encode(JSON.stringify(e)),dee=e=>JSON.parse(cee.decode(e));new WeakMap;class fee{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==record_node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==record_node_modules_multiformats_src_cid_SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fee.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return fee.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return fee.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&Digest.equals(e.multihash,r.multihash)}toString(e){return record_node_modules_multiformats_src_cid_format(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){const t=e;if(t instanceof fee)return t;if(null!=t&&t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new fee(e,r,n,i||record_node_modules_multiformats_src_cid_encodeCID(e,r,n.bytes))}if(null!=t&&!0===t[record_node_modules_multiformats_src_cid_cidSymbol]){const{version:e,multihash:r,code:n}=t,i=Digest.decode(r);return fee.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==record_node_modules_multiformats_src_cid_DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${record_node_modules_multiformats_src_cid_DAG_PB_CODE}) block encoding`);return new fee(e,t,r,r.bytes);case 1:{const n=record_node_modules_multiformats_src_cid_encodeCID(e,t,r.bytes);return new fee(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return fee.create(0,record_node_modules_multiformats_src_cid_DAG_PB_CODE,e)}static createV1(e,t){return fee.create(1,e,t)}static decode(e){const[t,r]=fee.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=fee.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?fee.createV0(s):fee.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint.decode(e.subarray(t));return n,r};let n=r(),i=record_node_modules_multiformats_src_cid_DAG_PB_CODE;if(18===n?(0,0):r(),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const s=t,o=r(),a=r(),c=t+a,u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u,size:c}}static parse(e,t){const[r,n]=record_node_modules_multiformats_src_cid_parseCIDtoBytes(e,t),i=fee.decode(n);return record_node_modules_multiformats_src_cid_baseCache(i).set(r,e),i}}Symbol.for("@ipld/js-cid/CID");const pee={...et,...tt,...rt,...nt,...it,...st,...ot,...at,...ct,...ut};function yee(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function gee(e=0){return null!=globalThis.Buffer?.allocUnsafe?yee(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function mee(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const wee=mee("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),vee=mee("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=gee(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),bee={utf8:wee,"utf-8":wee,hex:pee.base16,latin1:vee,ascii:vee,binary:vee,...pee};var Eee=bee;function _ee(e,t="utf8"){const r=Eee[t];if(null==r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Aee(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function See(e,t){const r=t.key,n=_ee(r),i=n.split("/");if(i.length<3)return;const s=e[i[1].toString()];if(null==s){const e="Invalid record keytype";throw Ut(new Error(e),"ERR_INVALID_RECORD_KEY_TYPE")}return s(r,t.value)}const kee=async(e,t)=>{if(!(e instanceof Uint8Array))throw Ut(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(e.byteLength<5)throw Ut(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");const r=_ee(e.subarray(0,4));if("/pk/"!==r)throw Ut(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const n=e.slice(4),i=await Y9.digest(t);if(!Aee(n,i.bytes))throw Ut(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")},Iee={pk:kee};function Tee(e,t,r){if(0===r.length){const e="No records given";throw Ut(new Error(e),"ERR_NO_RECORDS_RECEIVED")}const n=_ee(t),i=n.split("/");if(i.length<3){const e="Record key does not have a selector function";throw Ut(new Error(e),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const s=e[i[1].toString()];if(null==s){const e=`Unrecognized key prefix: ${i[1]}`;throw Ut(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:s(t,r)}function Cee(e,t){return 0}const Ree={pk:Cee};class Pee{constructor(e){this.components=new kK;const{validators:t,selectors:r,peerRouting:n,queryManager:i,routingTable:s,network:o,lan:a}=e;this.log=Mt(`libp2p:kad-dht:${a?"lan":"wan"}:content-fetching`),this.validators=t,this.selectors=r,this.peerRouting=n,this.queryManager=i,this.routingTable=s,this.network=o}init(e){this.components=e}async putLocal(e,t){const r=W8(e);await this.components.getDatastore().put(r,t)}async getLocal(e){this.log("getLocal %b",e);const t=W8(e);this.log("fetching record for key %k",t);const r=await this.components.getDatastore().get(t);this.log("found %k in local datastore",t);const n=_A.deserialize(r);return await See(this.validators,n),n}async*sendCorrectionRecord(e,t,r,n={}){this.log("sendCorrection for %b",e);const i=await X8(e,r);for(const{value:s,from:o}of t){if(Fm(s,r)){this.log("record was ok");continue}if(this.components.getPeerId().equals(o)){try{const t=W8(e);this.log(`Storing corrected record for key ${t.toString()}`),await this.components.getDatastore().put(t,i.subarray())}catch(nP){this.log.error("Failed error correcting self",nP)}continue}let t=!1;const a=new m7(p7.PUT_VALUE,e,0);a.record=_A.deserialize(i);for await(const e of this.network.sendRequest(o,a,n))"PEER_RESPONSE"===e.name&&null!=e.record&&Fm(e.record.value,_A.deserialize(i).value)&&(t=!0),yield e;t||(yield A7({from:o,error:Ut(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(e,t,r={}){this.log("put key %b value %b",e,t);const n=await X8(e,t),i=W8(e);this.log(`storing record for key ${i.toString()}`),await this.components.getDatastore().put(i,n.subarray()),yield*W_(this.peerRouting.getClosestPeers(e,{signal:r.signal}),(t=>z_(t,(t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const i=[],s=new m7(p7.PUT_VALUE,e,0);s.record=_A.deserialize(n),this.log("send put to %p",t.peer.id);for await(const e of this.network.sendRequest(t.peer.id,s,r))i.push(e),"PEER_RESPONSE"===e.name&&(null!=e.record&&Fm(e.record.value,_A.deserialize(n).value)||i.push(A7({from:t.peer.id,error:Ut(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return i}))),(e=>yS(e,{ordered:!1,concurrency:M8})),(async function*(e){for await(const t of e)yield*t}))}async*get(e,t={}){this.log("get %b",e);const r=[];for await(const o of this.getMany(e,t))"VALUE"===o.name&&r.push(o),yield o;if(0===r.length)return;const n=r.map((e=>e.value));let i=0;try{i=Tee(this.selectors,e,n)}catch(nP){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==nP.code)throw nP}const s=n[i];if(this.log("GetValue %b %b",e,s),null==s)throw Ut(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,r,s,t),yield r[i]}async*getMany(e,t={}){this.log("getMany values for %b",e);try{const t=await this.getLocal(e);yield k7({value:t.value,from:this.components.getPeerId()})}catch(nP){this.log("error getting local value for %b",e,nP)}const r=await H8(e),n=this.routingTable.closestPeers(r);this.log("found %d peers in routing table",n.length);const i=this,s=async function*({peer:t,signal:r}){for await(const n of i.peerRouting.getValueOrPeers(t,e,{signal:r}))yield n,"PEER_RESPONSE"===n.name&&null!=n.record&&(yield k7({from:t,value:n.record.value}))};yield*this.queryManager.run(e,n,s,t)}}class xee{constructor(e){this.components=new kK;const{network:t,peerRouting:r,queryManager:n,routingTable:i,providers:s,lan:o}=e;this.log=Mt(`libp2p:kad-dht:${o?"lan":"wan"}:content-routing`),this.network=t,this.peerRouting=r,this.queryManager=n,this.routingTable=i,this.providers=s}init(e){this.components=e}async*provide(e,t,r={}){this.log("provide %s",e),await this.providers.addProvider(e,this.components.getPeerId());const n=new m7(p7.ADD_PROVIDER,e.bytes,0);n.providerPeers=[{id:this.components.getPeerId(),multiaddrs:t,protocols:[]}];let i=0;const s=t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const s=[];this.log("putProvider %s to %p",e,t.peer.id);try{this.log("sending provider record for %s to %p",e,t.peer.id);for await(const o of this.network.sendMessage(t.peer.id,n,r))"PEER_RESPONSE"===o.name&&(this.log("sent provider record for %s to %p",e,t.peer.id),i++),s.push(o)}catch(nP){this.log.error("error sending provide record to peer %p",t.peer.id,nP),s.push(A7({from:t.peer.id,error:nP}))}return s};yield*W_(this.peerRouting.getClosestPeers(e.multihash.bytes,r),(e=>z_(e,(e=>s(e)))),(e=>yS(e,{ordered:!1,concurrency:M8})),(async function*(e){for await(const t of e)yield*t})),this.log("sent provider records to %d peers",i)}async*findProviders(e,t){const r=this.routingTable.kBucketSize,n=e.multihash.bytes,i=await H8(n),s=this;this.log("findProviders %c",e);const o=await this.providers.getProviders(e);if(o.length>0){const e=[];for(const t of o.slice(0,r))e.push({id:t,multiaddrs:(await this.components.getPeerStore().addressBook.get(t)??[]).map((e=>e.multiaddr)),protocols:[]});yield E7({from:this.components.getPeerId(),messageType:p7.GET_PROVIDERS,providers:e}),yield S7({from:this.components.getPeerId(),providers:e})}if(o.length>=r)return;const a=async function*({peer:e,signal:t}){const r=new m7(p7.GET_PROVIDERS,n,0);yield*s.network.sendRequest(e,r,{signal:t})},c=new Set(o.map((e=>e.toString())));for await(const u of this.queryManager.run(n,this.routingTable.closestPeers(i),a,t))if(yield u,"PEER_RESPONSE"===u.name){this.log("Found %d provider entries for %c and %d closer peers",u.providers.length,e,u.closer.length);const t=[];for(const e of u.providers)c.has(e.id.toString())||(c.add(e.id.toString()),t.push(e));if(t.length>0&&(yield S7({from:u.from,providers:t})),c.size===r)return}}}class Oee{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((e=>e.peerId))}async add(e){if(null!=this.peerDistances.find((t=>t.peerId.equals(e))))return;const t=await G8(e),r={peerId:e,distance:PX(this.originDhtKey,t)};this.peerDistances.push(r),this.peerDistances.sort(((e,t)=>VU(e.distance,t.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(0===e.length)return!1;if(0===this.length)return!0;const t=await Promise.all(e.map(G8)),r=this.peerDistances[this.peerDistances.length-1].distance;for(const n of t){const e=PX(this.originDhtKey,n);if(VU(e,r)<0)return!0}return!1}}class Nee{constructor(e){this.components=new kK;const{routingTable:t,network:r,validators:n,queryManager:i,lan:s}=e;this.routingTable=t,this.network=r,this.validators=n,this.queryManager=i,this.log=Mt(`libp2p:kad-dht:${s?"lan":"wan"}:peer-routing`)}init(e){this.components=e}async findPeerLocal(e){let t;const r=await this.routingTable.find(e);if(null!=r){this.log("findPeerLocal found %p in routing table",e);try{t=await this.components.getPeerStore().get(r)}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}}if(null==t)try{t=await this.components.getPeerStore().get(e)}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}if(null!=t)return this.log("findPeerLocal found %p in peer store",e),{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}async*_getValueSingle(e,t,r={}){const n=new m7(p7.GET_VALUE,t,0);yield*this.network.sendRequest(e,n,r)}async*getPublicKeyFromNode(e,t={}){const r=Q8(e);for await(const n of this._getValueSingle(e,r,t))if(yield n,"PEER_RESPONSE"===n.name&&null!=n.record){const t=await Em(EE({bytes:n.record.value}));if(!t.equals(e))throw Ut(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==t.publicKey)throw Ut(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");yield k7({from:e,value:t.publicKey})}throw Ut(new Error(`Node not responding with its public key: ${e.toString()}`),"ERR_INVALID_RECORD")}async*findPeer(e,t={}){this.log("findPeer %p",e);const r=await this.findPeerLocal(e);if(null!=r)return this.log("found local"),void(yield _7({from:this.components.getPeerId(),peer:r}));const n=await G8(e),i=this.routingTable.closestPeers(n),s=i.find((t=>t.equals(e)));if(null!=s)try{const t=await this.components.getPeerStore().get(e);return this.log("found in peerStore"),void(yield _7({from:this.components.getPeerId(),peer:{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}))}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}const o=this,a=async function*({peer:t,signal:r}){const n=new m7(p7.FIND_NODE,e.toBytes(),0);for await(const i of o.network.sendRequest(t,n,{signal:r}))if(yield i,"PEER_RESPONSE"===i.name){const t=i.closer.find((t=>t.id.equals(e)));null!=t&&(yield _7({from:i.from,peer:t}))}};let c=!1;for await(const u of this.queryManager.run(e.toBytes(),i,a,t))"FINAL_PEER"===u.name&&(c=!0),yield u;c||(yield A7({from:this.components.getPeerId(),error:Ut(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(e,t={}){this.log("getClosestPeers to %b",e);const r=await H8(e),n=this.routingTable.closestPeers(r),i=this,s=new Oee(r,this.routingTable.kBucketSize);await Promise.all(n.map((async e=>await s.add(e))));const o=async function*({peer:t,signal:r}){i.log("closerPeersSingle %s from %p",vh(e,"base32"),t);const n=new m7(p7.FIND_NODE,e,0);yield*i.network.sendRequest(t,n,{signal:r})};for await(const a of this.queryManager.run(e,n,o,t))yield a,"PEER_RESPONSE"===a.name&&await Promise.all(a.closer.map((async e=>await s.add(e.id))));this.log("found %d peers close to %b",s.length,e);for(const a of s.peers)yield _7({from:this.components.getPeerId(),peer:{id:a,multiaddrs:(await this.components.getPeerStore().addressBook.get(a)??[]).map((e=>e.multiaddr)),protocols:[]}})}async*getValueOrPeers(e,t,r={}){for await(const n of this._getValueSingle(e,t,r)){if("PEER_RESPONSE"===n.name&&null!=n.record)try{await this._verifyRecordOnline(n.record)}catch(nP){const t="invalid record received, discarded";this.log(t),yield A7({from:n.from,error:Ut(new Error(t),"ERR_INVALID_RECORD")});continue}yield n}}async _verifyRecordOnline(e){if(null==e.timeReceived)throw Ut(new Error("invalid record received"),"ERR_INVALID_RECORD");await See(this.validators,new _A(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,t){const r=await H8(e),n=this.routingTable.closestPeers(r),i=[];for(const s of n)if(!s.equals(t))try{const e=await this.components.getPeerStore().addressBook.get(s),t=await this.components.getPeerStore().protoBook.get(s);i.push({id:s,multiaddrs:e.map((e=>e.multiaddr)),protocols:t})}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,e,t):this.log("getCloserPeersOffline could not find peer closer to %b than %p",e,t),i}}const Dee=Mt("libp2p:kad-dht:providers");class Bee{constructor(e={}){this.components=new kK;const{cacheSize:t,cleanupInterval:r,provideValidity:n}=e;this.cleanupInterval=r??B8,this.provideValidity=n??D8,this.cache=op(t??N8),this.syncQueue=new Wp({concurrency:1}),this.started=!1}init(e){this.components=e}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((e=>{Dee.error(e)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){return await this.syncQueue.add((async()=>{const e=Date.now();let t=0,r=0;const n=new Map,i=this.components.getDatastore().batch(),s=this.components.getDatastore().query({prefix:O8});for await(const o of s)try{const{cid:e,peerId:s}=Uee(o.key),a=jee(o.value).getTime(),c=Date.now(),u=c-a,l=u>this.provideValidity;if(Dee("comparing: %d - %d = %d > %d %s",c,a,u,this.provideValidity,l?"(expired)":""),l){r++,i.delete(o.key);const t=n.get(e)??new Set;t.add(s),n.set(e,t)}t++}catch(nP){Dee.error(nP.message)}n.size>0?(Dee("deleting %d / %d entries",r,t),await i.commit()):Dee("nothing to delete");for(const[o,a]of n){const e=Lee(o),t=this.cache.get(e);if(null!=t){for(const e of a)t.delete(e);0===t.size?this.cache.remove(e):this.cache.set(e,t)}}Dee("Cleanup successful (%dms)",Date.now()-e)}))}async _getProvidersMap(e){const t=Lee(e);let r=this.cache.get(t);return null==r&&(r=await Fee(this.components.getDatastore(),e),this.cache.set(t,r)),r}async addProvider(e,t){return await this.syncQueue.add((async()=>{Dee("%p provides %s",t,e);const r=await this._getProvidersMap(e);Dee("loaded %s provs",r.size);const n=new Date;r.set(t.toString(),n);const i=Lee(e);this.cache.set(i,r),await Mee(this.components.getDatastore(),e,t,n)}))}async getProviders(e){return await this.syncQueue.add((async()=>{Dee("get providers for %s",e);const t=await this._getProvidersMap(e);return[...t.keys()].map((e=>wm(e)))}))}}function Lee(e){const t="string"===typeof e?e:vh(e.multihash.bytes,"base32");return`${O8}/${t}`}async function Mee(e,t,r,n){const i=[Lee(t),"/",r.toString()].join(""),s=new Df(i),o=Uint8Array.from(Wu.encode(n.getTime()));return await e.put(s,o)}function Uee(e){const t=e.toString().split("/");if(5!==t.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${e.toString()}`);return{cid:t[3],peerId:t[4]}}async function Fee(e,t){const r=new Map,n=e.query({prefix:Lee(t)});for await(const i of n){const{peerId:e}=Uee(i.key);r.set(e,jee(i.value))}return r}function jee(e){return new Date(Wu.decode(e))}const Vee=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*zee(e){const{key:t,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:o,pathIndex:a,numPaths:c,cleanUp:u,queryFuncTimeout:l,log:h,peersSeen:d}=e,f=new Wp({concurrency:o}),p=await H8(t);function y(e,r){if(null==e)return;d.add(e);const o=BigInt("0x"+vh(PX(r,p),"base16"));f.add((async()=>{let r;const u=[i];null!=l&&(r=new sa.TimeoutController(l),u.push(r.signal));const g=(0,Uf.anySignal)(u);try{for await(const r of s({key:t,peer:e,signal:g,pathIndex:a,numPaths:c})){if(g.aborted)return;if("PEER_RESPONSE"===r.name)for(const i of r.closer){if(d.has(i.id)){h("already seen %p in query",i.id);continue}if(n.equals(i.id)){h("not querying ourselves");continue}const r=await G8(i.id),s=BigInt("0x"+vh(PX(r,p),"base16"));s>o?h("skipping %p as they are not closer to %b than %p",i.id,t,e):(h("querying closer peer %p",i.id),y(i.id,r))}f.emit("completed",r)}r?.clear()}catch(nP){i.aborted?f.emit("error",nP):f.emit("completed",A7({from:e,error:nP}))}finally{r?.clear()}}),{priority:Vee-o}).catch((e=>{h.error(e)}))}y(r,await G8(r)),yield*$ee(f,i,u,h)}async function*$ee(e,t,r,n){let i=pH(),s=!0;const o=[],a=()=>{s&&(n("clean up queue, results %d, queue size %d, pending tasks %d",o.length,e.size,e.pending),s=!1,e.clear(),o.splice(0,o.length))};e.on("completed",(e=>{o.push(e),i.resolve()})),e.on("error",(e=>{n("queue error",e),a(),i.reject(e)})),e.on("idle",(()=>{n("queue idle"),s=!1,i.resolve()})),t.addEventListener("abort",(()=>{n("abort queue");const e=s;a(),e&&i.reject(Ut(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),r.addEventListener("cleanup",(()=>{a(),i.resolve()}));while(s){await i.promise,i=pH();while(o.length>0){const e=o.shift();null!=e&&(yield e)}}yield*o}const qee="running-queries";class Kee{constructor(e){this.components=new kK;const{lan:t=!1,disjointPaths:r=L8,alpha:n=M8}=e;this.disjointPaths=r??L8,this.controllers=new Set,this.running=!1,this.alpha=n??M8,this.lan=t,this.queries=0}init(e){this.components=e}isStarted(){return this.running}async start(){this.running=!0}async stop(){this.running=!1;for(const e of this.controllers)e.abort();this.controllers.clear()}async*run(e,t,r,n={}){if(!this.running)throw new Error("QueryManager not started");let i;if(null==n.signal){i=new sa.TimeoutController(z8),n.signal=i.signal;try{null!=KX.setMaxListeners&&(0,KX.setMaxListeners)(1/0,i.signal)}catch{}}const s=new AbortController;this.controllers.add(s);const o=[s.signal];null!=n.signal&&o.push(n.signal);const a=(0,Uf.anySignal)(o);try{null!=KX.setMaxListeners&&(0,KX.setMaxListeners)(1/0,a)}catch{}const c=Mt(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+vh(e,"base58btc")),u=t.slice(0,Math.min(this.disjointPaths,t.length)),l=Date.now(),h=new cq;try{if(c("query:start"),this.queries++,this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:qee,value:this.queries}),0===t.length)return void c.error("Running query with no peers");const o=new lZ,d=u.map(((t,i)=>zee({key:e,startingPeer:t,ourPeerId:this.components.getPeerId(),signal:a,query:r,pathIndex:i,numPaths:u.length,alpha:this.alpha,cleanUp:h,queryFuncTimeout:n.queryFuncTimeout,log:c,peersSeen:o})));for await(const e of $_(...d))yield e,"QUERY_ERROR"===e.name&&c("error",e.error)}catch(nP){if(this.running||"ERR_QUERY_ABORTED"!==nP.code)throw nP}finally{this.controllers.delete(s),null!=i&&i.clear(),this.queries--,this.components.getMetrics()?.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:qee,value:this.queries}),h.dispatchEvent(new lq("cleanup")),c("query:done in %dms",Date.now()-l)}}}const Hee=Mt("libp2p:kad-dht:rpc:handlers:add-provider");class Gee{constructor(e){const{providers:t}=e;this.providers=t}init(){}async handle(e,t){if(Hee("start"),null==t.key||0===t.key.length)throw Ut(new Error("Missing key"),"ERR_MISSING_KEY");let r;try{r=Zt.k.decode(t.key)}catch(nP){throw Ut(new Error("Invalid CID"),"ERR_INVALID_CID")}null!=t.providerPeers&&0!==t.providerPeers.length||Hee.error("no providers found in message"),await Promise.all(t.providerPeers.map((async t=>{t.id.equals(e)?t.multiaddrs.length<1?Hee("no valid addresses for provider %p. Ignore",e):(Hee("received provider %p for %s (addrs %s)",e,r,t.multiaddrs.map((e=>e.toString()))),await this.providers.addProvider(r,t.id)):Hee("invalid provider peer %p from %p",t.id,e)})))}}const Wee=Mt("libp2p:kad-dht:rpc:handlers:find-node");class Qee{constructor(e){this.components=new kK;const{peerRouting:t,lan:r}=e;this.peerRouting=t,this.lan=Boolean(r)}init(e){this.components=e}async handle(e,t){Wee("incoming request from %p for peers closer to %b",e,t.key);let r=[];r=Fm(this.components.getPeerId().toBytes(),t.key)?[{id:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(Gu("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(t.key,e),r=r.map(this.lan?K8:q8).filter((({multiaddrs:e})=>e.length));const n=new m7(t.type,new Uint8Array(0),t.clusterLevel);return r.length>0?n.closerPeers=r:Wee("could not find any peers closer to %b than %p",t.key,e),n}}const Yee=Mt("libp2p:kad-dht:rpc:handlers:get-providers");class Jee{constructor(e){this.components=new kK;const{peerRouting:t,providers:r,lan:n}=e;this.peerRouting=t,this.providers=r,this.lan=Boolean(n)}init(e){this.components=e}async handle(e,t){let r;try{r=Zt.k.decode(t.key)}catch(nP){throw Ut(new Error("Invalid CID"),"ERR_INVALID_CID")}Yee("%p asking for providers for %s",e,r);const[n,i]=await Promise.all([this.providers.getProviders(r),this.peerRouting.getCloserPeersOffline(t.key,e)]),s=await this._getPeers(n),o=await this._getPeers(i.map((({id:e})=>e))),a=new m7(t.type,t.key,t.clusterLevel);return s.length>0&&(a.providerPeers=s),o.length>0&&(a.closerPeers=o),Yee("got %s providers %s closerPeers",s.length,o.length),a}async _getAddresses(e){const t=await this.components.getPeerStore().addressBook.get(e);return t.map((e=>e.multiaddr))}async _getPeers(e){const t=[],r=this.lan?K8:q8;for(const n of e){const e=r({id:n,multiaddrs:await this._getAddresses(n),protocols:[]});e.multiaddrs.length>0&&t.push(e)}return t}}const Xee=Mt("libp2p:kad-dht:rpc:handlers:get-value");class Zee{constructor(e){this.components=new kK;const{peerRouting:t}=e;this.peerRouting=t}init(e){this.components=e}async handle(e,t){const r=t.key;if(Xee("%p asked for key %b",e,r),null==r||0===r.length)throw Ut(new Error("Invalid key"),"ERR_INVALID_KEY");const n=new m7(p7.GET_VALUE,r,t.clusterLevel);if(Y8(r)){Xee("is public key");const e=J8(r);let t;try{const r=await this.components.getPeerStore().keyBook.get(e);if(null==r)throw Ut(new Error("No public key found in key book"),"ERR_NOT_FOUND");t=r}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}if(null!=t)return Xee("returning found public key"),n.record=new _A(r,t,new Date),n}const[i,s]=await Promise.all([this._checkLocalDatastore(r),this.peerRouting.getCloserPeersOffline(t.key,e)]);return null!=i&&(Xee("had record for %b in local datastore",r),n.record=i),s.length>0&&(Xee("had %s closer peers in routing table",s.length),n.closerPeers=s),n}async _checkLocalDatastore(e){Xee("checkLocalDatastore looking for %b",e);const t=W8(e);let r;try{r=await this.components.getDatastore().get(t)}catch(nP){if("ERR_NOT_FOUND"===nP.code)return;throw nP}const n=_A.deserialize(r);if(null==n)throw Ut(new Error("Invalid record"),"ERR_INVALID_RECORD");if(!(null==n.timeReceived||Date.now()-n.timeReceived.getTime()>T8))return n;await this.components.getDatastore().delete(t)}}const ete=Mt("libp2p:kad-dht:rpc:handlers:ping");class tte{async handle(e,t){return ete("ping from %p",e),t}init(){}}class rte{constructor(e){this.components=new kK;const{validators:t}=e;this.log=Mt("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=t}init(e){this.components=e}async handle(e,t){const r=t.key;this.log("%p asked us to store value for key %b",e,r);const n=t.record;if(null==n){const t=`Empty record from: ${e.toString()}`;throw this.log.error(t),Ut(new Error(t),"ERR_EMPTY_RECORD")}try{await See(this.validators,n),n.timeReceived=new Date;const e=W8(n.key);await this.components.getDatastore().put(e,n.serialize().subarray()),this.log("put record for %b into datastore under key %k",r,e)}catch(nP){this.log("did not put record for key %b into datastore %o",r,nP)}return t}}class nte{constructor(e){const{providers:t,peerRouting:r,validators:n,lan:i}=e;this.log=Mt("libp2p:kad-dht:rpc"),this.routingTable=e.routingTable,this.handlers={[p7.GET_VALUE]:new Zee({peerRouting:r}),[p7.PUT_VALUE]:new rte({validators:n}),[p7.FIND_NODE]:new Qee({peerRouting:r,lan:i}),[p7.ADD_PROVIDER]:new Gee({providers:t}),[p7.GET_PROVIDERS]:new Jee({peerRouting:r,providers:t,lan:i}),[p7.PING]:new tte}}init(e){for(const t of Object.values(this.handlers))t.init(e)}async handleMessage(e,t){try{await this.routingTable.add(e)}catch(nP){this.log.error("Failed to update the kbucket store",nP)}const r=this.handlers[t.type];if(null!=r)return await r.handle(e,t);this.log.error(`no handler found for message type: ${t.type}`)}onIncomingStream(e){Promise.resolve().then((async()=>{const{stream:t,connection:r}=e,n=r.remotePeer;try{await this.routingTable.add(n)}catch(nP){this.log.error(nP)}const i=this;await W_(t,cH(),(async function*(e){for await(const t of e){const e=m7.deserialize(t);i.log("incoming %s from %p",e.type,n);const r=await i.handleMessage(n,e);null!=r&&(yield r.serialize())}}),nH(),t)})).catch((e=>{this.log.error(e)}))}}class ite extends cq{constructor(e){super(),this.components=new kK;const{protocol:t,lan:r}=e;this.log=Mt("libp2p:kad-dht:topology-listener:"+(r?"lan":"wan")),this.running=!1,this.protocol=t}init(e){this.components=e}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const e=sq({onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new lq("peer",{detail:e}))}});this.registrarId=await this.components.getRegistrar().register(this.protocol,e)}stop(){this.running=!1,null!=this.registrarId&&(this.components.getRegistrar().unregister(this.registrarId),this.registrarId=void 0)}}class ste{constructor(e){this.components=new kK;const{peerRouting:t,lan:r,count:n,interval:i,queryTimeout:s}=e;this.log=Mt(`libp2p:kad-dht:${r?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=t,this.count=n??L8,this.interval=i??U8,this.queryTimeout=s??F8}init(e){this.components=e}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const e=new sa.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const t=(0,Uf.anySignal)([this.controller.signal,e.signal]);try{null!=KX.setMaxListeners&&(0,KX.setMaxListeners)(1/0,t)}catch{}const r=await W_(this.peerRouting.getClosestPeers(this.components.getPeerId().toBytes(),{signal:t}),(e=>C_(e,this.count)),(async e=>await AU(e)));this.log("query ran successfully - found %d peers",r)}catch(nP){this.log("query error",nP)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),e.clear()}})).catch((e=>{this.log("query error",e)}))}}const ote=32,ate=64;class cte extends cq{constructor(e){super(),this.components=new kK;const{kBucketSize:t,clientMode:r,validators:n,selectors:i,querySelfInterval:s,lan:o,protocolPrefix:a,pingTimeout:c,pingConcurrency:u,maxInboundStreams:l,maxOutboundStreams:h}=e;this.running=!1,this.lan=Boolean(o),this.log=Mt("libp2p:kad-dht:"+(!0===o?"lan":"wan")),this.protocol=`${a??R8}${!0===o?C8:""}${P8}`,this.kBucketSize=t??20,this.clientMode=r??!0,this.maxInboundStreams=l??ote,this.maxOutboundStreams=h??ate,this.routingTable=new c7({kBucketSize:t,lan:this.lan,pingTimeout:c,pingConcurrency:u,protocol:this.protocol}),this.providers=new Bee,this.validators={...Iee,...n},this.selectors={...Ree,...i},this.network=new T7({protocol:this.protocol,lan:this.lan}),this.queryManager=new Kee({disjointPaths:Math.ceil(this.kBucketSize/2),lan:o}),this.peerRouting=new Nee({routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new Pee({validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new xee({network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new h7({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new nte({routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new ite({protocol:this.protocol,lan:this.lan}),this.querySelf=new ste({peerRouting:this.peerRouting,interval:s,lan:this.lan}),this.network.addEventListener("peer",(e=>{const t=e.detail;this.onPeerConnect(t).catch((e=>{this.log.error("could not add %p to routing table",t.id,e)})),this.dispatchEvent(new lq("peer",{detail:t}))})),this.topologyListener.addEventListener("peer",(e=>{const t=e.detail;Promise.resolve().then((async()=>{const e=await this.components.getPeerStore().addressBook.get(t),r={id:t,multiaddrs:e.map((e=>e.multiaddr)),protocols:[]};await this.onPeerConnect(r)})).catch((e=>{this.log.error("could not add %p to routing table",t,e)}))}))}get[OX](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}init(e){this.components=e,this.routingTable.init(e),this.providers.init(e),this.network.init(e),this.queryManager.init(e),this.peerRouting.init(e),this.contentFetching.init(e),this.contentRouting.init(e),this.routingTableRefresh.init(e),this.rpc.init(e),this.topologyListener.init(e),this.querySelf.init(e)}async onPeerConnect(e){if(this.log("peer %p connected with protocols %s",e.id,e.protocols),e=this.lan?K8(e):q8(e),0!==e.multiaddrs.length)try{await this.routingTable.add(e.id)}catch(nP){this.log.error("could not add %p to routing table",e.id,nP)}else this.log("ignoring %p as they do not have any %s addresses in %s",e.id,this.lan?"private":"public",e.multiaddrs.map((e=>e.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.getRegistrar().unhandle(this.protocol),"client"===e?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(e,t,r={}){yield*this.contentFetching.put(e,t,r)}async*get(e,t={}){yield*this.contentFetching.get(e,t)}async*provide(e,t={}){yield*this.contentRouting.provide(e,this.components.getAddressManager().getAddresses(),t)}async*findProviders(e,t={}){yield*this.contentRouting.findProviders(e,t)}async*findPeer(e,t={}){yield*this.peerRouting.findPeer(e,t)}async*getClosestPeers(e,t={}){yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(){await this.routingTableRefresh.refreshTable(!0)}}const ute=Mt("libp2p:kad-dht");class lte extends cq{constructor(e,t){super(),this.components=new kK,this.wan=e,this.lan=t,this.wan.addEventListener("peer",(e=>{this.dispatchEvent(new lq("peer",{detail:e.detail}))})),this.lan.addEventListener("peer",(e=>{this.dispatchEvent(new lq("peer",{detail:e.detail}))}))}get[OX](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}init(e){this.components=e,this.wan.init(e),this.lan.init(e)}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(e){await this.wan.setMode(e)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(e,t,r={}){for await(const n of $_(this.lan.put(e,t,r),this.wan.put(e,t,r)))yield n}async*get(e,t={}){let r=!1,n=!1;for await(const i of $_(this.lan.get(e,t),this.wan.get(e,t)))yield i,"DIALING_PEER"===i.name&&(r=!0),"VALUE"===i.name&&(r=!0,null!=i.value&&(n=!0)),"SENDING_QUERY"===i.name&&(r=!0);if(!r)throw Ut(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");n||(yield A7({from:this.components.getPeerId(),error:Ut(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(e,t={}){let r=0,n=0;const i=[],s=[this.lan];"server"===await this.wan.getMode()&&s.push(this.wan);for await(const o of $_(...s.map((r=>r.provide(e,t)))))yield o,"SENDING_QUERY"===o.name&&r++,"QUERY_ERROR"===o.name&&i.push(o.error),"PEER_RESPONSE"===o.name&&"ADD_PROVIDER"===o.messageName&&(ute("sent provider record for %s to %p",e,o.from),n++);if(0===n){if(i.length>0)throw Ut(new Error(`Failed to provide to ${i.length} of ${r} peers`),"ERR_PROVIDES_FAILED",{errors:i});throw Ut(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async*findProviders(e,t={}){yield*$_(this.lan.findProviders(e,t),this.wan.findProviders(e,t))}async*findPeer(e,t={}){let r=!1;for await(const n of $_(this.lan.findPeer(e,t),this.wan.findPeer(e,t)))yield n,"SENDING_QUERY"!==n.name&&"FINAL_PEER"!==n.name||(r=!0);if(!r)throw Ut(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(e,t={}){yield*$_(this.lan.getClosestPeers(e,t),this.wan.getClosestPeers(e,t))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class hte extends lte{constructor(e){super(new cte({protocolPrefix:"/ipfs",...e,lan:!1}),new cte({protocolPrefix:"/ipfs",...e,clientMode:!1,lan:!0}))}}const dte=Mt("libp2p:bootstrap");class fte extends cq{constructor(e={list:[]}){if(null==e.list||0===e.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this.interval=e.interval??1e4,this.list=[];for(const t of e.list){if(!dh.matches(t)){dte.error("Invalid multiaddr");continue}const e=Kl(t),r=e.getPeerId();if(null==r){dte.error("Invalid bootstrap multiaddr without peer id");continue}const n={id:wm(r),multiaddrs:[e],protocols:[]};this.list.push(n)}}get[OX](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){null==this.timer&&(this.timer=setInterval((()=>this._discoverBootstrapPeers()),this.interval),dte("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){null!=this.timer&&this.list.forEach((e=>{this.dispatchEvent(new lq("peer",{detail:e}))}))}stop(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}fte.tag="bootstrap";var pte=WebSocket,yte=r(4772);function gte(e){return e instanceof ArrayBuffer||"ArrayBuffer"===e?.constructor?.name&&"number"===typeof e?.byteLength}var mte=e=>{e.binaryType="arraybuffer";const t=async()=>await new Promise(((t,r)=>{if(i)return t();if(null!=n)return r(n);const s=t=>{e.removeEventListener("open",o),e.removeEventListener("error",a),t()},o=()=>s(t),a=t=>{s((()=>r(t.error??new Error(`connect ECONNREFUSED ${e.url}`))))};e.addEventListener("open",o),e.addEventListener("error",a)})),r=async function*(){const r=new yte.zN((({push:t,stop:r,fail:n})=>{const i=e=>{let r=null;"string"===typeof e.data&&(r=ia(e.data)),gte(e.data)&&(r=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(r=e.data),null!=r&&t(r)},s=e=>n(e.error??new Error("Socket error"));return e.addEventListener("message",i),e.addEventListener("error",s),e.addEventListener("close",r),()=>{e.removeEventListener("message",i),e.removeEventListener("error",s),e.removeEventListener("close",r)}}),{highWaterMark:1/0});await t();for await(const e of r)yield gte(e)?new Uint8Array(e):e}();let n,i=1===e.readyState;return e.addEventListener("open",(()=>{i=!0,n=null})),e.addEventListener("close",(()=>{i=!1,n=null})),e.addEventListener("error",(t=>{i||(n=t.error??new Error(`connect ECONNREFUSED ${e.url}`))})),Object.assign(r,{connected:t})},wte=e=>{if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise(((t,r)=>{function n(){e.removeEventListener("open",i),e.removeEventListener("error",s)}function i(){n(),t()}function s(t){n(),r(t.error??new Error(`connect ECONNREFUSED ${e.url}`))}e.addEventListener("open",i),e.addEventListener("error",s)}))},vte=(e,t)=>{t=t??{},t.closeOnEnd=!1!==t.closeOnEnd;const r=async r=>{for await(const t of r){try{await wte(e)}catch(nP){if("socket closed"===nP.message)break;throw nP}e.send(t)}if(null!=t.closeOnEnd&&e.readyState<=1)return await new Promise(((t,r)=>{e.addEventListener("close",(e=>{if(e.wasClean||1006===e.code)t();else{const t=Object.assign(new Error("ws error"),{event:e});r(t)}})),setTimeout((()=>e.close()))}))};return r},bte=(e,t)=>{t=t??{};const r=mte(e);let n=t.remoteAddress,i=t.remotePort;if(null!=e.url)try{const t=new URL(e.url);n=t.hostname,i=parseInt(t.port,10)}catch{}if(null==n||null==i)throw new Error("Remote connection did not have address and/or port");const s={sink:vte(e,t),source:r,connected:async()=>await r.connected(),close:async()=>{e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN||await new Promise((t=>{e.addEventListener("close",(()=>{t()})),e.close()}))},destroy:()=>{null!=e.terminate?e.terminate():e.close()},remoteAddress:n,remotePort:i,socket:e};return s};const Ete={http:"ws",https:"wss"},_te="ws";var Ate=(e,t)=>(0,wh.relative)(e,t,Ete,_te);function Ste(e,t){const r="undefined"===typeof window?"":window.location;t=t??{};const n=Ate(e,r.toString()),i=new pte(n,t.websocket);return bte(i,t)}function kte(){throw new Error("WebSocket Servers can not be created in the browser!")}const Ite=421,Tte=290,Cte=6,Rte=478,Pte=2e3,xte=Mt("libp2p:websockets:socket");function Ote(e,t,r){r=r??{};const n={async sink(t){null!=r?.signal&&(t=XK(t,r.signal));try{await e.sink(t)}catch(nP){"aborted"!==nP.type&&xte.error(nP)}},source:null!=r.signal?XK(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},async close(){const t=Date.now();try{await _B(e.close(),{milliseconds:Pte})}catch(nP){const{host:i,port:s}=n.remoteAddr.toOptions();xte("timeout closing stream to %s:%s after %dms, destroying it manually",i,s,Date.now()-t),e.destroy()}finally{n.timeline.close=Date.now()}}};return e.socket.addEventListener("close",(()=>{null==n.timeline.close&&(n.timeline.close=Date.now())}),{once:!0}),n}function Nte(e){return e.filter((e=>{if(e.protoCodes().includes(Tte))return!1;const t=e.decapsulateCode(Ite);return th.matches(t)||rh.matches(t)}))}function Dte(e){return e.filter((e=>{if(e.protoCodes().includes(Tte))return!1;const t=e.decapsulateCode(Ite);return rh.matches(t)&&Ql.matches(t.decapsulateCode(Cte).decapsulateCode(Rte))}))}const Bte=Mt("libp2p:websockets");class Lte{constructor(e){this.init=e}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[xX](){return!0}async dial(e,t){Bte("dialing %s",e),t=t??{};const r=await this._connect(e,t),n=Ote(r,e);Bte("new outbound connection %s",n.remoteAddr);const i=await t.upgrader.upgradeOutbound(n);return Bte("outbound connection %s upgraded",n.remoteAddr),i}async _connect(e,t){if(!0===t?.signal?.aborted)throw new l8;const r=e.toOptions();Bte("dialing %s:%s",r.host,r.port);const n=pH(),i=e=>{Bte.error("connection error:",e),n.reject(e)},s=Ste(cB(e),this.init);if(null!=s.socket.on?s.socket.on("error",i):s.socket.onerror=i,null==t.signal)return await Promise.race([s.connected(),n.promise]),Bte("connected %s",e),s;let o;const a=new Promise(((e,r)=>{if(o=()=>{r(new l8),s.close().catch((e=>{Bte.error("error closing raw socket",e)}))},!0===t?.signal?.aborted)return o();t?.signal?.addEventListener("abort",o)}));try{await Promise.race([a,n.promise,s.connected()])}finally{null!=o&&t?.signal?.removeEventListener("abort",o)}return Bte("connected %s",e),s}createListener(e){return kte({...this.init,...e})}filter(e){return e=Array.isArray(e)?e:[e],null!=this.init?.filter?this.init?.filter(e):X3||r6?Dte(e):Nte(e)}}function Mte(e){return new Uint8Array(e)}var Ute;(function(e){e[e["NEW_STREAM"]=0]="NEW_STREAM",e[e["MESSAGE_RECEIVER"]=1]="MESSAGE_RECEIVER",e[e["MESSAGE_INITIATOR"]=2]="MESSAGE_INITIATOR",e[e["CLOSE_RECEIVER"]=3]="CLOSE_RECEIVER",e[e["CLOSE_INITIATOR"]=4]="CLOSE_INITIATOR",e[e["RESET_RECEIVER"]=5]="RESET_RECEIVER",e[e["RESET_INITIATOR"]=6]="RESET_INITIATOR"})(Ute||(Ute={}));const Fte=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),jte=Object.freeze({NEW_STREAM:Ute.NEW_STREAM,MESSAGE:Ute.MESSAGE_INITIATOR,CLOSE:Ute.CLOSE_INITIATOR,RESET:Ute.RESET_INITIATOR}),Vte=Object.freeze({MESSAGE:Ute.MESSAGE_RECEIVER,CLOSE:Ute.CLOSE_RECEIVER,RESET:Ute.RESET_RECEIVER}),zte=10240;class $te{constructor(){this._pool=Mte(zte),this._poolOffset=0}write(e){const t=this._pool;let r=this._poolOffset;Wu.encode(e.id<<3|e.type,t,r),r+=Wu.encode.bytes,e.type!==Ute.NEW_STREAM&&e.type!==Ute.MESSAGE_INITIATOR&&e.type!==Ute.MESSAGE_RECEIVER||null==e.data?Wu.encode(0,t,r):Wu.encode(e.data.length,t,r),r+=Wu.encode.bytes;const n=t.subarray(this._poolOffset,r);return zte-r<100?(this._pool=Mte(zte),this._poolOffset=0):this._poolOffset=r,e.type!==Ute.NEW_STREAM&&e.type!==Ute.MESSAGE_INITIATOR&&e.type!==Ute.MESSAGE_RECEIVER||null==e.data?[n]:[n,...e.data instanceof Uint8Array?[e.data]:e.data]}}const qte=new $te;async function*Kte(e){for await(const t of e)if(Array.isArray(t))for(const e of t)yield*qte.write(e);else yield*qte.write(t)}class Hte{constructor(){this._buffer=new iT,this._headerInfo=null}write(e){if(null==e||0===e.length)return[];this._buffer.append(e);const t=[];while(0!==this._buffer.length){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(r){break}const{id:e,type:n,length:i,offset:s}=this._headerInfo,o=this._buffer.length-s;if(o<i)break;const a={id:e,type:n};n!==Ute.NEW_STREAM&&n!==Ute.MESSAGE_INITIATOR&&n!==Ute.MESSAGE_RECEIVER||(a.data=this._buffer.sublist(s,s+i)),t.push(a),this._buffer.consume(s+i),this._headerInfo=null}return t}_decodeHeader(e){const{value:t,offset:r}=Qte(e),{value:n,offset:i}=Qte(e,r),s=7&t;if(null==Fte[s])throw new Error(`Invalid type received: ${s}`);return{id:t>>3,type:s,offset:r+i,length:n}}}const Gte=128,Wte=127;function Qte(e,t=0){let r,n=0,i=0,s=t;const o=e.length;do{if(s>=o||i>49)throw t=0,new RangeError("Could not decode varint");r=e.get(s++),n+=i<28?(r&Wte)<<i:(r&Wte)*Math.pow(2,i),i+=7}while(r>=Gte);return t=s-t,{value:n,offset:t}}async function*Yte(e){const t=new Hte;for await(const r of e){const e=t.write(r);e.length>0&&(yield e)}}const Jte=1<<20;function Xte(e){const t=e??Jte,r=e=>{if((e.type===Ute.NEW_STREAM||e.type===Ute.MESSAGE_INITIATOR||e.type===Ute.MESSAGE_RECEIVER)&&e.data.byteLength>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return e=>async function*(){for await(const t of e)Array.isArray(t)?(t.forEach(r),yield*t):(r(t),yield t)}()}const Zte=Mt("libp2p:mplex:stream"),ere="ERR_STREAM_RESET",tre="ERR_STREAM_ABORT",rre="ERR_SINK_ENDED",nre="ERR_DOUBLE_SINK";function ire(e){const{id:t,name:r,send:n,onEnd:i,type:s="initiator",maxMsgSize:o=Jte}=e,a=new AbortController,c=new AbortController,u=new AbortController,l="initiator"===s?jte:Vte,h="initiator"===s?`i${t}`:`r${t}`,d=`${null==r?t:r}`;let f,p=!1,y=!1,g=!1;const m={open:Date.now()},w=e=>{p||(p=!0,Zte.trace("%s stream %s source end - err: %o",s,d,e),null!=e&&null==f&&(f=e),y&&(E.stat.timeline.close=Date.now(),null!=i&&i(f)))},v=e=>{y||(y=!0,Zte.trace("%s stream %s sink end - err: %o",s,d,e),null!=e&&null==f&&(f=e),p&&(m.close=Date.now(),null!=i&&i(f)))},b=O_({onEnd:w}),E={close:()=>{Zte.trace("%s stream %s close",s,d),E.closeRead(),E.closeWrite()},closeRead:()=>{Zte.trace("%s stream %s closeRead",s,d),p||b.end()},closeWrite:()=>{if(Zte.trace("%s stream %s closeWrite",s,d),!y){u.abort();try{n({id:t,type:l.CLOSE})}catch(nP){Zte.trace("%s stream %s error sending close",s,r,nP)}v()}},abort:e=>{Zte.trace("%s stream %s abort",s,d,e),b.end(e),a.abort(),v(e)},reset:()=>{const e=Ut(new Error("stream reset"),ere);c.abort(),b.end(e),v(e)},sink:async e=>{if(g)throw Ut(new Error("sink already called on stream"),nre);if(g=!0,y)throw Ut(new Error("stream closed for writing"),rre);e=XK(e,(0,Uf.anySignal)([a.signal,c.signal,u.signal]));try{"initiator"===s&&n({id:t,type:jte.NEW_STREAM,data:new iT(ia(d))});const r=new iT;for await(const i of e)if(i.length<=o)n({id:t,type:l.MESSAGE,data:i instanceof iT?i:new iT(i)});else{r.append(i);while(0!==r.length){if(r.length<=o){n({id:t,type:l.MESSAGE,data:r.sublist()}),r.consume(r.length);break}n({id:t,type:l.MESSAGE,data:r.sublist(0,o)}),r.consume(o)}}}catch(nP){if("aborted"===nP.type&&"The operation was aborted"===nP.message){if(u.signal.aborted)return;c.signal.aborted&&(nP.message="stream reset",nP.code=ere),a.signal.aborted&&(nP.message="stream aborted",nP.code=tre)}if(nP.code===ere)Zte.trace("%s stream %s reset",s,r);else{Zte.trace("%s stream %s error",s,r,nP);try{n({id:t,type:l.RESET})}catch(nP){Zte.trace("%s stream %s error sending reset",s,r,nP)}}return b.end(nP),void v(nP)}try{n({id:t,type:l.CLOSE})}catch(nP){Zte.trace("%s stream %s error sending close",s,r,nP)}v()},source:b,sourcePush:e=>{b.push(e)},sourceReadableLength(){return b.readableLength},stat:{direction:"initiator"===s?"outbound":"inbound",timeline:m},metadata:{},id:h};return E}var sre=r(5024);const ore=Mt("libp2p:mplex"),are=1024,cre=1024,ure=4194304,lre=5;function hre(e){const t={...e,type:`${Fte[e.type]} (${e.type})`};return e.type===Ute.NEW_STREAM&&(t.data=vh(e.data instanceof Uint8Array?e.data:e.data.subarray())),e.type!==Ute.MESSAGE_INITIATOR&&e.type!==Ute.MESSAGE_RECEIVER||(t.data=vh(e.data instanceof Uint8Array?e.data:e.data.subarray(),"base16")),t}class dre{constructor(e,t){this.protocol="/mplex/6.7.0",t=t??{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=t,this.sink=this._createSink();const r=this._createSource();this._source=r,this.source=r,this.closeController=new AbortController,this.rateLimiter=new sre.RateLimiterMemory({points:t.disconnectThreshold??lre,duration:1})}init(e){}get streams(){const e=[];for(const t of this._streams.initiators.values())e.push(t);for(const t of this._streams.receivers.values())e.push(t);return e}newStream(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const t=this._streamId++;e=null==e?t.toString():e.toString();const r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}close(e){this.closeController.signal.aborted||(null!=e?this.streams.forEach((t=>t.abort(e))):this.streams.forEach((e=>e.close())),this.closeController.abort())}_newReceiverStream(e){const{id:t,name:r}=e,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}_newStream(e){const{id:t,name:r,type:n,registry:i}=e;if(ore("new %s stream %s %s",n,t),"initiator"===n&&this._streams.initiators.size===(this._init.maxOutboundStreams??cre))throw Ut(new Error("Too many outbound streams open"),"ERR_TOO_MANY_OUTBOUND_STREAMS");if(i.has(t))throw new Error(`${n} stream ${t} already exists!`);const s=e=>{ore.enabled&&ore.trace("%s stream %s send",n,t,hre(e)),this._source.push(e)},o=()=>{ore("%s stream with id %s and protocol %s ended",n,t,a.stat.protocol),i.delete(t),null!=this._init.onStreamEnd&&this._init.onStreamEnd(a)},a=ire({id:t,name:r,send:s,type:n,onEnd:o,maxMsgSize:this._init.maxMsgSize});return i.set(t,a),a}_createSink(){const e=async e=>{const t=[this.closeController.signal];null!=this._init.signal&&t.push(this._init.signal),e=XK(e,Uf(t));try{await W_(e,Yte,Xte(this._init.maxMsgSize),(async e=>{for await(const t of e)await this._handleIncoming(t)})),this._source.end()}catch(nP){ore("error in sink",nP),this._source.end(nP)}};return e}_createSource(){const e=e=>{this.close(e)},t=N_({objectMode:!0,onEnd:e});return Object.assign(Kte(t),{push:t.push,end:t.end,return:t.return})}async _handleIncoming(e){const{id:t,type:r}=e;if(ore.enabled&&ore.trace("incoming message",hre(e)),e.type===Ute.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??are)){ore("too many inbound streams open"),this._source.push({id:t,type:Ute.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{return ore("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),void this._source.end(new Error("Too many open streams"))}return}const r=this._newReceiverStream({id:t,name:vh(e.data instanceof Uint8Array?e.data:e.data.subarray())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(r))}const n=1===(1&r)?this._streams.initiators:this._streams.receivers,i=n.get(t);if(null==i)return void ore("missing stream %s for message type %s",t,Fte[r]);const s=this._init.maxStreamBufferSize??ure;switch(r){case Ute.MESSAGE_INITIATOR:case Ute.MESSAGE_RECEIVER:if(i.sourceReadableLength()>s){this._source.push({id:e.id,type:r===Ute.MESSAGE_INITIATOR?Ute.RESET_RECEIVER:Ute.RESET_INITIATOR});const t=Ut(new Error("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL");return void i.abort(t)}i.sourcePush(e.data);break;case Ute.CLOSE_INITIATOR:case Ute.CLOSE_RECEIVER:i.closeRead();break;case Ute.RESET_INITIATOR:case Ute.RESET_RECEIVER:i.reset();break;default:ore("unknown message type %s",r)}}}class fre{constructor(e={}){this.protocol="/mplex/6.7.0",this.components=new kK,this._init=e}init(e){this.components=e}createStreamMuxer(e={}){return new dre(this.components,{...e,...this._init})}}var pre=r(6711),yre=r(2982),gre=r(4185),mre=r(2130);const wre={hashSHA256(e){return(0,gre.vp)(e)},getHKDF(e,t){const r=new pre.t(gre.mE,t,e),n=r.expand(96),i=n,s=i.subarray(0,32),o=i.subarray(32,64),a=i.subarray(64,96);return[s,o,a]},generateX25519KeyPair(){const e=yre.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed(e){const t=yre._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey(e,t){return yre.gi(e,t)},chaCha20Poly1305Encrypt(e,t,r,n){const i=new mre.OK(n);return i.seal(t,e,r)},chaCha20Poly1305Decrypt(e,t,r,n){const i=new mre.OK(n);return i.open(t,e,r)}};function vre(e,t={}){const r=RZ(e),n=cH.fromReader(r.reader,t),i={read:async e=>{const{value:t}=await r.reader.next(e);if(null==t)throw new Error("Value is null");return t},readLP:async()=>{const{value:e}=await n.next();if(null==e)throw new Error("Value is null");return e},readPB:async e=>{const t=await i.readLP();if(null==t)throw new Error("Value is null");const r=t instanceof Uint8Array?t:t.slice();return e.decode(r)},write:e=>{e instanceof Uint8Array?r.writer.push(e):r.writer.push(e.slice())},writeLP:e=>{i.write(nH.single(e,t))},writePB:(e,t)=>{i.writeLP(t.encode(e))},pb:e=>({read:async()=>await i.readPB(e),write:t=>i.writePB(t,e)}),unwrap:()=>(r.rest(),r.stream)};return i}function bre(){const e=pH();let t=!1;return{sink:async r=>{if(t)throw new Error("already piped");t=!0,e.resolve(r)},source:async function*(){const t=await e.promise;yield*t}()}}function Ere(){const e=bre(),t=bre();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}const _re=65535,Are=_re-16,Sre=Boolean(globalThis.process?.env?.DUMP_SESSION_KEYS);function kre(e){return async function*(t){for await(const r of t)for(let t=0;t<r.length;t+=Are){let n=t+Are;n>r.length&&(n=r.length);const i=e.encrypt(r.subarray(t,n),e.session);yield i}}}function Ire(e){return async function*(t){for await(const r of t)for(let t=0;t<r.length;t+=_re){let n=t+_re;n>r.length&&(n=r.length);const{plaintext:i,valid:s}=await e.decrypt(r.subarray(t,n),e.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield i}}}const Tre=e=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e),Cre=e=>{const t=Tre(2);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(0,e,!1),t};Cre.bytes=2;const Rre=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function Pre(e){return(0,nw.concat)([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function xre(e){return(0,nw.concat)([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function Ore(e){return(0,nw.concat)([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function Nre(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}function Dre(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}function Bre(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}Rre.bytes=2;class Lre extends Error{constructor(e="Unexpected Peer"){super(e),this.code=Lre.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class Mre extends Error{constructor(e="Invalid crypto exchange"){super(e),this.code=Mre.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}class Ure extends Error{constructor(e="Invalid crypto transmission"){super(e),this.code=Ure.code}static get code(){return"ERR_INVALID_CRYPTO_TRANSMISSION"}}var Fre;(function(e){let t;(function(e){let t;e.codec=()=>(null==t&&(t=tw(((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null==e.identityKey)throw new Error('Protocol error: required field "identityKey" was not found in object');if(t.uint32(10),t.bytes(e.identityKey),null==e.identitySig)throw new Error('Protocol error: required field "identitySig" was not found in object');if(t.uint32(18),t.bytes(e.identitySig),null==e.data)throw new Error('Protocol error: required field "data" was not found in object');t.uint32(26),t.bytes(e.data),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0),data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;while(e.pos<n){const t=e.uint32();switch(t>>>3){case 1:r.identityKey=e.bytes();break;case 2:r.identitySig=e.bytes();break;case 3:r.data=e.bytes();break;default:e.skipType(7&t);break}}if(null==r.identityKey)throw new Error('Protocol error: value for required field "identityKey" was not found in protobuf');if(null==r.identitySig)throw new Error('Protocol error: value for required field "identitySig" was not found in protobuf');if(null==r.data)throw new Error('Protocol error: value for required field "data" was not found in protobuf');return r}))),t),e.encode=t=>Gm(t,e.codec()),e.decode=t=>qm(t,e.codec())})(t=e.NoiseHandshakePayload||(e.NoiseHandshakePayload={}))})(Fre||(Fre={}));const jre=Fre.NoiseHandshakePayload;async function Vre(e,t,r){const n=await $re(e,Hre(t)),i=r??new Uint8Array(0);if(null==e.publicKey)throw new Error("PublicKey was missing from local PeerId");return zre(e.publicKey,n,i)}function zre(e,t,r){return jre.encode({identityKey:e,identitySig:t,data:r??new Uint8Array(0)}).subarray()}async function $re(e,t){if(null==e.privateKey)throw new Error("PrivateKey was missing from PeerId");const r=await _E(e.privateKey);return await r.sign(t)}async function qre(e){return await Em(e.identityKey)}function Kre(e){return jre.decode(e)}function Hre(e){const t=ia("noise-libp2p-static-key:");return(0,nw.concat)([t,e],t.length+e.length)}async function Gre(e,t,r){const n=await Em(t.identityKey);if(!n.equals(r))throw new Error("Peer ID doesn't match libp2p public key.");const i=Hre(e);if(null==n.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==t.identitySig)throw new Error("Signature was missing from message");const s=bE(n.publicKey),o=await s.verify(i,t.identitySig);if(!o)throw new Error("Static key doesn't match to peer that signed payload!");return n}function Wre(e){return e instanceof Uint8Array&&32===e.length}const Qre=Mt("libp2p:noise");let Yre;function Jre(e){Yre(`LOCAL_STATIC_PUBLIC_KEY ${vh(e.publicKey,"hex")}`),Yre(`LOCAL_STATIC_PRIVATE_KEY ${vh(e.privateKey,"hex")}`)}function Xre(e){e?(Yre(`LOCAL_PUBLIC_EPHEMERAL_KEY ${vh(e.publicKey,"hex")}`),Yre(`LOCAL_PRIVATE_EPHEMERAL_KEY ${vh(e.privateKey,"hex")}`)):Yre("Missing local ephemeral keys.")}function Zre(e){Yre(`REMOTE_STATIC_PUBLIC_KEY ${vh(e,"hex")}`)}function ene(e){Yre(`REMOTE_EPHEMERAL_PUBLIC_KEY ${vh(e,"hex")}`)}function tne(e){e.cs1&&e.cs2?(Yre(`CIPHER_STATE_1 ${e.cs1.n.getUint64()} ${vh(e.cs1.k,"hex")}`),Yre(`CIPHER_STATE_2 ${e.cs2.n.getUint64()} ${vh(e.cs2.k,"hex")}`)):Yre("Missing cipher state.")}Yre=Sre?Qre:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});const rne=0,nne=4294967295,ine="Cipherstate has reached maximum n, a new handshake must be performed";class sne{constructor(e=rne){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>nne)throw new Error(ine)}}class one{constructor(e){this.crypto=e}encryptWithAd(e,t,r){const n=this.encrypt(e.k,e.n,t,r);return e.n.increment(),n}decryptWithAd(e,t,r){const{plaintext:n,valid:i}=this.decrypt(e.k,e.n,t,r);return i&&e.n.increment(),{plaintext:n,valid:i}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){const t=this.createEmptyKey();return Fm(t,e)}encrypt(e,t,r,n){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(n,t.getBytes(),r,e)}encryptAndHash(e,t){let r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}decrypt(e,t,r,n){t.assertValue();const i=this.crypto.chaCha20Poly1305Decrypt(n,t.getBytes(),r,e);return i?{plaintext:i,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let r,n=!0;return this.hasKey(e.cs)?({plaintext:r,valid:n}=this.decryptWithAd(e.cs,e.h,t)):r=t,this.mixHash(e,t),{plaintext:r,valid:n}}dh(e,t){try{const r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.subarray(0,32)}catch(r){const e=r;return Qre(e.message),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){const r=this.crypto.hashSHA256((0,nw.concat)([e,t],e.length+t.length));return r}mixKey(e,t){const[r,n]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(n),e.ck=r}initializeKey(e){return{k:e,n:new sne}}initializeSymmetric(e){const t=ia(e,"utf-8"),r=this.hashProtocolName(t),n=r,i=this.createEmptyKey(),s=this.initializeKey(i);return{cs:s,ck:n,h:r}}hashProtocolName(e){if(e.length<=32){const t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}split(e){const[t,r]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),n=this.initializeKey(t),i=this.initializeKey(r);return{cs1:n,cs2:i}}writeMessageRegular(e,t){const r=this.encryptWithAd(e,new Uint8Array(0),t),n=this.createEmptyKey(),i=new Uint8Array(0);return{ne:n,ns:i,ciphertext:r}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}class ane extends one{initializeInitiator(e,t,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,e);const o=new Uint8Array(32);return{ss:s,s:t,rs:r,psk:n,re:o}}initializeResponder(e,t,r,n){const i="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(i);this.mixHash(s,e);const o=new Uint8Array(32);return{ss:s,s:t,rs:r,psk:n,re:o}}writeMessageA(e,t,r){const n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();const i=e.e.publicKey;this.mixHash(e.ss,i);const s=this.encryptAndHash(e.ss,t);return{ne:i,ns:n,ciphertext:s}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const s=this.encryptAndHash(e.ss,t);return{ne:r,ns:i,ciphertext:s}}writeMessageC(e,t){const r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const i=this.encryptAndHash(e.ss,t),s=this.createEmptyKey(),o={ne:s,ns:n,ciphertext:i},{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,messageBuffer:o,cs1:a,cs2:c}}readMessageA(e,t){return Wre(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(Wre(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);n&&Wre(r)&&(e.rs=r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:i,valid:n&&s}}readMessageC(e,t){const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);if(n&&Wre(r)&&(e.rs=r),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:o,cs2:a}=this.split(e.ss);return{h:e.ss.h,plaintext:i,valid:n&&s,cs1:o,cs2:a}}initSession(e,t,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let s;return s=e?this.initializeInitiator(t,r,i,n):this.initializeResponder(t,r,i,n),{hs:s,i:e,mc:0}}sendMessage(e,t,r){let n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){const{h:r,messageBuffer:i,cs1:s,cs2:o}=this.writeMessageC(e.hs,t);n=i,e.h=r,e.cs1=s,e.cs2=o}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}recvMessage(e,t){let r=new Uint8Array(0),n=!1;if(0===e.mc)({plaintext:r,valid:n}=this.readMessageA(e.hs,t));else if(1===e.mc)({plaintext:r,valid:n}=this.readMessageB(e.hs,t));else if(2===e.mc){const{h:i,plaintext:s,valid:o,cs1:a,cs2:c}=this.readMessageC(e.hs,t);r=s,n=o,e.h=i,e.cs1=a,e.cs2=c}return e.mc++,{plaintext:r,valid:n}}}class cne{constructor(e,t,r,n,i,s,o,a){this.isInitiator=e,this.payload=t,this.prologue=r,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=a??new ane(n),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if(Jre(this.session.hs.s),this.isInitiator){Qre("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(Pre(e)),Qre("Stage 0 - Initiator finished sending first message."),Xre(this.session.hs.e)}else{Qre("Stage 0 - Responder waiting to receive first message...");const e=Nre((await this.connection.readLP()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new Mre("xx handshake stage 0 validation fail");Qre("Stage 0 - Responder received first message."),ene(this.session.hs.re)}}async exchange(){if(this.isInitiator){Qre("Stage 1 - Initiator waiting to receive first message from responder...");const t=Dre((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new Mre("xx handshake stage 1 validation fail");Qre("Stage 1 - Initiator received the message."),ene(this.session.hs.re),Zre(this.session.hs.rs),Qre("Initiator going to check remote's signature...");try{const e=Kre(r);this.remotePeer=this.remotePeer||await qre(e),await Gre(this.session.hs.rs,e,this.remotePeer),this.setRemoteEarlyData(e.data)}catch(e){const t=e;throw new Lre(`Error occurred while verifying signed payload: ${t.message}`)}Qre("All good with the signature!")}else{Qre("Stage 1 - Responder sending out first message with signed payload and static key.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(xre(e)),Qre("Stage 1 - Responder sent the second handshake message with signed payload."),Xre(this.session.hs.e)}}async finish(){if(this.isInitiator){Qre("Stage 2 - Initiator sending third handshake message.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(Ore(e)),Qre("Stage 2 - Initiator sent message with signed payload.")}else{Qre("Stage 2 - Responder waiting for third handshake message...");const t=Bre((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new Mre("xx handshake stage 2 validation fail");Qre("Stage 2 - Responder received the message, finished handshake.");try{const e=Kre(r);this.remotePeer=this.remotePeer||await qre(e),await Gre(this.session.hs.rs,e,this.remotePeer),this.setRemoteEarlyData(e.data)}catch(e){const t=e;throw new Lre(`Error occurred while verifying signed payload: ${t.message}`)}}tne(this.session)}encrypt(e,t){const r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}decrypt(e,t){const r=this.getCS(t,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,t=!0){if(!e.cs1||!e.cs2)throw new Mre("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=e)}}class une{constructor(e,t,r=wre,n){this.protocol="/noise",this.earlyData=t??new Uint8Array(0),this.crypto=r,this.staticKeys=e?this.crypto.generateX25519KeyPairFromSeed(e):this.crypto.generateX25519KeyPair(),this.prologue=n??new Uint8Array(0)}async secureOutbound(e,t,r){const n=vre(t,{lengthEncoder:Cre,lengthDecoder:Rre,maxDataLength:_re}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:r}),s=await this.createSecureConnection(n,i);return{conn:s,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async secureInbound(e,t,r){const n=vre(t,{lengthEncoder:Cre,lengthDecoder:Rre,maxDataLength:_re}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:r}),s=await this.createSecureConnection(n,i);return{conn:s,remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async performHandshake(e){const t=await Vre(e.localPeer,this.staticKeys.publicKey,this.earlyData);return await this.performXXHandshake(e,t)}async performXXHandshake(e,t){const{isInitiator:r,remotePeer:n,connection:i}=e,s=new cne(r,t,this.prologue,this.crypto,this.staticKeys,i,n);try{await s.propose(),await s.exchange(),await s.finish()}catch(o){if(o instanceof Error)throw o.message=`Error occurred during XX handshake: ${o.message}`,o}return s}async createSecureConnection(e,t){const[r,n]=Ere(),i=e.unwrap();return await W_(r,kre(t),nH({lengthEncoder:Cre}),i,cH({lengthDecoder:Rre}),Ire(t),r),n}}const lne=gt.bind({ignoreUndefined:!0,concatArrays:!0});function hne({options:e={},peerId:t,multiaddrs:r=[],repo:n,keychainConfig:i={},config:s={}}){const{datastore:o}=n,a=dne({options:e,config:s,datastore:o,keychainConfig:i,peerId:t,multiaddrs:r});return"function"===typeof e.libp2p?e.libp2p({libp2pOptions:a,options:e,config:s,datastore:o,peerId:t}):_8(a)}function dne({options:e,config:t,datastore:r,keychainConfig:n,peerId:i,multiaddrs:s}){const o=()=>{const e=M_(t,"Pubsub.Router")||"gossipsub",r=fH();if(!r[e])throw Ut(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${e} router.`),"ERR_NOT_SUPPORTED");return r[e]},a={datastore:r,peerId:i},c={addresses:{listen:s.map((e=>e.toString())),announce:M_(e,"addresses.announce",M_(t,"Addresses.Announce",[])),noAnnounce:M_(e,"addresses.noAnnounce",M_(t,"Addresses.NoAnnounce",[]))},connectionManager:M_(e,"connectionManager",{maxConnections:M_(e,"config.Swarm.ConnMgr.HighWater",M_(t,"Swarm.ConnMgr.HighWater")),minConnections:M_(e,"config.Swarm.ConnMgr.LowWater",M_(t,"Swarm.ConnMgr.LowWater"))}),keychain:n,identify:{host:{agentVersion:`js-ipfs/${GN}`}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[new fre({maxInboundStreams:256,maxOutboundStreams:1024})],connectionEncryption:[new une],relay:{enabled:M_(e,"relay.enabled",M_(t,"relay.enabled",!0)),hop:{enabled:M_(e,"relay.hop.enabled",M_(t,"relay.hop.enabled",!1)),active:M_(e,"relay.hop.active",M_(t,"relay.hop.active",!1))}},nat:{enabled:!M_(t,"Swarm.DisableNatPortMap",!1)}};M_(e,"config.Pubsub.Enabled",M_(t,"Pubsub.Enabled",!0))&&(c.pubsub=o()),"none"!==M_(t,"Routing.Type","dhtclient")&&(c.dht=new hte({clientMode:"dhtserver"!==M_(t,"Routing.Type","dht"),kBucketSize:M_(e,"dht.kBucketSize",20),validators:{ipns:y_},selectors:{ipns:U_}}));const u=M_(e,"config.Bootstrap",M_(t,"Bootstrap",[]));u.length>0&&c.peerDiscovery?.push(new fte({list:u}));let l=M_(e,"libp2p",void 0);"function"===typeof l&&(l=void 0);const h=lne(a,UX(),c,l),d=M_(e,"config.Addresses.Delegates",M_(t,"Addresses.Delegates",[]));if(d.length>0){const e=d[Math.floor(Math.random()*d.length)],t=Kl(e).toOptions(),r={host:t.host,protocol:443===parseInt(t.port)?"https":"http",port:t.port},n=fY(r);h.contentRouters?.push(new AH(n)),h.peerRouters?.push(new wH(n))}return M_(e,"config.Discovery.MDNS.Enabled",M_(t,"Discovery.MDNS.Enabled",!0))||(h.peerDiscovery=h.peerDiscovery?.filter((e=>null!=e&&"@libp2p/mdns"!==e[Symbol.toStringTag]))),null==h.transports&&(h.transports=[]),null==h.transports.find((e=>"@libp2p/websockets"===e[Symbol.toStringTag]))&&h.transports.push(new Lte),h}const fne=gt.bind({ignoreUndefined:!0}),pne=Mt("ipfs:components:peer:storage");class yne{constructor(e,t,r,n,i){this.print=n,this.peerId=e,this.keychain=t,this.repo=r,this.print=n,this.isNew=i}static async start(e,t,r){const{repoAutoMigrate:n,repo:i,onMigrationProgress:s}=r,o="string"===typeof i||null==i?AV(e,t,{path:i,autoMigrate:n,onMigrationProgress:s}):i,{peerId:a,keychain:c,isNew:u}=await gne(e,o,r);return new yne(a,c,o,e,u)}}const gne=async(e,t,r)=>{if(!t.closed)return{...await Ene(t,r),isNew:!1};try{return await t.open(),{...await Ene(t,r),isNew:!1}}catch(nP){if(nP.code!==hj)throw nP;if(r.init&&!1===r.init.allowNew)throw new Yo("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await mne(e,t,r),isNew:!0}}},mne=async(e,t,r)=>{const n=r.init||{},i=await t.exists();if(pne("repo exists?",i),!0===i)throw new Error("repo already exists");const s=n.privateKey?await wne(n.privateKey):await vne(e,n),o=bne(s);pne("peer identity: %s",o.PeerID);const a={...fne(Ane(uS(),n.profiles),r.config),Identity:o};await t.init(a),await t.open(),pne("repo opened");const c={pass:r.pass};try{c.dek=await t.config.get("Keychain.DEK")}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP}const u=await hne({options:void 0,multiaddrs:void 0,peerId:s,repo:t,config:a,keychainConfig:c});return await t.datastore.has(new Df("/info/self"))||await u.keychain.importPeer("self",s),await t.config.set("Keychain",{DEK:u.keychain.init.dek}),{peerId:s,keychain:u.keychain}},wne=async e=>{if(pne("using user-supplied private-key"),cm(e))return e;const t=ia(e,"base64pad"),r=await _E(t);return await Em(r.public.bytes,r.bytes)},vne=(e,{algorithm:t="Ed25519",bits:r=2048})=>{if(e("generating %s keypair...",t),"Ed25519"===t)return s8();if("RSA"===t)return o8({bits:r});throw Ut(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},bne=e=>{if(null==e.privateKey)throw Ut(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:vh(e.privateKey,"base64pad")}},Ene=async(e,t)=>{const r=t.config,n=t.init&&t.init.profiles||[],i=t.pass,s=await e.config.getAll(),o=_ne(Ane(s,n),r);if(s!==o&&await e.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new qo("No private key was found in the config, please intialize the repo");const a=ia(o.Identity.PrivKey,"base64pad"),c=await _E(a),u=await Em(c.public.bytes,c.bytes),l=await hne({options:void 0,multiaddrs:void 0,peerId:u,repo:e,config:o,keychainConfig:{pass:i,...o.Keychain}});return{peerId:u,keychain:l.keychain}},_ne=(e,t)=>t?fne(e,t):e,Ane=(e,t)=>(t||[]).reduce(((e,t)=>{const r=iD[t];if(!r)throw new Error(`Could not find profile with name '${t}'`);return pne("applying profile %s",t),r.transform(e)}),e);var Sne=r(7691);function kne(e){let t=new Uint8Array(e.reduce(((e,t)=>e+Wu.encodingLength(t)),0)),r=0;for(const n of e)t=Wu.encode(n,t,r),r+=Wu.encodingLength(n);return t}var Ine=kne;class Tne{constructor(e,t,r){this._refCounter=1,this.cid=e,this.priority=t||1,this.wantType=r}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){const e=this.cid.toString(bo.base58btc);return`WantlistEntry <key: ${e}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}const Cne=Ft.Reader,Rne=Ft.Writer,Pne=Ft.util,xne=Ft.roots["ipfs-bitswap"]||(Ft.roots["ipfs-bitswap"]={}),One=xne.Message=(()=>{function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.wantlist=null,e.prototype.blocks=Pne.emptyArray,e.prototype.payload=Pne.emptyArray,e.prototype.blockPresences=Pne.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=Rne.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&xne.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var r=0;r<e.blocks.length;++r)t.uint32(18).bytes(e.blocks[r]);if(null!=e.payload&&e.payload.length)for(r=0;r<e.payload.length;++r)xne.Message.Block.encode(e.payload[r],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(r=0;r<e.blockPresences.length;++r)xne.Message.BlockPresence.encode(e.blockPresences[r],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof Cne||(e=Cne.create(e));var r=void 0===t?e.len:e.pos+t,n=new xne.Message;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.wantlist=xne.Message.Wantlist.decode(e,e.uint32());break;case 2:n.blocks&&n.blocks.length||(n.blocks=[]),n.blocks.push(e.bytes());break;case 3:n.payload&&n.payload.length||(n.payload=[]),n.payload.push(xne.Message.Block.decode(e,e.uint32()));break;case 4:n.blockPresences&&n.blockPresences.length||(n.blockPresences=[]),n.blockPresences.push(xne.Message.BlockPresence.decode(e,e.uint32()));break;case 5:n.pendingBytes=e.int32();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof xne.Message)return e;var t=new xne.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=xne.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var r=0;r<e.blocks.length;++r)"string"===typeof e.blocks[r]?Pne.base64.decode(e.blocks[r],t.blocks[r]=Pne.newBuffer(Pne.base64.length(e.blocks[r])),0):e.blocks[r].length>=0&&(t.blocks[r]=e.blocks[r])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(r=0;r<e.payload.length;++r){if("object"!==typeof e.payload[r])throw TypeError(".Message.payload: object expected");t.payload[r]=xne.Message.Block.fromObject(e.payload[r])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(r=0;r<e.blockPresences.length;++r){if("object"!==typeof e.blockPresences[r])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[r]=xne.Message.BlockPresence.fromObject(e.blockPresences[r])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocks=[],r.payload=[],r.blockPresences=[]),t.defaults&&(r.wantlist=null,r.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(r.wantlist=xne.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){r.blocks=[];for(var n=0;n<e.blocks.length;++n)r.blocks[n]=t.bytes===String?Pne.base64.encode(e.blocks[n],0,e.blocks[n].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[n]):e.blocks[n]}if(e.payload&&e.payload.length){r.payload=[];for(n=0;n<e.payload.length;++n)r.payload[n]=xne.Message.Block.toObject(e.payload[n],t)}if(e.blockPresences&&e.blockPresences.length){r.blockPresences=[];for(n=0;n<e.blockPresences.length;++n)r.blockPresences[n]=xne.Message.BlockPresence.toObject(e.blockPresences[n],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(r.pendingBytes=e.pendingBytes),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message"},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.entries=Pne.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=Rne.create()),null!=e.entries&&e.entries.length)for(var r=0;r<e.entries.length;++r)xne.Message.Wantlist.Entry.encode(e.entries[r],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof Cne||(e=Cne.create(e));var r=void 0===t?e.len:e.pos+t,n=new xne.Message.Wantlist;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.entries&&n.entries.length||(n.entries=[]),n.entries.push(xne.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:n.full=e.bool();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof xne.Message.Wantlist)return e;var t=new xne.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var r=0;r<e.entries.length;++r){if("object"!==typeof e.entries[r])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[r]=xne.Message.Wantlist.Entry.fromObject(e.entries[r])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.entries=[]),t.defaults&&(r.full=!1),e.entries&&e.entries.length){r.entries=[];for(var n=0;n<e.entries.length;++n)r.entries[n]=xne.Message.Wantlist.Entry.toObject(e.entries[n],t)}return null!=e.full&&e.hasOwnProperty("full")&&(r.full=e.full),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist"},e.WantType=function(){const e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.block=Pne.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=Rne.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof Cne||(e=Cne.create(e));var r=void 0===t?e.len:e.pos+t,n=new xne.Message.Wantlist.Entry;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.block=e.bytes();break;case 2:n.priority=e.int32();break;case 3:n.cancel=e.bool();break;case 4:n.wantType=e.int32();break;case 5:n.sendDontHave=e.bool();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof xne.Message.Wantlist.Entry)return e;var t=new xne.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?Pne.base64.decode(e.block,t.block=Pne.newBuffer(Pne.base64.length(e.block)),0):e.block.length>=0&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1;break}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.block="":(r.block=[],t.bytes!==Array&&(r.block=Pne.newBuffer(r.block))),r.priority=0,r.cancel=!1,r.wantType=t.enums===String?"Block":0,r.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(r.block=t.bytes===String?Pne.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(r.wantType=t.enums===String?xne.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(r.sendDontHave=e.sendDontHave),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Wantlist.Entry"},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.prefix=Pne.newBuffer([]),e.prototype.data=Pne.newBuffer([]),e.encode=function(e,t){return t||(t=Rne.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof Cne||(e=Cne.create(e));var r=void 0===t?e.len:e.pos+t,n=new xne.Message.Block;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.prefix=e.bytes();break;case 2:n.data=e.bytes();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof xne.Message.Block)return e;var t=new xne.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?Pne.base64.decode(e.prefix,t.prefix=Pne.newBuffer(Pne.base64.length(e.prefix)),0):e.prefix.length>=0&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?Pne.base64.decode(e.data,t.data=Pne.newBuffer(Pne.base64.length(e.data)),0):e.data.length>=0&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.prefix="":(r.prefix=[],t.bytes!==Array&&(r.prefix=Pne.newBuffer(r.prefix))),t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=Pne.newBuffer(r.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(r.prefix=t.bytes===String?Pne.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?Pne.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.Block"},e}(),e.BlockPresenceType=function(){const e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cid=Pne.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=Rne.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof Cne||(e=Cne.create(e));var r=void 0===t?e.len:e.pos+t,n=new xne.Message.BlockPresence;while(e.pos<r){var i=e.uint32();switch(i>>>3){case 1:n.cid=e.bytes();break;case 2:n.type=e.int32();break;default:e.skipType(7&i);break}}return n},e.fromObject=function(e){if(e instanceof xne.Message.BlockPresence)return e;var t=new xne.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?Pne.base64.decode(e.cid,t.cid=Pne.newBuffer(Pne.base64.length(e.cid)),0):e.cid.length>=0&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1;break}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.cid="":(r.cid=[],t.bytes!==Array&&(r.cid=Pne.newBuffer(r.cid))),r.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=t.bytes===String?Pne.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?xne.Message.BlockPresenceType[e.type]:e.type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ft.util.toJSONOptions)},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/Message.BlockPresence"},e}(),e})(),Nne={Block:One.Wantlist.WantType.Block,Have:One.Wantlist.WantType.Have},Dne=(e,t)=>Array.prototype.slice.call(t,0).sort(((t,r)=>{const n=e(t),i=e(r);return n<i?-1:n>i?1:0}));class Bne{constructor(e,t){this.set=t?e1({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:t.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,t,r){const n=e.toString(bo.base58btc),i=this.set.get(n);i?(i.inc(),i.priority=t,i.wantType===Nne.Have&&r===Nne.Block&&(i.wantType=r)):(this.set.set(n,new Tne(e,t,r)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString(bo.base58btc),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(Dne((e=>e[1].key),Array.from(this.set.entries())))}contains(e){const t=e.toString(bo.base58btc);return this.set.has(t)}get(e){const t=e.toString(bo.base58btc);return this.set.get(t)}}Bne.Entry=Tne;const Lne=Bne.Entry;class Mne{constructor(e,t,r,n,i){this.entry=new Lne(e,t,r),this.cancel=Boolean(n),this.sendDontHave=Boolean(i)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){const e=this.cid.toString(bo.base58btc);return`BitswapMessageEntry ${e} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}const Une=(e,t)=>{const r=["bitswap"];return t&&r.push(t),e&&r.push(`${e.toString().slice(0,8)}`),Object.assign(wt(r.join(":")),{error:wt(r.concat(["error"]).join(":"))})},Fne=(e,t)=>{if(e.size!==t.size)return!1;for(const[r,n]of e){const e=t.get(r);if(void 0===e)return!1;if(n instanceof Uint8Array&&e instanceof Uint8Array&&!Fm(n,e))return!1;if(n instanceof Mne&&e instanceof Mne&&!n.equals(e))return!1}return!0};class jne{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(e,t,r,n,i){null==r&&(r=jne.WantType.Block);const s=e.toString(bo.base58btc),o=this.wantlist.get(s);o?(o.wantType===r&&(o.priority=t),n&&(o.cancel=Boolean(n)),i&&(o.sendDontHave=Boolean(i)),r===jne.WantType.Block&&o.wantType===jne.WantType.Have&&(o.wantType=r)):this.wantlist.set(s,new Mne(e,t,r,n,i))}addBlock(e,t){const r=e.toString(bo.base58btc);this.blocks.set(r,t)}addHave(e){const t=e.toString(bo.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,jne.BlockPresenceType.Have)}addDontHave(e){const t=e.toString(bo.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,jne.BlockPresenceType.DontHave)}cancel(e){const t=e.toString(bo.base58btc);this.wantlist.delete(t),this.addEntry(e,0,jne.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}))),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return One.encode(e).finish()}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}))),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[t,r]of this.blocks.entries()){const n=Zt.k.parse(t),i=n.version,s=n.code,o=n.multihash.code,a=n.multihash.digest.length,c=Ine([i,s,o,a]);e.payload.push(new One.Block({prefix:c,data:r}))}for(const[t,r]of this.blockPresences)e.blockPresences.push(new One.BlockPresence({cid:Zt.k.parse(t).bytes,type:r}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),One.encode(e).finish()}equals(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&Fne(this.wantlist,e.wantlist)&&Fne(this.blocks,e.blocks)&&Fne(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}jne.deserialize=async(e,t)=>{const r=One.decode(e),n=r.wantlist&&r.wantlist.full||!1,i=new jne(n);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach((e=>{if(!e.block)return;const t=Zt.k.decode(e.block);i.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))})),r.blockPresences&&r.blockPresences.forEach((e=>{if(!e.cid)return;const t=Zt.k.decode(e.cid);e.type===jne.BlockPresenceType.Have?i.addHave(t):i.addDontHave(t)})),r.blocks.length>0?(await Promise.all(r.blocks.map((async e=>{const t=await Co.digest(e),r=Zt.k.createV0(t);i.addBlock(r,e)}))),i):r.payload.length>0?(await Promise.all(r.payload.map((async e=>{if(!e.prefix||!e.data)return;const r=Sne(e.prefix),n=r[0],s=r[1],o=r[2],a=o===Co.code?Co:t&&await t.getHasher(o);if(!a)throw Ut(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");const c=await a.digest(e.data),u=Zt.k.create(n,s,c);i.addBlock(u,e.data)}))),i.setPendingBytes(r.pendingBytes),i):i},jne.blockPresenceSize=e=>e.bytes.length+1,jne.Entry=Mne,jne.WantType={Block:One.Wantlist.WantType.Block,Have:One.Wantlist.WantType.Have},jne.BlockPresenceType={Have:One.BlockPresenceType.Have,DontHave:One.BlockPresenceType.DontHave};const Vne=3,zne=Math.pow(2,31)-1,$ne=1e3,qne=1;var Kne=Hne;function Hne(e,t,r){var n=null,i=null,s=function(){n&&(clearTimeout(n),i=null,n=null)},o=function(){var e=i;s(),e&&e()},a=function(){if(!t)return e.apply(this,arguments);var o=this,a=arguments,c=r&&!n;return s(),i=function(){e.apply(o,a)},n=setTimeout((function(){if(n=null,!c){var e=i;return i=null,e()}}),t),c?i():void 0};return a.cancel=s,a.flush=o,a}class Gne{constructor(e,t,r){this.peerId=t,this.network=r,this.refcnt=1,this._entries=[],this._log=Une(e,"msgqueue"),this.sendEntries=Kne(this._sendEntries.bind(this),qne)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new jne(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(nP){return void this._log.error("cant connect to peer %s: %s",this.peerId.toString(),nP.message)}this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,e).catch((e=>{this._log.error("send error: %s",e.message)}))}}class Wne{constructor(e,t,r,n){this.peers=e1({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:n.metrics}),this.wantlist=new Bne(r,n),this.network=t,this._stats=r,this._peerId=e,this._log=Une(e,"want")}_addEntries(e,t,r){const n=e.map(((e,r)=>new jne.Entry(e,zne-r,jne.WantType.Block,t)));n.forEach((e=>{e.cancel?r?this.wantlist.removeForce(e.cid.toString(bo.base58btc)):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(const i of this.peers.values())i.addEntries(n)}_startPeerHandler(e){let t=this.peers.get(e.toString());if(t)return void t.refcnt++;t=new Gne(this._peerId,e,this.network);const r=new jne(!0);for(const n of this.wantlist.entries())r.addEntry(n[1].cid,n[1].priority);return t.addMessage(r),this.peers.set(e.toString(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}wantBlocks(e,t={}){this._addEntries(e,!1),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.cancelWants(e)}))}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach((e=>this.disconnected(e.peerId)))}}const Qne="/ipfs/bitswap/1.0.0",Yne="/ipfs/bitswap/1.1.0",Jne="/ipfs/bitswap/1.2.0",Xne=32,Zne=128,eie=3e4;class tie{constructor(e,t,r,n={}){this._log=Une(e.peerId,"network"),this._libp2p=e,this._bitswap=t,this._protocols=[Qne],n.b100Only||(this._protocols.unshift(Yne),this._protocols.unshift(Jne)),this._stats=r,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=n.hashLoader,this._maxInboundStreams=n.maxInboundStreams??Xne,this._maxOutboundStreams=n.maxOutboundStreams??Zne,this._incomingStreamTimeout=n.incomingStreamTimeout??eie}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection,{maxInboundStreams:this._maxInboundStreams,maxOutboundStreams:this._maxOutboundStreams});const e=sq({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect});this._registrarIds=[];for(const t of this._protocols)this._registrarIds.push(await this._libp2p.registrar.register(t,e));this._libp2p.getConnections().forEach((e=>{this._onPeerConnect(e.remotePeer)}))}async stop(){if(this._running=!1,await this._libp2p.unhandle(this._protocols),null!=this._registrarIds){for(const e of this._registrarIds)this._libp2p.registrar.unregister(e);this._registrarIds=[]}}_onConnection({stream:e,connection:t}){if(!this._running)return;const r=new sa.TimeoutController(this._incomingStreamTimeout);Promise.resolve().then((async()=>{this._log("incoming new bitswap %s connection from %p",e.stat.protocol,t.remotePeer),await W_(XK(e.source,r.signal),cH(),(async e=>{for await(const n of e){try{const e=await jne.deserialize(n.subarray(),this._hashLoader);await this._bitswap._receiveMessage(t.remotePeer,e)}catch(nP){this._bitswap._receiveError(nP);break}r.reset()}}))})).catch((t=>{this._log(t),e.abort(t)})).finally((()=>{r.clear(),e.close()}))}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,t={}){return this._libp2p.contentRouting.findProviders(e,t)}async findAndConnect(e,t){const r=[];let n=0;for await(const i of this.findProviders(e,t))if(this._log(`connecting to provider ${i.id}`),r.push(this.connectTo(i.id,t).catch((e=>{this._log.error(e)}))),n++,n===Vne)break;await Promise.all(r)}async provide(e,t){await this._libp2p.contentRouting.provide(e,t)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const r=e.toString();this._log("sendMessage to %s",r,t);const n=await this._libp2p.dial(e),i=await n.newStream([Jne,Yne,Qne]);await rie(i,t,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e,t){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,t)}_updateSentStats(e,t){const r=e.toString();if(this._stats){for(const e of t.values())this._stats.push(r,"dataSent",e.length);this._stats.push(r,"blocksSent",t.size)}}}async function rie(e,t,r){try{let r;switch(e.stat.protocol){case Qne:r=t.serializeToBitswap100();break;case Yne:case Jne:r=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+e.stat.protocol)}await W_([r],nH(),e)}catch(nP){r(nP)}finally{e.close()}}class nie{constructor(e){this.partner=e,this.wantlist=new Bne,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t,r){this.wantlist.add(e,t,r)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}class iie extends Map{constructor(e,t){super(),this._cmp=t||this._defaultSort,this._keys=[];for(const[r,n]of e||[])this.set(r,n)}update(e){if(e<0||e>=this._keys.length)return;const t=this._keys[e];this._keys.splice(e,1);const r=this._find(t);this._keys.splice(r,0,t)}set(e,t){if(this.has(e)){const t=this.indexOf(e);this._keys.splice(t,1)}super.set(e,t);const r=this._find(e);return this._keys.splice(r,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;const t=this.indexOf(e);return this._keys.splice(t,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;const t=this._find(e);if(this._keys[t]===e)return t;for(let r=1;r<this._keys.length;r++){if(this._keys[t+r]===e)return t+r;if(this._keys[t-r]===e)return t-r}return-1}_find(e){let t=0,r=this._keys.length;while(t<r){const n=t+r>>>1,i=this._kCmp(this._keys[n],e);if(i<0)t=n+1;else{if(!(i>0))return n;r=n}}return t}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._keys)yield this.get(e)}*entries(){for(const e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,t){if(e)for(const r of this._keys)e.apply(t,[[r,this.get(r)]])}_defaultSort(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}_kCmp(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}const sie={hasNewInfo(){return!1},merge(){}};class oie{constructor(e=sie){this._taskMerger=e,this._byPeer=new iie([],aie.compare)}pushTasks(e,t){let r=this._byPeer.get(e.toString());r||(r=new aie(e,this._taskMerger)),r.pushTasks(t),this._byPeer.set(e.toString(),r)}popTasks(e){const t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};const{tasks:r,pendingSize:n}=t.popTasks(e);if(0===r.length)return{tasks:r,pendingSize:n};const i=t.peerId;return t.isIdle()?this._byPeer.delete(i.toString()):this._byPeer.update(0),{peerId:i,tasks:r,pendingSize:n}}_head(){if(0!==this._byPeer.size)for(const[,e]of this._byPeer)return e}remove(e,t){const r=this._byPeer.get(t.toString());r&&r.remove(e)}tasksDone(e,t){const r=this._byPeer.get(e.toString());if(!r)return;const n=this._byPeer.indexOf(e.toString());for(const i of t)r.taskDone(i);this._byPeer.update(n)}}class aie{constructor(e,t){this.peerId=e,this._taskMerger=t,this._activeTotalSize=0,this._pending=new cie,this._active=new Set}pushTasks(e){for(const t of e)this._pushTask(t)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;const t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){const t=[];for(const r of this._active)r.topic===e.topic&&t.push(r);return 0===t.length||this._taskMerger.hasNewInfo(e,t)}popTasks(e){let t=0;const r=[],n=this._pending.tasks();for(let i=0;i<n.length&&t<e;i++){const e=n[i];r.push(e),t+=e.size,this._pending.delete(e.topic),this._activeTotalSize+=e.size,this._active.add(e)}return{tasks:r,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return 0===this._pending.length&&0===this._active.size}static compare(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}class cie{constructor(){this._tasks=new iie([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce(((e,t)=>e+t.task.size),0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map((e=>e.task))}updatePriority(e,t){const r=this._tasks.get(e);if(!r)return;const n=this._tasks.indexOf(e);r.task.priority=t,this._tasks.update(n)}_compare(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}const uie={hasNewInfo(e,t){let r=!1,n=!1;for(const i of t)i.data.haveBlock&&(r=!0),i.data.isWantBlock&&(n=!0);return!(n||!e.data.isWantBlock)||!(r||!e.data.haveBlock)},merge(e,t){const r=e.data,n=t.data;!n.haveBlock&&r.haveBlock&&(n.haveBlock=r.haveBlock,n.blockSize=r.blockSize),!n.isWantBlock&&r.isWantBlock&&(n.isWantBlock=!0,n.haveBlock&&!r.haveBlock||(n.haveBlock=r.haveBlock,t.size=e.size)),n.isWantBlock&&n.haveBlock&&(t.size=n.blockSize)}},lie=jne.WantType,hie=16384,die=1024;class fie{constructor(e,t,r,n,i,s={}){this._log=Une(e,"engine"),this.blockstore=t,this.network=r,this._stats=n,this._opts=this._processOpts(s),this.ledgerMap=e1({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:i.metrics}),this._running=!1,this._requestQueue=new oie(uie)}_processOpts(e){return{maxSizeReplaceHasWithBlock:die,targetMessageSize:hie,...e}}_scheduleProcessTasks(){setTimeout((()=>{this._processTasks()}))}async _processTasks(){if(!this._running)return;const{peerId:e,tasks:t,pendingSize:r}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(0===t.length)return;const n=new jne(!1);n.setPendingBytes(r);const i=[],s=new Map;for(const a of t){const e=Zt.k.parse(a.topic);a.data.haveBlock?a.data.isWantBlock?(i.push(e),s.set(a.topic,a.data)):n.addHave(e):n.addDontHave(e)}const o=await this._getBlocks(i);for(const[a,c]of s){const e=Zt.k.parse(a),t=o.get(a);t?n.addBlock(e,t):c.sendDontHave&&n.addDontHave(e)}if(n.empty)return e&&this._requestQueue.tasksDone(e,t),void this._scheduleProcessTasks();try{e&&await this.network.sendMessage(e,n);for(const[t,r]of o.entries())e&&this.messageSent(e,Zt.k.parse(t),r)}catch(nP){this._log.error(nP)}e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks()}wantlistForPeer(e){const t=e.toString(),r=this.ledgerMap.get(t);return r?r.wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toString(),r=this.ledgerMap.get(t);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){if(e.length){for(const t of this.ledgerMap.values())for(const r of e){const e=t.wantlistContains(r.cid);if(!e)continue;const n=r.data.length,i=this._sendAsBlock(e.wantType,n);let s=n;i||(s=jne.blockPresenceSize(e.cid)),this._requestQueue.pushTasks(t.partner,[{topic:e.cid.toString(bo.base58btc),priority:e.priority,size:s,data:{blockSize:n,isWantBlock:i,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,t){const r=this._findOrCreate(e);if(t.empty)return;if(t.full&&(r.wantlist=new Bne),this._updateBlockAccounting(t.blocks,r),0===t.wantlist.size)return void this._scheduleProcessTasks();const n=[],i=[];t.wantlist.forEach((e=>{e.cancel?(r.cancelWant(e.cid),n.push(e.cid)):(r.wants(e.cid,e.priority,e.wantType),i.push(e))})),this._cancelWants(e,n),await this._addWants(e,i),this._scheduleProcessTasks()}_cancelWants(e,t){for(const r of t)this._requestQueue.remove(r.toString(bo.base58btc),e)}async _addWants(e,t){const r=await this._getBlockSizes(t.map((e=>e.cid))),n=[];for(const i of t){const t=i.cid.toString(bo.base58btc),s=r.get(t);if(null==s)i.sendDontHave&&n.push({topic:t,priority:i.priority,size:jne.blockPresenceSize(i.cid),data:{isWantBlock:i.wantType===lie.Block,blockSize:0,haveBlock:!1,sendDontHave:i.sendDontHave}});else{const e=this._sendAsBlock(i.wantType,s);let r=s;e||(r=jne.blockPresenceSize(i.cid)),n.push({topic:t,priority:i.priority,size:r,data:{isWantBlock:e,blockSize:s,haveBlock:!0,sendDontHave:i.sendDontHave}})}this._requestQueue.pushTasks(e,n)}}_sendAsBlock(e,t){return e===lie.Block||t<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){const t=await this._getBlocks(e);return new Map([...t].map((([e,t])=>[e,t.length])))}async _getBlocks(e){const t=new Map;return await Promise.all(e.map((async e=>{try{const r=await this.blockstore.get(e);t.set(e.toString(bo.base58btc),r)}catch(r){"ERR_NOT_FOUND"!==r.code&&this._log.error("failed to query blockstore for %s: %s",e,r)}}))),t}_updateBlockAccounting(e,t){for(const r of e.values())this._log("got block (%s bytes)",r.length),t.receivedBytes(r.length)}messageSent(e,t,r){const n=this._findOrCreate(e);n.sentBytes(r.length),n.wantlist.remove(t)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toString())}_findOrCreate(e){const t=e.toString(),r=this.ledgerMap.get(t);if(r)return r;const n=new nie(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}}const pie=e=>`unwant:${vh(e.multihash.bytes,"base64")}`,yie=e=>`block:${vh(e.multihash.bytes,"base64")}`;class gie extends KX.EventEmitter{constructor(e){super(),this.setMaxListeners($ne),this._log=Une(e,"notif")}hasBlock(e,t){const r=yie(e);this._log(r),this.emit(r,t)}wantBlock(e,t={}){if(!e)throw new Error("Not a valid cid");const r=yie(e),n=pie(e);return this._log(`wantBlock:${e}`),new Promise(((i,s)=>{const o=()=>{this.removeListener(r,a),s(new Error(`Block for ${e} unwanted`))},a=e=>{this.removeListener(n,o),i(e)};this.once(n,o),this.once(r,a),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.removeListener(r,a),this.removeListener(n,o),s(new Error(`Want for ${e} aborted`))}))}))}unwantBlock(e){const t=pie(e);this._log(t),this.emit(t)}}var mie=r(5670);class wie extends KX.EventEmitter{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=BigInt(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{const r=this._movingAverages[e][t]=mie(t);r.push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;while(this._queue.length){const t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;t&&Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/t*1e3;let s=this._movingAverages[e];s||(s=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=s[e];t||(t=s[e]=mie(e)),t.push(r,i)}))}_applyOp(e){const t=e[0],r=e[1];if("number"!==typeof r)throw new Error(`invalid increment number: ${r}`);Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}const vie={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]};class bie extends KX.EventEmitter{constructor(e,t=[],r=vie){super();const n=Object.assign({},vie,r);if("number"!==typeof n.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof n.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=t,this._options=n,this._enabled=this._options.enabled,this._global=new wie(t,n),this._global.on("update",(e=>this.emit("update",e))),this._peers=e1({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){const t="string"!==typeof e&&e.toString?e.toString():`${e}`;return this._peers.get(t)}push(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){let n=this._peers.get(e);n||(n=new wie(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}disconnected(e){const t=e.toString(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}const Eie={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},_ie=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class Aie extends gV{constructor(e,t,r={}){super(),this._libp2p=e,this._log=Une(this.peerId),this._options=Object.assign({},Eie,r),this._stats=new bie(e,_ie,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new tie(e,this,this._stats,{hashLoader:r.hashLoader,maxInboundStreams:r.maxInboundStreams,maxOutboundStreams:r.maxOutboundStreams,incomingStreamTimeout:r.incomingStreamTimeout}),this.blockstore=t,this.engine=new fie(this.peerId,t,this.network,this._stats,e),this.wm=new Wne(this.peerId,this.network,this._stats,e),this.notifications=new gie(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(nP){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const r=[];for(const[n,i]of t.blocks.entries()){const e=Zt.k.parse(n);r.push({wasWanted:this.wm.wantlist.contains(e),cid:e,data:i})}this.wm.cancelWants(r.filter((({wasWanted:e})=>e)).map((({cid:e})=>e))),await Promise.all(r.map((({cid:t,wasWanted:r,data:n})=>this._handleReceivedBlock(e,t,n,r))))}async _handleReceivedBlock(e,t,r,n){this._log("received block");const i=await this.blockstore.has(t);this._updateReceiveCounters(e.toString(),t,r,i),n&&await this.put(t,r)}_updateReceiveCounters(e,t,r,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,t){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,t={}){const r=(e,t)=>(this.wm.wantBlocks([e],t),this.notifications.wantBlock(e,t));let n=!1;const i=async(e,t)=>{try{const r=await this.blockstore.get(e,t);return r}catch(nP){if("ERR_NOT_FOUND"!==nP.code)throw nP;return n||(n=!0,this.network.findAndConnect(e,t).catch((e=>this._log.error(e)))),r(e,t)}},s=new AbortController,o=t.signal?(0,Uf.anySignal)([t.signal,s.signal]):s.signal;try{const t=await Promise.race([this.notifications.wantBlock(e,{signal:o}),i(e,{signal:o})]);return t}finally{s.abort()}}async*getMany(e,t={}){for await(const r of e)yield this.get(r,t)}unwant(e){const t=Array.isArray(e)?e:[e];this.wm.unwantBlocks(t),t.forEach((e=>this.notifications.unwantBlock(e)))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,t,r){await this.blockstore.put(e,t),this._sendHaveBlockNotifications(e,t)}async*putMany(e,t){for await(const{key:r,value:n}of this.blockstore.putMany(e,t))this._sendHaveBlockNotifications(r,n),yield{key:r,value:n}}_sendHaveBlockNotifications(e,t){this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((e=>{this._log.error("Failed to provide: %s",e.message)}))}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}}const Sie=(e,t,r={})=>new Aie(e,t,r);function kie(e){return e=e||new Error("Not Found"),Ut(e,"ERR_NOT_FOUND")}function Iie(e){return e=e||new Error("Aborted"),Ut(e,"ERR_ABORTED")}class Tie extends gV{constructor(e,t){super(),this.child=e,this.bitswap=t}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,t,r={}){await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,t,r):await this.child.put(e,t,r))}async*putMany(e,t={}){const r=T_(e,(async({key:e})=>!await this.has(e)));this.bitswap.isStarted()?yield*this.bitswap.putMany(r,t):yield*this.child.putMany(r,t)}async get(e,t={}){return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,t):this.child.get(e,t)}async*getMany(e,t={}){const r=O_({objectMode:!0}),n=O_({objectMode:!0});Promise.resolve().then((async()=>{for await(const t of e)!await this.has(t)&&this.bitswap.isStarted()?r.push(t):n.push(t);r.end(),n.end()})),yield*$_(this.bitswap.getMany(r,t),this.child.getMany(n,t))}async delete(e,t){await this.child.delete(e,t)}async*deleteMany(e,t){yield*this.child.deleteMany(e,t)}async has(e,t={}){return this.child.has(e,t)}async*query(e,t={}){yield*this.child.query(e,t)}async*queryKeys(e,t={}){yield*this.child.queryKeys(e,t)}}class Cie{constructor(e,t,r,n,i){this.peerId=e,this.libp2p=t,this.bitswap=r,this.repo=n,this.blockstore=i}static async start({peerId:e,repo:t,print:r,hashers:n,options:i}){t.closed&&await t.open();const s=await t.config.getAll(),o=await hne({options:i,repo:t,peerId:e,multiaddrs:Rie(e,s),config:s,keychainConfig:void 0});await o.start();for(const u of o.getMultiaddrs())r(`Swarm listening on ${u.toString()}`);const a=Sie(o,t.blocks,{statsEnabled:!0,hashLoader:n,maxInboundStreams:1024,maxOutboundStreams:1024});await a.start();const c=new Tie(t.blocks,a);return t.blocks=c,t.pins.blockstore=c,new Cie(e,o,a,t,c)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await e.bitswap.stop(),await e.libp2p.stop()}}const Rie=(e,t)=>{const r=e.toString(),n=[],i=t.Addresses&&t.Addresses.Swarm||[];for(const s of i){let e=Kl(s);if(e.protoCodes().includes(Pie))throw Ut(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const t=e.getPeerId();t&&t!==r&&(e=e.encapsulate(`/p2p/${r}`)),n.push(e)}return n},Pie=479;function xie({network:e}){async function t(t={}){const r=[],{libp2p:n}=await e.use(t);return await n.peerStore.forEach((e=>{r.push({id:e.id,addrs:e.addresses.map((e=>e.multiaddr))})})),r}return qf(t)}function Oie({network:e}){async function t(t,r={}){const{libp2p:n}=await e.use(r);await n.dial(t,r)}return qf(t)}function Nie({network:e}){async function t(t,r={}){const{libp2p:n}=await e.use(r);await n.hangUp(t)}return qf(t)}function Die({network:e}){async function t(t={}){const{libp2p:r}=await e.use(t);return r.getMultiaddrs()}return qf(t)}function Bie({network:e}){async function t(t={}){const{libp2p:r}=await e.use(t);if(t.verbose){const e=[];for(const n of r.getConnections()){const r={addr:n.remoteAddr,peer:n.remotePeer};(t.verbose||t.direction)&&(r.direction=n.stat.direction),t.verbose&&(r.muxer=n.stat.multiplexer,r.latency="n/a",r.streams=[]),e.push(r)}return e}const n=new Map;for(const e of r.getConnections()){const t={addr:e.remoteAddr,peer:e.remotePeer};n.set(e.remotePeer.toString(),t)}return Array.from(n.values())}return qf(t)}class Lie{constructor({network:e}){this.addrs=xie({network:e}),this.connect=Oie({network:e}),this.disconnect=Nie({network:e}),this.localAddrs=Die({network:e}),this.peers=Bie({network:e})}}const Mie={success:!0,time:0,text:""};function Uie({network:e}){async function*t(t,r={}){const{libp2p:n}=await e.use();r.count=r.count||10;const i=await n.peerStore.get(t);let s=i&&i.id;if(!s){yield{...Mie,text:`Looking up peer ${t}`};const e=await n.peerRouting.findPeer(t);s=e&&e.id}if(!s)throw new Error("Peer was not found");yield{...Mie,text:`PING ${s.toString()}`};let o=0,a=0;for(let e=0;e<r.count;e++)try{const e=await n.ping(s);a+=e,o++,yield{...Mie,time:e}}catch(nP){yield{...Mie,success:!1,text:nP.toString()}}if(o){const e=a/o;yield{...Mie,text:`Average latency: ${e}ms`}}}return qf(t)}const Fie="/ipns/";function jie(e){let t;if(e.startsWith(Fie)&&(e=e.substring(Fie.length)),"1"!==e[0]&&"Q"!==e[0]||(e=`z${e}`),"z"===e[0]&&(t=bo.base58btc.decode(e)),"k"===e[0]&&(t=wo.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=(0,nw.concat)([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return(0,nw.concat)([ia(Fie),t.subarray(2)])}function Vie({network:e,repo:t,peerId:r}){const{get:n,put:i,findProvs:s,findPeer:o,provide:a,query:c}={async*get(t,n={}){const{libp2p:i}=await zie(e,r,n),s=t instanceof Uint8Array?t:jie(t);if(null==i.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.get(s,n)},async*put(t,n,i){const{libp2p:s}=await zie(e,r,i),o=t instanceof Uint8Array?t:jie(t);if(null==s.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.put(o,n,i)},async*findProvs(t,n={}){const{libp2p:i}=await zie(e,r,n);if(null==i.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.findProviders(t,{signal:n.signal})},async*findPeer(t,n={}){const{libp2p:i}=await zie(e,r,n);if(null==i.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.findPeer(t,{signal:n.signal})},async*provide(n,i={recursive:!1}){const{libp2p:s}=await zie(e,r,i),o=await t.blocks.has(n);if(!o)throw Ut(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(i.recursive)throw Ut(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");if(null==s.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.provide(n)},async*query(t,n={}){const{libp2p:i}=await zie(e,r,n);let s;const o=Zt.k.asCID(t);if(s=null!=o?o.multihash.bytes:wm(t.toString()).toBytes(),null==i.dht)throw Ut(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.getClosestPeers(s,n)}};return{get:qf(n),put:qf(i),findProvs:qf(s),findPeer:qf(o),provide:qf(a),query:qf(c)}}const zie=async(e,t,r)=>{const n=await e.use(r);if(null!=n.libp2p.dht)return n;{const e=async function*(){yield{from:t,name:"QUERY_ERROR",type:3,error:new Yo("dht not enabled")}};return{libp2p:{dht:{get:e,put:e,findProviders:e,findPeer:e,provide:e,getClosestPeers:e}}}}};function $ie({network:e,config:t}){const r=M_(t||{},"Pubsub.Enabled",!0),n={};let i;return{subscribe:r?qf(s):qie,unsubscribe:r?qf(o):qie,publish:r?qf(a):qie,ls:r?qf(c):qie,peers:r?qf(u):qie};async function s(t,r,s={}){const{libp2p:o}=await e.use(s);o.pubsub.subscribe(t),null==i&&(i=e=>{const t=e.detail;n[t.topic]&&n[t.topic].forEach((e=>{"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},o.pubsub.addEventListener("message",i)),null!=r&&(null==n[t]&&(n[t]=[]),n[t].push(r))}async function o(t,r,s={}){const{libp2p:o}=await e.use(s);null!=r&&null!=n[t]&&(n[t]=n[t].filter((e=>e!==r)),0===n[t].length&&delete n[t]),"function"!==typeof r&&delete n[t],null==n[t]&&o.pubsub.unsubscribe(t),0===Object.keys(n).length&&(o.pubsub.removeEventListener("message",i),i=void 0)}async function a(t,r,n={}){const{libp2p:i}=await e.use(n);if(!r)throw Ut(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await i.pubsub.publish(t,r)}async function c(t={}){const{libp2p:r}=await e.use(t);return r.pubsub.getTopics()}async function u(t,r={}){const{libp2p:n}=await e.use(r);return n.pubsub.getSubscribers(t)}}const qie=async()=>{throw new Yo("pubsub not enabled")},Kie=gt.bind({ignoreUndefined:!0}),Hie=Mt("ipfs"),Gie=3e4;class Wie{constructor({print:e,storage:t,codecs:r,options:n}){const{peerId:i,repo:s,keychain:o}=t,a=np.create(Cie),c=yB(n.preload),u=ny(),l=iy({network:a}),h=new RA(n),d=Object.values(Vo);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach((e=>d.push(e))),this.hashers=new RH({hashers:d,loadHasher:n.ipld&&n.ipld.loadHasher});const f=Object.values(jo);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach((e=>f.push(e))),this.bases=new kH({bases:f,loadBase:n.ipld&&n.ipld.loadBase});const p=new Dm({repo:s,codecs:r}),y=new bS({codecs:r,hashers:this.hashers,preload:c,repo:s}),g=new $A({dns:u,ipns:h,repo:s,codecs:r,peerId:i,isOnline:l,keychain:o,options:n}),m=_m({repo:s,codecs:r,bases:this.bases,name:g}),w=new iB({repo:s,codecs:r,hashers:this.hashers,preload:c}),v=Object.assign(HA({repo:s,codecs:r,resolve:m,preload:c}),{local:ZA({repo:t.repo})}),{add:b,addAll:E,cat:_,get:A,ls:S}=new HN({preload:c,repo:s,options:n.EXPERIMENTAL,hashers:this.hashers}),k=zM({repo:s,preload:c,hashers:this.hashers,options:n}),I=mB({files:k,preload:c,options:n.preload});this.preload=c,this.name=g,this.ipns=h,this.pin=p,this.resolve=m,this.block=y,this.refs=v,this.start=ip({network:a,peerId:i,repo:s,preload:c,ipns:h,mfsPreload:I,print:e,keychain:o,hashers:this.hashers,options:n}),this.stop=sp({network:a,preload:c,mfsPreload:I,ipns:h,repo:s}),this.dht=Vie({network:a,repo:s,peerId:i}),this.pubsub=$ie({network:a,config:n.config}),this.dns=u,this.isOnline=l,this.id=XN({network:a,peerId:i}),this.version=YN({repo:s}),this.bitswap=new iS({network:a}),this.bootstrap=new dS({repo:s}),this.config=oD({repo:s}),this.ping=Uie({network:a}),this.add=b,this.addAll=E,this.cat=_,this.get=A,this.ls=S,this.dag=w,this.files=k,this.key=new XM({keychain:o}),this.object=new hU({preload:c,codecs:r,repo:s}),this.repo=new mU({repo:s,hashers:this.hashers}),this.stats=new bU({repo:s,network:a}),this.swarm=new Lie({network:a}),Object.defineProperty(this,"libp2p",{get(){const e=a.try();return e?e.libp2p:void 0}});const T=()=>Promise.reject(Ut(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),C=async function*(){throw Ut(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=T,this.diag={cmds:T,net:T,sys:T},this.log={level:T,ls:T,tail:C},this.mount=T,this.codecs=r}async init(){throw new Ho}}const Qie=async e=>{const t=Rr({Data:new Xt({type:"directory"}).marshal(),Links:[]}),r=await e.block.put(t,{mhtype:"sha2-256",format:"dag-pb"});return await e.pin.add(r),r},Yie=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!mt.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function Jie(e={}){e=Kie(Yie(),e);const t=e.init||{},r={name:uo.name,code:uo.code,encode:e=>e,decode:e=>e},s=Object.values(zo);[n,i,o,a,r].concat(e.ipld&&e.ipld.codecs||[]).forEach((e=>s.push(e)));const c=new TH({codecs:s,loadCodec:e.ipld&&e.ipld.loadCodec}),u=e.silent?Hie:console.log;Hie("creating repo");const l=await yne.start(u,c,e);Hie("getting repo config");const h=await l.repo.config.getAll(),d=new Wie({storage:l,print:u,codecs:c,options:{...e,config:h}});if(Hie("starting preload"),await d.preload.start(),Hie("starting storage"),d.ipns.startOffline(l),l.isNew&&!t.emptyRepo){const e=await Qie(d);if(Hie("adding default assets"),await $o({addAll:d.addAll,print:u}),Hie("initializing IPNS keyspace"),null==l.peerId.publicKey)throw Ut(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");const t=new sa.TimeoutController(Gie);try{await d.ipns.initializeKeyspace(l.peerId,ia(`/ipfs/${e}`),{signal:t.signal})}finally{t.clear()}}return!1!==e.start&&(Hie("starting node"),await d.start()),d}r(2596);const Xie=Jie},4711:function(e,t,r){"use strict";r.d(t,{kU:function(){return p},Dp:function(){return f},ET:function(){return m}});r(3408),r(4590);function n(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";var r=0,n=0,i=0,s=t.length;while(i!==s&&0===t[i])i++,r++;var o=(s-i)*l+1>>>0,u=new Uint8Array(o);while(i!==s){for(var h=t[i],d=0,f=o-1;(0!==h||d<n)&&-1!==f;f--,d++)h+=256*u[f]>>>0,u[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}var p=o-n;while(p!==o&&0===u[p])p++;for(var y=c.repeat(r);p<o;++p)y+=e.charAt(u[p]);return y}function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){var n=0,i=0;while(e[t]===c)n++,t++;var s=(e.length-t)*u+1>>>0,o=new Uint8Array(s);while(e[t]){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<i)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){var f=s-i;while(f!==s&&0===o[f])f++;var p=new Uint8Array(n+(s-f)),y=n;while(f!==s)p[y++]=o[f++];return p}}}function f(e){var r=d(e);if(r)return r;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:d,decode:f}}var i=n,s=i,o=s,a=r(3914);class c{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class u{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return h(this,e)}}class l{constructor(e){this.decoders=e}or(e){return h(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h=(e,t)=>new l({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class d{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new c(e,t,r),this.decoder=new u(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const f=({name:e,prefix:t,encode:r,decode:n})=>new d(e,t,r,n),p=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=o(r,t);return f({prefix:e,name:t,encode:n,decode:e=>(0,a.coerce)(i(e))})},y=(e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let s=e.length;while("="===e[s-1])--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,u=0;for(let l=0;l<s;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},g=(e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c){a=a<<8|e[c],o+=8;while(o>r)o-=r,s+=t[i&a>>o]}if(o&&(s+=t[i&a<<r-o]),n)while(s.length*r&7)s+="=";return s},m=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>f({prefix:t,name:e,encode(e){return g(e,n,r)},decode(t){return y(t,n,r,e)}})},2056:function(e,t,r){"use strict";r.r(t),r.d(t,{base32:function(){return i},base32hex:function(){return c},base32hexpad:function(){return l},base32hexpadupper:function(){return h},base32hexupper:function(){return u},base32pad:function(){return o},base32padupper:function(){return a},base32upper:function(){return s},base32z:function(){return d}});var n=r(4711);const i=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},8334:function(e,t,r){"use strict";r.r(t),r.d(t,{base58btc:function(){return i},base58flickr:function(){return s}});var n=r(4711);const i=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},3914:function(e,t,r){"use strict";r.r(t),r.d(t,{coerce:function(){return a},empty:function(){return n},equals:function(){return o},fromHex:function(){return s},fromString:function(){return u},isBinary:function(){return c},toHex:function(){return i},toString:function(){return l}});r(3408),r(4590);const n=new Uint8Array(0),i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),s=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):n},o=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},a=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},c=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),u=e=>(new TextEncoder).encode(e),l=e=>(new TextDecoder).decode(e)},9329:function(e,t,r){"use strict";r.d(t,{k:function(){return c}});r(3408),r(4590);var n=r(550),i=r(5226),s=r(8334),o=r(2056),a=r(3914);class c{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:m,byteLength:m,code:g,version:g,multihash:g,bytes:g,_baseCache:m,asCID:m})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=i.Ue(e,t);return c.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&i.fS(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return l(t,n,e||s.base58btc.encoder);default:return h(t,n,e||o.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return v(/^0\.0/,b),!(!e||!e[y]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof c)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new c(t,r,n,i||p(t,r,n.bytes))}if(null!=e&&!0===e[y]){const{version:t,multihash:r,code:n}=e,s=i.Jx(r);return c.create(t,n,s)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new c(e,t,r,r.bytes);case 1:{const n=p(e,t,r.bytes);return new c(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return c.create(0,d,e)}static createV1(e,t){return c.create(1,e,t)}static decode(e){const[t,r]=c.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=c.inspectBytes(e),r=t.size-t.multihashSize,n=(0,a.coerce)(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=n.subarray(t.multihashSize-t.digestSize),o=new i.zZ(t.multihashCode,t.digestSize,s,n),u=0===t.version?c.createV0(o):c.createV1(t.codec,o);return[u,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=n.Jx(e.subarray(t));return t+=i,r};let i=r(),s=d;if(18===i?(i=0,t=0):1===i&&(s=r()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const o=t,a=r(),c=r(),u=t+c,l=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,t){const[r,n]=u(e,t),i=c.decode(n);return i._baseCache.set(r,e),i}}const u=(e,t)=>{switch(e[0]){case"Q":{const r=t||s.base58btc;return[s.base58btc.prefix,r.decode(`${s.base58btc.prefix}${e}`)]}case s.base58btc.prefix:{const r=t||s.base58btc;return[s.base58btc.prefix,r.decode(e)]}case o.base32.prefix:{const r=t||o.base32;return[o.base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},l=(e,t,r)=>{const{prefix:n}=r;if(n!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},h=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},d=112,f=18,p=(e,t,r)=>{const i=n.P$(e),s=i+n.P$(t),o=new Uint8Array(s+r.byteLength);return n.mL(e,o,0),n.mL(t,o,i),o.set(r,s),o},y=Symbol.for("@ipld/js-cid/CID"),g={writable:!1,configurable:!1,enumerable:!0},m={writable:!1,enumerable:!1,configurable:!1},w="0.0.0-dev",v=(e,t)=>{if(!e.test(w))throw new Error(t);console.warn(t)},b="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},5226:function(e,t,r){"use strict";r.d(t,{Jx:function(){return o},Ue:function(){return s},fS:function(){return a},zZ:function(){return c}});r(3408),r(4590);var n=r(3914),i=r(550);const s=(e,t)=>{const r=t.byteLength,n=i.P$(e),s=n+i.P$(r),o=new Uint8Array(s+r);return i.mL(e,o,0),i.mL(r,o,n),o.set(t,s),new c(e,r,t,o)},o=e=>{const t=(0,n.coerce)(e),[r,s]=i.Jx(t),[o,a]=i.Jx(t.subarray(s)),u=t.subarray(s+a);if(u.byteLength!==o)throw new Error("Incorrect length");return new c(r,o,u,t)},a=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&(0,n.equals)(e.bytes,t.bytes);class c{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}},550:function(e,t,r){"use strict";r.d(t,{Jx:function(){return I},mL:function(){return T},P$:function(){return C}});var n=c,i=128,s=127,o=~s,a=Math.pow(2,31);function c(e,t,r){t=t||[],r=r||0;var n=r;while(e>=a)t[r++]=255&e|i,e/=128;while(e&o)t[r++]=255&e|i,e>>>=7;return t[r]=0|e,c.bytes=r-n+1,t}var u=d,l=128,h=127;function d(e,t){var r,n=0,i=(t=t||0,0),s=t,o=e.length;do{if(s>=o)throw d.bytes=0,new RangeError("Could not decode varint");r=e[s++],n+=i<28?(r&h)<<i:(r&h)*Math.pow(2,i),i+=7}while(r>=l);return d.bytes=s-t,n}var f=Math.pow(2,7),p=Math.pow(2,14),y=Math.pow(2,21),g=Math.pow(2,28),m=Math.pow(2,35),w=Math.pow(2,42),v=Math.pow(2,49),b=Math.pow(2,56),E=Math.pow(2,63),_=function(e){return e<f?1:e<p?2:e<y?3:e<g?4:e<m?5:e<w?6:e<v?7:e<b?8:e<E?9:10},A={encode:n,decode:u,encodingLength:_},S=A,k=S;const I=(e,t=0)=>{const r=k.decode(e,t);return[r,k.decode.bytes]},T=(e,t,r=0)=>(k.encode(e,t,r),t),C=e=>k.encodingLength(e)},1020:function(e,t,r){"use strict";r.d(t,{WB:function(){return le},Q_:function(){return _e},Jk:function(){return Ae}});r(7658),r(541);var n=r(4870),i=r(3396),s=!1;function o(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function a(){return c().__VUE_DEVTOOLS_GLOBAL_HOOK__}function c(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{}}const u="function"===typeof Proxy,l="devtools-plugin:setup",h="plugin:settings:set";let d,f,p;function y(){var e;return void 0!==d||("undefined"!==typeof window&&window.performance?(d=!0,f=window.performance):"undefined"!==typeof r.g&&(null===(e=r.g.perf_hooks)||void 0===e?void 0:e.performance)?(d=!0,f=r.g.perf_hooks.performance):d=!1),d}function g(){return y()?f.now():Date.now()}class m{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const r={};if(e.settings)for(const o in e.settings){const t=e.settings[o];r[o]=t.defaultValue}const n=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const e=localStorage.getItem(n),t=JSON.parse(e);Object.assign(i,t)}catch(s){}this.fallbacks={getSettings(){return i},setSettings(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(s){}i=e},now(){return g()}},t&&t.on(h,((e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)})),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise((r=>{this.targetQueue.push({method:t,args:e,resolve:r})}))})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function w(e,t){const r=e,n=c(),i=a(),s=u&&r.enableEarlyProxy;if(!i||!n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&s){const e=s?new m(r,i):null,o=n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:r,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else i.emit(l,e,t)}const v=e=>p=e,b=Symbol();function E(e){return e&&"object"===typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!==typeof e.toJSON}var _;(function(e){e["direct"]="direct",e["patchObject"]="patch object",e["patchFunction"]="patch function"})(_||(_={}));const A="undefined"!==typeof window,S=!1,k=(()=>"object"===typeof window&&window.window===window?window:"object"===typeof self&&self.self===self?self:"object"===typeof global&&global.global===global?global:"object"===typeof globalThis?globalThis:{HTMLElement:null})();function I(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function T(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){O(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function C(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(r){}return t.status>=200&&t.status<=299}function R(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const P="object"===typeof navigator?navigator:{userAgent:""},x=(()=>/Macintosh/.test(P.userAgent)&&/AppleWebKit/.test(P.userAgent)&&!/Safari/.test(P.userAgent))(),O=A?"undefined"!==typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!x?N:"msSaveOrOpenBlob"in P?D:B:()=>{};function N(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener","string"===typeof e?(n.href=e,n.origin!==location.origin?C(n.href)?T(e,t,r):(n.target="_blank",R(n)):R(n)):(n.href=URL.createObjectURL(e),setTimeout((function(){URL.revokeObjectURL(n.href)}),4e4),setTimeout((function(){R(n)}),0))}function D(e,t="download",r){if("string"===typeof e)if(C(e))T(e,t,r);else{const t=document.createElement("a");t.href=e,t.target="_blank",setTimeout((function(){R(t)}))}else navigator.msSaveOrOpenBlob(I(e,r),t)}function B(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),"string"===typeof e)return T(e,t,r);const i="application/octet-stream"===e.type,s=/constructor/i.test(String(k.HTMLElement))||"safari"in k,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s||x)&&"undefined"!==typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if("string"!==typeof e)throw n=null,new Error("Wrong reader.result type");e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location.assign(e),n=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);n?n.location.assign(t):location.href=t,n=null,setTimeout((function(){URL.revokeObjectURL(t)}),4e4)}}function L(e,t){const r="🍍 "+e;"function"===typeof __VUE_DEVTOOLS_TOAST__?__VUE_DEVTOOLS_TOAST__(r,t):"error"===t?console.error(r):"warn"===t?console.warn(r):console.log(r)}function M(e){return"_a"in e&&"install"in e}function U(){if(!("clipboard"in navigator))return L("Your browser doesn't support the Clipboard API","error"),!0}function F(e){return!!(e instanceof Error&&e.message.toLowerCase().includes("document is not focused"))&&(L('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0)}async function j(e){if(!U())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),L("Global state copied to clipboard.")}catch(t){if(F(t))return;L("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function V(e){if(!U())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),L("Global state pasted from clipboard.")}catch(t){if(F(t))return;L("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function z(e){try{O(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){L("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let $;function q(){function e(){return new Promise(((e,t)=>{$.onchange=async()=>{const t=$.files;if(!t)return e(null);const r=t.item(0);return e(r?{text:await r.text(),file:r}:null)},$.oncancel=()=>e(null),$.onerror=t,$.click()}))}return $||($=document.createElement("input"),$.type="file",$.accept=".json"),e}async function K(e){try{const t=await q(),r=await t();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),L(`Global state imported from "${i.name}".`)}catch(t){L("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function H(e){return{_custom:{display:e}}}const G="🍍 Pinia (root)",W="_root";function Q(e){return M(e)?{id:W,label:G}:{id:e.$id,label:e.$id}}function Y(e){if(M(e)){const t=Array.from(e._s.keys()),r=e._s,n={state:t.map((t=>({editable:!0,key:t,value:e.state.value[t]}))),getters:t.filter((e=>r.get(e)._getters)).map((e=>{const t=r.get(e);return{editable:!1,key:e,value:t._getters.reduce(((e,r)=>(e[r]=t[r],e)),{})}}))};return n}const t={state:Object.keys(e.$state).map((t=>({editable:!0,key:t,value:e.$state[t]})))};return e._getters&&e._getters.length&&(t.getters=e._getters.map((t=>({editable:!1,key:t,value:e[t]})))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map((t=>({editable:!0,key:t,value:e[t]})))),t}function J(e){return e?Array.isArray(e)?e.reduce(((e,t)=>(e.keys.push(t.key),e.operations.push(t.type),e.oldValue[t.key]=t.oldValue,e.newValue[t.key]=t.newValue,e)),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:H(e.type),key:H(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function X(e){switch(e){case _.direct:return"mutation";case _.patchFunction:return"$patch";case _.patchObject:return"$patch";default:return"unknown"}}let Z=!0;const ee=[],te="pinia:mutations",re="pinia",ne=e=>"🍍 "+e;function ie(e,t){w({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:ee,app:e},(r=>{"function"!==typeof r.now&&L("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:te,label:"Pinia 🍍",color:15064968}),r.addInspector({id:re,label:"Pinia 🍍",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{j(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await V(t),r.sendInspectorTree(re),r.sendInspectorState(re)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{z(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await K(t),r.sendInspectorTree(re),r.sendInspectorState(re)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:e=>{const r=t._s.get(e);r?r._isOptionsAPI?(r.$reset(),L(`Store "${e}" reset.`)):L(`Cannot reset "${e}" store because it's a setup store.`,"warn"):L(`Cannot reset "${e}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent(((e,t)=>{const r=e.componentInstance&&e.componentInstance.proxy;if(r&&r._pStores){const t=e.componentInstance.proxy._pStores;Object.values(t).forEach((t=>{e.instanceData.state.push({type:ne(t.$id),key:"state",editable:!0,value:t._isOptionsAPI?{_custom:{value:(0,n.IU)(t.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>t.$reset()}]}}:Object.keys(t.$state).reduce(((e,r)=>(e[r]=t.$state[r],e)),{})}),t._getters&&t._getters.length&&e.instanceData.state.push({type:ne(t.$id),key:"getters",editable:!1,value:t._getters.reduce(((e,r)=>{try{e[r]=t[r]}catch(n){e[r]=n}return e}),{})})}))}})),r.on.getInspectorTree((r=>{if(r.app===e&&r.inspectorId===re){let e=[t];e=e.concat(Array.from(t._s.values())),r.rootNodes=(r.filter?e.filter((e=>"$id"in e?e.$id.toLowerCase().includes(r.filter.toLowerCase()):G.toLowerCase().includes(r.filter.toLowerCase()))):e).map(Q)}})),r.on.getInspectorState((r=>{if(r.app===e&&r.inspectorId===re){const e=r.nodeId===W?t:t._s.get(r.nodeId);if(!e)return;e&&(r.state=Y(e))}})),r.on.editInspectorState(((r,n)=>{if(r.app===e&&r.inspectorId===re){const e=r.nodeId===W?t:t._s.get(r.nodeId);if(!e)return L(`store "${r.nodeId}" not found`,"error");const{path:n}=r;M(e)?n.unshift("state"):1===n.length&&e._customProperties.has(n[0])&&!(n[0]in e.$state)||n.unshift("$state"),Z=!1,r.set(e,n,r.state.value),Z=!0}})),r.on.editComponentState((e=>{if(e.type.startsWith("🍍")){const r=e.type.replace(/^🍍\s*/,""),n=t._s.get(r);if(!n)return L(`store "${r}" not found`,"error");const{path:i}=e;if("state"!==i[0])return L(`Invalid path for store "${r}":\n${i}\nOnly state can be modified.`);i[0]="$state",Z=!1,e.set(n,i,e.state.value),Z=!0}}))}))}function se(e,t){ee.includes(ne(t.$id))||ee.push(ne(t.$id)),w({id:"dev.esm.pinia",label:"Pinia 🍍",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:ee,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},(e=>{const r="function"===typeof e.now?e.now.bind(e):Date.now;t.$onAction((({after:n,onError:i,name:s,args:o})=>{const a=ae++;e.addTimelineEvent({layerId:te,event:{time:r(),title:"🛫 "+s,subtitle:"start",data:{store:H(t.$id),action:H(s),args:o},groupId:a}}),n((n=>{oe=void 0,e.addTimelineEvent({layerId:te,event:{time:r(),title:"🛬 "+s,subtitle:"end",data:{store:H(t.$id),action:H(s),args:o,result:n},groupId:a}})})),i((n=>{oe=void 0,e.addTimelineEvent({layerId:te,event:{time:r(),logType:"error",title:"💥 "+s,subtitle:"end",data:{store:H(t.$id),action:H(s),args:o,error:n},groupId:a}})}))}),!0),t._customProperties.forEach((s=>{(0,i.YP)((()=>(0,n.SU)(t[s])),((t,n)=>{e.notifyComponentUpdate(),e.sendInspectorState(re),Z&&e.addTimelineEvent({layerId:te,event:{time:r(),title:"Change",subtitle:s,data:{newValue:t,oldValue:n},groupId:oe}})}),{deep:!0})})),t.$subscribe((({events:n,type:i},s)=>{if(e.notifyComponentUpdate(),e.sendInspectorState(re),!Z)return;const o={time:r(),title:X(i),data:{store:H(t.$id),...J(n)},groupId:oe};oe=void 0,i===_.patchFunction?o.subtitle="⤵️":i===_.patchObject?o.subtitle="🧩":n&&!Array.isArray(n)&&(o.subtitle=n.type),n&&(o.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:n}}),e.addTimelineEvent({layerId:te,event:o})}),{detached:!0,flush:"sync"});const s=t._hotUpdate;t._hotUpdate=(0,n.Xl)((n=>{s(n),e.addTimelineEvent({layerId:te,event:{time:r(),title:"🔥 "+t.$id,subtitle:"HMR update",data:{store:H(t.$id),info:H("HMR update")}}}),e.notifyComponentUpdate(),e.sendInspectorTree(re),e.sendInspectorState(re)}));const{$dispose:o}=t;t.$dispose=()=>{o(),e.notifyComponentUpdate(),e.sendInspectorTree(re),e.sendInspectorState(re),e.getSettings().logStoreChanges&&L(`Disposed "${t.$id}" store 🗑`)},e.notifyComponentUpdate(),e.sendInspectorTree(re),e.sendInspectorState(re),e.getSettings().logStoreChanges&&L(`"${t.$id}" store installed 🆕`)}))}let oe,ae=0;function ce(e,t){const r=t.reduce(((t,r)=>(t[r]=(0,n.IU)(e)[r],t)),{});for(const n in r)e[n]=function(){const t=ae,i=new Proxy(e,{get(...e){return oe=t,Reflect.get(...e)},set(...e){return oe=t,Reflect.set(...e)}});return r[n].apply(i,arguments)}}function ue({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),"function"===typeof r.state){ce(t,Object.keys(r.actions));const e=t._hotUpdate;(0,n.IU)(t)._hotUpdate=function(r){e.apply(this,arguments),ce(t,Object.keys(r._hmrPayload.actions))}}se(e,t)}}function le(){const e=(0,n.B)(!0),t=e.run((()=>(0,n.iH)({})));let r=[],i=[];const o=(0,n.Xl)({install(e){v(o),s||(o._a=e,e.provide(b,o),e.config.globalProperties.$pinia=o,S&&ie(e,o),i.forEach((e=>r.push(e))),i=[])},use(e){return this._a||s?r.push(e):i.push(e),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return S&&"undefined"!==typeof Proxy&&o.use(ue),o}const he=()=>{};function de(e,t,r,n=he){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),n())};return!r&&(0,i.FN)()&&(0,i.Ah)(s),s}function fe(e,...t){e.slice().forEach((e=>{e(...t)}))}function pe(e,t){e instanceof Map&&t instanceof Map&&t.forEach(((t,r)=>e.set(r,t))),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r],s=e[r];E(s)&&E(i)&&e.hasOwnProperty(r)&&!(0,n.dq)(i)&&!(0,n.PG)(i)?e[r]=pe(s,i):e[r]=i}return e}const ye=Symbol(),ge=new WeakMap;function me(e){return s?!ge.has(e):!E(e)||!e.hasOwnProperty(ye)}const{assign:we}=Object;function ve(e){return!(!(0,n.dq)(e)||!e.effect)}function be(e,t,r,a){const{state:c,actions:u,getters:l}=t,h=r.state.value[e];let d;function f(){h||(s?o(r.state.value,e,c?c():{}):r.state.value[e]=c?c():{});const t=(0,n.BK)(r.state.value[e]);return we(t,u,Object.keys(l||{}).reduce(((t,o)=>(t[o]=(0,n.Xl)((0,i.Fl)((()=>{v(r);const t=r._s.get(e);if(!s||t._r)return l[o].call(t,t)}))),t)),{}))}return d=Ee(e,f,t,r,a,!0),d.$reset=function(){const e=c?c():{};this.$patch((t=>{we(t,e)}))},d}function Ee(e,t,r={},a,c,u){let l;const h=we({actions:{}},r);const d={deep:!0};let f,p;let y,g=(0,n.Xl)([]),m=(0,n.Xl)([]);const w=a.state.value[e];u||w||(s?o(a.state.value,e,{}):a.state.value[e]={});const b=(0,n.iH)({});let E;function A(t){let r;f=p=!1,"function"===typeof t?(t(a.state.value[e]),r={type:_.patchFunction,storeId:e,events:y}):(pe(a.state.value[e],t),r={type:_.patchObject,payload:t,storeId:e,events:y});const n=E=Symbol();(0,i.Y3)().then((()=>{E===n&&(f=!0)})),p=!0,fe(g,r,a.state.value[e])}const k=he;function I(){l.stop(),g=[],m=[],a._s.delete(e)}function T(t,r){return function(){v(a);const n=Array.from(arguments),i=[],s=[];function o(e){i.push(e)}function c(e){s.push(e)}let u;fe(m,{args:n,name:t,store:P,after:o,onError:c});try{u=r.apply(this&&this.$id===e?this:P,n)}catch(l){throw fe(s,l),l}return u instanceof Promise?u.then((e=>(fe(i,e),e))).catch((e=>(fe(s,e),Promise.reject(e)))):(fe(i,u),u)}}const C=(0,n.Xl)({actions:{},getters:{},state:[],hotState:b}),R={_p:a,$id:e,$onAction:de.bind(null,m),$patch:A,$reset:k,$subscribe(t,r={}){const n=de(g,t,r.detached,(()=>s())),s=l.run((()=>(0,i.YP)((()=>a.state.value[e]),(n=>{("sync"===r.flush?p:f)&&t({storeId:e,type:_.direct,events:y},n)}),we({},d,r))));return n},$dispose:I};s&&(R._r=!1);const P=(0,n.qj)(S?we({_hmrPayload:C,_customProperties:(0,n.Xl)(new Set)},R):R);a._s.set(e,P);const x=a._e.run((()=>(l=(0,n.B)(),l.run((()=>t())))));for(const i in x){const t=x[i];if((0,n.dq)(t)&&!ve(t)||(0,n.PG)(t))u||(w&&me(t)&&((0,n.dq)(t)?t.value=w[i]:pe(t,w[i])),s?o(a.state.value[e],i,t):a.state.value[e][i]=t);else if("function"===typeof t){const e=T(i,t);s?o(x,i,e):x[i]=e,h.actions[i]=t}else 0}if(s?Object.keys(x).forEach((e=>{o(P,e,x[e])})):(we(P,x),we((0,n.IU)(P),x)),Object.defineProperty(P,"$state",{get:()=>a.state.value[e],set:e=>{A((t=>{we(t,e)}))}}),S){const e={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach((t=>{Object.defineProperty(P,t,{value:P[t],...e})}))}return s&&(P._r=!0),a._p.forEach((e=>{if(S){const t=l.run((()=>e({store:P,app:a._a,pinia:a,options:h})));Object.keys(t||{}).forEach((e=>P._customProperties.add(e))),we(P,t)}else we(P,l.run((()=>e({store:P,app:a._a,pinia:a,options:h}))))})),w&&u&&r.hydrate&&r.hydrate(P.$state,w),f=!0,p=!0,P}function _e(e,t,r){let n,s;const o="function"===typeof t;function a(e,r){const a=(0,i.FN)();e=e||a&&(0,i.f3)(b),e&&v(e),e=p,e._s.has(n)||(o?Ee(n,t,s,e):be(n,s,e));const c=e._s.get(n);return c}return"string"===typeof e?(n=e,s=o?r:t):(s=e,n=e.id),a.$id=n,a}function Ae(e){if(s)return(0,n.BK)(e);{e=(0,n.IU)(e);const t={};for(const r in e){const i=e[r];((0,n.dq)(i)||(0,n.PG)(i))&&(t[r]=(0,n.Vh)(e,r))}return t}}},708:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});r(3408),r(4590);var n=r(6402);function i(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?(0,n.P)(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}},5489:function(e,t,r){"use strict";r.r(t),r.d(t,{concat:function(){return s}});var n=r(708),i=r(6402);function s(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=(0,n.E)(t);let s=0;for(const n of e)r.set(n,s),s+=n.length;return(0,i.P)(r)}},6402:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});r(3408),r(4590);function n(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}},2483:function(e,t,r){"use strict";r.d(t,{PO:function(){return F},p7:function(){return tt}});r(7658),r(541);var n=r(3396),i=r(4870);
/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof window;function o(e){return e.__esModule||"Module"===e[Symbol.toStringTag]}const a=Object.assign;function c(e,t){const r={};for(const n in t){const i=t[n];r[n]=l(i)?i.map(e):e(i)}return r}const u=()=>{},l=Array.isArray;const h=/\/$/,d=e=>e.replace(h,"");function f(e,t,r="/"){let n,i={},s="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(n=t.slice(0,c),s=t.slice(c+1,a>-1?a:t.length),i=e(s)),a>-1&&(n=n||t.slice(0,a),o=t.slice(a,t.length)),n=E(null!=n?n:t,r),{fullPath:n+(s&&"?")+s+o,path:n,query:i,hash:o}}function p(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function y(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function g(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&m(t.matched[n],r.matched[i])&&w(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function m(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function w(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!v(e[r],t[r]))return!1;return!0}function v(e,t){return l(e)?b(e,t):l(t)?b(t,e):e===t}function b(e,t){return l(t)?e.length===t.length&&e.every(((e,r)=>e===t[r])):1===e.length&&e[0]===t}function E(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i,s,o=r.length-1;for(i=0;i<n.length;i++)if(s=n[i],"."!==s){if(".."!==s)break;o>1&&o--}return r.slice(0,o).join("/")+"/"+n.slice(i-(i===n.length?1:0)).join("/")}var _,A;(function(e){e["pop"]="pop",e["push"]="push"})(_||(_={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(A||(A={}));function S(e){if(!e)if(s){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),d(e)}const k=/^[^#]+#/;function I(e,t){return e.replace(k,"#")+t}function T(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const C=()=>({left:window.pageXOffset,top:window.pageYOffset});function R(e){let t;if("el"in e){const r=e.el,n="string"===typeof r&&r.startsWith("#");0;const i="string"===typeof r?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=T(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function P(e,t){const r=history.state?history.state.position-t:-1;return r+e}const x=new Map;function O(e,t){x.set(e,t)}function N(e){const t=x.get(e);return x.delete(e),t}let D=()=>location.protocol+"//"+location.host;function B(e,t){const{pathname:r,search:n,hash:i}=t,s=e.indexOf("#");if(s>-1){let t=i.includes(e.slice(s))?e.slice(s).length:1,r=i.slice(t);return"/"!==r[0]&&(r="/"+r),y(r,"")}const o=y(r,e);return o+n+i}function L(e,t,r,n){let i=[],s=[],o=null;const c=({state:s})=>{const a=B(e,location),c=r.value,u=t.value;let l=0;if(s){if(r.value=a,t.value=s,o&&o===c)return void(o=null);l=u?s.position-u.position:0}else n(a);i.forEach((e=>{e(r.value,c,{delta:l,type:_.pop,direction:l?l>0?A.forward:A.back:A.unknown})}))};function u(){o=r.value}function l(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return s.push(t),t}function h(){const{history:e}=window;e.state&&e.replaceState(a({},e.state,{scroll:C()}),"")}function d(){for(const e of s)e();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h),{pauseListeners:u,listen:l,destroy:d}}function M(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?C():null}}function U(e){const{history:t,location:r}=window,n={value:B(e,r)},i={value:t.state};function s(n,s,o){const a=e.indexOf("#"),c=a>-1?(r.host&&document.querySelector("base")?e:e.slice(a))+n:D()+e+n;try{t[o?"replaceState":"pushState"](s,"",c),i.value=s}catch(u){console.error(u),r[o?"replace":"assign"](c)}}function o(e,r){const o=a({},t.state,M(i.value.back,e,i.value.forward,!0),r,{position:i.value.position});s(e,o,!0),n.value=e}function c(e,r){const o=a({},i.value,t.state,{forward:e,scroll:C()});s(o.current,o,!0);const c=a({},M(n.value,e,null),{position:o.position+1},r);s(e,c,!1),n.value=e}return i.value||s(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:n,state:i,push:c,replace:o}}function F(e){e=S(e);const t=U(e),r=L(e,t.state,t.location,t.replace);function n(e,t=!0){t||r.pauseListeners(),history.go(e)}const i=a({location:"",base:e,go:n,createHref:I.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function j(e){return"string"===typeof e||e&&"object"===typeof e}function V(e){return"string"===typeof e||"symbol"===typeof e}const z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},$=Symbol("");var q;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(q||(q={}));function K(e,t){return a(new Error,{type:e,[$]:!0},t)}function H(e,t){return e instanceof Error&&$ in e&&(null==t||!!(e.type&t))}const G="[^/]+?",W={sensitive:!1,strict:!1,start:!0,end:!0},Q=/[.+*?^${}()[\]/\\]/g;function Y(e,t){const r=a({},W,t),n=[];let i=r.start?"^":"";const s=[];for(const a of e){const e=a.length?[]:[90];r.strict&&!a.length&&(i+="/");for(let t=0;t<a.length;t++){const n=a[t];let o=40+(r.sensitive?.25:0);if(0===n.type)t||(i+="/"),i+=n.value.replace(Q,"\\$&"),o+=40;else if(1===n.type){const{value:e,repeatable:r,optional:c,regexp:u}=n;s.push({name:e,repeatable:r,optional:c});const l=u||G;if(l!==G){o+=10;try{new RegExp(`(${l})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${e}" (${l}): `+h.message)}}let d=r?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;t||(d=c&&a.length<2?`(?:/${d})`:"/"+d),c&&(d+="?"),i+=d,o+=20,c&&(o+=-8),r&&(o+=-20),".*"===l&&(o+=-50)}e.push(o)}n.push(e)}if(r.strict&&r.end){const e=n.length-1;n[e][n[e].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const o=new RegExp(i,r.sensitive?"":"i");function c(e){const t=e.match(o),r={};if(!t)return null;for(let n=1;n<t.length;n++){const e=t[n]||"",i=s[n-1];r[i.name]=e&&i.repeatable?e.split("/"):e}return r}function u(t){let r="",n=!1;for(const i of e){n&&r.endsWith("/")||(r+="/"),n=!1;for(const e of i)if(0===e.type)r+=e.value;else if(1===e.type){const{value:s,repeatable:o,optional:a}=e,c=s in t?t[s]:"";if(l(c)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const u=l(c)?c.join("/"):c;if(!u){if(!a)throw new Error(`Missing required param "${s}"`);i.length<2&&(r.endsWith("/")?r=r.slice(0,-1):n=!0)}r+=u}}return r||"/"}return{re:o,score:n,keys:s,parse:c,stringify:u}}function J(e,t){let r=0;while(r<e.length&&r<t.length){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function X(e,t){let r=0;const n=e.score,i=t.score;while(r<n.length&&r<i.length){const e=J(n[r],i[r]);if(e)return e;r++}if(1===Math.abs(i.length-n.length)){if(Z(n))return 1;if(Z(i))return-1}return i.length-n.length}function Z(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ee={type:0,value:""},te=/[a-zA-Z0-9_]/;function re(e){if(!e)return[[]];if("/"===e)return[[ee]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${r})/"${u}": ${e}`)}let r=0,n=r;const i=[];let s;function o(){s&&i.push(s),s=[]}let a,c=0,u="",l="";function h(){u&&(0===r?s.push({type:0,value:u}):1===r||2===r||3===r?(s.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),u="")}function d(){u+=a}while(c<e.length)if(a=e[c++],"\\"!==a||2===r)switch(r){case 0:"/"===a?(u&&h(),o()):":"===a?(h(),r=1):d();break;case 4:d(),r=n;break;case 1:"("===a?r=2:te.test(a)?d():(h(),r=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:r=3:l+=a;break;case 3:h(),r=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,l="";break;default:t("Unknown state");break}else n=r,r=4;return 2===r&&t(`Unfinished custom RegExp for param "${u}"`),h(),o(),i}function ne(e,t,r){const n=Y(re(e.path),r);const i=a(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf===!t.record.aliasOf&&t.children.push(i),i}function ie(e,t){const r=[],n=new Map;function i(e){return n.get(e)}function s(e,r,n){const i=!n,c=oe(e);c.aliasOf=n&&n.record;const h=le(t,e),d=[c];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)d.push(a({},c,{components:n?n.record.components:c.components,path:e,aliasOf:n?n.record:c}))}let f,p;for(const t of d){const{path:a}=t;if(r&&"/"!==a[0]){const e=r.record.path,n="/"===e[e.length-1]?"":"/";t.path=r.record.path+(a&&n+a)}if(f=ne(t,r,h),n?n.alias.push(f):(p=p||f,p!==f&&p.alias.push(f),i&&e.name&&!ce(f)&&o(e.name)),c.children){const e=c.children;for(let t=0;t<e.length;t++)s(e[t],f,n&&n.children[t])}n=n||f,l(f)}return p?()=>{o(p)}:u}function o(e){if(V(e)){const t=n.get(e);t&&(n.delete(e),r.splice(r.indexOf(t),1),t.children.forEach(o),t.alias.forEach(o))}else{const t=r.indexOf(e);t>-1&&(r.splice(t,1),e.record.name&&n.delete(e.record.name),e.children.forEach(o),e.alias.forEach(o))}}function c(){return r}function l(e){let t=0;while(t<r.length&&X(e,r[t])>=0&&(e.record.path!==r[t].record.path||!he(e,r[t])))t++;r.splice(t,0,e),e.record.name&&!ce(e)&&n.set(e.record.name,e)}function h(e,t){let i,s,o,c={};if("name"in e&&e.name){if(i=n.get(e.name),!i)throw K(1,{location:e});0,o=i.record.name,c=a(se(t.params,i.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params&&se(e.params,i.keys.map((e=>e.name)))),s=i.stringify(c)}else if("path"in e)s=e.path,i=r.find((e=>e.re.test(s))),i&&(c=i.parse(s),o=i.record.name);else{if(i=t.name?n.get(t.name):r.find((e=>e.re.test(t.path))),!i)throw K(1,{location:e,currentLocation:t});o=i.record.name,c=a({},t.params,e.params),s=i.stringify(c)}const u=[];let l=i;while(l)u.unshift(l.record),l=l.parent;return{name:o,path:s,params:c,matched:u,meta:ue(u)}}return t=le({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>s(e))),{addRoute:s,resolve:h,removeRoute:o,getRoutes:c,getRecordMatcher:i}}function se(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function oe(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:ae(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function ae(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]="boolean"===typeof r?r:r[n];return t}function ce(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ue(e){return e.reduce(((e,t)=>a(e,t.meta)),{})}function le(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function he(e,t){return t.children.some((t=>t===e||he(e,t)))}const de=/#/g,fe=/&/g,pe=/\//g,ye=/=/g,ge=/\?/g,me=/\+/g,we=/%5B/g,ve=/%5D/g,be=/%5E/g,Ee=/%60/g,_e=/%7B/g,Ae=/%7C/g,Se=/%7D/g,ke=/%20/g;function Ie(e){return encodeURI(""+e).replace(Ae,"|").replace(we,"[").replace(ve,"]")}function Te(e){return Ie(e).replace(_e,"{").replace(Se,"}").replace(be,"^")}function Ce(e){return Ie(e).replace(me,"%2B").replace(ke,"+").replace(de,"%23").replace(fe,"%26").replace(Ee,"`").replace(_e,"{").replace(Se,"}").replace(be,"^")}function Re(e){return Ce(e).replace(ye,"%3D")}function Pe(e){return Ie(e).replace(de,"%23").replace(ge,"%3F")}function xe(e){return null==e?"":Pe(e).replace(pe,"%2F")}function Oe(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Ne(e){const t={};if(""===e||"?"===e)return t;const r="?"===e[0],n=(r?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const e=n[i].replace(me," "),r=e.indexOf("="),s=Oe(r<0?e:e.slice(0,r)),o=r<0?null:Oe(e.slice(r+1));if(s in t){let e=t[s];l(e)||(e=t[s]=[e]),e.push(o)}else t[s]=o}return t}function De(e){let t="";for(let r in e){const n=e[r];if(r=Re(r),null==n){void 0!==n&&(t+=(t.length?"&":"")+r);continue}const i=l(n)?n.map((e=>e&&Ce(e))):[n&&Ce(n)];i.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+r,null!=e&&(t+="="+e))}))}return t}function Be(e){const t={};for(const r in e){const n=e[r];void 0!==n&&(t[r]=l(n)?n.map((e=>null==e?null:""+e)):null==n?n:""+n)}return t}const Le=Symbol(""),Me=Symbol(""),Ue=Symbol(""),Fe=Symbol(""),je=Symbol("");function Ve(){let e=[];function t(t){return e.push(t),()=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function ze(e,t,r,n,i){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise(((o,a)=>{const c=e=>{!1===e?a(K(4,{from:r,to:t})):e instanceof Error?a(e):j(e)?a(K(2,{from:t,to:e})):(s&&n.enterCallbacks[i]===s&&"function"===typeof e&&s.push(e),o())},u=e.call(n&&n.instances[i],t,r,c);let l=Promise.resolve(u);e.length<3&&(l=l.then(c)),l.catch((e=>a(e)))}))}function $e(e,t,r,n){const i=[];for(const s of e){0;for(const e in s.components){let a=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(qe(a)){const o=a.__vccOpts||a,c=o[t];c&&i.push(ze(c,r,n,s,e))}else{let c=a();0,i.push((()=>c.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${s.path}"`));const a=o(i)?i.default:i;s.components[e]=a;const c=a.__vccOpts||a,u=c[t];return u&&ze(u,r,n,s,e)()}))))}}}return i}function qe(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function Ke(e){const t=(0,n.f3)(Ue),r=(0,n.f3)(Fe),s=(0,n.Fl)((()=>t.resolve((0,i.SU)(e.to)))),o=(0,n.Fl)((()=>{const{matched:e}=s.value,{length:t}=e,n=e[t-1],i=r.matched;if(!n||!i.length)return-1;const o=i.findIndex(m.bind(null,n));if(o>-1)return o;const a=Ye(e[t-2]);return t>1&&Ye(n)===a&&i[i.length-1].path!==a?i.findIndex(m.bind(null,e[t-2])):o})),a=(0,n.Fl)((()=>o.value>-1&&Qe(r.params,s.value.params))),c=(0,n.Fl)((()=>o.value>-1&&o.value===r.matched.length-1&&w(r.params,s.value.params)));function l(r={}){return We(r)?t[(0,i.SU)(e.replace)?"replace":"push"]((0,i.SU)(e.to)).catch(u):Promise.resolve()}return{route:s,href:(0,n.Fl)((()=>s.value.href)),isActive:a,isExactActive:c,navigate:l}}const He=(0,n.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ke,setup(e,{slots:t}){const r=(0,i.qj)(Ke(e)),{options:s}=(0,n.f3)(Ue),o=(0,n.Fl)((()=>({[Je(e.activeClass,s.linkActiveClass,"router-link-active")]:r.isActive,[Je(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive})));return()=>{const i=t.default&&t.default(r);return e.custom?i:(0,n.h)("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},i)}}}),Ge=He;function We(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Qe(e,t){for(const r in t){const n=t[r],i=e[r];if("string"===typeof n){if(n!==i)return!1}else if(!l(i)||i.length!==n.length||n.some(((e,t)=>e!==i[t])))return!1}return!0}function Ye(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Je=(e,t,r)=>null!=e?e:null!=t?t:r,Xe=(0,n.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const s=(0,n.f3)(je),o=(0,n.Fl)((()=>e.route||s.value)),c=(0,n.f3)(Me,0),u=(0,n.Fl)((()=>{let e=(0,i.SU)(c);const{matched:t}=o.value;let r;while((r=t[e])&&!r.components)e++;return e})),l=(0,n.Fl)((()=>o.value.matched[u.value]));(0,n.JJ)(Me,(0,n.Fl)((()=>u.value+1))),(0,n.JJ)(Le,l),(0,n.JJ)(je,o);const h=(0,i.iH)();return(0,n.YP)((()=>[h.value,l.value,e.name]),(([e,t,r],[n,i,s])=>{t&&(t.instances[r]=e,i&&i!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&m(t,i)&&n||(t.enterCallbacks[r]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const i=o.value,s=e.name,c=l.value,u=c&&c.components[s];if(!u)return Ze(r.default,{Component:u,route:i});const d=c.props[s],f=d?!0===d?i.params:"function"===typeof d?d(i):d:null,p=e=>{e.component.isUnmounted&&(c.instances[s]=null)},y=(0,n.h)(u,a({},f,t,{onVnodeUnmounted:p,ref:h}));return Ze(r.default,{Component:y,route:i})||y}}});function Ze(e,t){if(!e)return null;const r=e(t);return 1===r.length?r[0]:r}const et=Xe;function tt(e){const t=ie(e.routes,e),r=e.parseQuery||Ne,o=e.stringifyQuery||De,h=e.history;const d=Ve(),y=Ve(),m=Ve(),w=(0,i.XI)(z);let v=z;s&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=c.bind(null,(e=>""+e)),E=c.bind(null,xe),A=c.bind(null,Oe);function S(e,r){let n,i;return V(e)?(n=t.getRecordMatcher(e),i=r):i=e,t.addRoute(i,n)}function k(e){const r=t.getRecordMatcher(e);r&&t.removeRoute(r)}function I(){return t.getRoutes().map((e=>e.record))}function T(e){return!!t.getRecordMatcher(e)}function x(e,n){if(n=a({},n||w.value),"string"===typeof e){const i=f(r,e,n.path),s=t.resolve({path:i.path},n),o=h.createHref(i.fullPath);return a(i,s,{params:A(s.params),hash:Oe(i.hash),redirectedFrom:void 0,href:o})}let i;if("path"in e)i=a({},e,{path:f(r,e.path,n.path).path});else{const t=a({},e.params);for(const e in t)null==t[e]&&delete t[e];i=a({},e,{params:E(e.params)}),n.params=E(n.params)}const s=t.resolve(i,n),c=e.hash||"";s.params=b(A(s.params));const u=p(o,a({},e,{hash:Te(c),path:s.path})),l=h.createHref(u);return a({fullPath:u,hash:c,query:o===De?Be(e.query):e.query||{}},s,{redirectedFrom:void 0,href:l})}function D(e){return"string"===typeof e?f(r,e,w.value.path):a({},e)}function B(e,t){if(v!==e)return K(8,{from:t,to:e})}function L(e){return F(e)}function M(e){return L(a(D(e),{replace:!0}))}function U(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:r}=t;let n="function"===typeof r?r(e):r;return"string"===typeof n&&(n=n.includes("?")||n.includes("#")?n=D(n):{path:n},n.params={}),a({query:e.query,hash:e.hash,params:"path"in n?{}:e.params},n)}}function F(e,t){const r=v=x(e),n=w.value,i=e.state,s=e.force,c=!0===e.replace,u=U(r);if(u)return F(a(D(u),{state:"object"===typeof u?a({},i,u.state):i,force:s,replace:c}),t||r);const l=r;let h;return l.redirectedFrom=t,!s&&g(o,n,r)&&(h=K(16,{to:l,from:n}),re(n,n,!0,!1)),(h?Promise.resolve(h):$(l,n)).catch((e=>H(e)?H(e,2)?e:te(e):Z(e,l,n))).then((e=>{if(e){if(H(e,2))return F(a({replace:c},D(e.to),{state:"object"===typeof e.to?a({},i,e.to.state):i,force:s}),t||l)}else e=G(l,n,!0,c,i);return q(l,n,e),e}))}function j(e,t){const r=B(e,t);return r?Promise.reject(r):Promise.resolve()}function $(e,t){let r;const[n,i,s]=nt(e,t);r=$e(n.reverse(),"beforeRouteLeave",e,t);for(const a of n)a.leaveGuards.forEach((n=>{r.push(ze(n,e,t))}));const o=j.bind(null,e,t);return r.push(o),rt(r).then((()=>{r=[];for(const n of d.list())r.push(ze(n,e,t));return r.push(o),rt(r)})).then((()=>{r=$e(i,"beforeRouteUpdate",e,t);for(const n of i)n.updateGuards.forEach((n=>{r.push(ze(n,e,t))}));return r.push(o),rt(r)})).then((()=>{r=[];for(const n of e.matched)if(n.beforeEnter&&!t.matched.includes(n))if(l(n.beforeEnter))for(const i of n.beforeEnter)r.push(ze(i,e,t));else r.push(ze(n.beforeEnter,e,t));return r.push(o),rt(r)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),r=$e(s,"beforeRouteEnter",e,t),r.push(o),rt(r)))).then((()=>{r=[];for(const n of y.list())r.push(ze(n,e,t));return r.push(o),rt(r)})).catch((e=>H(e,8)?e:Promise.reject(e)))}function q(e,t,r){for(const n of m.list())n(e,t,r)}function G(e,t,r,n,i){const o=B(e,t);if(o)return o;const c=t===z,u=s?history.state:{};r&&(n||c?h.replace(e.fullPath,a({scroll:c&&u&&u.scroll},i)):h.push(e.fullPath,i)),w.value=e,re(e,t,r,c),te()}let W;function Q(){W||(W=h.listen(((e,t,r)=>{if(!ae.listening)return;const n=x(e),i=U(n);if(i)return void F(a(i,{replace:!0}),n).catch(u);v=n;const o=w.value;s&&O(P(o.fullPath,r.delta),C()),$(n,o).catch((e=>H(e,12)?e:H(e,2)?(F(e.to,n).then((e=>{H(e,20)&&!r.delta&&r.type===_.pop&&h.go(-1,!1)})).catch(u),Promise.reject()):(r.delta&&h.go(-r.delta,!1),Z(e,n,o)))).then((e=>{e=e||G(n,o,!1),e&&(r.delta&&!H(e,8)?h.go(-r.delta,!1):r.type===_.pop&&H(e,20)&&h.go(-1,!1)),q(n,o,e)})).catch(u)})))}let Y,J=Ve(),X=Ve();function Z(e,t,r){te(e);const n=X.list();return n.length?n.forEach((n=>n(e,t,r))):console.error(e),Promise.reject(e)}function ee(){return Y&&w.value!==z?Promise.resolve():new Promise(((e,t)=>{J.add([e,t])}))}function te(e){return Y||(Y=!e,Q(),J.list().forEach((([t,r])=>e?r(e):t())),J.reset()),e}function re(t,r,i,o){const{scrollBehavior:a}=e;if(!s||!a)return Promise.resolve();const c=!i&&N(P(t.fullPath,0))||(o||!i)&&history.state&&history.state.scroll||null;return(0,n.Y3)().then((()=>a(t,r,c))).then((e=>e&&R(e))).catch((e=>Z(e,t,r)))}const ne=e=>h.go(e);let se;const oe=new Set,ae={currentRoute:w,listening:!0,addRoute:S,removeRoute:k,hasRoute:T,getRoutes:I,resolve:x,options:e,push:L,replace:M,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:d.add,beforeResolve:y.add,afterEach:m.add,onError:X.add,isReady:ee,install(e){const t=this;e.component("RouterLink",Ge),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,i.SU)(w)}),s&&!se&&w.value===z&&(se=!0,L(h.location).catch((e=>{0})));const r={};for(const i in z)r[i]=(0,n.Fl)((()=>w.value[i]));e.provide(Ue,t),e.provide(Fe,(0,i.qj)(r)),e.provide(je,w);const o=e.unmount;oe.add(e),e.unmount=function(){oe.delete(e),oe.size<1&&(v=z,W&&W(),W=null,w.value=z,se=!1,Y=!1),o()}}};return ae}function rt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function nt(e,t){const r=[],n=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const s=t.matched[o];s&&(e.matched.find((e=>m(e,s)))?n.push(s):r.push(s));const a=e.matched[o];a&&(t.matched.find((e=>m(e,a)))||i.push(a))}return[r,n,i]}},7718:function(e,t,r){"use strict";r.d(t,{q:function(){return u}});var n=r(3396),i=r(7396),s=r(7041),o=r(9903),a=r(320),c=r(9888);const u=(0,a.a)({name:"VApp",props:{...(0,i.GB)({fullHeight:!0}),...(0,s.x$)()},setup(e,t){let{slots:r}=t;const a=(0,s.ER)(e),{layoutClasses:u,layoutStyles:l,getLayoutItem:h,items:d,layoutRef:f}=(0,i.te)(e),{rtlClasses:p}=(0,o.Vw)();return(0,c.L)((()=>{var e;return(0,n.Wm)("div",{ref:f,class:["v-application",a.themeClasses.value,u.value,p.value],style:l.value},[(0,n.Wm)("div",{class:"v-application__wrap"},[null==(e=r.default)?void 0:e.call(r)])])})),{getLayoutItem:h,items:d,theme:a}}})},6439:function(e,t,r){"use strict";r.d(t,{L:function(){return I}});var n=r(3396),i=r(836),s=r(8952),o=r(6589),a=r(1138),c=r(320),u=r(9888);const l=(0,c.e)()({name:"VToolbarTitle",props:{text:String,...(0,a.Q)()},setup(e,t){let{slots:r}=t;return(0,u.L)((()=>{var t;const i=!!(r.default||r.text||e.text);return(0,n.Wm)(e.tag,{class:"v-toolbar-title"},{default:()=>[i&&(0,n.Wm)("div",{class:"v-toolbar-title__placeholder"},[r.text?r.text():e.text,null==(t=r.default)?void 0:t.call(r)])]})})),{}}});var h=r(2718),d=r(2465),f=r(4231),p=r(7041),y=r(8434),g=r(2370),m=r(4870),w=r(3766),v=r(131);const b=[null,"prominent","default","comfortable","compact"],E=(0,w.U)({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>b.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...(0,h.m)(),...(0,d.c)(),...(0,f.I)(),...(0,a.Q)({tag:"header"}),...(0,p.x$)()},"v-toolbar"),_=(0,c.e)()({name:"VToolbar",props:E(),setup(e,t){var r;let{slots:a}=t;const{backgroundColorClasses:c,backgroundColorStyles:w}=(0,g.Y5)((0,m.Vh)(e,"color")),{borderClasses:b}=(0,h.P)(e),{elevationClasses:E}=(0,d.Y)(e),{roundedClasses:_}=(0,f.b)(e),{themeClasses:A}=(0,p.ER)(e),S=(0,m.iH)(!!(e.extended||null!=(r=a.extension)&&r.call(a))),k=(0,n.Fl)((()=>parseInt(Number(e.height)+("prominent"===e.density?Number(e.height):0)-("comfortable"===e.density?8:0)-("compact"===e.density?16:0),10))),I=(0,n.Fl)((()=>S.value?parseInt(Number(e.extensionHeight)+("prominent"===e.density?Number(e.extensionHeight):0)-("comfortable"===e.density?4:0)-("compact"===e.density?8:0),10):0));return(0,y.AF)({VBtn:{variant:"text"}}),(0,u.L)((()=>{var t,r,u,h,d;const f=!(!e.title&&!a.title),p=!(!a.image&&!e.image),y=null==(t=a.extension)?void 0:t.call(a);return S.value=!(!e.extended&&!y),(0,n.Wm)(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},c.value,b.value,E.value,_.value,A.value],style:[w.value]},{default:()=>[p&&(0,n.Wm)("div",{key:"image",class:"v-toolbar__image"},[(0,n.Wm)(i.z,{defaults:{VImg:{cover:!0,src:e.image}}},{default:()=>[a.image?null==(r=a.image)?void 0:r.call(a):(0,n.Wm)(o.f,null,null)]})]),(0,n.Wm)("div",{class:"v-toolbar__content",style:{height:(0,v.kb)(k.value)}},[a.prepend&&(0,n.Wm)("div",{class:"v-toolbar__prepend"},[null==(u=a.prepend)?void 0:u.call(a)]),f&&(0,n.Wm)(l,{key:"title",text:e.title},{text:a.title}),null==(h=a.default)?void 0:h.call(a),a.append&&(0,n.Wm)("div",{class:"v-toolbar__append"},[null==(d=a.append)?void 0:d.call(a)])]),(0,n.Wm)(s.Fx,null,{default:()=>[S.value&&(0,n.Wm)("div",{class:"v-toolbar__extension",style:{height:(0,v.kb)(I.value)}},[y])]})]})})),{contentHeight:k,extensionHeight:I}}});function A(e){return(0,v.ei)(e,Object.keys((null==_?void 0:_.props)??{}))}var S=r(7396),k=r(5087);const I=(0,c.a)({name:"VAppBar",props:{modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...E(),...(0,S.o8)(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const i=(0,m.iH)(),s=(0,k.z)(e,"modelValue"),o=(0,n.Fl)((()=>{var e,t;const r=(null==(e=i.value)?void 0:e.contentHeight)??0,n=(null==(t=i.value)?void 0:t.extensionHeight)??0;return r+n})),{layoutItemStyles:a}=(0,S.eW)({id:e.name,order:(0,n.Fl)((()=>parseInt(e.order,10))),position:(0,m.Vh)(e,"location"),layoutSize:o,elementSize:o,active:s,absolute:(0,m.Vh)(e,"absolute")});return(0,u.L)((()=>{const[t]=A(e);return(0,n.Wm)(_,(0,n.dG)({ref:i,class:["v-app-bar",{"v-app-bar--bottom":"bottom"===e.location}],style:{...a.value,height:void 0}},t),r)})),{}}})},652:function(e,t,r){"use strict";r.d(t,{V:function(){return g}});var n=r(3396),i=r(3289),s=r(6589),o=r(5221),a=r(4960),c=r(9694),u=r(4231),l=r(9374),h=r(1138),d=r(3766),f=r(320),p=r(9888);const y=(0,d.U)({start:Boolean,end:Boolean,icon:a.lE,image:String,...(0,c.f)(),...(0,u.I)(),...(0,l.Z)(),...(0,h.Q)(),...(0,o.bk)({variant:"flat"})}),g=(0,f.a)({name:"VAvatar",props:y(),setup(e,t){let{slots:r}=t;const{colorClasses:a,colorStyles:h,variantClasses:d}=(0,o.c1)(e),{densityClasses:f}=(0,c.t)(e),{roundedClasses:y}=(0,u.b)(e),{sizeClasses:g,sizeStyles:m}=(0,l.t)(e);return(0,p.L)((()=>{var t;return(0,n.Wm)(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,f.value,y.value,g.value,d.value],style:[h.value,m.value]},{default:()=>[e.image?(0,n.Wm)(s.f,{key:"image",src:e.image,alt:""},null):e.icon?(0,n.Wm)(i.t,{key:"icon",icon:e.icon},null):null==(t=r.default)?void 0:t.call(r),(0,o.Ux)(!1,"v-avatar")]})})),{}}})},2524:function(e,t,r){"use strict";r.d(t,{G:function(){return S}});var n=r(3396),i=r(652),s=r(8434),o=r(320),a=r(9888);const c=(0,o.a)({name:"VBannerActions",props:{color:String,density:String},setup(e,t){let{slots:r}=t;return(0,s.AF)({VBtn:{color:e.color,density:e.density,variant:"text"}}),(0,a.L)((()=>{var e;return(0,n.Wm)("div",{class:"v-banner-actions"},[null==(e=r.default)?void 0:e.call(r)])})),{}}});var u=r(1114);const l=(0,u.J)("v-banner-text");var h=r(836),d=r(2718),f=r(9694),p=r(4544),y=r(2465),g=r(6903),m=r(489),w=r(4231),v=r(1138),b=r(7041),E=r(8157),_=r(4960),A=r(4870);const S=(0,o.a)({name:"VBanner",props:{avatar:String,color:String,icon:_.lE,lines:String,stacked:Boolean,sticky:Boolean,text:String,...(0,d.m)(),...(0,f.f)(),...(0,p.x)(),...(0,y.c)(),...(0,g.y)(),...(0,m.F)(),...(0,w.I)(),...(0,v.Q)(),...(0,b.x$)()},setup(e,t){let{slots:r}=t;const{borderClasses:o}=(0,d.P)(e),{densityClasses:u}=(0,f.t)(e),{mobile:v}=(0,E.AW)(),{dimensionStyles:_}=(0,p.$)(e),{elevationClasses:S}=(0,y.Y)(e),{locationStyles:k}=(0,g.T)(e),{positionClasses:I}=(0,m.K)(e),{roundedClasses:T}=(0,w.b)(e),{themeClasses:C}=(0,b.ER)(e),R=(0,A.Vh)(e,"color"),P=(0,A.Vh)(e,"density");(0,s.AF)({VBannerActions:{color:R,density:P}}),(0,a.L)((()=>{var t;const s=!(!e.text&&!r.text),a=!!(r.prepend||e.avatar||e.icon);return(0,n.Wm)(e.tag,{class:["v-banner",{"v-banner--stacked":e.stacked||v.value,"v-banner--sticky":e.sticky,[`v-banner--${e.lines}-line`]:!!e.lines},o.value,u.value,S.value,I.value,T.value,C.value],style:[_.value,k.value],role:"banner"},{default:()=>[a&&(0,n.Wm)(h.z,{key:"prepend",defaults:{VAvatar:{color:R.value,density:P.value,icon:e.icon,image:e.avatar}}},{default:()=>[(0,n.Wm)("div",{class:"v-banner__prepend"},[r.prepend?r.prepend():(e.avatar||e.icon)&&(0,n.Wm)(i.V,null,null)])]}),(0,n.Wm)("div",{class:"v-banner__content"},[s&&(0,n.Wm)(l,{key:"text"},{default:()=>[r.text?r.text():e.text]}),null==(t=r.default)?void 0:t.call(r)]),r.actions&&(0,n.Wm)(c,null,{default:()=>[r.actions()]})]})}))}})},3435:function(e,t,r){"use strict";r.d(t,{T:function(){return V}});var n=r(3396),i=r(2718),s=r(9694),o=r(2465),a=r(4231),c=r(1138),u=r(7041),l=r(5221),h=r(8434),d=r(320),f=r(9888),p=r(4870);const y=(0,d.a)({name:"VBtnGroup",props:{divided:Boolean,...(0,i.m)(),...(0,s.f)(),...(0,o.c)(),...(0,a.I)(),...(0,c.Q)(),...(0,u.x$)(),...(0,l.bk)()},setup(e,t){let{slots:r}=t;const{themeClasses:c}=(0,u.ER)(e),{densityClasses:l}=(0,s.t)(e),{borderClasses:d}=(0,i.P)(e),{elevationClasses:y}=(0,o.Y)(e),{roundedClasses:g}=(0,a.b)(e);(0,h.AF)({VBtn:{height:"auto",color:(0,p.Vh)(e,"color"),density:(0,p.Vh)(e,"density"),flat:!0,variant:(0,p.Vh)(e,"variant")}}),(0,f.L)((()=>(0,n.Wm)(e.tag,{class:["v-btn-group",{"v-btn-group--divided":e.divided},c.value,d.value,l.value,y.value,g.value]},r)))}});r(7658);var g=r(5087),m=r(3766),w=r(7514),v=r(131),b=r(6033);const E=(0,m.U)({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),_=(0,m.U)({value:null,disabled:Boolean,selectedClass:String},"group-item");function A(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=(0,w.FN)("useGroupItem");if(!i)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const s=(0,w.sq)();(0,n.JJ)(Symbol.for(`${t.description}:id`),s);const o=(0,n.f3)(t,null);if(!o){if(!r)return o;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${t.description}`)}const a=(0,p.Vh)(e,"value"),c=(0,n.Fl)((()=>o.disabled.value||e.disabled));o.register({id:s,value:a,disabled:c},i),(0,n.Jd)((()=>{o.unregister(s)}));const u=(0,n.Fl)((()=>o.isSelected(s))),l=(0,n.Fl)((()=>u.value&&[o.selectedClass.value,e.selectedClass]));return(0,n.YP)(u,(e=>{i.emit("group:selected",{value:e})})),{id:s,isSelected:u,toggle:()=>o.select(s,!u.value),select:e=>o.select(s,e),selectedClass:l,value:a,disabled:c,group:o}}function S(e,t){let r=!1;const i=(0,p.qj)([]),s=(0,g.z)(e,"modelValue",[],(e=>null==e?[]:I(i,(0,v.FT)(e))),(t=>{const r=T(i,t);return e.multiple?r:r[0]})),o=(0,w.FN)("useGroup");function a(e,r){const n=e,s=Symbol.for(`${t.description}:id`),a=(0,v.bY)(s,null==o?void 0:o.vnode),c=a.indexOf(r);c>-1?i.splice(c,0,n):i.push(n)}function c(e){if(r)return;u();const t=i.findIndex((t=>t.id===e));i.splice(t,1)}function u(){const t=i.find((e=>!e.disabled));t&&"force"===e.mandatory&&!s.value.length&&(s.value=[t.id])}function l(t,r){const n=i.find((e=>e.id===t));if(!r||null==n||!n.disabled)if(e.multiple){const n=s.value.slice(),i=n.findIndex((e=>e===t)),o=~i;if(r=r??!o,o&&e.mandatory&&n.length<=1)return;if(!o&&null!=e.max&&n.length+1>e.max)return;i<0&&r?n.push(t):i>=0&&!r&&n.splice(i,1),s.value=n}else{const n=s.value.includes(t);if(e.mandatory&&n)return;s.value=r??!n?[t]:[]}}function h(t){if(e.multiple&&(0,b.Kd)('This method is not supported when using "multiple" prop'),s.value.length){const e=s.value[0],r=i.findIndex((t=>t.id===e));let n=(r+t)%i.length,o=i[n];while(o.disabled&&n!==r)n=(n+t)%i.length,o=i[n];if(o.disabled)return;s.value=[i[n].id]}else{const e=i.find((e=>!e.disabled));e&&(s.value=[e.id])}}(0,n.bv)((()=>{u()})),(0,n.Jd)((()=>{r=!0}));const d={register:a,unregister:c,selected:s,select:l,disabled:(0,p.Vh)(e,"disabled"),prev:()=>h(i.length-1),next:()=>h(1),isSelected:e=>s.value.includes(e),selectedClass:(0,n.Fl)((()=>e.selectedClass)),items:(0,n.Fl)((()=>i)),getItemIndex:e=>k(i,e)};return(0,n.JJ)(t,d),d}function k(e,t){const r=I(e,[t]);return r.length?e.findIndex((e=>e.id===r[0])):-1}function I(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n];null!=i.value?null!=t.find((e=>(0,v.vZ)(e,i.value)))&&r.push(i.id):t.includes(n)&&r.push(i.id)}return r}function T(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n];t.includes(i.id)&&r.push(null!=i.value?i.value:n)}return r}const C=Symbol.for("vuetify:v-btn-toggle");(0,d.e)()({name:"VBtnToggle",props:E(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const{isSelected:i,next:s,prev:o,select:a,selected:c}=S(e,C);return(0,f.L)((()=>{var e;return(0,n.Wm)(y,{class:"v-btn-toggle"},{default:()=>[null==(e=r.default)?void 0:e.call(r,{isSelected:i,next:s,prev:o,select:a,selected:c})]})})),{next:s,prev:o,select:a}}});var R=r(836),P=r(3289),x=r(3173),O=r(3824),N=r(4960),D=r(4544),B=r(6791),L=r(6903),M=r(489),U=r(6183),F=r(9374);function j(e,t){(0,n.YP)((()=>{var t;return null==(t=e.isActive)?void 0:t.value}),(r=>{e.isLink.value&&r&&t&&(0,n.Y3)((()=>{t(!0)}))}),{immediate:!0})}const V=(0,d.a)({name:"VBtn",directives:{Ripple:O.H},props:{active:{type:Boolean,default:void 0},symbol:{type:null,default:C},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:N.lE,appendIcon:N.lE,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},...(0,i.m)(),...(0,a.I)(),...(0,s.f)(),...(0,D.x)(),...(0,o.c)(),..._(),...(0,B.fF)(),...(0,L.y)(),...(0,M.F)(),...(0,U.GN)(),...(0,F.Z)(),...(0,c.Q)({tag:"button"}),...(0,u.x$)(),...(0,l.bk)({variant:"elevated"})},emits:{"group:selected":e=>!0},setup(e,t){let{attrs:r,slots:c}=t;const{themeClasses:h}=(0,u.ER)(e),{borderClasses:d}=(0,i.P)(e),{colorClasses:p,colorStyles:y,variantClasses:g}=(0,l.c1)(e),{densityClasses:m}=(0,s.t)(e),{dimensionStyles:w}=(0,D.$)(e),{elevationClasses:v}=(0,o.Y)(e),{loaderClasses:b}=(0,B.U2)(e),{locationStyles:E}=(0,L.T)(e),{positionClasses:_}=(0,M.K)(e),{roundedClasses:S}=(0,a.b)(e),{sizeClasses:k,sizeStyles:I}=(0,F.t)(e),T=A(e,e.symbol,!1),C=(0,U.nB)(e,r),O=(0,n.Fl)((()=>{var t;return!1!==e.active&&(e.active||(null==(t=C.isActive)?void 0:t.value)||(null==T?void 0:T.isSelected.value))})),N=(0,n.Fl)((()=>(null==T?void 0:T.disabled.value)||e.disabled)),V=(0,n.Fl)((()=>"elevated"===e.variant&&!(e.disabled||e.flat||e.border)));return j(C,null==T?void 0:T.select),(0,f.L)((()=>{var t,r,i,s;const o=C.isLink.value?"a":e.tag,a=!T||T.isSelected.value,u=!(!e.prependIcon&&!c.prepend),f=!(!e.appendIcon&&!c.append),A=!(!e.icon||!0===e.icon);return(0,n.wy)((0,n.Wm)(o,{type:"a"===o?void 0:"button",class:["v-btn",null==T?void 0:T.selectedClass.value,{"v-btn--active":O.value,"v-btn--block":e.block,"v-btn--disabled":N.value,"v-btn--elevated":V.value,"v-btn--flat":e.flat,"v-btn--icon":!!e.icon,"v-btn--loading":e.loading,"v-btn--stacked":e.stacked},h.value,d.value,a?p.value:void 0,m.value,v.value,b.value,_.value,S.value,k.value,g.value],style:[a?y.value:void 0,w.value,E.value,I.value],disabled:N.value||void 0,href:C.href.value,onClick:e=>{var t;N.value||(null==(t=C.navigate)||t.call(C,e),null==T||T.toggle())}},{default:()=>[(0,l.Ux)(!0,"v-btn"),!e.icon&&u&&(0,n.Wm)(R.z,{key:"prepend",defaults:{VIcon:{icon:e.prependIcon}}},{default:()=>[(0,n.Wm)("span",{class:"v-btn__prepend"},[(null==(t=c.prepend)?void 0:t.call(c))??(0,n.Wm)(P.t,null,null)])]}),(0,n.Wm)("span",{class:"v-btn__content","data-no-activator":""},[(0,n.Wm)(R.z,{key:"content",defaults:{VIcon:{icon:A?e.icon:void 0}}},{default:()=>[(null==(r=c.default)?void 0:r.call(c))??(A&&(0,n.Wm)(P.t,{key:"icon"},null))]})]),!e.icon&&f&&(0,n.Wm)(R.z,{key:"append",defaults:{VIcon:{icon:e.appendIcon}}},{default:()=>[(0,n.Wm)("span",{class:"v-btn__append"},[(null==(i=c.append)?void 0:i.call(c))??(0,n.Wm)(P.t,null,null)])]}),!!e.loading&&(0,n.Wm)("span",{key:"loader",class:"v-btn__loader"},[(null==(s=c.loader)?void 0:s.call(c))??(0,n.Wm)(x.L,{color:"boolean"===typeof e.loading?void 0:e.loading,indeterminate:!0,size:"23",width:"2"},null)])]}),[[(0,n.Q2)("ripple"),!N.value&&e.ripple,null]])})),{}}})},1201:function(e,t,r){"use strict";r.d(t,{_:function(){return P}});var n=r(3396),i=r(8434),s=r(320),o=r(9888);const a=(0,s.a)({name:"VCardActions",setup(e,t){let{slots:r}=t;return(0,i.AF)({VBtn:{variant:"text"}}),(0,o.L)((()=>{var e;return(0,n.Wm)("div",{class:"v-card-actions"},[null==(e=r.default)?void 0:e.call(r)])})),{}}});var c=r(652),u=r(1114);const l=(0,u.J)("v-card-subtitle"),h=(0,u.J)("v-card-title");var d=r(836),f=r(4960),p=r(9694);const y=(0,n.aZ)({name:"VCardItem",props:{appendAvatar:String,appendIcon:f.lE,prependAvatar:String,prependIcon:f.lE,subtitle:String,title:String,...(0,p.f)()},setup(e,t){let{slots:r}=t;return(0,o.L)((()=>{var t,i,s,o,a;const u=!!(e.prependAvatar||e.prependIcon||r.prepend),f=!!(e.appendAvatar||e.appendIcon||r.append),p=!(!e.title&&!r.title),y=!(!e.subtitle&&!r.subtitle);return(0,n.Wm)("div",{class:"v-card-item"},[u&&(0,n.Wm)(d.z,{key:"prepend",defaults:{VAvatar:{density:e.density,icon:e.prependIcon,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},{default:()=>[(0,n.Wm)("div",{class:"v-card-item__prepend"},[(null==(t=r.prepend)?void 0:t.call(r))??(0,n.Wm)(c.V,null,null)])]}),(0,n.Wm)("div",{class:"v-card-item__content"},[p&&(0,n.Wm)(h,{key:"title"},{default:()=>[(null==(i=r.title)?void 0:i.call(r))??e.title]}),y&&(0,n.Wm)(l,{key:"subtitle"},{default:()=>[(null==(s=r.subtitle)?void 0:s.call(r))??e.subtitle]}),null==(o=r.default)?void 0:o.call(r)]),f&&(0,n.Wm)(d.z,{key:"append",defaults:{VAvatar:{density:e.density,icon:e.appendIcon,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},{default:()=>[(0,n.Wm)("div",{class:"v-card-item__append"},[(null==(a=r.append)?void 0:a.call(r))??(0,n.Wm)(c.V,null,null)])]})])})),{}}}),g=(0,u.J)("v-card-text");var m=r(6589),w=r(3824),v=r(5221),b=r(6791),E=r(2718),_=r(4544),A=r(2465),S=r(6903),k=r(489),I=r(4231),T=r(6183),C=r(1138),R=r(7041);const P=(0,s.a)({name:"VCard",directives:{Ripple:w.H},props:{appendAvatar:String,appendIcon:f.lE,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:f.lE,ripple:Boolean,subtitle:String,text:String,title:String,...(0,R.x$)(),...(0,E.m)(),...(0,p.f)(),...(0,_.x)(),...(0,A.c)(),...(0,b.fF)(),...(0,S.y)(),...(0,k.F)(),...(0,I.I)(),...(0,T.GN)(),...(0,C.Q)(),...(0,v.bk)({variant:"elevated"})},setup(e,t){let{attrs:r,slots:i}=t;const{themeClasses:s}=(0,R.ER)(e),{borderClasses:c}=(0,E.P)(e),{colorClasses:u,colorStyles:l,variantClasses:h}=(0,v.c1)(e),{densityClasses:f}=(0,p.t)(e),{dimensionStyles:w}=(0,_.$)(e),{elevationClasses:C}=(0,A.Y)(e),{loaderClasses:P}=(0,b.U2)(e),{locationStyles:x}=(0,S.T)(e),{positionClasses:O}=(0,k.K)(e),{roundedClasses:N}=(0,I.b)(e),D=(0,T.nB)(e,r),B=(0,n.Fl)((()=>!1!==e.link&&D.isLink.value)),L=(0,n.Fl)((()=>!e.disabled&&!1!==e.link&&(e.link||D.isClickable.value)));return(0,o.L)((()=>{var t,r,o;const p=B.value?"a":e.tag,E=!(!i.title&&!e.title),_=!(!i.subtitle&&!e.subtitle),A=E||_,S=!!(i.append||e.appendAvatar||e.appendIcon),k=!!(i.prepend||e.prependAvatar||e.prependIcon),I=!(!i.image&&!e.image),T=A||k||S,R=!(!i.text&&!e.text);return(0,n.wy)((0,n.Wm)(p,{class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":L.value},s.value,c.value,u.value,f.value,C.value,P.value,O.value,N.value,h.value],style:[l.value,w.value,x.value],href:D.href.value,onClick:L.value&&D.navigate},{default:()=>[I&&(0,n.Wm)(d.z,{key:"image",defaults:{VImg:{cover:!0,src:e.image}}},{default:()=>[(0,n.Wm)("div",{class:"v-card__image"},[(null==(t=i.image)?void 0:t.call(i))??(0,n.Wm)(m.f,null,null)])]}),(0,n.Wm)(b.rD,{name:"v-card",active:!!e.loading,color:"boolean"===typeof e.loading?void 0:e.loading},{default:i.loader}),T&&(0,n.Wm)(y,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:i.item,prepend:i.prepend,title:i.title,subtitle:i.subtitle,append:i.append}),R&&(0,n.Wm)(g,{key:"text"},{default:()=>[(null==(r=i.text)?void 0:r.call(i))??e.text]}),null==(o=i.default)?void 0:o.call(i),i.actions&&(0,n.Wm)(a,null,{default:i.actions}),(0,v.Ux)(L.value,"v-card")]}),[[(0,n.Q2)("ripple"),L.value]])})),{}}})},836:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(8434),i=r(3396),s=r(4870);const o=(0,i.aZ)({name:"VDefaultsProvider",props:{defaults:Object,reset:[Number,String],root:Boolean,scoped:Boolean},setup(e,t){let{slots:r}=t;const{defaults:i,reset:o,root:a,scoped:c}=(0,s.BK)(e);return(0,n.AF)(i,{reset:o,root:a,scoped:c}),()=>{var e;return null==(e=r.default)?void 0:e.call(r)}}})},8521:function(e,t,r){"use strict";r.d(t,{D:function(){return p}});r(7658),r(8099);var n=r(1138),i=r(7139),s=r(3396),o=r(320);const a=["sm","md","lg","xl","xxl"],c=(()=>a.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),u=(()=>a.reduce(((e,t)=>(e["offset"+(0,i.kC)(t)]={type:[String,Number],default:null},e)),{}))(),l=(()=>a.reduce(((e,t)=>(e["order"+(0,i.kC)(t)]={type:[String,Number],default:null},e)),{}))(),h={col:Object.keys(c),offset:Object.keys(u),order:Object.keys(l)};function d(e,t,r){let n=e;if(null!=r&&!1!==r){if(t){const r=t.replace(e,"");n+=`-${r}`}return"col"===e&&(n="v-"+n),"col"!==e||""!==r&&!0!==r?(n+=`-${r}`,n.toLowerCase()):n.toLowerCase()}}const f=["auto","start","end","center","baseline","stretch"],p=(0,o.a)({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...c,offset:{type:[String,Number],default:null},...u,order:{type:[String,Number],default:null},...l,alignSelf:{type:String,default:null,validator:e=>f.includes(e)},...(0,n.Q)()},setup(e,t){let{slots:r}=t;const n=(0,s.Fl)((()=>{const t=[];let r;for(r in h)h[r].forEach((n=>{const i=e[n],s=d(r,n,i);s&&t.push(s)}));const n=t.some((e=>e.startsWith("v-col-")));return t.push({"v-col":!n||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),t}));return()=>{var t;return(0,s.h)(e.tag,{class:n.value},null==(t=r.default)?void 0:t.call(r))}}})},3369:function(e,t,r){"use strict";r.d(t,{K:function(){return a}});var n=r(3396),i=(r(8099),r(1138)),s=r(320),o=r(9888);const a=(0,s.a)({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...(0,i.Q)()},setup(e,t){let{slots:r}=t;return(0,o.L)((()=>(0,n.Wm)(e.tag,{class:["v-container",{"v-container--fluid":e.fluid}]},r))),{}}})},6824:function(e,t,r){"use strict";r.d(t,{o:function(){return A}});r(7658),r(8099);var n=r(1138),i=r(7139),s=r(3396),o=r(320);const a=["sm","md","lg","xl","xxl"],c=["start","end","center"],u=["space-between","space-around","space-evenly"];function l(e,t){return a.reduce(((r,n)=>(r[e+(0,i.kC)(n)]=t(),r)),{})}const h=[...c,"baseline","stretch"],d=e=>h.includes(e),f=l("align",(()=>({type:String,default:null,validator:d}))),p=[...c,...u],y=e=>p.includes(e),g=l("justify",(()=>({type:String,default:null,validator:y}))),m=[...c,...u,"stretch"],w=e=>m.includes(e),v=l("alignContent",(()=>({type:String,default:null,validator:w}))),b={align:Object.keys(f),justify:Object.keys(g),alignContent:Object.keys(v)},E={align:"align",justify:"justify",alignContent:"align-content"};function _(e,t,r){let n=E[e];if(null!=r){if(t){const r=t.replace(e,"");n+=`-${r}`}return n+=`-${r}`,n.toLowerCase()}}const A=(0,o.a)({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...f,justify:{type:String,default:null,validator:y},...g,alignContent:{type:String,default:null,validator:w},...v,...(0,n.Q)()},setup(e,t){let{slots:r}=t;const n=(0,s.Fl)((()=>{const t=[];let r;for(r in b)b[r].forEach((n=>{const i=e[n],s=_(r,n,i);s&&t.push(s)}));return t.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),t}));return()=>{var t;return(0,s.h)(e.tag,{class:["v-row",n.value]},null==(t=r.default)?void 0:t.call(r))}}})},9234:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(1114);const i=(0,n.J)("flex-grow-1","div","VSpacer")},3289:function(e,t,r){"use strict";r.d(t,{t:function(){return y}});var n=r(3396),i=r(4960),s=r(9374),o=r(1138),a=r(7041),c=r(2370),u=r(4870),l=r(3766),h=r(320),d=r(131),f=r(9888);const p=(0,l.U)({color:String,start:Boolean,end:Boolean,icon:i.lE,...(0,s.Z)(),...(0,o.Q)({tag:"i"}),...(0,a.x$)()},"v-icon"),y=(0,h.a)({name:"VIcon",props:p(),setup(e,t){let r,{attrs:o,slots:l}=t;l.default&&(r=(0,n.Fl)((()=>{var e,t;const r=null==(e=l.default)?void 0:e.call(l);if(r)return null==(t=(0,d.RA)(r).filter((e=>e.children&&"string"===typeof e.children))[0])?void 0:t.children})));const{themeClasses:h}=(0,a.ER)(e),{iconData:p}=(0,i.bi)(r||e),{sizeClasses:y}=(0,s.t)(e),{textColorClasses:g,textColorStyles:m}=(0,c.rY)((0,u.Vh)(e,"color"));return(0,f.L)((()=>(0,n.Wm)(p.value.component,{tag:e.tag,icon:p.value.icon,class:["v-icon","notranslate",h.value,y.value,g.value,{"v-icon--clickable":!!o.onClick,"v-icon--start":e.start,"v-icon--end":e.end}],style:[y.value?void 0:{fontSize:(0,d.kb)(e.size),height:(0,d.kb)(e.size),width:(0,d.kb)(e.size)},m.value],role:o.onClick?"button":void 0,"aria-hidden":!o.onClick},null))),{}}})},6589:function(e,t,r){"use strict";r.d(t,{f:function(){return w}});var n=r(3396),i=r(4162),s=r(2385);function o(e,t){if(!s.cu)return;const r=t.modifiers||{},n=t.value,{handler:i,options:o}="object"===typeof n?n:{handler:n,options:{}},c=new IntersectionObserver((function(){var n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0;const c=null==(n=e._observe)?void 0:n[t.instance.$.uid];if(!c)return;const u=s.some((e=>e.isIntersecting));!i||r.quiet&&!c.init||r.once&&!u&&!c.init||i(u,s,o),u&&r.once?a(e,t):c.init=!0}),o);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:c},c.observe(e)}function a(e,t){var r;const n=null==(r=e._observe)?void 0:r[t.instance.$.uid];n&&(n.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const c={mounted:o,unmounted:a};var u=c,l=r(9242),h=r(3766);const d=(0,h.U)({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>!0!==e}},"transition"),f=(e,t)=>{var r;let{slots:i}=t;const{transition:s,...o}=e;if(!s||"boolean"===typeof s)return null==(r=i.default)?void 0:r.call(i);const{component:a=l.uT,...c}="object"===typeof s?s:{};return(0,n.h)(a,(0,n.dG)("string"===typeof s?{name:s}:c,o),i)};var p=r(4870),y=r(320),g=r(9888),m=r(131);const w=(0,y.a)({name:"VImg",directives:{intersect:u},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...d()},emits:["loadstart","load","error"],setup(e,t){let{emit:r,slots:o}=t;const a=(0,p.iH)(""),c=(0,p.iH)(),u=(0,p.iH)(e.eager?"loading":"idle"),h=(0,p.iH)(),d=(0,p.iH)(),y=(0,n.Fl)((()=>e.src&&"object"===typeof e.src?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)})),w=(0,n.Fl)((()=>y.value.aspect||h.value/d.value||0));function v(t){if((!e.eager||!t)&&(!s.cu||t||e.eager)){if(u.value="loading",y.value.lazySrc){const e=new Image;e.src=y.value.lazySrc,A(e,null)}y.value.src&&(0,n.Y3)((()=>{var e,t;if(r("loadstart",(null==(e=c.value)?void 0:e.currentSrc)||y.value.src),null!=(t=c.value)&&t.complete){if(c.value.naturalWidth||E(),"error"===u.value)return;w.value||A(c.value,null),b()}else w.value||A(c.value),_()}))}}function b(){var e;_(),u.value="loaded",r("load",(null==(e=c.value)?void 0:e.currentSrc)||y.value.src)}function E(){var e;u.value="error",r("error",(null==(e=c.value)?void 0:e.currentSrc)||y.value.src)}function _(){const e=c.value;e&&(a.value=e.currentSrc||e.src)}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const r=()=>{const{naturalHeight:n,naturalWidth:i}=e;n||i?(h.value=i,d.value=n):e.complete||"loading"!==u.value||null==t?(e.currentSrc.endsWith(".svg")||e.currentSrc.startsWith("data:image/svg+xml"))&&(h.value=1,d.value=1):setTimeout(r,t)};r()}(0,n.YP)((()=>e.src),(()=>{v("idle"!==u.value)})),(0,n.wF)((()=>v()));const S=(0,n.Fl)((()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover}))),k=()=>{var t;if(!y.value.src||"idle"===u.value)return null;const r=(0,n.Wm)("img",{class:["v-img__img",S.value],src:y.value.src,srcset:y.value.srcset,alt:"",sizes:e.sizes,ref:c,onLoad:b,onError:E},null),i=null==(t=o.sources)?void 0:t.call(o);return(0,n.Wm)(f,{transition:e.transition,appear:!0},{default:()=>[(0,n.wy)(i?(0,n.Wm)("picture",{class:"v-img__picture"},[i,r]):r,[[l.F8,"loaded"===u.value]])]})},I=()=>(0,n.Wm)(f,{transition:e.transition},{default:()=>[y.value.lazySrc&&"loaded"!==u.value&&(0,n.Wm)("img",{class:["v-img__img","v-img__img--preload",S.value],src:y.value.lazySrc,alt:""},null)]}),T=()=>o.placeholder?(0,n.Wm)(f,{transition:e.transition,appear:!0},{default:()=>[("loading"===u.value||"error"===u.value&&!o.error)&&(0,n.Wm)("div",{class:"v-img__placeholder"},[o.placeholder()])]}):null,C=()=>o.error?(0,n.Wm)(f,{transition:e.transition,appear:!0},{default:()=>["error"===u.value&&(0,n.Wm)("div",{class:"v-img__error"},[o.error()])]}):null,R=()=>e.gradient?(0,n.Wm)("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,P=(0,p.iH)(!1);{const e=(0,n.YP)(w,(t=>{t&&(requestAnimationFrame((()=>{requestAnimationFrame((()=>{P.value=!0}))})),e())}))}return(0,g.L)((()=>(0,n.wy)((0,n.Wm)(i.t,{class:["v-img",{"v-img--booting":!P.value}],style:{width:(0,m.kb)("auto"===e.width?h.value:e.width)},aspectRatio:w.value,"aria-label":e.alt,role:e.alt?"img":void 0},{additional:()=>(0,n.Wm)(n.HY,null,[(0,n.Wm)(k,null,null),(0,n.Wm)(I,null,null),(0,n.Wm)(R,null,null),(0,n.Wm)(T,null,null),(0,n.Wm)(C,null,null)]),default:o.default}),[[(0,n.Q2)("intersect"),{handler:v,options:e.options},null,{once:!0}]]))),{currentSrc:a,image:c,state:u,naturalWidth:h,naturalHeight:d}}})},8961:function(e,t,r){"use strict";r.d(t,{i:function(){return M}});r(7658);var n=r(3396),i=r(7041),s=r(2370),o=r(4870),a=r(320),c=r(131),u=r(9888);const l=(0,a.a)({name:"VDivider",props:{color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...(0,i.x$)()},setup(e,t){let{attrs:r}=t;const{themeClasses:a}=(0,i.ER)(e),{backgroundColorClasses:l,backgroundColorStyles:h}=(0,s.Y5)((0,o.Vh)(e,"color")),d=(0,n.Fl)((()=>{const t={};return e.length&&(t[e.vertical?"maxHeight":"maxWidth"]=(0,c.kb)(e.length)),e.thickness&&(t[e.vertical?"borderRightWidth":"borderTopWidth"]=(0,c.kb)(e.thickness)),t}));return(0,u.L)((()=>(0,n.Wm)("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},a.value,l.value],style:[d.value,h.value],"aria-orientation":r.role&&"separator"!==r.role?void 0:e.vertical?"vertical":"horizontal",role:`${r.role||"separator"}`},null))),{}}});var h=r(9242),d=r(836),f=r(8952),p=r(3867),y=r(4960),g=r(1138),m=r(6479),w=r(3766);const v=(0,a.a)({name:"VListGroupActivator",setup(e,t){let{slots:r}=t;return(0,m._$)(),()=>{var e;return null==(e=r.default)?void 0:e.call(r)}}}),b=(0,w.U)({activeColor:String,color:String,collapseIcon:{type:y.lE,default:"$collapse"},expandIcon:{type:y.lE,default:"$expand"},prependIcon:y.lE,appendIcon:y.lE,fluid:Boolean,subgroup:Boolean,value:null,...(0,g.Q)()}),E=(0,a.e)()({name:"VListGroup",props:{title:String,...b()},setup(e,t){let{slots:r}=t;const{isOpen:i,open:s}=(0,m.Io)((0,o.Vh)(e,"value"),!0),a=(0,p.sm)(),c=e=>{s(!i.value,e)},l=(0,n.Fl)((()=>({onClick:c,class:"v-list-group__header"}))),y=(0,n.Fl)((()=>i.value?e.collapseIcon:e.expandIcon));return(0,u.L)((()=>{var t;return(0,n.Wm)(e.tag,{class:["v-list-group",{"v-list-group--prepend":null==a?void 0:a.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup}]},{default:()=>[r.activator&&(0,n.Wm)(d.z,{defaults:{VListItem:{active:i.value,activeColor:e.activeColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&y.value,appendIcon:e.appendIcon||!e.subgroup&&y.value,title:e.title,value:e.value}}},{default:()=>[(0,n.Wm)(v,null,{default:()=>[r.activator({props:l.value,isOpen:i})]})]}),(0,n.Wm)(f.Fx,null,{default:()=>[(0,n.wy)((0,n.Wm)("div",{class:"v-list-group__items"},[null==(t=r.default)?void 0:t.call(r)]),[[h.F8,i.value]])]})]})})),{}}});function _(e){return(0,c.ei)(e,Object.keys(E.props))}var A=r(3150);const S=(0,a.a)({name:"VListSubheader",props:{color:String,inset:Boolean,sticky:Boolean,title:String,...(0,g.Q)()},setup(e,t){let{slots:r}=t;const{textColorClasses:i,textColorStyles:a}=(0,s.rY)((0,o.Vh)(e,"color"));return(0,u.L)((()=>{var t;const s=!(!r.default&&!e.title);return(0,n.Wm)(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},i.value],style:{textColorStyles:a}},{default:()=>[s&&(0,n.Wm)("div",{class:"v-list-subheader__text"},[(null==(t=r.default)?void 0:t.call(r))??e.title])]})})),{}}}),k=(0,a.e)()({name:"VListChildren",props:{items:Array},setup(e,t){let{slots:r}=t;return(0,p.$l)(),()=>{var t,i;return(null==(t=r.default)?void 0:t.call(r))??(null==(i=e.items)?void 0:i.map((e=>{let{children:t,props:i,type:s,raw:o}=e;var a,c;if("divider"===s)return(null==(a=r.divider)?void 0:a.call(r,{props:i}))??(0,n.Wm)(l,i,null);if("subheader"===s)return(null==(c=r.subheader)?void 0:c.call(r,{props:i}))??(0,n.Wm)(S,i,{default:r.subheader});const u={subtitle:r.subtitle?e=>{var t;return null==(t=r.subtitle)?void 0:t.call(r,{...e,item:o})}:void 0,prepend:r.prepend?e=>{var t;return null==(t=r.prepend)?void 0:t.call(r,{...e,item:o})}:void 0,append:r.append?e=>{var t;return null==(t=r.append)?void 0:t.call(r,{...e,item:o})}:void 0,default:r.default?e=>{var t;return null==(t=r.default)?void 0:t.call(r,{...e,item:o})}:void 0,title:r.title?e=>{var t;return null==(t=r.title)?void 0:t.call(r,{...e,item:o})}:void 0},[h,d]=_(i);return t?(0,n.Wm)(E,(0,n.dG)({value:null==i?void 0:i.value},h),{activator:e=>{let{props:t}=e;return r.header?r.header({...i,...t}):(0,n.Wm)(A.l,(0,n.dG)(i,t),u)},default:()=>(0,n.Wm)(k,{items:t},r)}):r.item?r.item(i):(0,n.Wm)(A.l,i,u)})))}}});var I=r(2718),T=r(9694),C=r(4544),R=r(2465);const P=(0,w.U)({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");var x=r(4231),O=r(5221),N=r(8434);function D(e,t){const r=(0,c.qF)(t,e.itemType,"item"),n="string"===typeof t?t:(0,c.qF)(t,e.itemTitle),i=(0,c.qF)(t,e.itemValue,void 0),s=(0,c.qF)(t,e.itemChildren),o=!0===e.itemProps?(0,c.ei)(t,["children"])[1]:(0,c.qF)(t,e.itemProps),a={title:n,value:i,...o};return{type:r,title:a.title,value:a.value,props:a,children:"item"===r&&s?B(e,s):void 0,raw:t}}function B(e,t){const r=[];for(const n of t)r.push(D(e,n));return r}function L(e){const t=(0,n.Fl)((()=>B(e,e.items)));return{items:t}}const M=(0,a.e)()({name:"VList",props:{activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...(0,m.Gp)({selectStrategy:"single-leaf",openStrategy:"list"}),...(0,I.m)(),...(0,T.f)(),...(0,C.x)(),...(0,R.c)(),itemType:{type:String,default:"type"},...P(),...(0,x.I)(),...(0,g.Q)(),...(0,i.x$)(),...(0,O.bk)({variant:"text"})},emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,t){let{slots:r}=t;const{items:a}=L(e),{themeClasses:c}=(0,i.ER)(e),{backgroundColorClasses:l,backgroundColorStyles:h}=(0,s.Y5)((0,o.Vh)(e,"bgColor")),{borderClasses:d}=(0,I.P)(e),{densityClasses:f}=(0,T.t)(e),{dimensionStyles:y}=(0,C.$)(e),{elevationClasses:g}=(0,R.Y)(e),{roundedClasses:w}=(0,x.b)(e),{open:v,select:b}=(0,m.Ek)(e),E=(0,n.Fl)((()=>e.lines?`v-list--${e.lines}-line`:void 0)),_=(0,o.Vh)(e,"activeColor"),A=(0,o.Vh)(e,"color");return(0,p.$l)(),(0,N.AF)({VListGroup:{activeColor:_,color:A},VListItem:{activeClass:(0,o.Vh)(e,"activeClass"),activeColor:_,color:A,density:(0,o.Vh)(e,"density"),disabled:(0,o.Vh)(e,"disabled"),lines:(0,o.Vh)(e,"lines"),nav:(0,o.Vh)(e,"nav"),variant:(0,o.Vh)(e,"variant")}}),(0,u.L)((()=>(0,n.Wm)(e.tag,{class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},c.value,l.value,d.value,f.value,g.value,E.value,w.value],style:[h.value,y.value]},{default:()=>[(0,n.Wm)(k,{items:a.value},r)]}))),{open:v,select:b}}})},3150:function(e,t,r){"use strict";r.d(t,{l:function(){return S}});var n=r(3396),i=r(652),s=r(836),o=r(3289),a=r(7769),c=r(2127),u=r(3824),l=r(5221),h=r(4960),d=r(2718),f=r(9694),p=r(4544),y=r(2465),g=r(4231),m=r(6183),w=r(1138),v=r(7041),b=r(3867),E=r(6479),_=r(320),A=r(9888);const S=(0,_.e)()({name:"VListItem",directives:{Ripple:u.H},props:{active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:h.lE,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:h.lE,subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,...(0,d.m)(),...(0,f.f)(),...(0,p.x)(),...(0,y.c)(),...(0,g.I)(),...(0,m.GN)(),...(0,w.Q)(),...(0,v.x$)(),...(0,l.bk)({variant:"text"})},setup(e,t){let{attrs:r,slots:u}=t;const h=(0,m.nB)(e,r),w=(0,n.Fl)((()=>e.value??h.href.value)),{select:_,isSelected:S,isIndeterminate:k,isGroupActivator:I,root:T,parent:C,openOnSelect:R}=(0,E.Io)(w,!1),P=(0,b.sm)(),x=(0,n.Fl)((()=>{var t;return!1!==e.active&&(e.active||(null==(t=h.isActive)?void 0:t.value)||S.value)})),O=(0,n.Fl)((()=>!1!==e.link&&h.isLink.value)),N=(0,n.Fl)((()=>!e.disabled&&!1!==e.link&&(e.link||h.isClickable.value||null!=e.value&&!!P))),D=(0,n.Fl)((()=>e.rounded||e.nav)),B=(0,n.Fl)((()=>({color:x.value?e.activeColor??e.color:e.color,variant:e.variant})));(0,n.YP)((()=>{var e;return null==(e=h.isActive)?void 0:e.value}),(e=>{e&&null!=C.value&&T.open(C.value,!0),e&&R(e)}),{immediate:!0});const{themeClasses:L}=(0,v.ER)(e),{borderClasses:M}=(0,d.P)(e),{colorClasses:U,colorStyles:F,variantClasses:j}=(0,l.c1)(B),{densityClasses:V}=(0,f.t)(e),{dimensionStyles:z}=(0,p.$)(e),{elevationClasses:$}=(0,y.Y)(e),{roundedClasses:q}=(0,g.b)(D),K=(0,n.Fl)((()=>e.lines?`v-list-item--${e.lines}-line`:void 0)),H=(0,n.Fl)((()=>({isActive:x.value,select:_,isSelected:S.value,isIndeterminate:k.value})));return(0,A.L)((()=>{var t,r,d,f,p;const y=O.value?"a":e.tag,g=!P||S.value||x.value,m=u.title||e.title,w=u.subtitle||e.subtitle,v=!!(u.append||e.appendAvatar||e.appendIcon),b=!!(u.prepend||e.prependAvatar||e.prependIcon);return null==P||P.updateHasPrepend(b),(0,n.wy)((0,n.Wm)(y,{class:["v-list-item",{"v-list-item--active":x.value,"v-list-item--disabled":e.disabled,"v-list-item--link":N.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!b&&(null==P?void 0:P.hasPrepend.value),[`${e.activeClass}`]:x.value},L.value,M.value,g?U.value:void 0,V.value,$.value,K.value,q.value,j.value],style:[g?F.value:void 0,z.value],href:h.href.value,tabindex:N.value?0:void 0,onClick:N.value&&(t=>{var r;I||(null==(r=h.navigate)||r.call(h,t),null!=e.value&&_(!S.value,t))})},{default:()=>[(0,l.Ux)(N.value||x.value,"v-list-item"),b&&(0,n.Wm)(s.z,{key:"prepend",defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>[(0,n.Wm)("div",{class:"v-list-item__prepend"},[e.prependAvatar&&(0,n.Wm)(i.V,{key:"prepend-avatar"},null),e.prependIcon&&(0,n.Wm)(o.t,{key:"prepend-icon"},null),null==(t=u.prepend)?void 0:t.call(u,H.value)])]}),(0,n.Wm)("div",{class:"v-list-item__content"},[m&&(0,n.Wm)(c.V,{key:"title"},{default:()=>[(null==(r=u.title)?void 0:r.call(u,{title:e.title}))??e.title]}),w&&(0,n.Wm)(a.o,{key:"subtitle"},{default:()=>[(null==(d=u.subtitle)?void 0:d.call(u,{subtitle:e.subtitle}))??e.subtitle]}),null==(f=u.default)?void 0:f.call(u,H.value)]),v&&(0,n.Wm)(s.z,{key:"append",defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>[(0,n.Wm)("div",{class:"v-list-item__append"},[null==(p=u.append)?void 0:p.call(u,H.value),e.appendIcon&&(0,n.Wm)(o.t,{key:"append-icon"},null),e.appendAvatar&&(0,n.Wm)(i.V,{key:"append-avatar"},null)])]})]}),[[(0,n.Q2)("ripple"),N.value]])})),{}}})},7769:function(e,t,r){"use strict";r.d(t,{o:function(){return i}});var n=r(1114);const i=(0,n.J)("v-list-item-subtitle")},2127:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(1114);const i=(0,n.J)("v-list-item-title")},3867:function(e,t,r){"use strict";r.d(t,{$l:function(){return o},sm:function(){return a}});var n=r(3396),i=r(4870);Symbol.for("vuetify:depth");const s=Symbol.for("vuetify:list");function o(){const e=(0,n.f3)(s,{hasPrepend:(0,i.iH)(!1),updateHasPrepend:()=>null}),t={hasPrepend:(0,i.iH)(!1),updateHasPrepend:e=>{e&&(t.hasPrepend.value=e)}};return(0,n.JJ)(s,t),e}function a(){return(0,n.f3)(s,null)}},3173:function(e,t,r){"use strict";r.d(t,{L:function(){return p}});var n=r(3396),i=r(9374),s=r(1138),o=r(7041),a=r(1477),c=r(3712),u=r(2370),l=r(4870),h=r(320),d=r(131),f=r(9888);const p=(0,h.a)({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...(0,i.Z)(),...(0,s.Q)({tag:"div"}),...(0,o.x$)()},setup(e,t){let{slots:r}=t;const s=20,h=2*Math.PI*s,p=(0,l.iH)(),{themeClasses:y}=(0,o.ER)(e),{sizeClasses:g,sizeStyles:m}=(0,i.t)(e),{textColorClasses:w,textColorStyles:v}=(0,u.rY)((0,l.Vh)(e,"color")),{textColorClasses:b,textColorStyles:E}=(0,u.rY)((0,l.Vh)(e,"bgColor")),{intersectionRef:_,isIntersecting:A}=(0,a.S)(),{resizeRef:S,contentRect:k}=(0,c.y)(),I=(0,n.Fl)((()=>Math.max(0,Math.min(100,parseFloat(e.modelValue))))),T=(0,n.Fl)((()=>Number(e.width))),C=(0,n.Fl)((()=>m.value?Number(e.size):k.value?k.value.width:Math.max(T.value,32))),R=(0,n.Fl)((()=>s/(1-T.value/C.value)*2)),P=(0,n.Fl)((()=>T.value/C.value*R.value)),x=(0,n.Fl)((()=>(0,d.kb)((100-I.value)/100*h)));return(0,n.m0)((()=>{_.value=p.value,S.value=p.value})),(0,f.L)((()=>(0,n.Wm)(e.tag,{ref:p,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!e.indeterminate,"v-progress-circular--visible":A.value,"v-progress-circular--disable-shrink":"disable-shrink"===e.indeterminate},y.value,g.value,w.value],style:[m.value,v.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.indeterminate?void 0:I.value},{default:()=>[(0,n.Wm)("svg",{style:{transform:`rotate(calc(-90deg + ${Number(e.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${R.value} ${R.value}`},[(0,n.Wm)("circle",{class:["v-progress-circular__underlay",b.value],style:E.value,fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":P.value,"stroke-dasharray":h,"stroke-dashoffset":0},null),(0,n.Wm)("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:s,"stroke-width":P.value,"stroke-dasharray":h,"stroke-dashoffset":x.value},null)]),r.default&&(0,n.Wm)("div",{class:"v-progress-circular__content"},[r.default({value:I.value})])]}))),{}}})},4162:function(e,t,r){"use strict";r.d(t,{t:function(){return c}});var n=r(3396),i=r(4544),s=r(320),o=r(9888);function a(e){return{aspectStyles:(0,n.Fl)((()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0}))}}const c=(0,s.a)({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...(0,i.x)()},setup(e,t){let{slots:r}=t;const{aspectStyles:s}=a(e),{dimensionStyles:c}=(0,i.$)(e);return(0,o.L)((()=>{var t;return(0,n.Wm)("div",{class:"v-responsive",style:c.value},[(0,n.Wm)("div",{class:"v-responsive__sizer",style:s.value},null),null==(t=r.additional)?void 0:t.call(r),r.default&&(0,n.Wm)("div",{class:["v-responsive__content",e.contentClass]},[r.default()])])})),{}}})},4286:function(e,t,r){"use strict";r.d(t,{C:function(){return y}});var n=r(3396),i=r(2718),s=r(4544),o=r(2465),a=r(6903),c=r(489),u=r(4231),l=r(1138),h=r(7041),d=r(2370),f=r(320),p=r(4870);const y=(0,f.a)({name:"VSheet",props:{color:String,...(0,i.m)(),...(0,s.x)(),...(0,o.c)(),...(0,a.y)(),...(0,c.F)(),...(0,u.I)(),...(0,l.Q)(),...(0,h.x$)()},setup(e,t){let{slots:r}=t;const{themeClasses:l}=(0,h.ER)(e),{backgroundColorClasses:f,backgroundColorStyles:y}=(0,d.Y5)((0,p.Vh)(e,"color")),{borderClasses:g}=(0,i.P)(e),{dimensionStyles:m}=(0,s.$)(e),{elevationClasses:w}=(0,o.Y)(e),{locationStyles:v}=(0,a.T)(e),{positionClasses:b}=(0,c.K)(e),{roundedClasses:E}=(0,u.b)(e);return()=>(0,n.Wm)(e.tag,{class:["v-sheet",l.value,f.value,g.value,w.value,b.value,E.value],style:[y.value,m.value,v.value]},r)}})},4413:function(e,t,r){"use strict";r.d(t,{Y:function(){return l}});var n=r(3396),i=r(9694),s=r(1138),o=r(7041),a=r(320),c=r(9888),u=r(131);const l=(0,a.a)({name:"VTable",props:{fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],...(0,i.f)(),...(0,s.Q)(),...(0,o.x$)()},setup(e,t){let{slots:r}=t;const{themeClasses:s}=(0,o.ER)(e),{densityClasses:a}=(0,i.t)(e);return(0,c.L)((()=>{var t,i;return(0,n.Wm)(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!r.top,"v-table--has-bottom":!!r.bottom},s.value,a.value]},{default:()=>[null==(t=r.top)?void 0:t.call(r),r.default&&(0,n.Wm)("div",{class:"v-table__wrapper",style:{height:(0,u.kb)(e.height)}},[(0,n.Wm)("table",null,[r.default()])]),null==(i=r.bottom)?void 0:i.call(r)]})})),{}}})},8952:function(e,t,r){"use strict";r.d(t,{Fx:function(){return l}});var n=r(9242),i=r(3396),s=r(320);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top center 0",r=arguments.length>2?arguments[2]:void 0;return(0,s.a)({name:e,props:{group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:r},origin:{type:String,default:t}},setup(t,r){let{slots:s}=r;return()=>{const r=t.group?n.W3:n.uT;return(0,i.h)(r,{name:e,mode:t.mode,onBeforeEnter(e){e.style.transformOrigin=t.origin},onLeave(e){if(t.leaveAbsolute){const{offsetTop:t,offsetLeft:r,offsetWidth:n,offsetHeight:i}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=`${t}px`,e.style.left=`${r}px`,e.style.width=`${n}px`,e.style.height=`${i}px`}t.hideOnLeave&&e.style.setProperty("display","none","important")},onAfterLeave(e){if(t.leaveAbsolute&&null!=e&&e._transitionInitialStyles){const{position:t,top:r,left:n,width:i,height:s}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=r||"",e.style.left=n||"",e.style.width=i||"",e.style.height=s||""}}},s.default)}}})}function a(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return(0,s.a)({name:e,props:{mode:{type:String,default:r}},setup(r,s){let{slots:o}=s;return()=>(0,i.h)(n.uT,{name:e,...t},o.default)}})}var c=r(7139);function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t?"width":"height",n=(0,c._A)(`offset-${r}`);return{onBeforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[r]:e.style[r]}},onEnter(t){const i=t._initialStyle;t.style.setProperty("transition","none","important"),t.style.overflow="hidden";const s=`${t[n]}px`;t.style[r]="0",t.offsetHeight,t.style.transition=i.transition,e&&t._parent&&t._parent.classList.add(e),requestAnimationFrame((()=>{t.style[r]=s}))},onAfterEnter:s,onEnterCancelled:s,onLeave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[r]:e.style[r]},e.style.overflow="hidden",e.style[r]=`${e[n]}px`,e.offsetHeight,requestAnimationFrame((()=>e.style[r]="0"))},onAfterLeave:i,onLeaveCancelled:i};function i(t){e&&t._parent&&t._parent.classList.remove(e),s(t)}function s(e){const t=e._initialStyle[r];e.style.overflow=e._initialStyle.overflow,null!=t&&(e.style[r]=t),delete e._initialStyle}}o("fab-transition","center center","out-in"),o("dialog-bottom-transition"),o("dialog-top-transition"),o("fade-transition"),o("scale-transition"),o("scroll-x-transition"),o("scroll-x-reverse-transition"),o("scroll-y-transition"),o("scroll-y-reverse-transition"),o("slide-x-transition"),o("slide-x-reverse-transition"),o("slide-y-transition"),o("slide-y-reverse-transition");const l=a("expand-transition",u());a("expand-x-transition",u("",!0))},2718:function(e,t,r){"use strict";r.d(t,{P:function(){return c},m:function(){return a}});r(7658);var n=r(3396),i=r(4870),s=r(3766),o=r(7514);const a=(0,s.U)({border:[Boolean,Number,String]},"border");function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.BL)();const r=(0,n.Fl)((()=>{const r=(0,i.dq)(e)?e.value:e.border,n=[];if(!0===r||""===r)n.push(`${t}--border`);else if("string"===typeof r||0===r)for(const e of String(r).split(" "))n.push(`border-${e}`);return n}));return{borderClasses:r}}},2370:function(e,t,r){"use strict";r.d(t,{Y5:function(){return u},rY:function(){return c},rd:function(){return a}});r(7658);var n=r(3396),i=r(4870),s=r(131),o=r(661);function a(e){return(0,s.S3)((()=>{const t=[],r={};return e.value.background&&((0,o.NA)(e.value.background)?r.backgroundColor=e.value.background:t.push(`bg-${e.value.background}`)),e.value.text&&((0,o.NA)(e.value.text)?(r.color=e.value.text,r.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:r}}))}function c(e,t){const r=(0,n.Fl)((()=>({text:(0,i.dq)(e)?e.value:t?e[t]:null}))),{colorClasses:s,colorStyles:o}=a(r);return{textColorClasses:s,textColorStyles:o}}function u(e,t){const r=(0,n.Fl)((()=>({background:(0,i.dq)(e)?e.value:t?e[t]:null}))),{colorClasses:s,colorStyles:o}=a(r);return{backgroundColorClasses:s,backgroundColorStyles:o}}},8434:function(e,t,r){"use strict";r.d(t,{AF:function(){return u},qy:function(){return c},tI:function(){return o},yB:function(){return a}});var n=r(4870),i=r(3396),s=r(131);const o=Symbol.for("vuetify:defaults");function a(e){return(0,n.iH)(e??{})}function c(){const e=(0,i.f3)(o);if(!e)throw new Error("[Vuetify] Could not find defaults instance");return e}function u(e,t){const r=c(),a=(0,n.iH)(e),u=(0,i.Fl)((()=>{const e=(0,n.SU)(null==t?void 0:t.scoped),i=(0,n.SU)(null==t?void 0:t.reset),o=(0,n.SU)(null==t?void 0:t.root);let c=(0,s.Ee)(a.value,{prev:r.value});if(e)return c;if(i||o){const e=Number(i||1/0);for(let t=0;t<=e;t++){if(!c.prev)break;c=c.prev}return c}return(0,s.Ee)(c.prev,c)}));return(0,i.JJ)(o,u),u}},9694:function(e,t,r){"use strict";r.d(t,{f:function(){return a},t:function(){return c}});var n=r(3396),i=r(3766),s=r(7514);const o=[null,"default","comfortable","compact"],a=(0,i.U)({density:{type:String,default:"default",validator:e=>o.includes(e)}},"density");function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.BL)();const r=(0,n.Fl)((()=>`${t}--density-${e.density}`));return{densityClasses:r}}},4544:function(e,t,r){"use strict";r.d(t,{$:function(){return a},x:function(){return o}});var n=r(3396),i=r(3766),s=r(131);const o=(0,i.U)({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function a(e){const t=(0,n.Fl)((()=>({height:(0,s.kb)(e.height),maxHeight:(0,s.kb)(e.maxHeight),maxWidth:(0,s.kb)(e.maxWidth),minHeight:(0,s.kb)(e.minHeight),minWidth:(0,s.kb)(e.minWidth),width:(0,s.kb)(e.width)})));return{dimensionStyles:t}}},8157:function(e,t,r){"use strict";r.d(t,{AW:function(){return p},fT:function(){return f},x6:function(){return a}});var n=r(4870),i=r(3396),s=r(131),o=r(2385);const a=Symbol.for("vuetify:display"),c={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return(0,s.Ee)(c,e)};function l(e){return o.BR&&!e?window.innerWidth:0}function h(e){return o.BR&&!e?window.innerHeight:0}function d(){const e=o.BR?window.navigator.userAgent:"ssr";function t(t){return Boolean(e.match(t))}const r=t(/android/i),n=t(/iphone|ipad|ipod/i),i=t(/cordova/i),s=t(/electron/i),a=t(/chrome/i),c=t(/edge/i),u=t(/firefox/i),l=t(/opera/i),h=t(/win/i),d=t(/mac/i),f=t(/linux/i),p=t(/ssr/i);return{android:r,ios:n,cordova:i,electron:s,chrome:a,edge:c,firefox:u,opera:l,win:h,mac:d,linux:f,touch:o.sR,ssr:p}}function f(e,t){const{thresholds:r,mobileBreakpoint:s}=u(e),a=(0,n.iH)(h(t)),c=d(),f=(0,n.qj)({}),p=(0,n.iH)(l(t));function y(){a.value=h(),p.value=l()}return t&&o.BR&&requestAnimationFrame((()=>y())),(0,i.m0)((()=>{const e=p.value<r.sm,t=p.value<r.md&&!e,n=p.value<r.lg&&!(t||e),i=p.value<r.xl&&!(n||t||e),o=p.value<r.xxl&&!(i||n||t||e),u=p.value>=r.xxl,l=e?"xs":t?"sm":n?"md":i?"lg":o?"xl":"xxl",h="number"===typeof s?s:r[s],d=c.ssr?c.android||c.ios||c.opera:p.value<h;f.xs=e,f.sm=t,f.md=n,f.lg=i,f.xl=o,f.xxl=u,f.smAndUp=!e,f.mdAndUp=!(e||t),f.lgAndUp=!(e||t||n),f.xlAndUp=!(e||t||n||i),f.smAndDown=!(n||i||o||u),f.mdAndDown=!(i||o||u),f.lgAndDown=!(o||u),f.xlAndDown=!u,f.name=l,f.height=a.value,f.width=p.value,f.mobile=d,f.mobileBreakpoint=s,f.platform=c,f.thresholds=r})),o.BR&&window.addEventListener("resize",y,{passive:!0}),(0,n.BK)(f)}function p(){const e=(0,i.f3)(a);if(!e)throw new Error("Could not find Vuetify display injection");return e}},2465:function(e,t,r){"use strict";r.d(t,{Y:function(){return a},c:function(){return o}});r(7658);var n=r(3396),i=r(4870),s=r(3766);const o=(0,s.U)({elevation:{type:[Number,String],validator(e){const t=parseInt(e);return!isNaN(t)&&t>=0&&t<=24}}},"elevation");function a(e){const t=(0,n.Fl)((()=>{const t=(0,i.dq)(e)?e.value:e.elevation,r=[];return null==t||r.push(`elevation-${t}`),r}));return{elevationClasses:t}}},4960:function(e,t,r){"use strict";r.d(t,{YK:function(){return h},lE:function(){return l},$0:function(){return y},_i:function(){return m},bi:function(){return w}});var n=r(3396);const i={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},s={component:e=>(0,n.h)(y,{...e,class:"mdi"})};var o=r(4870),a=r(3766),c=r(320),u=r(131);const l=[String,Function,Object],h=Symbol.for("vuetify:icons"),d=(0,a.U)({icon:{type:l,required:!0},tag:{type:String,required:!0}},"icon"),f=(0,c.a)({name:"VComponentIcon",props:d(),setup(e){return()=>(0,n.Wm)(e.tag,null,{default:()=>[(0,n.Wm)(e.icon,null,null)]})}}),p=(0,c.a)({name:"VSvgIcon",inheritAttrs:!1,props:d(),setup(e,t){let{attrs:r}=t;return()=>(0,n.Wm)(e.tag,(0,n.dG)(r,{style:null}),{default:()=>[(0,n.Wm)("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[(0,n.Wm)("path",{d:e.icon},null)])]})}}),y=((0,c.a)({name:"VLigatureIcon",props:d(),setup(e){return()=>(0,n.Wm)(e.tag,null,{default:()=>[e.icon]})}}),(0,c.a)({name:"VClassIcon",props:d(),setup(e){return()=>(0,n.Wm)(e.tag,{class:e.icon},null)}})),g={svg:{component:p},class:{component:y}};function m(e){return(0,u.Ee)({defaultSet:"mdi",sets:{...g,mdi:s},aliases:i},e)}const w=e=>{const t=(0,n.f3)(h);if(!t)throw new Error("Missing Vuetify Icons provide!");const r=(0,n.Fl)((()=>{const r=(0,o.dq)(e)?e.value:e.icon;if(!r)throw new Error("Icon value is undefined or null");let n=r;var i;"string"===typeof r&&r.includes("$")&&(n=null==(i=t.aliases)?void 0:i[r.slice(r.indexOf("$")+1)]);if(!n)throw new Error(`Could not find aliased icon "${r}"`);if("string"!==typeof n)return{component:f,icon:n};const s=Object.keys(t.sets).find((e=>"string"===typeof n&&n.startsWith(`${e}:`))),a=s?n.slice(s.length+1):n,c=t.sets[s??t.defaultSet];return{component:c.component,icon:a}}));return{iconData:r}}},1477:function(e,t,r){"use strict";r.d(t,{S:function(){return o}});var n=r(4870),i=r(3396),s=r(2385);function o(e){const t=(0,n.iH)(),r=(0,n.iH)(!1);if(s.cu){const n=new IntersectionObserver((t=>{null==e||e(t,n),r.value=!!t.find((e=>e.isIntersecting))}));(0,i.Jd)((()=>{n.disconnect()})),(0,i.YP)(t,((e,t)=>{t&&(n.unobserve(t),r.value=!1),e&&n.observe(e)}),{flush:"post"})}return{intersectionRef:t,isIntersecting:r}}},7396:function(e,t,r){"use strict";r.d(t,{GB:function(){return d},eW:function(){return p},o8:function(){return f},te:function(){return g}});r(7658);var n=r(3712),i=r(3396),s=r(4870),o=r(3766),a=r(7514),c=r(131);const u=Symbol.for("vuetify:layout"),l=Symbol.for("vuetify:layout-item"),h=1e3,d=(0,o.U)({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),f=(0,o.U)({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function p(e){const t=(0,i.f3)(u);if(!t)throw new Error("Could not find injected Vuetify layout");const r=e.id??`layout-item-${(0,a.sq)()}`,n=(0,a.FN)("useLayoutItem");(0,i.JJ)(l,{id:r});const o=(0,s.iH)(!1);(0,i.se)((()=>o.value=!0)),(0,i.dl)((()=>o.value=!1));const{layoutItemStyles:c,layoutItemScrimStyles:h}=t.register(n,{...e,active:(0,i.Fl)((()=>!o.value&&e.active.value)),id:r});return(0,i.Jd)((()=>t.unregister(r))),{layoutItemStyles:c,layoutRect:t.layoutRect,layoutItemScrimStyles:h}}const y=(e,t,r,n)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const o of e){const e=t.get(o),a=r.get(o),c=n.get(o);if(!e||!a||!c)continue;const u={...i,[e.value]:parseInt(i[e.value],10)+(c.value?parseInt(a.value,10):0)};s.push({id:o,layer:u}),i=u}return s};function g(e){const t=(0,i.f3)(u,null),r=(0,i.Fl)((()=>t?t.rootZIndex.value-100:h)),o=(0,s.iH)([]),d=(0,s.qj)(new Map),f=(0,s.qj)(new Map),p=(0,s.qj)(new Map),g=(0,s.qj)(new Map),m=(0,s.qj)(new Map),{resizeRef:w,contentRect:v}=(0,n.y)(),b=(0,i.Fl)((()=>{const t=new Map,r=e.overlaps??[];for(const e of r.filter((e=>e.includes(":")))){const[r,n]=e.split(":");if(!o.value.includes(r)||!o.value.includes(n))continue;const i=d.get(r),s=d.get(n),a=f.get(r),c=f.get(n);i&&s&&a&&c&&(t.set(n,{position:i.value,amount:parseInt(a.value,10)}),t.set(r,{position:s.value,amount:-parseInt(c.value,10)}))}return t})),E=(0,i.Fl)((()=>{const e=[...new Set([...p.values()].map((e=>e.value)))].sort(((e,t)=>e-t)),t=[];for(const r of e){const e=o.value.filter((e=>{var t;return(null==(t=p.get(e))?void 0:t.value)===r}));t.push(...e)}return y(t,d,f,g)})),_=(0,i.Fl)((()=>!Array.from(m.values()).some((e=>e.value)))),A=(0,i.Fl)((()=>{const e=E.value[E.value.length-1].layer;return{"--v-layout-left":(0,c.kb)(e.left),"--v-layout-right":(0,c.kb)(e.right),"--v-layout-top":(0,c.kb)(e.top),"--v-layout-bottom":(0,c.kb)(e.bottom),..._.value?void 0:{transition:"none"}}})),S=(0,i.Fl)((()=>E.value.slice(1).map(((e,t)=>{let{id:r}=e;const{layer:n}=E.value[t],i=f.get(r);return{id:r,...n,size:Number(i.value)}})))),k=e=>S.value.find((t=>t.id===e)),I=(0,a.FN)("createLayout"),T=(0,s.iH)(!1);(0,i.bv)((()=>{T.value=!0})),(0,i.JJ)(u,{register:(e,t)=>{let{id:n,order:s,position:a,layoutSize:u,elementSize:y,active:w,disableTransitions:v,absolute:A}=t;p.set(n,s),d.set(n,a),f.set(n,u),g.set(n,w),v&&m.set(n,v);const k=(0,c.bY)(l,null==I?void 0:I.vnode),C=k.indexOf(e);C>-1?o.value.splice(C,0,n):o.value.push(n);const R=(0,i.Fl)((()=>S.value.findIndex((e=>e.id===n)))),P=(0,i.Fl)((()=>r.value+2*E.value.length-2*R.value)),x=(0,i.Fl)((()=>{const e="left"===a.value||"right"===a.value,t="right"===a.value,i="bottom"===a.value,s={[a.value]:0,zIndex:P.value,transform:`translate${e?"X":"Y"}(${(w.value?0:-110)*(t||i?-1:1)}%)`,position:A.value||r.value!==h?"absolute":"fixed",..._.value?void 0:{transition:"none"}};if(!T.value)return s;if(R.value<0)throw new Error(`Layout item "${n}" is missing`);const o=S.value[R.value];if(!o)throw new Error(`Could not find layout item "${n}`);const c=b.value.get(n);return c&&(o[c.position]+=c.amount),{...s,height:e?`calc(100% - ${o.top}px - ${o.bottom}px)`:y.value?`${y.value}px`:void 0,left:t?void 0:`${o.left}px`,right:t?`${o.right}px`:void 0,top:"bottom"!==a.value?`${o.top}px`:void 0,bottom:"top"!==a.value?`${o.bottom}px`:void 0,width:e?y.value?`${y.value}px`:void 0:`calc(100% - ${o.left}px - ${o.right}px)`}})),O=(0,i.Fl)((()=>({zIndex:P.value-1})));return{layoutItemStyles:x,layoutItemScrimStyles:O,zIndex:P}},unregister:e=>{p.delete(e),d.delete(e),f.delete(e),g.delete(e),m.delete(e),o.value=o.value.filter((t=>t!==e))},mainStyles:A,getLayoutItem:k,items:S,layoutRect:v,rootZIndex:r});const C=(0,i.Fl)((()=>["v-layout",{"v-layout--full-height":e.fullHeight}])),R=(0,i.Fl)((()=>({zIndex:r.value,position:t?"relative":void 0,overflow:t?"hidden":void 0})));return{layoutClasses:C,layoutStyles:R,getLayoutItem:k,items:S,layoutRect:v,layoutRef:w}}},6791:function(e,t,r){"use strict";r.d(t,{rD:function(){return b},fF:function(){return w},U2:function(){return v}});var n=r(3396),i=r(4231),s=r(1138),o=r(7041),a=r(2370),c=r(1477),u=r(5087),l=r(9903),h=r(9242),d=r(320),f=r(9888),p=r(131);const y=(0,d.a)({name:"VProgressLinear",props:{active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...(0,i.I)(),...(0,s.Q)(),...(0,o.x$)()},emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:r}=t;const s=(0,u.z)(e,"modelValue"),{isRtl:d}=(0,l.Vw)(),{themeClasses:y}=(0,o.ER)(e),{textColorClasses:g,textColorStyles:m}=(0,a.rY)(e,"color"),{backgroundColorClasses:w,backgroundColorStyles:v}=(0,a.Y5)((0,n.Fl)((()=>e.bgColor||e.color))),{backgroundColorClasses:b,backgroundColorStyles:E}=(0,a.Y5)(e,"color"),{roundedClasses:_}=(0,i.b)(e),{intersectionRef:A,isIntersecting:S}=(0,c.S)(),k=(0,n.Fl)((()=>parseInt(e.max,10))),I=(0,n.Fl)((()=>parseInt(e.height,10))),T=(0,n.Fl)((()=>parseFloat(e.bufferValue)/k.value*100)),C=(0,n.Fl)((()=>parseFloat(s.value)/k.value*100)),R=(0,n.Fl)((()=>d.value!==e.reverse)),P=(0,n.Fl)((()=>e.indeterminate?"fade-transition":"slide-x-transition")),x=(0,n.Fl)((()=>null==e.bgOpacity?e.bgOpacity:parseFloat(e.bgOpacity)));function O(e){if(!A.value)return;const{left:t,right:r,width:n}=A.value.getBoundingClientRect(),i=R.value?n-e.clientX+(r-n):e.clientX-t;s.value=Math.round(i/n*k.value)}return(0,f.L)((()=>(0,n.Wm)(e.tag,{ref:A,class:["v-progress-linear",{"v-progress-linear--active":e.active&&S.value,"v-progress-linear--reverse":R.value,"v-progress-linear--rounded":e.rounded,"v-progress-linear--rounded-bar":e.roundedBar,"v-progress-linear--striped":e.striped},_.value,y.value],style:{height:e.active?(0,p.kb)(I.value):0,"--v-progress-linear-height":(0,p.kb)(I.value)},role:"progressbar","aria-valuemin":"0","aria-valuemax":e.max,"aria-valuenow":e.indeterminate?void 0:C.value,onClick:e.clickable&&O},{default:()=>[e.stream&&(0,n.Wm)("div",{key:"stream",class:["v-progress-linear__stream",g.value],style:{...m.value,[R.value?"left":"right"]:(0,p.kb)(-I.value),borderTop:`${(0,p.kb)(I.value/2)} dotted`,opacity:x.value,top:`calc(50% - ${(0,p.kb)(I.value/4)})`,width:(0,p.kb)(100-T.value,"%"),"--v-progress-linear-stream-to":(0,p.kb)(I.value*(R.value?1:-1))}},null),(0,n.Wm)("div",{class:["v-progress-linear__background",w.value],style:[v.value,{opacity:x.value,width:(0,p.kb)(e.stream?T.value:100,"%")}]},null),(0,n.Wm)(h.uT,{name:P.value},{default:()=>[e.indeterminate?(0,n.Wm)("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map((e=>(0,n.Wm)("div",{key:e,class:["v-progress-linear__indeterminate",e,b.value],style:E.value},null)))]):(0,n.Wm)("div",{class:["v-progress-linear__determinate",b.value],style:[E.value,{width:(0,p.kb)(C.value,"%")}]},null)]}),r.default&&(0,n.Wm)("div",{class:"v-progress-linear__content"},[r.default({value:C.value,buffer:T.value})])]}))),{}}});var g=r(3766),m=r(7514);const w=(0,g.U)({loading:Boolean},"loader");function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,m.BL)();const r=(0,n.Fl)((()=>({[`${t}--loading`]:e.loading})));return{loaderClasses:r}}function b(e,t){var r;let{slots:i}=t;return(0,n.Wm)("div",{class:`${e.name}__loader`},[(null==(r=i.default)?void 0:r.call(i,{color:e.color,isActive:e.active}))||(0,n.Wm)(y,{active:e.active,color:e.color,height:"2",indeterminate:!0},null)])}},6903:function(e,t,r){"use strict";r.d(t,{y:function(){return d},T:function(){return f}});var n=r(9903),i=r(3396),s=r(3766),o=r(131);const a=["top","bottom"],c=["start","end","left","right"];function u(e,t){let[r,n]=e.split(" ");return n||(n=(0,o.q9)(a,r)?"start":(0,o.q9)(c,r)?"top":"center"),{side:l(r,t),align:l(n,t)}}function l(e,t){return"start"===e?t?"right":"left":"end"===e?t?"left":"right":e}const h={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},d=(0,s.U)({location:String},"location");function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;const{isRtl:s}=(0,n.Vw)(),o=(0,i.Fl)((()=>{if(!e.location)return{};const{side:n,align:i}=u(e.location.split(" ").length>1?e.location:`${e.location} center`,s.value);function o(e){return r?r(e):0}const a={};return"center"!==n&&(t?a[h[n]]=`calc(100% - ${o(n)}px)`:a[n]=0),"center"!==i?t?a[h[i]]=`calc(100% - ${o(i)}px)`:a[i]=0:("center"===n?a.top=a.left="50%":a[{top:"left",bottom:"left",left:"top",right:"top"}[n]]="50%",a.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[n]),a}));return{locationStyles:o}}},6479:function(e,t,r){"use strict";r.d(t,{Gp:function(){return w},Ek:function(){return v},_$:function(){return E},Io:function(){return b}});r(541),r(7658);var n=r(5087),i=r(3766),s=r(7514),o=r(4870),a=r(3396);const c={open:e=>{let{id:t,value:r,opened:n,parents:i}=e;if(r){const e=new Set;e.add(t);let r=i.get(t);while(null!=r)e.add(r),r=i.get(r);return e}return n.delete(t),n},select:()=>null},u={open:e=>{let{id:t,value:r,opened:n,parents:i}=e;if(r){let e=i.get(t);n.add(t);while(null!=e&&e!==t)n.add(e),e=i.get(e);return n}return n.delete(t),n},select:()=>null},l={open:u.open,select:e=>{let{id:t,value:r,opened:n,parents:i}=e;if(!r)return n;const s=[];let o=i.get(t);while(null!=o)s.push(o),o=i.get(o);return new Set(s)}},h=e=>{const t={select:t=>{let{id:r,value:n,selected:i}=t;if(e&&!n){const e=Array.from(i.entries()).reduce(((e,t)=>{let[r,n]=t;return"on"===n?[...e,r]:e}),[]);if(1===e.length&&e[0]===r)return i}return i.set(r,n?"on":"off"),i},in:(e,r,n)=>{let i=new Map;for(const s of e||[])i=t.select({id:s,value:!0,selected:new Map(i),children:r,parents:n});return i},out:e=>{const t=[];for(const[r,n]of e.entries())"on"===n&&t.push(r);return t}};return t},d=e=>{const t=h(e),r={select:e=>{let{selected:r,id:n,...i}=e;const s=r.has(n)?new Map([[n,r.get(n)]]):new Map;return t.select({...i,id:n,selected:s})},in:(e,r,n)=>{let i=new Map;return null!=e&&e.length&&(i=t.in(e.slice(0,1),r,n)),i},out:(e,r,n)=>t.out(e,r,n)};return r},f=e=>{const t=h(e),r={select:e=>{let{id:r,selected:n,children:i,...s}=e;return i.has(r)?n:t.select({id:r,selected:n,children:i,...s})},in:t.in,out:t.out};return r},p=e=>{const t=d(e),r={select:e=>{let{id:r,selected:n,children:i,...s}=e;return i.has(r)?n:t.select({id:r,selected:n,children:i,...s})},in:t.in,out:t.out};return r},y=e=>{const t={select:t=>{let{id:r,value:n,selected:i,children:s,parents:o}=t;const a=new Map(i),c=[r];while(c.length){const e=c.shift();i.set(e,n?"on":"off"),s.has(e)&&c.push(...s.get(e))}let u=o.get(r);while(u){const e=s.get(u),t=e.every((e=>"on"===i.get(e))),r=e.every((e=>!i.has(e)||"off"===i.get(e)));i.set(u,t?"on":r?"off":"indeterminate"),u=o.get(u)}if(e&&!n){const e=Array.from(i.entries()).reduce(((e,t)=>{let[r,n]=t;return"on"===n?[...e,r]:e}),[]);if(0===e.length)return a}return i},in:(e,r,n)=>{let i=new Map;for(const s of e||[])i=t.select({id:s,value:!0,selected:new Map(i),children:r,parents:n});return i},out:(e,t)=>{const r=[];for(const[n,i]of e.entries())"on"!==i||t.has(n)||r.push(n);return r}};return t},g=Symbol.for("vuetify:nested"),m={id:(0,o.iH)(),root:{register:()=>null,unregister:()=>null,parents:(0,o.iH)(new Map),children:(0,o.iH)(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:(0,o.iH)(new Set),selected:(0,o.iH)(new Map),selectedValues:(0,o.iH)([])}},w=(0,i.U)({selectStrategy:[String,Function],openStrategy:[String,Function],opened:Array,selected:Array,mandatory:Boolean},"nested"),v=e=>{let t=!1;const r=(0,o.iH)(new Map),i=(0,o.iH)(new Map),m=(0,n.z)(e,"opened",e.opened,(e=>new Set(e)),(e=>[...e.values()])),w=(0,a.Fl)((()=>{if("object"===typeof e.selectStrategy)return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return p(e.mandatory);case"leaf":return f(e.mandatory);case"independent":return h(e.mandatory);case"single-independent":return d(e.mandatory);case"classic":default:return y(e.mandatory)}})),v=(0,a.Fl)((()=>{if("function"===typeof e.openStrategy)return e.openStrategy;switch(e.openStrategy){case"list":return l;case"single":return c;case"multiple":default:return u}})),b=(0,n.z)(e,"selected",e.selected,(e=>w.value.in(e,r.value,i.value)),(e=>w.value.out(e,r.value,i.value)));function E(e){const t=[];let r=e;while(null!=r)t.unshift(r),r=i.value.get(r);return t}(0,a.Jd)((()=>{t=!0}));const _=(0,s.FN)("nested"),A={id:(0,o.iH)(),root:{opened:m,selected:b,selectedValues:(0,a.Fl)((()=>{const e=[];for(const[t,r]of b.value.entries())"on"===r&&e.push(t);return e})),register:(e,t,n)=>{t&&e!==t&&i.value.set(e,t),n&&r.value.set(e,[]),null!=t&&r.value.set(t,[...r.value.get(t)||[],e])},unregister:e=>{if(t)return;r.value.delete(e);const n=i.value.get(e);if(n){const t=r.value.get(n)??[];r.value.set(n,t.filter((t=>t!==e)))}i.value.delete(e),m.value.delete(e)},open:(e,t,n)=>{_.emit("click:open",{id:e,value:t,path:E(e),event:n});const s=v.value.open({id:e,value:t,opened:new Set(m.value),children:r.value,parents:i.value,event:n});s&&(m.value=s)},openOnSelect:(e,t,n)=>{const s=v.value.select({id:e,value:t,selected:new Map(b.value),opened:new Set(m.value),children:r.value,parents:i.value,event:n});s&&(m.value=s)},select:(e,t,n)=>{_.emit("click:select",{id:e,value:t,path:E(e),event:n});const s=w.value.select({id:e,value:t,selected:new Map(b.value),children:r.value,parents:i.value,event:n});s&&(b.value=s),A.root.openOnSelect(e,t,n)},children:r,parents:i}};return(0,a.JJ)(g,A),A.root},b=(e,t)=>{const r=(0,a.f3)(g,m),n=(0,a.Fl)((()=>e.value??(0,s.sq)().toString())),i={...r,id:n,open:(e,t)=>r.root.open(n.value,e,t),openOnSelect:(e,t)=>r.root.openOnSelect(n.value,e,t),isOpen:(0,a.Fl)((()=>r.root.opened.value.has(n.value))),parent:(0,a.Fl)((()=>r.root.parents.value.get(n.value))),select:(e,t)=>r.root.select(n.value,e,t),isSelected:(0,a.Fl)((()=>"on"===r.root.selected.value.get(n.value))),isIndeterminate:(0,a.Fl)((()=>"indeterminate"===r.root.selected.value.get(n.value))),isLeaf:(0,a.Fl)((()=>!r.root.children.value.get(n.value))),isGroupActivator:r.isGroupActivator};return!r.isGroupActivator&&r.root.register(n.value,r.id.value,t),(0,a.Jd)((()=>{!r.isGroupActivator&&r.root.unregister(n.value)})),t&&(0,a.JJ)(g,i),i},E=()=>{const e=(0,a.f3)(g,m);(0,a.JJ)(g,{...e,isGroupActivator:!0})}},489:function(e,t,r){"use strict";r.d(t,{F:function(){return a},K:function(){return c}});var n=r(3396),i=r(3766),s=r(7514);const o=["static","relative","fixed","absolute","sticky"],a=(0,i.U)({position:{type:String,validator:e=>o.includes(e)}},"position");function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.BL)();const r=(0,n.Fl)((()=>e.position?`${t}--${e.position}`:void 0));return{positionClasses:r}}},5087:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(4870),i=r(3396),s=r(7514),o=r(131);function a(e,t){let r;(0,i.YP)(e,(e=>{var i;e&&!r?(r=(0,n.B)(),r.run(t)):(null==(i=r)||i.stop(),r=void 0)}),{immediate:!0})}function c(e,t,r){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>e;const l=(0,s.FN)("useProxiedModel"),h=(0,n.iH)(e[t]),d=(0,o.mA)(t),f=d!==t,p=f?(0,i.Fl)((()=>{var r,n,i,s;return e[t],!(!(null!=(r=l.vnode.props)&&r.hasOwnProperty(t)||null!=(n=l.vnode.props)&&n.hasOwnProperty(d))||!(null!=(i=l.vnode.props)&&i.hasOwnProperty(`onUpdate:${t}`)||null!=(s=l.vnode.props)&&s.hasOwnProperty(`onUpdate:${d}`)))})):(0,i.Fl)((()=>{var r,n;return e[t],!(null==(r=l.vnode.props)||!r.hasOwnProperty(t)||null==(n=l.vnode.props)||!n.hasOwnProperty(`onUpdate:${t}`))}));a((()=>!p.value),(()=>{(0,i.YP)((()=>e[t]),(e=>{h.value=e}))}));const y=(0,i.Fl)({get(){return c(p.value?e[t]:h.value)},set(r){c(p.value?e[t]:h.value)!==r&&(r=u(r),h.value=r,null==l||l.emit(`update:${t}`,r))}});return Object.defineProperty(y,"externalValue",{get:()=>p.value?e[t]:h.value}),y}},3712:function(e,t,r){"use strict";r.d(t,{y:function(){return o}});var n=r(4870),i=r(3396),s=r(2385);function o(e){const t=(0,n.iH)(),r=(0,n.iH)();if(s.BR){const n=new ResizeObserver((t=>{null==e||e(t,n),t.length&&(r.value=t[0].contentRect)}));(0,i.Jd)((()=>{n.disconnect()})),(0,i.YP)(t,((e,t)=>{t&&(n.unobserve(t),r.value=void 0),e&&n.observe(e)}),{flush:"post"})}return{resizeRef:t,contentRect:(0,n.OT)(r)}}},4231:function(e,t,r){"use strict";r.d(t,{I:function(){return a},b:function(){return c}});r(7658);var n=r(3396),i=r(4870),s=r(3766),o=r(7514);const a=(0,s.U)({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.BL)();const r=(0,n.Fl)((()=>{const r=(0,i.dq)(e)?e.value:e.rounded,n=[];if(!0===r||""===r)n.push(`${t}--rounded`);else if("string"===typeof r||0===r)for(const e of String(r).split(" "))n.push(`rounded-${e}`);return n}));return{roundedClasses:r}}},6183:function(e,t,r){"use strict";r.d(t,{GN:function(){return a},nB:function(){return o}});var n=r(3766),i=r(3396),s=r(4870);function o(e,t){const r=(0,i.LL)("RouterLink"),n=(0,i.Fl)((()=>!(!e.href&&!e.to))),o=(0,i.Fl)((()=>(null==n?void 0:n.value)||!(!t.onClick&&!t.onClickOnce)));if("string"===typeof r)return{isLink:n,isClickable:o,href:(0,s.Vh)(e,"href")};const a=e.to?r.useLink(e):void 0;return{isLink:n,isClickable:o,route:null==a?void 0:a.route,navigate:null==a?void 0:a.navigate,isActive:a&&(0,i.Fl)((()=>{var t,r;return e.exact?null==(t=a.isExactActive)?void 0:t.value:null==(r=a.isActive)?void 0:r.value})),href:(0,i.Fl)((()=>e.to?null==a?void 0:a.route.value.href:e.href))}}const a=(0,n.U)({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router")},9903:function(e,t,r){"use strict";r.d(t,{Cm:function(){return o},is:function(){return a},Vw:function(){return u}});var n=r(4870),i=r(3396);const s={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},o=Symbol.for("vuetify:rtl");function a(e,t){return c({rtl:{...s,...(null==t?void 0:t.rtl)??{}},isRtl:(0,n.iH)(!1),rtlClasses:(0,n.iH)("")},e)}function c(e,t,r){const n=(0,i.Fl)((()=>"boolean"===typeof(null==r?void 0:r.rtl)?r.rtl:t.current.value&&e.rtl.hasOwnProperty(t.current.value)?e.rtl[t.current.value]:e.isRtl.value));return{isRtl:n,rtl:e.rtl,rtlClasses:(0,i.Fl)((()=>"v-locale--is-"+(n.value?"rtl":"ltr")))}}function u(){const e=(0,i.f3)(o);if(!e)throw new Error("[Vuetify] Could not find injected rtl instance");return e}},9374:function(e,t,r){"use strict";r.d(t,{Z:function(){return a},t:function(){return c}});var n=r(3766),i=r(7514),s=r(131);const o=["x-small","small","default","large","x-large"],a=(0,n.U)({size:{type:[String,Number],default:"default"}},"size");function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.BL)();return(0,s.S3)((()=>{let r,n;return(0,s.q9)(o,e.size)?r=`${t}--size-${e.size}`:e.size&&(n={width:(0,s.kb)(e.size),height:(0,s.kb)(e.size)}),{sizeClasses:r,sizeStyles:n}}))}},1138:function(e,t,r){"use strict";r.d(t,{Q:function(){return i}});var n=r(3766);const i=(0,n.U)({tag:{type:String,default:"div"}},"tag")},7041:function(e,t,r){"use strict";r.d(t,{bo:function(){return C},jG:function(){return O},x$:function(){return R},ER:function(){return N}});r(7658);var n=r(4870),i=r(3396),s=r(3766),o=r(131),a=r(661),c=r(2385),u=r(7514);
/**
 * WCAG 3.0 APCA perceptual contrast algorithm from https://github.com/Myndex/SAPC-APCA
 * @licence https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document
 * @see https://www.w3.org/WAI/GL/task-forces/silver/wiki/Visual_Contrast_of_Text_Subgroup
 */
const l=2.4,h=.2126729,d=.7151522,f=.072175,p=.55,y=.58,g=.57,m=.62,w=.03,v=1.45,b=5e-4,E=1.25,_=1.25,A=.078,S=12.82051282051282,k=.06,I=.001;function T(e,t){const r=((e>>16&255)/255)**l,n=((e>>8&255)/255)**l,i=((e>>0&255)/255)**l,s=((t>>16&255)/255)**l,o=((t>>8&255)/255)**l,a=((t>>0&255)/255)**l;let c,u=r*h+n*d+i*f,T=s*h+o*d+a*f;if(u<=w&&(u+=(w-u)**v),T<=w&&(T+=(w-T)**v),Math.abs(T-u)<b)return 0;if(T>u){const e=(T**p-u**y)*E;c=e<I?0:e<A?e-e*S*k:e-k}else{const e=(T**m-u**g)*_;c=e>-I?0:e>-A?e-e*S*k:e+k}return 100*c}const C=Symbol.for("vuetify:theme"),R=(0,s.U)({theme:String},"theme"),P={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"kbd-background-color":"#212529","kbd-color":"#FFFFFF","code-background-color":"#C2C2C2"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"kbd-background-color":"#212529","kbd-color":"#FFFFFF","code-background-color":"#B7B7B7"}}}};function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;if(!e)return{...P,isDisabled:!0};const t={};for(const[i,s]of Object.entries(e.themes??{})){var r,n;const e=s.dark?null==(r=P.themes)?void 0:r.dark:null==(n=P.themes)?void 0:n.light;t[i]=(0,o.Ee)(e,s)}return(0,o.Ee)(P,{...e,themes:t})}function O(e){const t=(0,n.qj)(x(e)),r=(0,n.iH)(t.defaultTheme),s=(0,n.iH)(t.themes),u=(0,i.Fl)((()=>{const e={};for(const[r,n]of Object.entries(s.value)){const i=e[r]={...n,colors:{...n.colors}};if(t.variations)for(const e of t.variations.colors){const r=i.colors[e];for(const n of["lighten","darken"]){const s="lighten"===n?a.$n:a._j;for(const c of(0,o.MT)(t.variations[n],1))i.colors[`${e}-${n}-${c}`]=(0,a.I4)(s((0,a.jx)(r),c))}}for(const e of Object.keys(i.colors)){if(/^on-[a-z]/.test(e)||i.colors[`on-${e}`])continue;const t=`on-${e}`,r=(0,a.jx)(i.colors[e]),n=Math.abs(T(0,r)),s=Math.abs(T(16777215,r));i.colors[t]=s>Math.min(n,50)?"#fff":"#000"}}return e})),l=(0,i.Fl)((()=>u.value[r.value])),h=(0,i.Fl)((()=>{const e=[];l.value.dark&&D(e,":root",["color-scheme: dark"]);for(const[i,s]of Object.entries(u.value)){const{variables:t,dark:r}=s;D(e,`.v-theme--${i}`,["color-scheme: "+(r?"dark":"normal"),...B(s),...Object.keys(t).map((e=>{const r=t[e],n="string"===typeof r&&r.startsWith("#")?(0,a.nA)(r):void 0,i=n?`${n.r}, ${n.g}, ${n.b}`:void 0;return`--v-${e}: ${i??r}`}))])}const t=[],r=[],n=new Set(Object.values(u.value).flatMap((e=>Object.keys(e.colors))));for(const i of n)/^on-[a-z]/.test(i)?D(r,`.${i}`,[`color: rgb(var(--v-theme-${i})) !important`]):(D(t,`.bg-${i}`,[`--v-theme-overlay-multiplier: var(--v-theme-${i}-overlay-multiplier)`,`background: rgb(var(--v-theme-${i})) !important`,`color: rgb(var(--v-theme-on-${i})) !important`]),D(r,`.text-${i}`,[`color: rgb(var(--v-theme-${i})) !important`]),D(r,`.border-${i}`,[`--v-border-color: var(--v-theme-${i})`]));return e.push(...t,...r),e.map(((e,t)=>0===t?e:`    ${e}`)).join("")}));function d(e){const r=e._context.provides.usehead;if(r)r.addHeadObjs((0,i.Fl)((()=>{const e={children:h.value,type:"text/css",id:"vuetify-theme-stylesheet"};return t.cspNonce&&(e.nonce=t.cspNonce),{style:[e]}}))),c.BR&&(0,i.m0)((()=>r.updateDOM()));else{let n=c.BR?document.getElementById("vuetify-theme-stylesheet"):null;function s(){if(!t.isDisabled){if("undefined"!==typeof document&&!n){const e=document.createElement("style");e.type="text/css",e.id="vuetify-theme-stylesheet",t.cspNonce&&e.setAttribute("nonce",t.cspNonce),n=e,document.head.appendChild(n)}n&&(n.innerHTML=h.value)}}(0,i.YP)(h,s,{immediate:!0})}}const f=(0,i.Fl)((()=>t.isDisabled?void 0:`v-theme--${r.value}`));return{install:d,isDisabled:t.isDisabled,name:r,themes:s,current:l,computedThemes:u,themeClasses:f,styles:h,global:{name:r,current:l}}}function N(e){(0,u.FN)("provideTheme");const t=(0,i.f3)(C,null);if(!t)throw new Error("Could not find Vuetify theme injection");const r=(0,i.Fl)((()=>e.theme??(null==t?void 0:t.name.value))),n=(0,i.Fl)((()=>t.isDisabled?void 0:`v-theme--${r.value}`)),s={...t,name:r,themeClasses:n};return(0,i.JJ)(C,s),s}function D(e,t,r){e.push(`${t} {\n`,...r.map((e=>`  ${e};\n`)),"}\n")}function B(e){const t=e.dark?2:1,r=e.dark?1:2,n=[];for(const[i,s]of Object.entries(e.colors)){const e=(0,a.nA)(s);n.push(`--v-theme-${i}: ${e.r},${e.g},${e.b}`),i.startsWith("on-")||n.push(`--v-theme-${i}-overlay-multiplier: ${(0,a.zT)(s)>.18?t:r}`)}return n}},5221:function(e,t,r){"use strict";r.d(t,{Ux:function(){return u},bk:function(){return l},c1:function(){return h}});var n=r(3396),i=r(2370),s=r(4870),o=r(3766),a=r(7514);const c=["elevated","flat","tonal","outlined","text","plain"];function u(e,t){return(0,n.Wm)(n.HY,null,[e&&(0,n.Wm)("span",{key:"overlay",class:`${t}__overlay`},null),(0,n.Wm)("span",{key:"underlay",class:`${t}__underlay`},null)])}const l=(0,o.U)({color:String,variant:{type:String,default:"elevated",validator:e=>c.includes(e)}},"variant");function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.BL)();const r=(0,n.Fl)((()=>{const{variant:r}=(0,s.SU)(e);return`${t}--variant-${r}`})),{colorClasses:o,colorStyles:c}=(0,i.rd)((0,n.Fl)((()=>{const{variant:t,color:r}=(0,s.SU)(e);return{[["elevated","flat"].includes(t)?"background":"text"]:r}})));return{colorClasses:o,colorStyles:c,variantClasses:r}}},3824:function(e,t,r){"use strict";r.d(t,{H:function(){return I}});var n=r(131);const i=Symbol("rippleStop"),s=80;function o(e,t){e.style.transform=t,e.style.webkitTransform=t}function a(e,t){e.style.opacity=`calc(${t} * var(--v-theme-overlay-multiplier))`}function c(e){return"TouchEvent"===e.constructor.name}function u(e){return"KeyboardEvent"===e.constructor.name}const l=function(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=0,s=0;if(!u(e)){const r=t.getBoundingClientRect(),n=c(e)?e.touches[e.touches.length-1]:e;i=n.clientX-r.left,s=n.clientY-r.top}let o=0,a=.3;null!=(r=t._ripple)&&r.circle?(a=.15,o=t.clientWidth/2,o=n.center?o:o+Math.sqrt((i-o)**2+(s-o)**2)/4):o=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*o)/2+"px",h=(t.clientHeight-2*o)/2+"px",d=n.center?l:i-o+"px",f=n.center?h:s-o+"px";return{radius:o,scale:a,x:d,y:f,centerX:l,centerY:h}},h={show(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t||null==(r=t._ripple)||!r.enabled)return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:c,scale:u,x:h,y:d,centerX:f,centerY:p}=l(e,t,n),y=2*c+"px";s.className="v-ripple__animation",s.style.width=y,s.style.height=y,t.appendChild(i);const g=window.getComputedStyle(t);g&&"static"===g.position&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),o(s,`translate(${h}, ${d}) scale3d(${u},${u},${u})`),a(s,0),s.dataset.activated=String(performance.now()),setTimeout((()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),o(s,`translate(${f}, ${p}) scale3d(1,1,1)`),a(s,.08)}),0)},hide(e){var t;if(null==e||null==(t=e._ripple)||!t.enabled)return;const r=e.getElementsByClassName("v-ripple__animation");if(0===r.length)return;const n=r[r.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const i=performance.now()-Number(n.dataset.activated),s=Math.max(250-i,0);setTimeout((()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),a(n,0),setTimeout((()=>{const t=e.getElementsByClassName("v-ripple__animation");1===t.length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode&&e.removeChild(n.parentNode)}),300)}),s)}};function d(e){return"undefined"===typeof e||!!e}function f(e){const t={},r=e.currentTarget;if(null!=r&&r._ripple&&!r._ripple.touched&&!e[i]){if(e[i]=!0,c(e))r._ripple.touched=!0,r._ripple.isTouch=!0;else if(r._ripple.isTouch)return;if(t.center=r._ripple.centered||u(e),r._ripple.class&&(t.class=r._ripple.class),c(e)){if(r._ripple.showTimerCommit)return;r._ripple.showTimerCommit=()=>{h.show(e,r,t)},r._ripple.showTimer=window.setTimeout((()=>{var e;null!=r&&null!=(e=r._ripple)&&e.showTimerCommit&&(r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null)}),s)}else h.show(e,r,t)}}function p(e){e[i]=!0}function y(e){const t=e.currentTarget;if(t&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=window.setTimeout((()=>{y(e)})));window.setTimeout((()=>{t._ripple&&(t._ripple.touched=!1)})),h.hide(t)}}function g(e){const t=e.currentTarget;t&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let m=!1;function w(e){m||e.keyCode!==n.Do.enter&&e.keyCode!==n.Do.space||(m=!0,f(e))}function v(e){m=!1,y(e)}function b(e){m&&(m=!1,y(e))}function E(e,t,r){const{value:i,modifiers:s}=t,o=d(i);if(o||h.hide(e),e._ripple=e._ripple??{},e._ripple.enabled=o,e._ripple.centered=s.center,e._ripple.circle=s.circle,(0,n.Kn)(i)&&i.class&&(e._ripple.class=i.class),o&&!r){if(s.stop)return e.addEventListener("touchstart",p,{passive:!0}),void e.addEventListener("mousedown",p);e.addEventListener("touchstart",f,{passive:!0}),e.addEventListener("touchend",y,{passive:!0}),e.addEventListener("touchmove",g,{passive:!0}),e.addEventListener("touchcancel",y),e.addEventListener("mousedown",f),e.addEventListener("mouseup",y),e.addEventListener("mouseleave",y),e.addEventListener("keydown",w),e.addEventListener("keyup",v),e.addEventListener("blur",b),e.addEventListener("dragstart",y,{passive:!0})}else!o&&r&&_(e)}function _(e){e.removeEventListener("mousedown",f),e.removeEventListener("touchstart",f),e.removeEventListener("touchend",y),e.removeEventListener("touchmove",g),e.removeEventListener("touchcancel",y),e.removeEventListener("mouseup",y),e.removeEventListener("mouseleave",y),e.removeEventListener("keydown",w),e.removeEventListener("keyup",v),e.removeEventListener("dragstart",y),e.removeEventListener("blur",b)}function A(e,t){E(e,t,!1)}function S(e){delete e._ripple,_(e)}function k(e,t){if(t.value===t.oldValue)return;const r=d(t.oldValue);E(e,t,r)}const I={mounted:A,unmounted:S,updated:k}},3669:function(e,t,r){"use strict";r.d(t,{Rd:function(){return S}});var n=r(8434),i=r(8157),s=r(4960),o={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}},a=r(9903),c=r(4870),u=r(3396),l=r(131),h=r(6033);const d=Symbol.for("vuetify:locale-adapter"),f=Symbol.for("vuetify:locale");function p(e){return!!e&&e.hasOwnProperty("getScope")&&e.hasOwnProperty("createScope")&&e.hasOwnProperty("createRoot")}function y(e,t){const r=p(t)?t:b(t);function n(e){const n=r.createRoot(e);e.provide(a.Cm,(0,a.is)(n,t))}return{adapter:r,install:n}}const g="$vuetify.",m=(e,t)=>e.replace(/\{(\d+)\}/g,((e,r)=>String(t[+r]))),w=(e,t,r)=>function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(!n.startsWith(g))return m(n,s);const a=n.replace(g,""),c=e.value&&r.value[e.value],u=t.value&&r.value[t.value];let d=(0,l.vO)(c,a,null);return d||((0,h.Kd)(`Translation key "${n}" not found in "${e.value}", trying fallback locale`),d=(0,l.vO)(u,a,null)),d||((0,h.N6)(`Translation key "${n}" not found in fallback`),d=n),"string"!==typeof d&&((0,h.N6)(`Translation key "${n}" has a non-string value`),d=n),m(d,s)};function v(e,t){return(r,n)=>{const i=new Intl.NumberFormat([e.value,t.value],n);return i.format(r)}}function b(e){const t=e=>{const t=(0,c.iH)(e.current),r=(0,c.iH)(e.fallback),n=(0,c.iH)(e.messages);return{current:t,fallback:r,messages:n,t:w(t,r,n),n:v(t,r)}};return{createRoot:r=>{const n=t({current:(null==e?void 0:e.defaultLocale)??"en",fallback:(null==e?void 0:e.fallbackLocale)??"en",messages:(null==e?void 0:e.messages)??{en:o}});if(!r)throw new Error("[Vuetify] Could not find default app instance");return r.provide(f,n),n},getScope:()=>{const e=(0,u.f3)(f);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");return e},createScope:e=>{const r=(0,u.f3)(f);if(!r)throw new Error("[Vuetify] Could not find injected locale instance");const n=t({current:(0,u.Fl)((()=>(null==e?void 0:e.locale)??r.current.value)),fallback:(0,u.Fl)((()=>(null==e?void 0:e.locale)??r.fallback.value)),messages:(0,u.Fl)((()=>(null==e?void 0:e.messages)??r.messages.value))});return(0,u.JJ)(f,n),n}}}var E=r(7041),_=r(320),A=r(7514);function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{blueprint:t,...r}=e,o=(0,l.Ee)(t,r),{aliases:u={},components:h={},directives:f={}}=o,p=(0,n.yB)(o.defaults),g=(0,i.fT)(o.display,o.ssr),m=(0,E.jG)(o.theme),w=(0,s._i)(o.icons),v=y(o.locale),b=e=>{for(const t in f)e.directive(t,f[t]);for(const t in h)e.component(t,h[t]);for(const t in u)e.component(t,(0,_.a)({...u[t],name:t,aliasName:u[t].name}));m.install(e),v.install(e),e.provide(n.tI,p),e.provide(i.x6,g),e.provide(E.bo,m),e.provide(s.YK,w),e.provide(d,v.adapter),A.sq.reset(),e.mixin({computed:{$vuetify(){return(0,c.qj)({defaults:I.call(this,n.tI),display:I.call(this,i.x6),theme:I.call(this,E.bo),icons:I.call(this,s.YK),locale:I.call(this,d),rtl:I.call(this,a.Cm)})}}})};return{install:b,defaults:p,display:g,theme:m,icons:w,locale:v.adapter}}const k="3.0.0-beta.13";function I(e){var t,r;const n=this.$,i=(null==(t=n.parent)?void 0:t.provides)??(null==(r=n.vnode.appContext)?void 0:r.provides);if(i&&e in i)return i[e]}S.version=k},661:function(e,t,r){"use strict";r.d(t,{jx:function(){return m},nA:function(){return v},_j:function(){return E},zT:function(){return _},I4:function(){return w},NA:function(){return g},$n:function(){return b}});var n=r(6033),i=r(131);const s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],o=e=>e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055,a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function u(e){const t=Array(3),r=o,n=s;for(let s=0;s<3;++s)t[s]=Math.round(255*(0,i.uZ)(r(n[s][0]*e[0]+n[s][1]*e[1]+n[s][2]*e[2])));return(t[0]<<16)+(t[1]<<8)+(t[2]<<0)}function l(e){const t=[0,0,0],r=c,n=a,i=r((e>>16&255)/255),s=r((e>>8&255)/255),o=r((e>>0&255)/255);for(let a=0;a<3;++a)t[a]=n[a][0]*i+n[a][1]*s+n[a][2]*o;return t}const h=.20689655172413793,d=e=>e>h**3?Math.cbrt(e):e/(3*h**2)+4/29,f=e=>e>h?e**3:3*h**2*(e-4/29);function p(e){const t=d,r=t(e[1]);return[116*r-16,500*(t(e[0]/.95047)-r),200*(r-t(e[2]/1.08883))]}function y(e){const t=f,r=(e[0]+16)/116;return[.95047*t(r+e[1]/500),t(r),1.08883*t(r-e[2]/200)]}function g(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function m(e){let t;if("number"===typeof e)t=e;else{if("string"!==typeof e)throw new TypeError(`Colors can only be numbers or strings, recieved ${null==e?e:e.constructor.name} instead`);{let r=e.startsWith("#")?e.substring(1):e;3===r.length&&(r=r.split("").map((e=>e+e)).join("")),6!==r.length&&8!==r.length&&(0,n.Kd)(`'${e}' is not a valid rgb color`),t=parseInt(r,16)}}return t<0?((0,n.Kd)(`Colors cannot be negative: '${e}'`),t=0):(t>4294967295||isNaN(t))&&((0,n.Kd)(`'${e}' is not a valid rgb color`),t=16777215),t}function w(e){let t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}function v(e){const t=m(e);return{r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}}function b(e,t){const r=p(l(e));return r[0]=r[0]+10*t,u(y(r))}function E(e,t){const r=p(l(e));return r[0]=r[0]-10*t,u(y(r))}function _(e){const t=m(e);return l(t)[1]}},6033:function(e,t,r){"use strict";r.d(t,{Kd:function(){return i},N6:function(){return s}});r(7658);function n(e,t,r){if(r&&(t={_isVue:!0,$parent:r,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return`[Vuetify] ${e}`+(t?u(t):"")}function i(e,t,r){const i=n(e,t,r);null!=i&&console.warn(i)}function s(e,t,r){const i=n(e,t,r);null!=i&&console.error(i)}const o=/(?:^|[-_])(\w)/g,a=e=>e.replace(o,(e=>e.toUpperCase())).replace(/[-_]/g,"");function c(e,t){if(e.$root===e)return"<Root>";const r="function"===typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{};let n=r.name||r._componentTag;const i=r.__file;if(!n&&i){const e=i.match(/([^/\\]+)\.vue$/);n=null==e?void 0:e[1]}return(n?`<${a(n)}>`:"<Anonymous>")+(i&&!1!==t?` at ${i}`:"")}function u(e){if(e._isVue&&e.$parent){const t=[];let r=0;while(e){if(t.length>0){const n=t[t.length-1];if(n.constructor===e.constructor){r++,e=e.$parent;continue}r>0&&(t[t.length-1]=[n,r],r=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(((e,t)=>`${0===t?"---\x3e ":" ".repeat(5+2*t)}${Array.isArray(e)?`${c(e[0])}... (${e[1]} recursive calls)`:c(e)}`)).join("\n")}return`\n\n(found in ${c(e)})`}},1114:function(e,t,r){"use strict";r.d(t,{J:function(){return o}});var n=r(7139),i=r(3396),s=r(320);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",r=arguments.length>2?arguments[2]:void 0;return(0,s.a)({name:r??(0,n.kC)((0,n._A)(e.replace(/__/g,"-"))),props:{tag:{type:String,default:t}},setup(t,r){let{slots:n}=r;return()=>{var r;return(0,i.h)(t.tag,{class:e},null==(r=n.default)?void 0:r.call(n))}}})}},320:function(e,t,r){"use strict";r.d(t,{a:function(){return h},e:function(){return d}});var n=r(3396),i=r(4870),s=r(6033),o=r(131),a=r(7514);function c(e){const{provides:t}=(0,a.FN)("injectSelf");if(t&&e in t)return t[e]}var u=r(8434);function l(e,t){var r,n;return(null==(r=e.props)?void 0:r.hasOwnProperty(t))||(null==(n=e.props)?void 0:n.hasOwnProperty((0,o.mA)(t)))}const h=function(e){return e._setup=e._setup??e.setup,e.name?(e._setup&&(e.props=e.props??{},e.props._as=String,e.setup=function(t,r){const s=(0,n.FN)(),a=(0,u.qy)(),h=(0,i.XI)(),d=(0,i.Um)({...(0,i.IU)(t)});(0,n.m0)((()=>{const r=a.value.global,n=a.value[t._as??e.name];if(n){const e=Object.entries(n).filter((e=>{let[t]=e;return t.startsWith("V")}));e.length&&(h.value=Object.fromEntries(e))}for(const e of Object.keys(t)){let i;i=l(s.vnode,e)?t[e]:(null==n?void 0:n[e])??(null==r?void 0:r[e])??t[e],d[e]!==i&&(d[e]=i)}}));const f=e._setup(d,r);let p;return(0,n.YP)(h,((e,t)=>{!e&&p?p.stop():e&&!t&&(p=(0,i.B)(),p.run((()=>{var t;(0,u.AF)((0,o.Ee)((null==(t=c(u.tI))?void 0:t.value)??{},e))})))}),{immediate:!0}),f}),e):((0,s.Kd)("The component is missing an explicit name, unable to generate default prop value"),e)};function d(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t=>(e?h:n.aZ)(t)}},7514:function(e,t,r){"use strict";r.d(t,{BL:function(){return o},FN:function(){return s},sq:function(){return u}});var n=r(3396),i=r(131);function s(e,t){const r=(0,n.FN)();if(!r)throw new Error(`[Vuetify] ${e} ${t||"must be called from inside a setup function"}`);return r}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"composables";const t=s(e).type;return(0,i.mA)((null==t?void 0:t.aliasName)||(null==t?void 0:t.name))}let a=0,c=new WeakMap;function u(){const e=s("getUid");if(c.has(e))return c.get(e);{const t=a++;return c.set(e,t),t}}u.reset=()=>{a=0,c=new WeakMap}},2385:function(e,t,r){"use strict";r.d(t,{BR:function(){return n},cu:function(){return i},sR:function(){return s}});const n="undefined"!==typeof window,i=n&&"IntersectionObserver"in window,s=n&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);n&&"undefined"!==typeof CSS&&CSS.supports("selector(:focus-visible)")},131:function(e,t,r){"use strict";r.d(t,{Do:function(){return d},Ee:function(){return g},FT:function(){return p},Kn:function(){return h},MT:function(){return u},RA:function(){return m},S3:function(){return b},bY:function(){return v},ei:function(){return f},kb:function(){return l},mA:function(){return w},q9:function(){return E},qF:function(){return c},uZ:function(){return y},vO:function(){return a},vZ:function(){return o}});r(7658);var n=r(3396),i=r(4870);function s(e,t,r){const n=t.length-1;if(n<0)return void 0===e?r:e;for(let i=0;i<n;i++){if(null==e)return r;e=e[t[i]]}return null==e||void 0===e[t[n]]?r:e[t[n]]}function o(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime())return!1;if(e!==Object(e)||t!==Object(t))return!1;const r=Object.keys(e);return r.length===Object.keys(t).length&&r.every((r=>o(e[r],t[r])))}function a(e,t,r){return null!=e&&t&&"string"===typeof t?void 0!==e[t]?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),s(e,t.split("."),r)):r}function c(e,t,r){if(null==t)return void 0===e?r:e;if(e!==Object(e))return r;if("string"===typeof t)return a(e,t,r);if(Array.isArray(t))return s(e,t,r);if("function"!==typeof t)return r;const n=t(e,r);return"undefined"===typeof n?r:n}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from({length:e},((e,r)=>t+r))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return null==e||""===e?void 0:isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}function h(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)}const d=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function f(e,t){const r=Object.create(null),n=Object.create(null);for(const i in e)t.some((e=>e instanceof RegExp?e.test(i):e===i))?r[i]=e[i]:n[i]=e[i];return[r,n]}function p(e){return null==e?[]:Array.isArray(e)?e:[e]}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(r,e))}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n={};for(const i in e)n[i]=e[i];for(const i in t){const s=e[i],o=t[i];h(s)&&h(o)?n[i]=g(s,o,r):Array.isArray(s)&&Array.isArray(o)&&r?n[i]=r(s,o):n[i]=o}return n}function m(e){return e.map((e=>e.type===n.HY?m(e.children):e)).flat()}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function v(e,t){if(!t||"object"!==typeof t)return[];if(Array.isArray(t))return t.map((t=>v(e,t))).flat(1);if(Array.isArray(t.children))return t.children.map((t=>v(e,t))).flat(1);if(t.component){if(Object.getOwnPropertySymbols(t.component.provides).includes(e))return[t.component];if(t.component.subTree)return v(e,t.component.subTree).flat(1)}return[]}function b(e){const t=(0,i.qj)({}),r=(0,n.Fl)(e);return(0,n.m0)((()=>{for(const e in r.value)t[e]=r.value[e]}),{flush:"sync"}),(0,i.BK)(t)}function E(e,t){return e.includes(t)}},3766:function(e,t,r){"use strict";function n(e,t){return r=>Object.keys(e).reduce(((n,i)=>{const s="object"===typeof e[i]&&null!=e[i]&&!Array.isArray(e[i]),o=s?e[i]:{type:e[i]};return n[i]=r&&i in r?{...o,default:r[i]}:o,t&&(n[i].source=t),n}),{})}r.d(t,{U:function(){return n}})},9888:function(e,t,r){"use strict";r.d(t,{L:function(){return i}});var n=r(7514);function i(e){const t=(0,n.FN)("useRender");t.render=e}}}]);
//# sourceMappingURL=chunk-vendors.8a584e67.js.map